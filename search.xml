<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>æ‰‹æŠŠæ‰‹å¸¦ä½ å…¥é—¨Gatsby</title>
    <url>/2020/07/12/%E6%89%8B%E6%8A%8A%E6%89%8B%E5%B8%A6%E4%BD%A0%E5%85%A5%E9%97%A8Gatsby/</url>
    <content><![CDATA[<p>æœ€è¿‘åœ¨å­¦ä¹  Gatsbyï¼Œå…¬å¸ä¹Ÿç”¨åˆ°äº†è¿™ä¸ªæ¡†æ¶ã€‚å®ƒä¸»è¦æœ‰ SEO å¥½ï¼Œè€Œä¸”é¦–é¡µæ¸²æŸ“å¿«ç­‰ä¼˜ç‚¹ï¼Œåœ¨å›½å¤–å¾ˆæµè¡Œçš„ä¸€ä¸ªæ¡†æ¶ï¼Œè¿™ç¯‡é•¿æ–‡å¸¦ä½ å…¥ä¸ªé—¨ã€‚Gatsby æ˜¯ä¸€ä¸ªé™æ€ç«™ç‚¹ç”Ÿæˆå™¨ï¼ŒGatsby ä¸»è¦çš„åº”ç”¨çš„æŠ€æœ¯æ˜¯ React å’Œ GraphQLâ€¦</p>
<a id="more"></a>

<h2 id="Gatsby-ä»‹ç»"><a href="#Gatsby-ä»‹ç»" class="headerlink" title="Gatsby ä»‹ç»"></a>Gatsby ä»‹ç»</h2><h3 id="ä»€ä¹ˆæ˜¯-Gatsby"><a href="#ä»€ä¹ˆæ˜¯-Gatsby" class="headerlink" title="ä»€ä¹ˆæ˜¯ Gatsby"></a>ä»€ä¹ˆæ˜¯ Gatsby</h3><p>Gatsby æ˜¯ä¸€ä¸ªåŸºäº React ï¼Œç”¨äºæ­å»ºé™æ€ç«™ç‚¹çš„å¼€æºæ¡†æ¶ï¼Œç”¨äºå¸®åŠ©å¼€å‘è€…æ„å»ºè¿è¡Œé€Ÿåº¦æå¿«çš„ç½‘ç«™ã€‚å¯ä»¥è¯´å®ƒæ˜¯ä¸€ä¸ªé™æ€ç«™ç‚¹ç”Ÿæˆå™¨ï¼ŒGatsby ä¸»è¦çš„åº”ç”¨çš„æŠ€æœ¯æ˜¯ React å’Œ GraphQLã€‚</p>
<p>å®˜ç½‘ï¼š<a href="https://www.gatsbyjs.org/" target="_blank" rel="noopener">https://www.gatsbyjs.org/</a></p>
<h3 id="ä¸ºä»€ä¹ˆé€‰-Gatsby"><a href="#ä¸ºä»€ä¹ˆé€‰-Gatsby" class="headerlink" title="ä¸ºä»€ä¹ˆé€‰ Gatsby"></a>ä¸ºä»€ä¹ˆé€‰ Gatsby</h3><p>Gatsby èƒ½å¿«é€Ÿä½¿ç”¨ React ç”Ÿæ€ç³»ç»Ÿæ¥ç”Ÿæˆé™æ€ç½‘ç«™ï¼Œå®ƒå…·å¤‡æ›´é«˜çš„æ€§èƒ½ï¼Œè€Œä¸” Gatsby çš„ç”Ÿæ€ä¹Ÿå¾ˆå¼ºå¤§ã€‚</p>
<p>å½“ä½ æƒ³è‡ªå·±åŠ¨æ‰‹æ­å»ºä¸ªäººåšå®¢æ—¶ï¼Œè€ƒè™‘çš„æ˜¯ SEO è¦å¥½ï¼Œè€Œä¸”ä½ ä¸ç”¨ç†ä¼šæ•°æ®åº“å’ŒæœåŠ¡å™¨ç­‰å¤æ‚çš„éƒ¨ç½²è®¾ç½®ï¼ŒGatsby æ„å»ºçš„ç½‘ç«™ä¸ºé™æ€ç«™ç‚¹ï¼Œä½ å¯ä»¥å¾ˆè½»æ¾çš„å°†ç½‘ç«™éƒ¨ç½²åœ¨å¾ˆå¤šæœåŠ¡ä¸Šã€‚Gatsby ä¸éœ€è¦ç­‰å¾…è¯·æ±‚æ—¶ç”Ÿæˆé¡µé¢ï¼Œè€Œæ˜¯é¢„å…ˆç”Ÿæˆé¡µé¢ï¼Œå› æ­¤ç½‘ç«™çš„é€Ÿåº¦ä¼šå¾ˆå¿«ã€‚</p>
<p>Gatsby ä¸­è¿ç”¨äº† React, react-router, Webpack ä»¥åŠ GraphQL ç­‰æ–°æŠ€æœ¯ï¼Œä¹Ÿè·Ÿéšäº†æŠ€æœ¯æ½®æµã€‚</p>
<h2 id="GraphQL-ä»‹ç»"><a href="#GraphQL-ä»‹ç»" class="headerlink" title="GraphQL ä»‹ç»"></a>GraphQL ä»‹ç»</h2><p>ä¸Šé¢æˆ‘ä»¬è¯´åˆ°äº† GraphQLï¼Œæ²¡äº†è§£çš„åŒå­¦å¯èƒ½ä¸å¤ªæ¸…æ¥šã€‚</p>
<blockquote>
<p>GraphQL æ˜¯ä¸€ç§ç”¨äº API çš„æŸ¥è¯¢è¯­è¨€ï¼Œæ˜¯ Restful API çš„æ›¿ä»£å“ã€‚</p>
</blockquote>
<p>è‡³äºæ›¿ä»£ Restful API ä¸€è¯´ï¼Œä¸ªäººè§‰å¾—ç°åœ¨ Restful API å æ®ç»å¯¹çš„ä¸»å¯¼åœ°ä½ï¼Œå½“å‰è¿˜æ˜¯å¾ˆéš¾è¢«æ’¼åŠ¨çš„ã€‚å› ä¸ºç›®å‰æ¥çœ‹ï¼ŒGraphQL ä¹Ÿæœ‰å®ƒçš„ç¼ºç‚¹ã€‚</p>
<p>çœ‹åˆ°è¿™é‡Œæ²¡å­¦è¿‡ GraphQL ä¹Ÿä¸ç”¨æ€•ï¼Œå› ä¸ºç”¨åˆ°çš„ä¸å¤šè€Œä¸” Gatsby å†…ç½®ä¸€ä¸ªç•Œé¢æ–¹ä¾¿æˆ‘ä»¬æ“ä½œã€‚GraphQL ç›®å‰å›½å¤–æ¯”è¾ƒç«ï¼Œå®ƒä½œä¸ºä¸€é—¨æ–°æŠ€æœ¯ï¼Œå³ä½¿ä¸æ·±å…¥æˆ‘ä»¬ä¹Ÿå¯ä»¥äº†è§£ä¸€ä¸‹ã€‚</p>
<p>è¿™é‡Œæˆ‘ä»¬å½“ç„¶è¦å¹æ§å®ƒçš„ä¼˜ç‚¹ï¼Œä¸Šé¢çš„å®šä¹‰ä½ å¯èƒ½ä¼šç–‘æƒ‘ï¼ŒAPI ä¸å°±æ˜¯åç«¯å†™å¥½çš„æ¥å£å—ï¼Œæ€ä¹ˆè¿˜èƒ½æŸ¥è¯¢ï¼Ÿ</p>
<p>GraphQL æˆ‘ä»¬æŠŠè¿™ä¸ªå•è¯æ‹†å¼€çš„è¯æ˜¯ï¼š Graph(å›¾å½¢æˆ–å›¾è¡¨) + QLï¼ˆQuery Languageï¼‰ï¼Œå®ƒæ˜¯ä¸€ç§å›¾å½¢åŒ–çš„æŸ¥è¯¢è¯­è¨€ï¼Œæè¿°å®¢æˆ·ç«¯å¦‚ä½•åƒæœåŠ¡ç«¯è¯·æ±‚æ•°æ®çš„è¯­æ³•è§„èŒƒã€‚å¬èµ·æ¥æ¨¡æ¨¡ç³Šç³Šï¼Œé‚£å®ƒç›¸å¯¹ Restful API åˆè§£å†³äº†ä»€ä¹ˆç—›ç‚¹å‘¢ï¼Ÿ</p>
<ol>
<li>è¯·æ±‚ä½ æ‰€è¦çš„æ•°æ®ä¸å¤šä¸å°‘</li>
</ol>
<p>ç›¸ä¿¡å¤šæ•°äººè‚¯å®šé‡åˆ°è¿‡çš„åœºæ™¯ï¼Œæ¯”å¦‚é¡¹ç›®ç®¡ç†ç³»ç»Ÿï¼Œè¿›å…¥æŸé¡µé¢å±•ç¤ºä¸€ä¸ªåˆ—è¡¨ï¼Œåˆ—è¡¨ä¸Šåªéœ€å±•ç¤ºæ ‡é¢˜ï¼Œä½†ä½ è¯·æ±‚è¿”å›çš„æ•°æ®å´å¤šäº†å…¶ä»–ä¿¡æ¯ï¼Œæ¯”å¦‚åˆ›å»ºè€…ã€åˆ›å»ºæ—¶é—´ç­‰ã€‚è¿™äº›ä¿¡æ¯åœ¨è¿™é‡Œæ˜¯å¤šä½™çš„ï¼Œä½†å®ƒå¯èƒ½æœ‰å®ƒè‡ªå·±å­˜åœ¨çš„ç†ç”±ï¼Œæˆ–è®¸æ˜¯å…¶ä»–åœºæ™¯éœ€è¦è¿”å›è¿™äº›ä¿¡æ¯ï¼Œå› æ­¤è¯¥æ¥å£å°±ç›´æ¥åŒ…å«äº†æ‰€æœ‰æ•°æ®ã€‚</p>
<p>è¿™ä¸€ç‚¹ï¼ŒGraphQL èƒ½å‡†ç¡®è·å–ä½ æƒ³è¦çš„æ•°æ®ï¼Œä¸å¤šä¸å°‘ï¼Œæƒ³è¦è¿”å›æŒ‡å®šçš„ä»€ä¹ˆæ•°æ®ï¼Œå°±è¿”å›ä»€ä¹ˆæ•°æ®ã€‚æ•°æ®ç”±åº”ç”¨æ¥æ§åˆ¶ï¼Œè€Œä¸æ˜¯æœåŠ¡å™¨ã€‚</p>
<ol start="2">
<li>è·å–å¤šä¸ªèµ„æºåªéœ€è¦ä¸€ä¸ªè¯·æ±‚</li>
</ol>
<p>GraphQL æŸ¥è¯¢ä¸ä»…èƒ½å¤Ÿè·å¾—èµ„æºçš„å±æ€§ï¼Œè¿˜èƒ½æ²¿ç€èµ„æºé—´å¼•ç”¨è¿›ä¸€æ­¥æŸ¥è¯¢ã€‚å…¸å‹çš„ REST API è¯·æ±‚å¤šä¸ªèµ„æºæ—¶å¾—è½½å…¥å¤šä¸ª URLï¼Œè€Œ GraphQL å¯ä»¥é€šè¿‡ä¸€æ¬¡è¯·æ±‚å°±è·å–ä½ åº”ç”¨æ‰€éœ€çš„æ‰€æœ‰æ•°æ®ã€‚è¿™æ ·ä¸€æ¥ï¼Œå³ä½¿æ˜¯æ¯”è¾ƒæ…¢çš„ç§»åŠ¨ç½‘ç»œè¿æ¥ä¸‹ï¼Œä½¿ç”¨ GraphQL çš„åº”ç”¨ä¹Ÿèƒ½è¡¨ç°å¾—è¶³å¤Ÿè¿…é€Ÿã€‚</p>
<ol start="3">
<li>æè¿°æ‰€æœ‰çš„å¯èƒ½ç±»å‹ç³»ç»Ÿ</li>
</ol>
<p>GraphQL API åŸºäºç±»å‹å’Œå­—æ®µçš„æ–¹å¼è¿›è¡Œç»„ç»‡ï¼Œè€Œéå…¥å£ç«¯ç‚¹ã€‚ä½ å¯ä»¥é€šè¿‡ä¸€ä¸ªå•ä¸€å…¥å£ç«¯ç‚¹å¾—åˆ°ä½ æ‰€æœ‰çš„æ•°æ®èƒ½åŠ›ã€‚GraphQL ä½¿ç”¨ç±»å‹æ¥ä¿è¯åº”ç”¨åªè¯·æ±‚å¯èƒ½çš„æ•°æ®ï¼Œè¿˜æä¾›äº†æ¸…æ™°çš„è¾…åŠ©æ€§é”™è¯¯ä¿¡æ¯ã€‚åº”ç”¨å¯ä»¥ä½¿ç”¨ç±»å‹ï¼Œè€Œé¿å…ç¼–å†™æ‰‹åŠ¨è§£æä»£ç ã€‚</p>
<p>Gatsby ä½¿ç”¨äº† GraphQLï¼Œä½œä¸ºåœ¨æœ¬åœ°ç®¡ç†èµ„æºçš„ä¸€ç§æ–¹å¼ã€‚</p>
<h2 id="æ­å»ºé¡¹ç›®"><a href="#æ­å»ºé¡¹ç›®" class="headerlink" title="æ­å»ºé¡¹ç›®"></a>æ­å»ºé¡¹ç›®</h2><h3 id="å¼€å§‹"><a href="#å¼€å§‹" class="headerlink" title="å¼€å§‹"></a>å¼€å§‹</h3><ul>
<li>å®‰è£… Gatsby è„šæ‰‹æ¶</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">npm install -g gatsby-cli</span><br></pre></td></tr></table></figure>

<ul>
<li>æ–°å»ºé¡¹ç›®</li>
</ul>
<blockquote>
<p>gatsby new [projectName][starter]ï¼šæ ¹æ® starter åˆ›å»ºä¸€ä¸ªæ–°é¡¹ç›®</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">gatsby new gatsby-blog-demo https:&#x2F;&#x2F;github.com&#x2F;gatsbyjs&#x2F;gatsby-starter-hello-world</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬è¿™é‡Œä½¿ç”¨å®˜æ–¹æœ€ç®€å•ç‰ˆæœ¬çš„ hello-world æ¨¡æ¿è¿›è¡Œå¼€å‘ï¼Œå¦‚æœä½ ç›´æ¥ä½¿ç”¨</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">gatsby new gatsby-blog-demo</span><br></pre></td></tr></table></figure>

<p>é»˜è®¤ä¼šä½¿ç”¨ <a href="https://github.com/gatsbyjs/gatsby-starter-default" target="_blank" rel="noopener">gatsby-starter-default</a> æ¥æ–°å»ºé¡¹ç›®</p>
<ul>
<li>è¿è¡Œé¡¹ç›®</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">cd gatsby-blog-demo</span><br><span class="line">gatsby develop</span><br></pre></td></tr></table></figure>

<p>æ‰“å¼€ <code>localhost:8000</code>ï¼Œå°±å¯ä»¥çœ‹åˆ°è¾“å‡ºäº†ä¸€å¥<code>Hello world!</code></p>
<h3 id="å¸¸ç”¨å‘½ä»¤"><a href="#å¸¸ç”¨å‘½ä»¤" class="headerlink" title="å¸¸ç”¨å‘½ä»¤"></a>å¸¸ç”¨å‘½ä»¤</h3><p>è¿™é‡Œä»‹ç» Gatsby çš„å‡ ä¸ªå¸¸ç”¨å‘½ä»¤ï¼š</p>
<ul>
<li>gastby developï¼šå¼€å¯çƒ­åŠ è½½å¼€å‘ç¯å¢ƒ</li>
<li>gastby buildï¼šæ‰“åŒ…åˆ° public ä¸‹ï¼Œæ„å»ºç”Ÿäº§ç¯å¢ƒç”¨çš„ä¼˜åŒ–è¿‡çš„é™æ€ç½‘ç«™æ‰€éœ€çš„ä¸€åˆ‡é™æ€èµ„æºã€é™æ€é¡µé¢ä¸ js ä»£ç </li>
<li>gatsby serveï¼šåœ¨æ‰“åŒ…ä¹‹åï¼Œå¯åŠ¨ä¸€ä¸ªæœ¬åœ°çš„æœåŠ¡ï¼Œä¾›ä½ æµ‹è¯•åˆšæ‰â€gatsby buildâ€ç”Ÿæˆçš„é™æ€ç½‘é¡µ</li>
</ul>
<h3 id="GraphiQL"><a href="#GraphiQL" class="headerlink" title="GraphiQL"></a>GraphiQL</h3><p>æ‰“å¼€<code>http://localhost:8000/__graphql</code>ï¼Œå°±ä¼šçœ‹åˆ° GraphQL çš„è°ƒè¯•ç•Œé¢ï¼Œè¿™é‡Œå¯ä»¥æŸ¥çœ‹æ‰€æœ‰çš„æ•°æ®ã€ä»¥åŠè°ƒè¯• query è¯­å¥æ˜¯å¦è¿”å›ç›¸åº”çš„æ•°æ®ã€‚å¯ä»¥ç›´æ¥åœ¨å·¦ä¾§ç‚¹å‡»é€‰ä¸­ï¼Œå°±å¯ä»¥è‡ªåŠ¨ç”Ÿæˆ query è¯­å¥ã€‚</p>
<p><img src="https://user-gold-cdn.xitu.io/2020/6/21/172d4b8f913506df?w=1922&h=538&f=png&s=78717" alt=""></p>
<h3 id="å¯èƒ½å‡ºç°çš„è­¦å‘Š"><a href="#å¯èƒ½å‡ºç°çš„è­¦å‘Š" class="headerlink" title="å¯èƒ½å‡ºç°çš„è­¦å‘Š"></a>å¯èƒ½å‡ºç°çš„è­¦å‘Š</h3><p>å¦‚æœè¿è¡Œåä½ çš„æ§åˆ¶å°å‡ºç°ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">React-Hot-Loader: react-ğŸ”¥-dom patch is not detected. React 16.6+ features may not work.</span><br></pre></td></tr></table></figure>

<p>å¯ä»¥è¿™æ ·è§£å†³:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">npm install @hot-loader&#x2F;react-dom</span><br></pre></td></tr></table></figure>

<p>åœ¨æ ¹ç›®å½•ä¸‹æ–°å»º<code>gatsby-node.js</code></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">exports.onCreateWebpackConfig &#x3D; (&#123; getConfig, stage &#125;) &#x3D;&gt; &#123;</span><br><span class="line">  const config &#x3D; getConfig()</span><br><span class="line">  if (stage.startsWith(&#39;develop&#39;) &amp;&amp; config.resolve) &#123;</span><br><span class="line">    config.resolve.alias &#x3D; &#123;</span><br><span class="line">      ...config.resolve.alias,</span><br><span class="line">      &#39;react-dom&#39;: &#39;@hot-loader&#x2F;react-dom&#39;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å†é‡æ–°å¯åŠ¨é¡¹ç›®ï¼Œå°±å¯ä»¥æ¶ˆé™¤è¿™ä¸ªè­¦å‘Š</p>
<h3 id="é¡¹ç›®ç»“æ„"><a href="#é¡¹ç›®ç»“æ„" class="headerlink" title="é¡¹ç›®ç»“æ„"></a>é¡¹ç›®ç»“æ„</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">â”œâ”€â”€ .cache</span><br><span class="line">â”œâ”€â”€ public</span><br><span class="line">â”œâ”€â”€ src</span><br><span class="line">|  â””â”€â”€ pages            &#x2F;&#x2F; è¯¥æ–‡ä»¶å¤¹ä¸‹çš„æ–‡ä»¶ä¼šè¢«æ˜ å°„ä¸ºè·¯ç”±</span><br><span class="line">|     â””â”€â”€ index.js</span><br><span class="line">â”œâ”€â”€ static              &#x2F;&#x2F; é™æ€èµ„æº</span><br><span class="line">â”œâ”€â”€ .prettierignore</span><br><span class="line">â”œâ”€â”€ .prettierrc</span><br><span class="line">â”œâ”€â”€ gatsby-config.js    &#x2F;&#x2F; åŸºæœ¬é…ç½®æ–‡ä»¶</span><br><span class="line">â”œâ”€â”€ LICENSE</span><br><span class="line">â”œâ”€â”€ package.json</span><br><span class="line">â”œâ”€â”€ README.md</span><br><span class="line">â””â”€â”€ yarn.lock</span><br></pre></td></tr></table></figure>

<h2 id="Gatsby-é…ç½®æ–‡ä»¶"><a href="#Gatsby-é…ç½®æ–‡ä»¶" class="headerlink" title="Gatsby é…ç½®æ–‡ä»¶"></a>Gatsby é…ç½®æ–‡ä»¶</h2><p>è¿™é‡Œæœ€åˆå§‹çš„æ¨¡æ¿åªæœ‰ä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œä¸€èˆ¬é¡¹ç›®ä¸­éƒ½ä¼šæœ‰ 4 ä¸ªé…ç½®æ–‡ä»¶</p>
<h3 id="gatsby-config-js"><a href="#gatsby-config-js" class="headerlink" title="gatsby-config.js"></a>gatsby-config.js</h3><p>åŸºæœ¬é…ç½®æ–‡ä»¶ã€‚æ•´ä¸ª Gatsby ç«™ç‚¹çš„é…ç½®æ–‡ä»¶ã€‚å¯ä»¥åœ¨é‡Œé¢é…ç½®ç½‘ç«™çš„ç›¸å…³åŸºæœ¬ä¿¡æ¯ã€‚</p>
<h3 id="gatsby-node-js"><a href="#gatsby-node-js" class="headerlink" title="gatsby-node.js"></a>gatsby-node.js</h3><p>node ç›¸å…³é…ç½®æ–‡ä»¶ã€‚è¿™ä¸ªæ–‡ä»¶åªä¼šåœ¨ build æœŸé—´è¿è¡Œä¸€æ¬¡ï¼Œæ¯”å¦‚åŠ¨æ€åˆ›å»ºä¸€äº›é¡µé¢ã€‚</p>
<h3 id="gatsby-browser-js"><a href="#gatsby-browser-js" class="headerlink" title="gatsby-browser.js"></a>gatsby-browser.js</h3><p>å®¢æˆ·ç«¯ç›¸å…³é…ç½®ã€‚ä¸€äº›æµè§ˆå™¨ç›¸å…³çš„ API é€šè¿‡åœ¨è¿™ä¸ªæ–‡ä»¶é‡Œå»å®ç°ï¼Œæ¯”å¦‚ä¸€äº›ç›‘å¬è·¯ç”±å˜åŒ–ï¼Œæ³¨å†Œ serviceWorker ç­‰ç­‰ã€‚</p>
<h3 id="gatsby-ssr-js"><a href="#gatsby-ssr-js" class="headerlink" title="gatsby-ssr.js"></a>gatsby-ssr.js</h3><p>æœåŠ¡ç«¯æ¸²æŸ“ç›¸å…³é…ç½®æ–‡ä»¶ã€‚ä½¿ç”¨ Gatsby çš„æœåŠ¡ç«¯æ¸²æŸ“ API è‡ªå®šä¹‰å½±å“æœåŠ¡ç«¯æ¸²æŸ“çš„é»˜è®¤è®¾ç½®ã€‚</p>
<h2 id="åˆ›å»ºé¡µé¢"><a href="#åˆ›å»ºé¡µé¢" class="headerlink" title="åˆ›å»ºé¡µé¢"></a>åˆ›å»ºé¡µé¢</h2><h3 id="è·¯ç”±é¡µ"><a href="#è·¯ç”±é¡µ" class="headerlink" title="è·¯ç”±é¡µ"></a>è·¯ç”±é¡µ</h3><p>æˆ‘ä»¬åœ¨ <code>pages</code>ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªæ–‡ä»¶<code>about.js</code>ï¼Œåˆ™å¯¹åº”çš„è·¯ç”±è·¯å¾„ä¸º<code>/about</code></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> About = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>about me<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> About</span><br></pre></td></tr></table></figure>

<p>æ‰“å¼€<code>http://localhost:8000/about</code>ï¼Œæ˜¾ç¤ºçš„æ˜¯æˆ‘ä»¬åˆšåˆšåˆ›å»ºçš„é¡µé¢</p>
<h3 id="404-é¡µé¢"><a href="#404-é¡µé¢" class="headerlink" title="404 é¡µé¢"></a>404 é¡µé¢</h3><p><code>pages</code>ç›®å½•ä¸‹çš„æ–‡ä»¶åå³æ˜¯è·¯ç”±è·¯å¾„ï¼Œä½†æœ‰ä¸€ä¸ªæ¯”è¾ƒç‰¹æ®Šï¼Œå½“åŒ¹é…ä¸åˆ°è·¯å¾„æ—¶ï¼ŒGatsby ä¼šè·³è½¬åˆ° 404 é¡µé¢ï¼Œå¦‚æœæˆ‘ä»¬åœ¨ pages ä¸‹åˆ›å»ºæ–‡ä»¶å<code>404.js</code>ï¼Œä¼šä½¿ç”¨æˆ‘ä»¬è‡ªå®šä¹‰çš„ 404 é¡µé¢ã€‚å½“å‰æˆ‘ä»¬éšä¾¿è¾“å…¥ä¸€ä¸ªä¸å­˜åœ¨çš„é¡µé¢è·¯å¾„ï¼š<code>http://localhost:8000/test</code>ï¼Œé¡µé¢å°±ä¼šæŠ¥é”™ã€‚</p>
<p>æˆ‘ä»¬æ–°å»ºä¸€ä¸ªæ–‡ä»¶ 404.js</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> About = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>404 é¡µé¢ä¸å­˜åœ¨<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> About</span><br></pre></td></tr></table></figure>

<p>å†éšä¾¿è¾“å…¥ä¸€ä¸ªè·¯å¾„ï¼Œæ˜¾ç¤ºå‡ºè¯¥é¡µé¢ï¼š<br><img src="https://user-gold-cdn.xitu.io/2020/6/21/172d52ba499ad501?w=1223&h=404&f=png&s=37041" alt=""></p>
<p>Gatsby ä¼šç¡®ä¿å°† 404 é¡µé¢æ„å»ºä¸º 404.htmlï¼Œé»˜è®¤æƒ…å†µä¸‹ä¼šä¸ºæˆ‘ä»¬åˆ›å»ºæ­¤é¡µé¢ï¼Œåœ¨è¯¥é¡µé¢ä¹Ÿåˆ—å‡ºäº†ç½‘ç«™ä¸Šçš„æ‰€æœ‰é¡µé¢è·¯ç”±é“¾æ¥,æˆ‘ä»¬å¯ä»¥é€šè¿‡å•å‡»<code>Preview custom 404 page</code>çœ‹æˆ‘ä»¬åˆšæ‰åˆ›å»ºçš„ 404 é¡µé¢ã€‚</p>
<p>é‚£æˆ‘ä»¬æƒ³ç›´æ¥è·³è½¬åˆ°æˆ‘ä»¬è‡ªå®šä¹‰çš„ 404 é¡µé¢å•Šï¼Œè¿˜è¦æˆ‘ä»¬ç‚¹å‡»æ‰è·³è½¬ã€‚åŸå› æ˜¯å¤„äºå¼€å‘ç¯å¢ƒï¼Œå³å½“ä½¿ç”¨ <code>gatsby develop</code>æ—¶ï¼ŒGatsby ä½¿ç”¨é»˜è®¤çš„ 404 é¡µé¢è¦†ç›–æˆ‘ä»¬è‡ªå®šä¹‰çš„ 404 é¡µé¢ï¼Œä½†å®é™…ä¸Šæ˜¯å·²ç»ç”Ÿæ•ˆäº†ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥æ‰“åŒ…ï¼Œå¯åŠ¨ä¸€ä¸ªæœ¬åœ°çš„æœåŠ¡ï¼Œæ¨¡æ‹Ÿå¤„äºçº¿ä¸Šç¯å¢ƒæ¥çœ‹ï¼Œè¿™ä¸ªæ—¶å€™æ‰æ˜¯ç›´æ¥æ˜¾ç¤ºæˆ‘ä»¬è‡ªå®šä¹‰çš„ 404 é¡µé¢ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">gatsby build</span><br><span class="line">gatsby serve</span><br></pre></td></tr></table></figure>

<p>ç„¶åæ‰“å¼€<code>http://localhost:9000/test</code>ï¼ˆä»»æ„è·¯å¾„ï¼‰ï¼Œå°±èƒ½è·³è½¬åˆ°æˆ‘ä»¬è‡ªå®šä¹‰çš„ 404 é¡µé¢äº†</p>
<p><img src="https://user-gold-cdn.xitu.io/2020/6/21/172d5e52ae8fcd52?w=334&h=102&f=png&s=3896" alt=""></p>
<h3 id="åˆ›å»ºå¸ƒå±€ç»„ä»¶"><a href="#åˆ›å»ºå¸ƒå±€ç»„ä»¶" class="headerlink" title="åˆ›å»ºå¸ƒå±€ç»„ä»¶"></a>åˆ›å»ºå¸ƒå±€ç»„ä»¶</h3><ol>
<li><p>åˆ›å»ºä¸€ä¸ªæ–°ç›®å½• <code>src/components</code>ã€‚</p>
</li>
<li><p>åœ¨ä¸Šé¢çš„ç›®å½•ä¸­åˆ›å»ºä¸€ä¸ªå¸ƒå±€ç»„ä»¶æ–‡ä»¶ src/components/layout.jsï¼š</p>
</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> (&#123; children &#125;) =&gt; (</span><br><span class="line">  &lt;div style=&#123;&#123; <span class="attr">margin</span>: <span class="string">`3rem auto`</span>, <span class="attr">maxWidth</span>: <span class="number">650</span>, <span class="attr">padding</span>: <span class="string">`0 1rem`</span> &#125;&#125;&gt;&#123;children&#125;&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">)</span></span><br></pre></td></tr></table></figure>

<ol start="3">
<li>åœ¨<code>src/pages/index.js</code>ä¸­ï¼ŒåŠ å…¥ Layout ç»„ä»¶ï¼Œ</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> Layout <span class="keyword">from</span> <span class="string">'../components/layout'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">Home</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">Layout</span>&gt;</span>Hello world!<span class="tag">&lt;/<span class="name">Layout</span>&gt;</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™æ ·å°±è®©æ•´ä½“é¡µé¢å±…ä¸­äº†ï¼Œè¿™é‡Œéƒ½æ˜¯ React çš„åŸºæœ¬æ“ä½œ</p>
<h2 id="è®¾ç½®-CSS-æ ·å¼"><a href="#è®¾ç½®-CSS-æ ·å¼" class="headerlink" title="è®¾ç½® CSS æ ·å¼"></a>è®¾ç½® CSS æ ·å¼</h2><p>Gatsby ä¸­æ ·å¼å¯ä»¥ä½¿ç”¨å¤šç§å½¢å¼ï¼Œæ™®é€šçš„ <code>import &#39;./xxx.css</code>æˆ‘ä»¬å°±ä¸è¯´äº†ã€‚</p>
<h3 id="ä½¿ç”¨å…¨å±€æ ·å¼"><a href="#ä½¿ç”¨å…¨å±€æ ·å¼" class="headerlink" title="ä½¿ç”¨å…¨å±€æ ·å¼"></a>ä½¿ç”¨å…¨å±€æ ·å¼</h3><p>æˆ‘ä»¬å‘ç½‘ç«™æ·»åŠ å…¨å±€æ ·å¼çš„æœ€ç›´æ¥çš„æ–¹æ³•ä¹‹ä¸€å°±æ˜¯ä½¿ç”¨å…¨å±€ .css æ ·å¼è¡¨ã€‚</p>
<p>åœ¨ src ç›®å½•ä¸‹æ–°å»ºæ–‡ä»¶å¤¹<code>styles</code>ï¼Œæ·»åŠ ä¸€ä¸ª global.css æ–‡ä»¶</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">html &#123;</span><br><span class="line">  background-color: #f5f5f5;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>åœ¨ç›®å½•ä¸‹åˆ›å»º gatsby-browser.js ä¸­ï¼Œå°†æ ·å¼æ–‡ä»¶å¯¼å…¥</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">import &quot;.&#x2F;src&#x2F;styles&#x2F;global.css&quot;</span><br></pre></td></tr></table></figure>

<p>é‡å¯æœ¬åœ°æœåŠ¡ï¼Œå°±å‘ç°é¡µé¢èƒŒæ™¯å˜ä¸ºæµ…ç°è‰²äº†ã€‚</p>
<h3 id="ä½¿ç”¨-CSS-Module-ä¸ºç»„ä»¶è®¾ç½®æ ·å¼"><a href="#ä½¿ç”¨-CSS-Module-ä¸ºç»„ä»¶è®¾ç½®æ ·å¼" class="headerlink" title="ä½¿ç”¨ CSS Module ä¸ºç»„ä»¶è®¾ç½®æ ·å¼"></a>ä½¿ç”¨ CSS Module ä¸ºç»„ä»¶è®¾ç½®æ ·å¼</h3><p>CSS Module å¯ä»¥å‡å°‘å…¨å±€æ±¡æŸ“ã€é˜²æ­¢å‘½åå†²çªå’Œæ ·å¼çš„è¦†ç›–ã€‚</p>
<blockquote>
<p>CSS Module å®ç°åŸç†æ˜¯ï¼šå°†æ‰€æœ‰æ¨¡å—åŒ–çš„ç±»åï¼Œä¿®æ”¹ä¸ºæˆå”¯ä¸€çš„åç§°ï¼Œå³æ·»åŠ ä¸€äº›ä¸é‡å¤çš„å‰ç¼€æˆ–åç¼€ã€‚è¿™æ ·ä½¿å¾—é¡¹ç›®ä¸­ï¼Œä¸åŒäººå‘˜ç¼–å†™çš„æ ·å¼ä¸ä¼šå‡ºç°è¦†ç›–å’Œå†²çªã€‚</p>
</blockquote>
<ol>
<li>åˆ›å»º CSS æ–‡ä»¶ <code>src/styles/index.module.css</code></li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">.title &#123;</span><br><span class="line">  color: red;</span><br><span class="line">&#125;</span><br><span class="line">.text &#123;</span><br><span class="line">  color: blue;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç”¨æ³•å¦‚ä¸‹ï¼š<code>src/pages/index.js</code></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">import React from &quot;react&quot;</span><br><span class="line">import Layout from &quot;..&#x2F;components&#x2F;layout&quot;</span><br><span class="line">import styles from &quot;..&#x2F;styles&#x2F;index.module.css&quot;</span><br><span class="line"></span><br><span class="line">export default function Home() &#123;</span><br><span class="line">  console.log(styles)</span><br><span class="line">  return (</span><br><span class="line">    &lt;Layout&gt;</span><br><span class="line">      &lt;h1 className&#x3D;&#123;styles.title&#125;&gt;Hello World&lt;&#x2F;h1&gt;</span><br><span class="line">      &lt;div className&#x3D;&#123;styles.text&#125;&gt;Test&lt;&#x2F;div&gt;</span><br><span class="line">    &lt;&#x2F;Layout&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœï¼š</p>
<p><img src="https://user-gold-cdn.xitu.io/2020/6/21/172d61d3f95cadf0?w=718&h=174&f=png&s=5935" alt=""></p>
<p>è¾“å‡º <code>styles</code>,å¯ä»¥çœ‹åˆ°è¢«å¯¼å…¥å¤„ç†çš„ç»“æœ:</p>
<p><img src="https://user-gold-cdn.xitu.io/2020/6/21/172d61cc37846a59?w=514&h=68&f=png&s=6441" alt=""><br>å¦‚æœå°†å…¶ä¸ CSS æ–‡ä»¶è¿›è¡Œæ¯”è¾ƒï¼Œä½ ä¼šå‘ç°æ¯ä¸ªæ ¼å¼ç°åœ¨éƒ½æ˜¯å¯¼å…¥å¯¹è±¡ä¸­æŒ‡å‘é•¿å­—ç¬¦ä¸²çš„é”®ï¼ˆkeyï¼‰ï¼Œä¾‹å¦‚ <code>title</code> æŒ‡å‘ <code>index-module--title--1i-Wh</code>ã€‚ è¿™äº›æ ·å¼åç§°æ˜¯ CSS æ¨¡å—ç”Ÿæˆçš„ã€‚ ä¿è¯å®ƒä»¬åœ¨ä½ çš„ç½‘ç«™ä¸Šæ˜¯å”¯ä¸€çš„ã€‚ è€Œä¸”ç”±äºå¿…é¡»å¯¼å…¥å®ƒä»¬æ‰èƒ½ä½¿ç”¨è¿™äº›ç±»ï¼Œæ‰€ä»¥å¯¹äºåœ¨ä»»ä½•åœ°æ–¹ä½¿ç”¨è¿™äº› CSS æ ·å¼éƒ½æ²¡é—®é¢˜ã€‚</p>
<h3 id="å…¶ä»–å¤„ç†-CSS-çš„æ–¹å¼"><a href="#å…¶ä»–å¤„ç†-CSS-çš„æ–¹å¼" class="headerlink" title="å…¶ä»–å¤„ç† CSS çš„æ–¹å¼"></a>å…¶ä»–å¤„ç† CSS çš„æ–¹å¼</h3><p>ä½¿ç”¨ css æ ·å¼å°±ç‚¹åˆ°ä¸ºæ­¢äº†ï¼Œå…¶ä»–çš„æ¯”å¦‚ Sass ç­‰ï¼›è¿˜æœ‰ CSS in JS çš„æ–¹å¼ï¼Œæ¯”å¦‚ Emotion, Styled Componentã€‚å¯ä»¥å»å®˜ç½‘æŸ¥çœ‹ç›¸åº”æ”¯æŒçš„ Gatsby æ’ä»¶ï¼Œå°±å¯ä»¥ä½¿ç”¨äº†ã€‚</p>
<h2 id="è·å–-Gatsby-ä¸­çš„æ•°æ®"><a href="#è·å–-Gatsby-ä¸­çš„æ•°æ®" class="headerlink" title="è·å– Gatsby ä¸­çš„æ•°æ®"></a>è·å– Gatsby ä¸­çš„æ•°æ®</h2><p>å»ºç«‹ç½‘ç«™æ—¶ï¼Œæ‚¨å¯èƒ½éœ€è¦é‡ç”¨ä¸€äº›å¸¸ç”¨çš„æ•°æ®â€”â€”æ¯”å¦‚å…¬ç”¨çš„ç½‘ç«™æ ‡é¢˜ã€ä½œè€…ä¿¡æ¯ç­‰ï¼Œæˆ‘ä»¬ä¸å¯èƒ½åœ¨æ¯ä¸ªé¡µé¢éƒ½åŠ ï¼Œæ‰€ä»¥æˆ‘ä»¬æŠŠæ ‡é¢˜å­˜å‚¨åœ¨ä¸€ä¸ªä½ç½®ï¼Œç„¶åä»å…¶ä»–æ–‡ä»¶å¼•ç”¨è¯¥ä½ç½®å°±è¡Œäº†ï¼Œæ›´æ”¹çš„æ—¶å€™ä¹Ÿåªèƒ½æ›´æ”¹è¿™ä¸€å¤„åœ°æ–¹ã€‚</p>
<p>è¿™äº›å¸¸ç”¨æ•°æ®çš„å­˜æ”¾ä½ç½®å°±æ˜¯ <code>gatsby-config.js</code> æ–‡ä»¶ä¸­çš„ <code>siteMetadata</code> å¯¹è±¡ã€‚æ‰“å¼€è¿™ä¸ªæ–‡ä»¶ï¼Œå†™å…¥ä»£ç ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">module.exports &#x3D; &#123;</span><br><span class="line">  &#x2F;* Your site config here *&#x2F;</span><br><span class="line">  siteMetadata: &#123;</span><br><span class="line">    title: &#96;Title from siteMetadata&#96;,</span><br><span class="line">    author: &#39;jacky&#39;</span><br><span class="line">  &#125;,</span><br><span class="line">  plugins: [],</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é‡å¯æœåŠ¡</p>
<h3 id="ä½¿ç”¨é¡µé¢æŸ¥è¯¢"><a href="#ä½¿ç”¨é¡µé¢æŸ¥è¯¢" class="headerlink" title="ä½¿ç”¨é¡µé¢æŸ¥è¯¢"></a>ä½¿ç”¨é¡µé¢æŸ¥è¯¢</h3><p>ç¼–è¾‘ <code>src/pages/about.js</code></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> &#123; graphql &#125; <span class="keyword">from</span> <span class="string">'gatsby'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// GraphQL è·å–çš„æ•°æ®ï¼Œä¼šå½“åšå‚æ•°ä¼ é€’åˆ°é¡µé¢ç»„ä»¶ä¸­</span></span><br><span class="line"><span class="comment">// æ•°æ®çš„å½¢å¼æ˜¯ &#123; errors, data &#125;ï¼Œæ²¡æœ‰é”™è¯¯åˆ™ä¸ä¼šæœ‰ errors</span></span><br><span class="line"><span class="keyword">const</span> About = <span class="function">(<span class="params">&#123; data &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(data.site.siteMetadata.title)</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;h1&gt;Title: &#123;data.site.siteMetadata.title&#125;&lt;<span class="regexp">/h1&gt;</span></span><br><span class="line"><span class="regexp">      &lt;p&gt;author: &#123;data.site.siteMetadata.author&#125;&lt;/</span>p&gt;</span><br><span class="line">      &lt;div&gt;about me&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>div&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> About</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> query = graphql<span class="string">`</span></span><br><span class="line"><span class="string">  query &#123;</span></span><br><span class="line"><span class="string">    site &#123;</span></span><br><span class="line"><span class="string">      siteMetadata &#123;</span></span><br><span class="line"><span class="string">        title</span></span><br><span class="line"><span class="string">        author</span></span><br><span class="line"><span class="string">      &#125;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">`</span></span><br></pre></td></tr></table></figure>

<p>ç„¶åå°±æ‹‰å‡ºæ•°æ®äº†</p>
<p><img src="https://user-gold-cdn.xitu.io/2020/6/21/172d63bec7bccdeb?w=576&h=188&f=png&s=10256" alt=""></p>
<p>å…¶ä¸­ï¼ŒGraphQL æŸ¥è¯¢è¯­å¥æ˜¯ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  site &#123;</span><br><span class="line">    siteMetadata &#123;</span><br><span class="line">      title,</span><br><span class="line">      author</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä½ å¯èƒ½ä¼šæ‡µé€¼ï¼Œ site æ˜¯å“ªé‡Œæ¥çš„ï¼Œè¿™æ•°æ®æ ¼å¼æ€ä¹ˆæ˜¯è¿™æ ·ï¼Œè¿™å°±æ˜¯ GraphQL æŸ¥è¯¢è¯­å¥äº†ï¼Œæˆ‘ä»¬å¯ä»¥æ‰“å¼€ Gatsby å†…ç½®çš„ GraphQL è°ƒè¯•ç•Œé¢ <code>http://localhost:8000/__graphql</code>ã€‚</p>
<p>è¿™é‡Œçš„<code>site</code>å³ä¸ºæˆ‘ä»¬<code>gatsby-config.js</code>å†™çš„ç«™ç‚¹é…ç½®ã€‚</p>
<p>ä¾æ¬¡ç‚¹å‡»å·¦è¾¹çš„<code>site</code>ã€<code>siteMetadata</code>ï¼Œç„¶åæœ‰æˆ‘ä»¬åˆšæ‰å†™çš„<code>title</code>,<code>author</code>å­—æ®µ ä¾›æˆ‘ä»¬é€‰æ‹©ï¼Œåœ¨ç‚¹å‡»çš„åŒæ—¶ï¼Œä¸­é—´çš„æ¡†ä¼šç”ŸæˆæŸ¥è¯¢è¯­å¥ï¼Œæœ€åç‚¹å‡»è¿è¡ŒæŒ‰é’®ï¼Œä¼šè¾“å‡ºæŸ¥è¯¢ç»“æœã€‚</p>
<p><img src="https://user-gold-cdn.xitu.io/2020/6/21/172d660d32ae1825?w=1442&h=642&f=png&s=61514" alt=""></p>
<p>å½“ä½ åé¢éœ€è¦è·å–æ›´å¤šå¤æ‚åµŒå¥—æ•°æ®çš„æ—¶å€™ï¼Œå¯ä»¥ç›´æ¥åœ¨è¿™ä¸ªç•Œé¢æ‰¾å’Œç‚¹å‡»ï¼Œè‡ªåŠ¨ç”ŸæˆæŸ¥è¯¢è¯­å¥å°±è¡Œäº†ã€‚</p>
<p>ç”±æˆ‘ä»¬è‡ªå·±å†™çš„æŸ¥è¯¢è¯­å¥ä¹ŸçŸ¥é“ï¼Œä¸Šé¢æˆ‘ä»¬ä»‹ç» GraphQL çš„æ—¶å€™è¯´çš„ä¸€ä¸ªç‰¹ç‚¹ï¼Œè·å–æ•°æ®ä¸å¤šä¸å°‘ï¼Œå³æˆ‘ä»¬å¯ä»¥é€‰æ‹©æƒ³è¦çš„æ•°æ®ï¼Œæ¯”å¦‚æˆ‘å°±æƒ³è·å–æ ‡é¢˜ä¸æƒ³è·å–ä½œè€…</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">export const query &#x3D; graphql&#96;</span><br><span class="line">  query &#123;</span><br><span class="line">    site &#123;</span><br><span class="line">      siteMetadata &#123;</span><br><span class="line">        title</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#96;</span><br></pre></td></tr></table></figure>

<h3 id="ä½¿ç”¨éé¡µé¢ç»„ä»¶æŸ¥è¯¢ï¼ˆé™æ€æŸ¥è¯¢ï¼‰"><a href="#ä½¿ç”¨éé¡µé¢ç»„ä»¶æŸ¥è¯¢ï¼ˆé™æ€æŸ¥è¯¢ï¼‰" class="headerlink" title="ä½¿ç”¨éé¡µé¢ç»„ä»¶æŸ¥è¯¢ï¼ˆé™æ€æŸ¥è¯¢ï¼‰"></a>ä½¿ç”¨éé¡µé¢ç»„ä»¶æŸ¥è¯¢ï¼ˆé™æ€æŸ¥è¯¢ï¼‰</h3><p>è¿™é‡Œæ³¨æ„ï¼Œæˆ‘ä»¬éœ€è¦åŒºåˆ†ä¸¤ç§æ–¹å¼çš„æŸ¥è¯¢ï¼Œä¸Šé¢çš„ä¾‹å­çš„æŸ¥è¯¢æ–¹å¼ï¼Œåªé€‚ç”¨äºé¡µé¢æŸ¥è¯¢ï¼Œå³æ˜¯åœ¨<code>src/pages</code>ä¸‹çš„è·¯ç”±ç•Œé¢ï¼Œå¦‚æœåœ¨éé¡µé¢ç»„ä»¶ä¸‹è¿›è¡Œ GraphQL æŸ¥è¯¢ï¼Œåˆ™ä¸èƒ½ç”¨ä¸Šé¢çš„æ–¹å¼ï¼Œåº”è¯¥ä½¿ç”¨ <code>StaticQuery</code> ç»„ä»¶æˆ–è€… <code>useStaticQuery hook</code>ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F; é¡µé¢æŸ¥è¯¢</span><br><span class="line">export const query &#x3D; graphql&#96;</span><br><span class="line">    query&#123; ... &#125;</span><br><span class="line">&#96;</span><br></pre></td></tr></table></figure>

<p>æ¯”å¦‚æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªç»„ä»¶<code>src/components/header.js</code></p>
<ul>
<li>StaticQuery</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> &#123; graphql, StaticQuery &#125; <span class="keyword">from</span> <span class="string">'gatsby'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> Header = <span class="function"><span class="params">()</span> =&gt;</span> (</span><br><span class="line">  &lt;StaticQuery</span><br><span class="line">    query=&#123;graphql<span class="string">`</span></span><br><span class="line"><span class="string">      query &#123;</span></span><br><span class="line"><span class="string">        site &#123;</span></span><br><span class="line"><span class="string">          siteMetadata &#123;</span></span><br><span class="line"><span class="string">            author</span></span><br><span class="line"><span class="string">          &#125;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">      &#125;</span></span><br><span class="line"><span class="string">    `</span>&#125;</span><br><span class="line">    render=&#123;data =&gt; &#123;</span><br><span class="line">      <span class="keyword">const</span> &#123;</span><br><span class="line">        site: &#123; siteMetadata &#125;,</span><br><span class="line">      &#125; = data</span><br><span class="line">      <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>è¿™æ˜¯Headerç»„ä»¶ï¼Œä½œè€…æ˜¯ï¼š&#123;siteMetadata.author&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    &#125;&#125;</span><br><span class="line">  /&gt;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> Header</span><br></pre></td></tr></table></figure>

<p>æˆ–è€…ä½¿ç”¨ useStaticQuery æ–¹å¼</p>
<ul>
<li>useStaticQuery</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">import React from &quot;react&quot;</span><br><span class="line">import &#123; useStaticQuery, graphql &#125; from &quot;gatsby&quot;</span><br><span class="line"></span><br><span class="line">const Header &#x3D; () &#x3D;&gt; &#123;</span><br><span class="line">  const data &#x3D; useStaticQuery(</span><br><span class="line">    graphql&#96;</span><br><span class="line">      query &#123;</span><br><span class="line">        site &#123;</span><br><span class="line">          siteMetadata &#123;</span><br><span class="line">            author</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#96;</span><br><span class="line">  )</span><br><span class="line">  return &lt;div&gt;è¿™æ˜¯Headerç»„ä»¶ï¼Œä½œè€…æ˜¯ï¼š&#123;data.site.siteMetadata.author&#125;&lt;&#x2F;div&gt;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default Header</span><br></pre></td></tr></table></figure>

<p>ç„¶ååœ¨<code>src/pages/index.js</code>ä¸­å¼•å…¥ Header ç»„ä»¶</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> Layout <span class="keyword">from</span> <span class="string">'../components/layout'</span></span><br><span class="line"><span class="keyword">import</span> Header <span class="keyword">from</span> <span class="string">'../components/header'</span></span><br><span class="line"><span class="keyword">import</span> styles <span class="keyword">from</span> <span class="string">'../styles/index.module.css'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">Home</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;Layout&gt;</span><br><span class="line">      &lt;Header /&gt;</span><br><span class="line">      &lt;h1 className=&#123;styles.title&#125;&gt;Hello World&lt;<span class="regexp">/h1&gt;</span></span><br><span class="line"><span class="regexp">      &lt;div className=&#123;styles.text&#125;&gt;Test&lt;/</span>div&gt;</span><br><span class="line">    &lt;<span class="regexp">/Layout&gt;</span></span><br><span class="line"><span class="regexp">  )</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p>
<p><img src="https://user-gold-cdn.xitu.io/2020/6/21/172d6d9b2afff80c?w=705&h=203&f=png&s=8464" alt=""></p>
<h2 id="æ’ä»¶"><a href="#æ’ä»¶" class="headerlink" title="æ’ä»¶"></a>æ’ä»¶</h2><h3 id="gatsby-source-filesystem"><a href="#gatsby-source-filesystem" class="headerlink" title="gatsby-source-filesystem"></a>gatsby-source-filesystem</h3><p>è¿™ä¸ªæ˜¯ Gatsby çš„æ•°æ®æºæ’ä»¶ï¼Œå³é€šè¿‡è¯¥æ’ä»¶å°†å„æ–¹é¢çš„æ•°æ®è½¬æ¢ä¸ºæœ¬åœ°èƒ½å¤Ÿé€šè¿‡ GraphQL æå–çš„å†…å®¹ï¼Œç”¨äºè®¾ç½®é¡¹ç›®çš„æ–‡ä»¶ç³»ç»Ÿã€‚</p>
<ul>
<li>å®‰è£…æ’ä»¶</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">npm install --save gatsby-source-filesystem</span><br></pre></td></tr></table></figure>

<ul>
<li>åœ¨ gatsby-config.js æ–‡ä»¶é…ç½®</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  siteMetadata: &#123;</span><br><span class="line">    title: <span class="string">`Title from siteMetadata`</span>,</span><br><span class="line">    author: <span class="string">'jacky'</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  plugins: [</span><br><span class="line">    &#123;</span><br><span class="line">      resolve: <span class="string">`gatsby-source-filesystem`</span>,</span><br><span class="line">      options: &#123;</span><br><span class="line">        name: <span class="string">`src`</span>, <span class="comment">// åç§°ï¼Œå¯ä»¥ç”¨æ¥è¿‡æ»¤</span></span><br><span class="line">        path: <span class="string">`<span class="subst">$&#123;__dirname&#125;</span>/src/`</span>, <span class="comment">// æ–‡ä»¶è·¯å¾„</span></span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  ],</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é‡å¯æœåŠ¡</p>
<p>æ‰“å¼€<code>http://localhost:8000/__graphql</code>ï¼Œå…³æ³¨<code>allFile</code>å’Œ<code>file</code>ä¸¤ä¸ªå¯é€‰é¡¹ã€‚</p>
<p>æˆ‘ä»¬ç‚¹å‡» <code>allFile</code>è¿™ä¸ªå¯é€‰é¡¹ï¼Œä¾æ¬¡é€‰æ‹©å¦‚ä¸‹å›¾</p>
<p><img src="https://user-gold-cdn.xitu.io/2020/6/21/172d74ca7b60229d?w=1542&h=928&f=png&s=113095" alt=""></p>
<p>è¿™é‡Œæˆ‘ä»¬è¦çŸ¥é“ï¼Œæˆ‘ä»¬è¦æŸ¥è¯¢çš„æ•°æ®åŸºæœ¬åœ¨<code>edges.node</code>ä¸‹ï¼ŒèŠ‚ç‚¹ <code>node</code>æ˜¯å›¾ï¼ˆgraphï¼‰ä¸­ä¸€ä¸ªå¯¹è±¡çš„ç‰¹æ®Šç§°å‘¼ï¼Œæ¯ä¸ª File èŠ‚ç‚¹éƒ½åŒ…å«äº†ä½ è¦æŸ¥è¯¢çš„å­—æ®µã€‚</p>
<p>æˆ‘ä»¬é€‰æ‹©çš„<code>id</code>,<code>relativePath</code>,<code>name</code>å­—æ®µéƒ½å¯¹åº”æˆ‘ä»¬ <code>src</code>ç›®å½•ä¸‹åˆ›å»ºçš„æ–‡ä»¶, è¿˜æœ‰å¾ˆå¤šå…¶ä»–å­—æ®µå¯é€‰æ‹©ï¼Œç”±æ­¤å¯çŸ¥æˆ‘ä»¬åˆ›å»ºçš„ 7 ä¸ªæ–‡ä»¶çš„å„ç§ä¿¡æ¯ã€‚</p>
<p>æ—¢ç„¶è¿™é‡Œèƒ½æŸ¥è¯¢å‡ºæ¥ï¼Œè¯´æ˜æˆ‘ä»¬ç»„ä»¶é‡Œé¢ä¹Ÿèƒ½æŸ¥å‡ºæ¥ç„¶åä½¿ç”¨æ•°æ®ï¼Œæ¯”å¦‚ä½ å¯ä»¥ä»ç»„ä»¶ä¸­æŸ¥è¯¢å‡ºæ¥åšä¸ªæ–‡ä»¶åˆ—è¡¨ã€‚</p>
<p>è¿™ä¸ªç›¸æ¯”ä¼ ç»Ÿçš„ React é¡¹ç›®å°±æŒºå‰å®³äº†ï¼Œä¸ç”¨åšä»€ä¹ˆå¤æ‚çš„å·¥ä½œï¼Œå°±èƒ½è½»æ¾æ‹¿ä¸‹è¿™äº›æ•°æ®ã€‚Gatsby æ¯”è¾ƒå¼ºå¤§çš„å°±æ˜¯å®ƒçš„ç”Ÿæ€äº†ï¼Œå¾ˆå¤šæ’ä»¶éƒ½é…å¥½äº†ï¼Œæ›´å¤šæ’ä»¶å¯ä»¥çœ‹å®˜ç½‘çš„æ’ä»¶åº“ä»‹ç»ï¼š<a href="https://www.gatsbyjs.org/plugins/" target="_blank" rel="noopener">https://www.gatsbyjs.org/plugins/</a></p>
<h3 id="gatsby-transformer-remark"><a href="#gatsby-transformer-remark" class="headerlink" title="gatsby-transformer-remark"></a>gatsby-transformer-remark</h3><p>è¿™ä¸ªæ˜¯æ•°æ®è½¬æ¢æ’ä»¶ï¼Œæˆ‘ä»¬ç”¨ Gatsby åšä¸ªäººåšå®¢çš„è¯ï¼Œå®ƒå¯å¿…ä¸å¯å°‘ã€‚ç°åœ¨æˆ‘ä»¬ç¨‹åºå‘˜å†™åšå®¢åŸºæœ¬æ˜¯ç”¨ markdown è¯­æ³•äº†ï¼Œåšä¸€ä¸ªåšå®¢çš„è¯ï¼Œä¸å¯ç¼ºå°‘çš„å°±æ˜¯å¯¹ markdown è¯­æ³•çš„è§£æã€‚</p>
<ul>
<li>å®‰è£…æ’ä»¶</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">npm install --save gatsby-transformer-remark</span><br></pre></td></tr></table></figure>

<ul>
<li>åœ¨ gatsby-config.js æ–‡ä»¶é…ç½®</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="comment">/* Your site config here */</span></span><br><span class="line">  siteMetadata: &#123;</span><br><span class="line">    title: <span class="string">`Title from siteMetadata`</span>,</span><br><span class="line">    author: <span class="string">'jacky'</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  plugins: [</span><br><span class="line">    &#123;</span><br><span class="line">      resolve: <span class="string">`gatsby-source-filesystem`</span>,</span><br><span class="line">      options: &#123;</span><br><span class="line">        name: <span class="string">`src`</span>, <span class="comment">// åç§°ï¼Œå¯ä»¥ç”¨æ¥è¿‡æ»¤</span></span><br><span class="line">        path: <span class="string">`<span class="subst">$&#123;__dirname&#125;</span>/src/`</span>, <span class="comment">// æ–‡ä»¶è·¯å¾„</span></span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">`gatsby-transformer-remark`</span>,</span><br><span class="line">  ],</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é‡å¯æœåŠ¡</p>
<p>è¿™ä¸ªæ’ä»¶æ·»åŠ äº† allMarkdownRemark å’Œ markdownRemark ä¸¤ä¸ªæ•°æ®å­—æ®µ</p>
<p><img src="https://user-gold-cdn.xitu.io/2020/6/21/172d7761605cba2b?w=205&h=243&f=png&s=7538" alt=""></p>
<ul>
<li>æ–°å»º md æ–‡ä»¶</li>
</ul>
<p>åœ¨<code>src</code>ä¸‹åˆ›å»º<code>_posts</code>ç›®å½•ï¼Œæ·»åŠ ä¸€ä¸ª<code>first-blog.md</code>æ–‡ä»¶</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">title: &quot;æˆ‘çš„ç¬¬ä¸€ç¯‡åšå®¢&quot;</span><br><span class="line">date: &quot;2020-06-21&quot;</span><br><span class="line">tags: &quot;React&quot;</span><br><span class="line">categories: &quot;Reactç³»åˆ—&quot;</span><br><span class="line">---</span><br><span class="line"></span><br><span class="line">## è¿™æ˜¯ç¬¬ä¸€ç¯‡åšå®¢çš„æ ‡é¢˜</span><br><span class="line"></span><br><span class="line">first blog çš„å†…å®¹ 1</span><br></pre></td></tr></table></figure>

<p>å¦‚æœåšå®¢ä¸æ˜¯è‡ªå·±æ­å»ºçš„ï¼Œè€Œæ˜¯ç›´æ¥ä¸ŠæŸå¹³å°å†™çš„è¯ï¼Œå¯¹ä¸Šé¢è¿™æ®µè¯­æ³•å°±å¯èƒ½ä¸å¤ªäº†è§£ï¼Œåœ¨ md æ–‡ä»¶å¼€å¤´çš„ <code>---</code> åŒ…è£¹çš„æ˜¯ frontmatterï¼ˆå‰è¨€ï¼‰ï¼Œç„¶ååœ¨é‡Œé¢å¯ä»¥æ·»åŠ æ–‡ç« çš„å„ç§å…³é”®è¯ä¿¡æ¯ã€‚</p>
<p>ç„¶åæˆ‘ä»¬å°±å¯ä»¥åœ¨<code>http://localhost:8000/__graphql</code>æŸ¥è¯¢åˆ°æˆ‘ä»¬å†™çš„ md æ–‡ä»¶çš„è¯¦æƒ…ä¿¡æ¯äº†</p>
<p><img src="https://user-gold-cdn.xitu.io/2020/6/21/172d7823d4e7db7f?w=1703&h=499&f=png&s=61510" alt=""></p>
<p>æˆ‘ä»¬ç¨å¾®å†æ”¹åŠ¨ï¼Œåˆ›å»ºå¤šä¸¤ä¸ª md æ–‡ä»¶</p>
<p><code>second-blog.md</code></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">title: &quot;æˆ‘çš„ç¬¬äºŒç¯‡åšå®¢&quot;</span><br><span class="line">date: &quot;2020-06-22&quot;</span><br><span class="line">tags: &quot;Vue&quot;</span><br><span class="line">categories: &quot;Vueç³»åˆ—&quot;</span><br><span class="line">---</span><br><span class="line"></span><br><span class="line">## è¿™æ˜¯ç¬¬äºŒç¯‡åšå®¢çš„æ ‡é¢˜</span><br><span class="line"></span><br><span class="line">second blog çš„å†…å®¹ 2</span><br></pre></td></tr></table></figure>

<p><code>third-blog.md</code></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">title: &quot;æˆ‘çš„ç¬¬ä¸‰ç¯‡åšå®¢&quot;</span><br><span class="line">date: &quot;2020-06-23&quot;</span><br><span class="line">tags: &quot;React&quot;</span><br><span class="line">categories: &quot;Reactç³»åˆ—&quot;</span><br><span class="line">---</span><br><span class="line"></span><br><span class="line">## è¿™æ˜¯ç¬¬ä¸‰ç¯‡åšå®¢çš„æ ‡é¢˜</span><br><span class="line"></span><br><span class="line">third blog çš„å†…å®¹ 3</span><br></pre></td></tr></table></figure>

<p>å†æ¬¡æŸ¥è¯¢æ•°æ®ï¼ŒæŠŠæˆ‘ä»¬åˆšåˆšæ·»åŠ çš„æ–‡ç« æ•°æ®éƒ½æ‹¿ä¸‹æ¥äº†</p>
<p><img src="https://user-gold-cdn.xitu.io/2020/6/21/172d78dc41c94349?w=599&h=687&f=png&s=41548" alt=""></p>
<p>æ—¢ç„¶ GraphQL èƒ½æ‹¿åˆ°æ•°æ®ï¼Œè¯´æ˜æˆ‘ä»¬ä¹Ÿèƒ½æŠŠå®ƒæ”¾åˆ°é¡µé¢å±•ç¤ºå‡ºæ¥ã€‚</p>
<p>æ–°å»ºæ–‡ä»¶<code>src/pages/blog.js</code>,æˆ‘ä»¬åšä¸€ä¸ªåšå®¢ç›®å½•æ±‡æ€»ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> Layout <span class="keyword">from</span> <span class="string">'../components/layout'</span></span><br><span class="line"><span class="keyword">import</span> &#123; graphql &#125; <span class="keyword">from</span> <span class="string">'gatsby'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> Blog = <span class="function">(<span class="params">&#123; data &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;Layout&gt;</span><br><span class="line">      &lt;h1&gt;åšå®¢ç›®å½•&lt;<span class="regexp">/h1&gt;</span></span><br><span class="line"><span class="regexp">      &lt;div&gt;</span></span><br><span class="line"><span class="regexp">        &#123;data.allMarkdownRemark.edges.map((&#123; node &#125;) =&gt; &#123;</span></span><br><span class="line"><span class="regexp">          return (</span></span><br><span class="line"><span class="regexp">            &lt;div</span></span><br><span class="line"><span class="regexp">              key=&#123;node.id&#125;</span></span><br><span class="line"><span class="regexp">              style=&#123;&#123;</span></span><br><span class="line"><span class="regexp">                border: '1px solid #000',</span></span><br><span class="line"><span class="regexp">                margin: '10px',</span></span><br><span class="line"><span class="regexp">                padding: '10px',</span></span><br><span class="line"><span class="regexp">              &#125;&#125;</span></span><br><span class="line"><span class="regexp">            &gt;</span></span><br><span class="line"><span class="regexp">              &lt;h2&gt;&#123;node.frontmatter.title&#125;&lt;/</span>h2&gt;</span><br><span class="line">              &lt;div&gt;åˆ†ç±»&#123;node.frontmatter.categories&#125;&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">              &lt;div&gt;æ ‡ç­¾ï¼š&#123;node.frontmatter.tags&#125;&lt;/</span>div&gt;</span><br><span class="line">              &lt;div&gt;å‘å¸ƒæ—¶é—´ï¼š&#123;node.frontmatter.date&#125;&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">            &lt;/</span>div&gt;</span><br><span class="line">          )</span><br><span class="line">        &#125;)&#125;</span><br><span class="line">      &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>Layout&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> Blog</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> query = graphql<span class="string">`</span></span><br><span class="line"><span class="string">  query &#123;</span></span><br><span class="line"><span class="string">    allMarkdownRemark &#123;</span></span><br><span class="line"><span class="string">      edges &#123;</span></span><br><span class="line"><span class="string">        node &#123;</span></span><br><span class="line"><span class="string">          id</span></span><br><span class="line"><span class="string">          frontmatter &#123;</span></span><br><span class="line"><span class="string">            tags</span></span><br><span class="line"><span class="string">            title</span></span><br><span class="line"><span class="string">            date</span></span><br><span class="line"><span class="string">            categories</span></span><br><span class="line"><span class="string">          &#125;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">      &#125;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">`</span></span><br></pre></td></tr></table></figure>

<p>æ‰“å¼€<code>http://localhost:8000/blog</code>ï¼Œåšå®¢ç›®å½•å°±å±•ç¤ºå‡ºæ¥äº†ï¼š</p>
<p><img src="https://user-gold-cdn.xitu.io/2020/6/23/172e1b12d01e3ba3?w=722&h=601&f=png&s=36586" alt=""></p>
<p>ä½†æœ‰ä¸ªé—®é¢˜ï¼Œæ¯ç¯‡åšå®¢çš„ä¿¡æ¯ç¡®å®èƒ½æ‹¿å‡ºæ¥ï¼Œä½†æ˜¯æˆ‘ä»¬è¦é“¾æ¥å•Šï¼Œå³æ˜¯ç‚¹å‡»åšå®¢æ ‡é¢˜ï¼Œè¿›å…¥åšå®¢è¯¦æƒ…é¡µé¢ï¼Œå³æ˜¯æ–‡ç« è·¯å¾„ï¼Œæ‰€ä»¥æ¥ä¸‹æ¥æˆ‘ä»¬å°†åˆ›å»ºé¡µé¢ã€‚</p>
<h2 id="åˆ©ç”¨æ•°æ®åˆ›å»ºé¡µé¢"><a href="#åˆ©ç”¨æ•°æ®åˆ›å»ºé¡µé¢" class="headerlink" title="åˆ©ç”¨æ•°æ®åˆ›å»ºé¡µé¢"></a>åˆ©ç”¨æ•°æ®åˆ›å»ºé¡µé¢</h2><h3 id="gatsby-node-js-1"><a href="#gatsby-node-js-1" class="headerlink" title="gatsby-node.js"></a>gatsby-node.js</h3><p>è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±è¦å»ºç«‹<code>gatsby-node.js</code>æ–‡ä»¶äº†ï¼Œè¿™ä¸ªé…ç½®æ–‡ä»¶é‡Œé¢çš„ä»£ç æ˜¯ node å±‚ç›¸å…³çš„ã€‚</p>
<p>å‰é¢æˆ‘ä»¬è¯´è¿‡ <code>src/pages</code>ç›®å½•ä¸‹çš„æ–‡ä»¶ä¼šå…¨éƒ¨æ¸²æŸ“æˆè·¯ç”±ï¼Œä½†å¦‚æœæˆ‘ä»¬åšå®¢æ–‡ç« ä¸€ç¯‡ç¯‡çš„è¯¦æƒ…é¡µè¦æˆ‘ä»¬è‡ªå·±åˆ›å»ºä¸€ä¸ª js æ–‡ä»¶ï¼Œè¿™è‚¯å®šä¸åˆç†äº†ã€‚</p>
<p>æˆ‘ä»¬ä¼šç”¨åˆ°ä¸¤ä¸ª APIï¼š</p>
<h4 id="onCreateNode"><a href="#onCreateNode" class="headerlink" title="onCreateNode"></a>onCreateNode</h4><p>æ¯å½“åˆ›å»ºæ–°èŠ‚ç‚¹ï¼ˆæˆ–æ›´æ–°ï¼‰æ—¶ï¼ŒGatsby éƒ½ä¼šè°ƒç”¨ onCreateNode å‡½æ•°ã€‚</p>
<p>å‘<code>gatsby-node.js</code>å†™å…¥ä»£ç ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">exports.onCreateNode = <span class="function">(<span class="params">&#123; node &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(node.internal.type)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é‡å¯æœåŠ¡ï¼ŒæŸ¥çœ‹ç»ˆç«¯ï¼Œä½ ä¼šå‘ç°æ‰“å°å‡ºå¾ˆå¤šåˆ›å»ºçš„èŠ‚ç‚¹ï¼š<code>SitePage</code>, <code>SitePlugin</code>, <code>Site</code>, <code>SiteBuildMetadata</code>, <code>Directory</code>, <code>File</code>, <code>MarkdownRemark</code>,æˆ‘ä»¬å…³æ³¨çš„åªæœ‰<code>MarkdownRemark</code>ï¼Œäºæ˜¯ä¿®æ”¹å‡½æ•°ä½¿å…¶ä»…ä»…è®°å½• MarkdownRemark èŠ‚ç‚¹ï¼›æˆ‘ä»¬ä½¿ç”¨æ¯ä¸€ä¸ª md æ–‡ä»¶çš„åç§°æ¥ä½œä¸ºè·¯å¾„ï¼Œå¦‚è¦è·å–æ–‡ä»¶åç§°ï¼Œä½ éœ€è¦éå†ä¸€éå®ƒçš„çˆ¶èŠ‚ç‚¹ <code>File</code>ï¼Œ<code>File</code>èŠ‚ç‚¹åŒ…å«äº†æˆ‘ä»¬éœ€è¦çš„æ–‡ä»¶æ•°æ®ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">exports.onCreateNode = <span class="function">(<span class="params">&#123; node, getNode &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (node.internal.type === <span class="string">`MarkdownRemark`</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> fileNode = getNode(node.parent)</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`\n`</span>, fileNode.relativePath)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é‡å¯æœåŠ¡ï¼ŒæŸ¥çœ‹ç»ˆç«¯ï¼Œæ‰“å°å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">_posts&#x2F;first-blog.md</span><br><span class="line"></span><br><span class="line">_posts&#x2F;second-blog.md</span><br><span class="line"></span><br><span class="line">_posts&#x2F;third-blog.md</span><br></pre></td></tr></table></figure>

<p>ç›¸å¯¹è·¯å¾„å‡ºæ¥ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬è¦åˆ›å»ºè·¯å¾„ï¼Œå¯ä»¥ä½¿ç”¨<code>gatsby-source-filesystem</code>æ’ä»¶å¸¦çš„åˆ›å»ºè·¯å¾„çš„å‡½æ•°</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; createFilePath &#125; = <span class="built_in">require</span>(<span class="string">`gatsby-source-filesystem`</span>)</span><br><span class="line"></span><br><span class="line">exports.onCreateNode = <span class="function">(<span class="params">&#123; node, getNode &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (node.internal.type === <span class="string">`MarkdownRemark`</span>) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(createFilePath(&#123; node, getNode, <span class="attr">basePath</span>: <span class="string">`pages`</span> &#125;))</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é‡å¯æœåŠ¡ï¼Œæ‰“å°ç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;_posts&#x2F;first-blog&#x2F;</span><br><span class="line">&#x2F;_posts&#x2F;second-blog&#x2F;</span><br><span class="line">&#x2F;_posts&#x2F;third-blog&#x2F;</span><br></pre></td></tr></table></figure>

<p>æ¥ä¸‹æ¥ï¼Œå‘ API ä¼ é€’ä¸€ä¸ªå‡½æ•°<code>createNodeField</code>ï¼Œè¯¥å‡½æ•°å…è®¸æˆ‘ä»¬åœ¨å…¶ä»–æ’ä»¶åˆ›å»ºçš„èŠ‚ç‚¹é‡Œåˆ›å»ºå…¶ä»–å­—æ®µã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">exports.onCreateNode = <span class="function">(<span class="params">&#123; node, getNode, actions &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; createNodeField &#125; = actions</span><br><span class="line">  <span class="keyword">if</span> (node.internal.type === <span class="string">`MarkdownRemark`</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> slug = createFilePath(&#123; node, getNode, <span class="attr">basePath</span>: <span class="string">`pages`</span> &#125;)</span><br><span class="line">    createNodeField(&#123;</span><br><span class="line">      node,</span><br><span class="line">      name: <span class="string">`slug`</span>,</span><br><span class="line">      value: slug, <span class="comment">// é€šå¸¸ç”¨ slug ä¸€è¯ä»£è¡¨è·¯å¾„</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é‡å¯æœåŠ¡ï¼Œæ‰“å¼€<code>http://localhost:8000/__graphql</code>ï¼Œå°±èƒ½æŸ¥è¯¢åˆ°è·¯å¾„äº†</p>
<p><img src="https://user-gold-cdn.xitu.io/2020/6/23/172e1ce4c0a61cae?w=1097&h=448&f=png&s=28484" alt=""></p>
<h4 id="createPages"><a href="#createPages" class="headerlink" title="createPages"></a>createPages</h4><p>createPages è¿™ä¸ª API ç”¨äºæ·»åŠ é¡µé¢ã€‚åœ¨åˆ›å»ºé¡µé¢ä¹‹å‰ï¼Œé¦–å…ˆè¦æœ‰é¡µé¢æ¨¡æ¿ï¼Œè¿™æ ·åˆ›å»ºé¡µé¢å°±èƒ½æŒ‡å®šæ‰€ä½¿ç”¨çš„æ¨¡æ¿äº†ã€‚</p>
<p>æ–°å»ºæ–‡ä»¶<code>src/templates/blog-post.js</code></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> Layout <span class="keyword">from</span> <span class="string">'../components/layout'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> () =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;Layout&gt;</span><br><span class="line">      &lt;div&gt;Hello blog post&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>Layout&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç„¶åæ›´æ”¹ <code>gatsby-node.js</code>çš„<code>createPages</code>å‡½æ•°ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">`path`</span>)</span><br><span class="line"></span><br><span class="line">exports.createPages = <span class="keyword">async</span> (&#123; graphql, actions &#125;) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> result = <span class="keyword">await</span> graphql(<span class="string">`</span></span><br><span class="line"><span class="string">    query &#123;</span></span><br><span class="line"><span class="string">      allMarkdownRemark &#123;</span></span><br><span class="line"><span class="string">        edges &#123;</span></span><br><span class="line"><span class="string">          node &#123;</span></span><br><span class="line"><span class="string">            fields &#123;</span></span><br><span class="line"><span class="string">              slug</span></span><br><span class="line"><span class="string">            &#125;</span></span><br><span class="line"><span class="string">          &#125;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">      &#125;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">  `</span>)</span><br><span class="line">  result.data.allMarkdownRemark.edges.forEach(<span class="function">(<span class="params">&#123; node &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">    createPage(&#123;</span><br><span class="line">      path: node.fields.slug,</span><br><span class="line">      component: path.resolve(<span class="string">`./src/templates/blog-post.js`</span>),</span><br><span class="line">      context: &#123;</span><br><span class="line">        slug: node.fields.slug,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é‡å¯æœåŠ¡ï¼Œéšä¾¿è¾“å…¥ä¸€ä¸ªè·¯å¾„ï¼Œè·³è½¬åˆ°é»˜è®¤çš„ 404 é¡µé¢ï¼Œå°±ä¼šçœ‹åˆ°è‡ªåŠ¨ç”Ÿæˆä¸‰ç¯‡åšå®¢çš„è·¯å¾„äº†ï¼Œç‚¹å‡»ä»»ä¸€ç¯‡ï¼Œè·³è½¬çš„æ˜¯æˆ‘ä»¬åˆšåˆ›å»ºçš„ <code>blog-post.js</code>ç»„ä»¶ã€‚</p>
<p><img src="https://user-gold-cdn.xitu.io/2020/6/24/172e3bb13a244d4c?w=1230&h=548&f=png&s=51476" alt=""></p>
<p>æˆ‘ä»¬è¦çš„æ˜¯æ˜¾ç¤ºåšå®¢å†…å®¹ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å¯¹æ¨¡æ¿æ–‡ä»¶å†è¿›è¡Œæ”¹é€ ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> &#123; graphql &#125; <span class="keyword">from</span> <span class="string">'gatsby'</span></span><br><span class="line"><span class="keyword">import</span> Layout <span class="keyword">from</span> <span class="string">'../components/layout'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> (&#123; data &#125;) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> post = data.markdownRemark</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;Layout&gt;</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;h1&gt;&#123;post.frontmatter.title&#125;&lt;<span class="regexp">/h1&gt;</span></span><br><span class="line"><span class="regexp">        &lt;div dangerouslySetInnerHTML=&#123;&#123; __html: post.html &#125;&#125; /</span>&gt;</span><br><span class="line">      &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>Layout&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> query = graphql<span class="string">`</span></span><br><span class="line"><span class="string">  query($slug: String!) &#123;</span></span><br><span class="line"><span class="string">    markdownRemark(fields: &#123; slug: &#123; eq: $slug &#125; &#125;) &#123;</span></span><br><span class="line"><span class="string">      html</span></span><br><span class="line"><span class="string">      frontmatter &#123;</span></span><br><span class="line"><span class="string">        title</span></span><br><span class="line"><span class="string">      &#125;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">`</span></span><br></pre></td></tr></table></figure>

<p>ä¸Šé¢æ˜¯åŠ¨æ€å˜é‡æŸ¥è¯¢çš„å†™æ³•ï¼ŒGraphQL çš„è¯­æ³•ï¼Œå¯ä»¥çœ‹çœ‹ (<a href="https://graphql.org/learn/queries/#variables" target="_blank" rel="noopener">https://graphql.org/learn/queries/#variables</a>)</p>
<p>å®Œæˆä¹‹åï¼Œæ¯”å¦‚æˆ‘ç‚¹å‡»ç¬¬äºŒç¯‡åšå®¢ï¼Œå°±å¯ä»¥æ­£ç¡®è¿›å…¥é¡µé¢å¹¶æ˜¾ç¤ºå†…å®¹äº†</p>
<p><img src="https://user-gold-cdn.xitu.io/2020/6/24/172e3c8f759609dd?w=757&h=255&f=png&s=18207" alt=""></p>
<p>ä¸ºäº†æ›´å®Œå–„ï¼Œæˆ‘ä»¬ç»™ blog ç›®å½•é¡µé¢æ·»åŠ å¯è·³è½¬çš„é“¾æ¥ï¼ŒåŠ å…¥ <code>slug</code>æŸ¥è¯¢å­—æ®µ, å¢åŠ  <code>Link</code>è·³è½¬ï¼Œè¿™ä¸ªç”¨æ³•ä¸ React è·¯ç”±çš„ <code>Link</code>å·®ä¸å¤šä¸€è‡´ï¼Œæ¶‰åŠä¸æ·±çš„æƒ…å†µä¸‹æš‚ä¸”å½“æˆç›¸åŒç”¨æ³•ã€‚</p>
<p><code>src/pages/blog.js</code></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> Layout <span class="keyword">from</span> <span class="string">'../components/layout'</span></span><br><span class="line"><span class="keyword">import</span> &#123; graphql, Link &#125; <span class="keyword">from</span> <span class="string">'gatsby'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> Blog = <span class="function">(<span class="params">&#123; data &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;Layout&gt;</span><br><span class="line">      &lt;h1&gt;åšå®¢ç›®å½•&lt;<span class="regexp">/h1&gt;</span></span><br><span class="line"><span class="regexp">      &lt;div&gt;</span></span><br><span class="line"><span class="regexp">        &#123;data.allMarkdownRemark.edges.map((&#123; node &#125;) =&gt; &#123;</span></span><br><span class="line"><span class="regexp">          return (</span></span><br><span class="line"><span class="regexp">            &lt;Link to=&#123;node.fields.slug&#125; key=&#123;node.id&#125;&gt;</span></span><br><span class="line"><span class="regexp">              &lt;div</span></span><br><span class="line"><span class="regexp">                style=&#123;&#123;</span></span><br><span class="line"><span class="regexp">                  border: '1px solid #000',</span></span><br><span class="line"><span class="regexp">                  margin: '10px',</span></span><br><span class="line"><span class="regexp">                  padding: '10px',</span></span><br><span class="line"><span class="regexp">                &#125;&#125;</span></span><br><span class="line"><span class="regexp">              &gt;</span></span><br><span class="line"><span class="regexp">                &lt;h2&gt;&#123;node.frontmatter.title&#125;&lt;/</span>h2&gt;</span><br><span class="line">                &lt;div&gt;åˆ†ç±»&#123;node.frontmatter.categories&#125;&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">                &lt;div&gt;æ ‡ç­¾ï¼š&#123;node.frontmatter.tags&#125;&lt;/</span>div&gt;</span><br><span class="line">                &lt;div&gt;å‘å¸ƒæ—¶é—´ï¼š&#123;node.frontmatter.date&#125;&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">              &lt;/</span>div&gt;</span><br><span class="line">            &lt;<span class="regexp">/Link&gt;</span></span><br><span class="line"><span class="regexp">          )</span></span><br><span class="line"><span class="regexp">        &#125;)&#125;</span></span><br><span class="line"><span class="regexp">      &lt;/</span>div&gt;</span><br><span class="line">    &lt;<span class="regexp">/Layout&gt;</span></span><br><span class="line"><span class="regexp">  )</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">export default Blog</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">export const query = graphql`</span></span><br><span class="line"><span class="regexp">  query &#123;</span></span><br><span class="line"><span class="regexp">    allMarkdownRemark &#123;</span></span><br><span class="line"><span class="regexp">      edges &#123;</span></span><br><span class="line"><span class="regexp">        node &#123;</span></span><br><span class="line"><span class="regexp">          id</span></span><br><span class="line"><span class="regexp">          frontmatter &#123;</span></span><br><span class="line"><span class="regexp">            tags</span></span><br><span class="line"><span class="regexp">            title</span></span><br><span class="line"><span class="regexp">            date</span></span><br><span class="line"><span class="regexp">            categories</span></span><br><span class="line"><span class="regexp">          &#125;</span></span><br><span class="line"><span class="regexp">          fields &#123;</span></span><br><span class="line"><span class="regexp">            slug</span></span><br><span class="line"><span class="regexp">          &#125;</span></span><br><span class="line"><span class="regexp">        &#125;</span></span><br><span class="line"><span class="regexp">      &#125;</span></span><br><span class="line"><span class="regexp">    &#125;</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">`</span></span><br></pre></td></tr></table></figure>

<p><img src="https://user-gold-cdn.xitu.io/2020/6/24/172e3ce7be50852c?w=722&h=596&f=png&s=36793" alt=""></p>
<p>ç°åœ¨ç‚¹å‡»åšå®¢ï¼Œå°±èƒ½è·³è½¬åˆ°å¯¹åº”é¡µé¢äº†ï¼Œè™½ç„¶æ²¡åšæ ·å¼é¡µé¢æ¯”è¾ƒä¸‘ï¼Œä½†åªè¦åœ¨<code>src/_posts</code>ç›®å½•æ–°å»º md æ–‡ä»¶ï¼Œç„¶åè¿™é‡Œå°±èƒ½è·Ÿç€è‡ªåŠ¨åˆ·æ–°ï¼Œç®—æ˜¯ä¸€ä¸ªè¶…ç®€æ˜“çš„åšå®¢äº†ã€‚</p>
<h2 id="æ‰“åŒ…ä¸Šçº¿"><a href="#æ‰“åŒ…ä¸Šçº¿" class="headerlink" title="æ‰“åŒ…ä¸Šçº¿"></a>æ‰“åŒ…ä¸Šçº¿</h2><p>åœæ­¢å¼€å‘æœåŠ¡ï¼Œæ„å»ºç”Ÿäº§ç‰ˆæœ¬ï¼ŒæŠŠé™æ€æ–‡ä»¶è¾“å‡ºåˆ° public ç›®å½•ä¸­</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">gatsby build</span><br></pre></td></tr></table></figure>

<p>åœ¨æœ¬åœ°æŸ¥çœ‹ç”Ÿäº§ç¯å¢ƒç‰ˆæœ¬ï¼Œè¿è¡Œï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">gatsby serve</span><br></pre></td></tr></table></figure>

<p>æ¥ä¸‹æ¥ï¼Œå°±å¯ä»¥åœ¨<code>localhost:9000</code>è®¿é—®æˆ‘ä»¬åˆšæ‰åšçš„ç½‘ç«™äº†</p>
<p>æœ¬é¡¹ç›®çš„ <a href="https://github.com/Jacky-Summer/gatsby-blog-demo" target="_blank" rel="noopener">github åœ°å€</a></p>
<p>è‡³æ­¤ï¼Œæˆ‘ä»¬æ•™ç¨‹å°±ä»‹ç»åˆ°è¿™é‡Œäº†ã€‚</p>
<br>

<ul>
<li>psï¼š <a href="https://github.com/Jacky-Summer/personal-blog" target="_blank" rel="noopener">ä¸ªäººæŠ€æœ¯åšæ–‡ Github ä»“åº“</a>ï¼Œè§‰å¾—ä¸é”™çš„è¯æ¬¢è¿ starï¼Œç»™æˆ‘ä¸€ç‚¹é¼“åŠ±ç»§ç»­å†™ä½œå§~</li>
</ul>
]]></content>
      <categories>
        <category>Reactç¬”è®°</category>
      </categories>
      <tags>
        <tag>React</tag>
        <tag>Gatsby</tag>
        <tag>GraphQL</tag>
      </tags>
  </entry>
  <entry>
    <title>å®Œå…¨ææ‡‚ BFC</title>
    <url>/2020/07/05/%E5%AE%8C%E5%85%A8%E6%90%9E%E6%87%82-BFC/</url>
    <content><![CDATA[<p>BFC æ˜¯ CSS ä¸­ä¸€ä¸ªæ¯”è¾ƒé‡è¦çš„æ¦‚å¿µï¼Œä¹Ÿæ˜¯é¢è¯•ç»å¸¸è€ƒæŸ¥çš„ç‚¹â€¦</p>
<a id="more"></a>

<h2 id="ä»€ä¹ˆæ˜¯-BFC"><a href="#ä»€ä¹ˆæ˜¯-BFC" class="headerlink" title="ä»€ä¹ˆæ˜¯ BFC"></a>ä»€ä¹ˆæ˜¯ BFC</h2><p>BFC å…¨ç§°æ˜¯ Block Formatting Contextï¼Œå³å—æ ¼å¼åŒ–ä¸Šä¸‹æ–‡ã€‚</p>
<p>é™¤äº† BFCï¼Œè¿˜æœ‰ï¼š</p>
<ul>
<li>IFCï¼ˆè¡Œçº§æ ¼å¼åŒ–ä¸Šä¸‹æ–‡ï¼‰- inline å†…è”</li>
<li>GFCï¼ˆç½‘æ ¼å¸ƒå±€æ ¼å¼åŒ–ä¸Šä¸‹æ–‡ï¼‰- <code>display: grid</code></li>
<li>FFCï¼ˆè‡ªé€‚åº”æ ¼å¼åŒ–ä¸Šä¸‹æ–‡ï¼‰- <code>display: flex</code>æˆ–<code>display: inline-flex</code></li>
</ul>
<blockquote>
<p>æ³¨æ„ï¼šåŒä¸€ä¸ªå…ƒç´ ä¸èƒ½åŒæ—¶å­˜åœ¨äºä¸¤ä¸ª BFC ä¸­</p>
</blockquote>
<p>å®ƒæ˜¯ Web é¡µé¢çš„å¯è§† CSS æ¸²æŸ“çš„ä¸€éƒ¨åˆ†ï¼Œæ˜¯å—ç›’å­çš„å¸ƒå±€è¿‡ç¨‹å‘ç”Ÿçš„åŒºåŸŸï¼Œä¹Ÿæ˜¯æµ®åŠ¨å…ƒç´ ä¸å…¶ä»–å…ƒç´ äº¤äº’çš„åŒºåŸŸã€‚æ€ä¹ˆç†è§£å‘¢ï¼Ÿå®é™…å°±æ˜¯è¯´ BFC æ˜¯ä¸€ä¸ªæ¸²æŸ“åŒºåŸŸï¼Œå¹¶ä¸”æœ‰è‡ªå·±çš„ä¸€å¥—æ¸²æŸ“è§„åˆ™ï¼Œä½¿å…¶å†…éƒ¨å¸ƒå±€çš„å…ƒç´ å…·æœ‰ä¸€äº›ç‰¹æ€§ã€‚</p>
<p><strong>BFC æä¾›ä¸€ä¸ªç‹¬ç«‹çš„å¸ƒå±€ç¯å¢ƒï¼ŒBFC å†…éƒ¨çš„å…ƒç´ å¸ƒå±€ä¸å¤–éƒ¨äº’ä¸å½±å“ã€‚</strong></p>
<p><img src="https://user-gold-cdn.xitu.io/2020/7/4/17318faf333483aa?w=798&h=317&f=png&s=23237" alt=""></p>
<h2 id="å—çº§å…ƒç´ "><a href="#å—çº§å…ƒç´ " class="headerlink" title="å—çº§å…ƒç´ "></a>å—çº§å…ƒç´ </h2><p>CSS å±æ€§å€¼ display ä¸º blockï¼Œlist-itemï¼Œtable çš„å…ƒç´ ã€‚</p>
<p>å—çº§ç›’å…·æœ‰ä»¥ä¸‹ç‰¹æ€§ï¼š</p>
<ul>
<li>CSS å±æ€§å€¼ display ä¸º blockï¼Œlist-itemï¼Œtable æ—¶ï¼Œå®ƒå°±æ˜¯å—çº§å…ƒç´ </li>
<li>å¸ƒå±€ä¸Šï¼Œå—çº§ç›’å‘ˆç°ä¸ºç«–ç›´æ’åˆ—çš„å—</li>
<li>æ¯ä¸ªå—çº§ç›’éƒ½ä¼šå‚ä¸ BFC çš„åˆ›å»º</li>
<li>æ¯ä¸ªå—çº§å…ƒç´ éƒ½ä¼šè‡³å°‘ç”Ÿæˆä¸€ä¸ªå—çº§ç›’ï¼Œç§°ä¸ºä¸»å—çº§ç›’ï¼›ä¸€äº›å…ƒç´ å¯èƒ½ä¼šç”Ÿæˆé¢å¤–çš„å—çº§ç›’ï¼Œæ¯”å¦‚ <code>&lt;li&gt;</code>ï¼Œç”¨æ¥å­˜æ”¾é¡¹ç›®ç¬¦å·</li>
</ul>
<h2 id="åˆ›å»º-BFC"><a href="#åˆ›å»º-BFC" class="headerlink" title="åˆ›å»º BFC"></a>åˆ›å»º BFC</h2><p>ä»¥ä¸‹å…ƒç´ ä¼šåˆ›å»º BFC</p>
<ul>
<li>æ ¹å…ƒç´ ï¼ˆ<code>&lt;html&gt;</code>ï¼‰</li>
<li>æµ®åŠ¨å…ƒç´ ï¼ˆ<code>float</code>ä¸ä¸º<code>none</code>ï¼‰</li>
<li>ç»å¯¹å®šä½å…ƒç´ ï¼ˆ<code>position</code>ä¸º<code>absolute</code>æˆ–<code>fixed</code>ï¼‰</li>
<li>è¡¨æ ¼çš„æ ‡é¢˜å’Œå•å…ƒæ ¼ï¼ˆ<code>display</code> ä¸º <code>table-caption</code>ï¼Œ<code>table-cell</code>ï¼‰</li>
<li>åŒ¿åè¡¨æ ¼å•å…ƒæ ¼å…ƒç´ ï¼ˆ<code>display</code> ä¸º <code>table</code> æˆ– <code>inline-table</code>ï¼‰</li>
<li>è¡Œå†…å—å…ƒç´ ï¼ˆ<code>display</code> ä¸º <code>inline-block</code>ï¼‰</li>
<li><code>overflow</code> çš„å€¼ä¸ä¸º <code>visible</code> çš„å…ƒç´ </li>
<li>å¼¹æ€§å…ƒç´ ï¼ˆ<code>display</code> ä¸º <code>flex</code> æˆ– <code>inline-flex</code> çš„å…ƒç´ çš„ç›´æ¥å­å…ƒç´ ï¼‰</li>
<li>ç½‘æ ¼å…ƒç´ ï¼ˆ<code>display</code> ä¸º <code>grid</code> æˆ– <code>inline-grid</code> çš„å…ƒç´ çš„ç›´æ¥å­å…ƒç´ ï¼‰</li>
</ul>
<p>ä»¥ä¸Šæ˜¯ CSS2.1 è§„èŒƒå®šä¹‰çš„ BFC è§¦å‘æ–¹å¼ï¼Œåœ¨æœ€æ–°çš„ CSS3 è§„èŒƒä¸­ï¼Œå¼¹æ€§å…ƒç´ å’Œç½‘æ ¼å…ƒç´ ä¼šåˆ›å»º F(Flex)FC å’Œ G(Grid)FCã€‚</p>
<h2 id="BFC-çš„ç‰¹æ€§"><a href="#BFC-çš„ç‰¹æ€§" class="headerlink" title="BFC çš„ç‰¹æ€§"></a>BFC çš„ç‰¹æ€§</h2><ul>
<li>BFC æ˜¯é¡µé¢ä¸Šçš„ä¸€ä¸ªç‹¬ç«‹å®¹å™¨ï¼Œå®¹å™¨é‡Œé¢çš„å­å…ƒç´ ä¸ä¼šå½±å“å¤–é¢çš„å…ƒç´ ã€‚</li>
<li>BFC å†…éƒ¨çš„å—çº§ç›’ä¼šåœ¨å‚ç›´æ–¹å‘ä¸Šä¸€ä¸ªæ¥ä¸€ä¸ªæ’åˆ—</li>
<li>åŒä¸€ BFC ä¸‹çš„ç›¸é‚»å—çº§å…ƒç´ å¯èƒ½å‘ç”Ÿå¤–è¾¹è·æŠ˜å ï¼Œåˆ›å»ºæ–°çš„ BFC å¯ä»¥é¿å…å¤–è¾¹è·æŠ˜å </li>
<li>æ¯ä¸ªå…ƒç´ çš„å¤–è¾¹è·ç›’ï¼ˆmargin boxï¼‰çš„å·¦è¾¹ä¸åŒ…å«å—è¾¹æ¡†ç›’ï¼ˆborder boxï¼‰çš„å·¦è¾¹ç›¸æ¥è§¦ï¼ˆä»å³å‘å·¦çš„æ ¼å¼çš„è¯ï¼Œåˆ™ç›¸åï¼‰ï¼Œå³ä½¿å­˜åœ¨æµ®åŠ¨</li>
<li>æµ®åŠ¨ç›’çš„åŒºåŸŸä¸ä¼šå’Œ BFC é‡å </li>
<li>è®¡ç®— BFC çš„é«˜åº¦æ—¶ï¼Œæµ®åŠ¨å…ƒç´ ä¹Ÿä¼šå‚ä¸è®¡ç®—</li>
</ul>
<p>å¦‚æœä¸å¤ªç†è§£çš„ï¼Œåœ¨ä¸‹é¢ BFC çš„åº”ç”¨æˆ‘ä¼šæåŠã€‚</p>
<h2 id="BFC-çš„åº”ç”¨"><a href="#BFC-çš„åº”ç”¨" class="headerlink" title="BFC çš„åº”ç”¨"></a>BFC çš„åº”ç”¨</h2><h3 id="è‡ªé€‚åº”ä¸¤åˆ—å¸ƒå±€"><a href="#è‡ªé€‚åº”ä¸¤åˆ—å¸ƒå±€" class="headerlink" title="è‡ªé€‚åº”ä¸¤åˆ—å¸ƒå±€"></a>è‡ªé€‚åº”ä¸¤åˆ—å¸ƒå±€</h3><p>å·¦åˆ—æµ®åŠ¨ï¼ˆå®šå®½æˆ–ä¸å®šå®½éƒ½å¯ä»¥ï¼‰ï¼Œç»™å³åˆ—å¼€å¯ BFCã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;* html ä»£ç  *&#x2F;</span><br><span class="line">&lt;div&gt;</span><br><span class="line">    &lt;div class&#x3D;&quot;left&quot;&gt;æµ®åŠ¨å…ƒç´ ï¼Œæ— å›ºå®šå®½åº¦&lt;&#x2F;div&gt;</span><br><span class="line">    &lt;div class&#x3D;&quot;right&quot;&gt;è‡ªé€‚åº”&lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;div&gt;</span><br><span class="line"></span><br><span class="line">&#x2F;* css ä»£ç  *&#x2F;</span><br><span class="line">* &#123;</span><br><span class="line">    margin: 0;</span><br><span class="line">    padding: 0;</span><br><span class="line">&#125;</span><br><span class="line">.left &#123;</span><br><span class="line">    float: left;</span><br><span class="line">    height: 200px;</span><br><span class="line">    margin-right: 10px;</span><br><span class="line">    background-color: red;</span><br><span class="line">&#125;</span><br><span class="line">.right &#123;</span><br><span class="line">    overflow: hidden;</span><br><span class="line">    height: 200px;</span><br><span class="line">    background-color: yellow;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://user-gold-cdn.xitu.io/2020/7/4/1731a0544fd4461f?w=1919&h=234&f=png&s=13127" alt=""></p>
<ol>
<li>å°†å·¦åˆ—è®¾ä¸ºå·¦æµ®åŠ¨ï¼Œå°†è‡ªèº«é«˜åº¦å¡Œé™·ï¼Œä½¿å¾—å…¶å®ƒå—çº§å…ƒç´ å¯ä»¥å’Œå®ƒå æ®åŒä¸€è¡Œçš„ä½ç½®ã€‚</li>
<li>å³åˆ—ä¸º div å—çº§å…ƒç´ ï¼Œåˆ©ç”¨å…¶è‡ªèº«çš„æµç‰¹æ€§å æ»¡æ•´è¡Œã€‚</li>
<li>å³åˆ—è®¾ç½®<code>overflow: hidden</code>,è§¦å‘ BFC ç‰¹æ€§ï¼Œä½¿å…¶è‡ªèº«ä¸å·¦åˆ—çš„æµ®åŠ¨å…ƒç´ éš”ç¦»å¼€ï¼Œä¸å æ»¡æ•´è¡Œã€‚</li>
</ol>
<p>è¿™å³æ˜¯ä¸Šé¢è¯´çš„ BFC çš„ç‰¹æ€§ä¹‹ä¸€ï¼š<strong>æµ®åŠ¨ç›’çš„åŒºåŸŸä¸ä¼šå’Œ BFC é‡å </strong></p>
<h3 id="é˜²æ­¢å¤–è¾¹è·ï¼ˆmarginï¼‰é‡å "><a href="#é˜²æ­¢å¤–è¾¹è·ï¼ˆmarginï¼‰é‡å " class="headerlink" title="é˜²æ­¢å¤–è¾¹è·ï¼ˆmarginï¼‰é‡å "></a>é˜²æ­¢å¤–è¾¹è·ï¼ˆmarginï¼‰é‡å </h3><h4 id="å…„å¼Ÿå…ƒç´ ä¹‹é—´çš„å¤–è¾¹è·é‡å "><a href="#å…„å¼Ÿå…ƒç´ ä¹‹é—´çš„å¤–è¾¹è·é‡å " class="headerlink" title="å…„å¼Ÿå…ƒç´ ä¹‹é—´çš„å¤–è¾¹è·é‡å "></a>å…„å¼Ÿå…ƒç´ ä¹‹é—´çš„å¤–è¾¹è·é‡å </h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;* html ä»£ç  *&#x2F;</span><br><span class="line">&lt;div&gt;</span><br><span class="line">    &lt;div class&#x3D;&quot;child1&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class="line">    &lt;div class&#x3D;&quot;child2&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;div&gt;</span><br><span class="line"></span><br><span class="line">&#x2F;* css ä»£ç  *&#x2F;</span><br><span class="line">* &#123;</span><br><span class="line">    margin: 0;</span><br><span class="line">    padding: 0;</span><br><span class="line">&#125;</span><br><span class="line">.child1 &#123;</span><br><span class="line">    width: 100px;</span><br><span class="line">    height: 100px;</span><br><span class="line">    margin-bottom: 10px;</span><br><span class="line">    background-color: red;</span><br><span class="line">&#125;</span><br><span class="line">.child2 &#123;</span><br><span class="line">    width: 100px;</span><br><span class="line">    height: 100px;</span><br><span class="line">    margin-top: 20px;</span><br><span class="line">    background-color: green;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://user-gold-cdn.xitu.io/2020/7/4/17318cb5761f328e?w=183&h=220&f=png&s=2328" alt=""></p>
<p>ä¸¤ä¸ªå—çº§å…ƒç´ ï¼Œçº¢è‰² div è·ç¦»åº•éƒ¨ 10pxï¼Œç»¿è‰² div è·ç¦»é¡¶éƒ¨ 20pxï¼ŒæŒ‰é“ç†åº”è¯¥ä¸¤ä¸ªå—çº§å…ƒç´ ç›¸è· 30px æ‰å¯¹ï¼Œä½†å®é™…å´æ˜¯å–è·ç¦»è¾ƒå¤§çš„ä¸€ä¸ªï¼Œå³ 20pxã€‚</p>
<blockquote>
<p>å—çº§å…ƒç´ çš„ä¸Šå¤–è¾¹è·å’Œä¸‹å¤–è¾¹è·æœ‰æ—¶ä¼šåˆå¹¶ï¼ˆæˆ–æŠ˜å ï¼‰ä¸ºä¸€ä¸ªå¤–è¾¹è·ï¼Œå…¶å¤§å°å–å…¶ä¸­çš„è¾ƒå¤§è€…ï¼Œè¿™ç§è¡Œä¸ºç§°ä¸ºå¤–è¾¹è·æŠ˜å ï¼ˆé‡å ï¼‰ï¼Œæ³¨æ„è¿™ä¸ªæ˜¯å‘ç”Ÿåœ¨å±äºåŒä¸€ BFC ä¸‹çš„å—çº§å…ƒç´ ä¹‹é—´</p>
</blockquote>
<p>æ ¹æ® BFC ç‰¹æ€§ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„ BFC å°±ä¸ä¼šå‘ç”Ÿ margin æŠ˜å äº†ã€‚æ¯”å¦‚æˆ‘ä»¬åœ¨ä»–ä»¬ä¸¤ä¸ª div å¤–å±‚å†åŒ…è£¹ä¸€å±‚å®¹å™¨ï¼ŒåŠ å±æ€§<code>overflow: hidden</code>ï¼Œè§¦å‘ BFCï¼Œé‚£ä¹ˆä¸¤ä¸ª div å°±ä¸å±äºåŒä¸ª BFC äº†ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;* html ä»£ç  *&#x2F;</span><br><span class="line">&lt;div&gt;</span><br><span class="line">    &lt;div class&#x3D;&quot;parent&quot;&gt;</span><br><span class="line">        &lt;div class&#x3D;&quot;child1&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line">    &lt;div class&#x3D;&quot;parent&quot;&gt;</span><br><span class="line">        &lt;div class&#x3D;&quot;child2&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;div&gt;</span><br><span class="line"></span><br><span class="line">&#x2F;* css ä»£ç  *&#x2F;</span><br><span class="line">.parent &#123;</span><br><span class="line">    overflow: hidden;</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;* ... *&#x2F;</span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ªå…³äºå…„å¼Ÿå…ƒç´ å¤–è¾¹è·å åŠ çš„é—®é¢˜ï¼Œé™¤äº†è§¦å‘ BFC ä¹Ÿæœ‰å…¶ä»–æ–¹æ¡ˆï¼Œæ¯”å¦‚ä½ ç»Ÿä¸€åªç”¨ä¸Šè¾¹è·æˆ–ä¸‹è¾¹è·ï¼Œå°±ä¸ä¼šæœ‰ä¸Šé¢çš„é—®é¢˜ã€‚</p>
<p><img src="https://user-gold-cdn.xitu.io/2020/7/4/17318dc6636f418f?w=209&h=231&f=png&s=2376" alt=""></p>
<h4 id="çˆ¶å­å…ƒç´ çš„å¤–è¾¹è·é‡å "><a href="#çˆ¶å­å…ƒç´ çš„å¤–è¾¹è·é‡å " class="headerlink" title="çˆ¶å­å…ƒç´ çš„å¤–è¾¹è·é‡å "></a>çˆ¶å­å…ƒç´ çš„å¤–è¾¹è·é‡å </h4><p>è¿™ç§æƒ…å†µå­˜åœ¨çˆ¶å…ƒç´ ä¸å…¶ç¬¬ä¸€ä¸ªæˆ–æœ€åä¸€ä¸ªå­å…ƒç´ ä¹‹é—´ï¼ˆåµŒå¥—å…ƒç´ ï¼‰ã€‚<br>å¦‚æœåœ¨çˆ¶å…ƒç´ ä¸å…¶ç¬¬ä¸€ä¸ª/æœ€åä¸€ä¸ªå­å…ƒç´ ä¹‹é—´ä¸å­˜åœ¨è¾¹æ¡†ã€å†…è¾¹è·ã€è¡Œå†…å†…å®¹ï¼Œä¹Ÿæ²¡æœ‰åˆ›å»ºå—æ ¼å¼åŒ–ä¸Šä¸‹æ–‡ã€æˆ–è€…æ¸…é™¤æµ®åŠ¨å°†ä¸¤è€…çš„å¤–è¾¹è· åˆ†å¼€ï¼Œæ­¤æ—¶å­å…ƒç´ çš„å¤–è¾¹è·ä¼šâ€œæº¢å‡ºâ€åˆ°çˆ¶å…ƒç´ çš„å¤–é¢ã€‚</p>
<p>å¦‚ä¸‹ä»£ç ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;* HTML ä»£ç  *&#x2F;</span><br><span class="line">&lt;div id&#x3D;&quot;parent&quot;&gt;</span><br><span class="line">  &lt;div id&#x3D;&quot;child&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;div&gt;</span><br><span class="line"></span><br><span class="line">&#x2F;* CSS ä»£ç  *&#x2F;</span><br><span class="line">* &#123;</span><br><span class="line">    margin: 0;</span><br><span class="line">    padding: 0;</span><br><span class="line">&#125;</span><br><span class="line">#parent &#123;</span><br><span class="line">    width: 200px;</span><br><span class="line">    height: 200px;</span><br><span class="line">    background-color: green;</span><br><span class="line">    margin-top: 20px;</span><br><span class="line">&#125;</span><br><span class="line">#child &#123;</span><br><span class="line">    width: 100px;</span><br><span class="line">    height: 100px;</span><br><span class="line">    background-color: red;</span><br><span class="line">    margin-top: 30px;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://user-gold-cdn.xitu.io/2020/7/4/1731a48a81bc27d9?w=376&h=236&f=png&s=6696" alt=""></p>
<p>å¦‚ä¸Šå›¾ï¼Œçº¢è‰²çš„ div åœ¨ç»¿è‰²çš„ div å†…éƒ¨ï¼Œä¸”è®¾ç½®äº†<code>margin-top</code>ä¸º 30pxï¼Œä½†æˆ‘ä»¬å‘ç°çº¢è‰² div çš„é¡¶éƒ¨ä¸ç»¿è‰² div é¡¶éƒ¨é‡åˆï¼Œå¹¶æ²¡æœ‰è·ç¦»é¡¶éƒ¨ 30pxï¼Œè€Œæ˜¯æº¢å‡ºåˆ°çˆ¶å…ƒç´ çš„å¤–é¢è®¡ç®—ã€‚å³æœ¬æ¥çˆ¶å…ƒç´ è·ç¦»é¡¶éƒ¨åªæœ‰ 20pxï¼Œè¢«å­å…ƒç´ æº¢å‡ºå½±å“ï¼Œå¤–è¾¹è·é‡å ï¼Œå–è¾ƒå¤§çš„å€¼ï¼Œåˆ™è·ç¦»é¡¶éƒ¨ 30pxã€‚</p>
<p>è§£å†³åŠæ³•ï¼š</p>
<ol>
<li>ç»™çˆ¶å…ƒç´ è§¦å‘ BFCï¼ˆå¦‚æ·»åŠ <code>overflow: hidden</code>ï¼‰</li>
<li>ç»™çˆ¶å…ƒç´ æ·»åŠ  border</li>
<li>ç»™çˆ¶å…ƒç´ æ·»åŠ  padding</li>
</ol>
<p>è¿™æ ·å°±èƒ½å®ç°æˆ‘ä»¬æœŸæœ›çš„æ•ˆæœäº†ï¼š</p>
<p><img src="https://user-gold-cdn.xitu.io/2020/7/4/1731a50faed50d4d?w=249&h=221&f=png&s=2040" alt=""></p>
<h3 id="æ¸…é™¤æµ®åŠ¨è§£å†³ä»¤çˆ¶å…ƒç´ é«˜åº¦åå¡Œçš„é—®é¢˜"><a href="#æ¸…é™¤æµ®åŠ¨è§£å†³ä»¤çˆ¶å…ƒç´ é«˜åº¦åå¡Œçš„é—®é¢˜" class="headerlink" title="æ¸…é™¤æµ®åŠ¨è§£å†³ä»¤çˆ¶å…ƒç´ é«˜åº¦åå¡Œçš„é—®é¢˜"></a>æ¸…é™¤æµ®åŠ¨è§£å†³ä»¤çˆ¶å…ƒç´ é«˜åº¦åå¡Œçš„é—®é¢˜</h3><p>å½“å®¹å™¨å†…å­å…ƒç´ è®¾ç½®æµ®åŠ¨æ—¶ï¼Œè„±ç¦»äº†æ–‡æ¡£æµï¼Œå®¹å™¨ä¸­æ€»çˆ¶å…ƒç´ é«˜åº¦åªæœ‰è¾¹æ¡†éƒ¨åˆ†é«˜åº¦</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;* html ä»£ç  *&#x2F;</span><br><span class="line">&lt;div class&#x3D;&quot;parent&quot;&gt;</span><br><span class="line">  &lt;div class&#x3D;&quot;child&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;div&gt;</span><br><span class="line"></span><br><span class="line">&#x2F;* css ä»£ç  *&#x2F;</span><br><span class="line">* &#123;</span><br><span class="line">    margin: 0;</span><br><span class="line">    padding: 0;</span><br><span class="line">&#125;</span><br><span class="line">.parent &#123;</span><br><span class="line">    border: 4px solid red;</span><br><span class="line">&#125;</span><br><span class="line">.child &#123;</span><br><span class="line">    float: left;</span><br><span class="line">    width: 200px;</span><br><span class="line">    height: 200px;</span><br><span class="line">    background-color: blue;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://user-gold-cdn.xitu.io/2020/7/4/1731a132272ea410?w=1927&h=209&f=png&s=16771" alt=""></p>
<p><img src="https://user-gold-cdn.xitu.io/2020/7/4/1731a249e4c9c33f?w=338&h=679&f=png&s=38121" alt=""></p>
<p>è§£å†³åŠæ³•ï¼šç»™çˆ¶å…ƒç´ è§¦å‘ BFCï¼Œä½¿å…¶æœ‰ BFC ç‰¹æ€§ï¼š<strong>è®¡ç®— BFC çš„é«˜åº¦æ—¶ï¼Œæµ®åŠ¨å…ƒç´ ä¹Ÿä¼šå‚ä¸è®¡ç®—</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">.parent &#123;</span><br><span class="line">    overflow: hidden;</span><br><span class="line">    border: 4px solid red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://user-gold-cdn.xitu.io/2020/7/4/1731a1fd01267b9d?w=1920&h=237&f=png&s=10195" alt=""></p>
<p>ä¸Šé¢æˆ‘ä»¬éƒ½æ˜¯ç”¨çš„<code>overflow: hidden</code>è§¦å‘ BFCï¼Œå› ä¸ºç¡®å®å¸¸ç”¨å˜›ï¼Œä½†æ˜¯è§¦å‘ BFC ä¹Ÿä¸æ­¢æ˜¯åªæœ‰è¿™ä¸€ç§æ–¹æ³•ï¼Œå¦‚ä¸Šé¢å†™çš„æ‰€ç¤ºã€‚</p>
<p>æ¯”å¦‚å¯ä»¥è®¾ç½®<code>float: left</code>; <code>float: right</code>; <code>display: inline-block</code>; <code>overflow: auto</code>; <code>display: flex</code>; <code>display:&quot; table</code>; <code>position</code>ä¸º<code>absolute</code>æˆ–<code>fixed</code>ç­‰ç­‰ï¼Œè¿™äº›éƒ½å¯ä»¥è§¦å‘ï¼Œä¸è¿‡çˆ¶å…ƒç´ å®½åº¦è¡¨ç°ä¸ä¸€å®šç›¸åŒï¼Œä½†çˆ¶å…ƒç´ é«˜åº¦éƒ½è¢«æ’‘å‡ºæ¥äº†ã€‚å½“ç„¶å®é™…è¿ç”¨å¯ä¸æ˜¯éšä¾¿æŒ‘ä¸€ä¸ªèµ°ï¼Œè¿˜æ˜¯æ ¹æ®åœºæ™¯é€‰æ‹©ã€‚</p>
<br>

<ul>
<li>psï¼š <a href="https://github.com/Jacky-Summer/personal-blog" target="_blank" rel="noopener">ä¸ªäººæŠ€æœ¯åšæ–‡ Github ä»“åº“</a>ï¼Œè§‰å¾—ä¸é”™çš„è¯æ¬¢è¿ starï¼Œé¼“åŠ±æˆ‘ç»§ç»­å†™ä½œå§~</li>
</ul>
]]></content>
      <categories>
        <category>CSSç³»åˆ—</category>
      </categories>
  </entry>
  <entry>
    <title>ä¸€æ–‡æ±‡æ€» CSS ä¸¤åˆ—å¸ƒå±€å’Œä¸‰åˆ—å¸ƒå±€</title>
    <url>/2020/06/27/%E4%B8%80%E6%96%87%E6%B1%87%E6%80%BB-CSS-%E4%B8%A4%E5%88%97%E5%B8%83%E5%B1%80%E5%92%8C%E4%B8%89%E5%88%97%E5%B8%83%E5%B1%80/</url>
    <content><![CDATA[<p>éšç€å¤§å‰ç«¯çš„å‘å±•ï¼ŒUI æ¡†æ¶å±‚å‡ºä¸ç©·ï¼Œè®©æˆ‘ä»¬å‰ç«¯å¼€å‘å¯¹ CSS çš„èƒ½åŠ›è¦æ±‚å˜å¾—æ²¡é‚£ä¹ˆé«˜æˆ–è€…æ²¡é‚£ä¹ˆä¸¥è‹›ï¼Œèµ·ç é‡è¦æ€§æ˜¯æ¯”ä¸ä¸Š JS ç¼–ç¨‹çš„ã€‚ä½†æ˜¯ï¼ŒåŸºç¡€çš„ CSS ä¾ç„¶éœ€è¦æˆ‘ä»¬ç†Ÿç»ƒæŒæ¡ï¼Œä»Šå¤©å°±æ¥æ€»ç»“å†™ä¸‹ CSS å¸ƒå±€çš„æ–¹å¼ã€‚</p>
<a id="more"></a>

<h2 id="ä¸¤åˆ—å¸ƒå±€"><a href="#ä¸¤åˆ—å¸ƒå±€" class="headerlink" title="ä¸¤åˆ—å¸ƒå±€"></a>ä¸¤åˆ—å¸ƒå±€</h2><h3 id="å·¦åˆ—å®šå®½ï¼Œå³åˆ—è‡ªé€‚åº”"><a href="#å·¦åˆ—å®šå®½ï¼Œå³åˆ—è‡ªé€‚åº”" class="headerlink" title="å·¦åˆ—å®šå®½ï¼Œå³åˆ—è‡ªé€‚åº”"></a>å·¦åˆ—å®šå®½ï¼Œå³åˆ—è‡ªé€‚åº”</h3><p><img src="https://user-gold-cdn.xitu.io/2020/6/25/172ebffbad247324?w=1918&h=427&f=png&s=21351" alt=""></p>
<h4 id="float-margin-å¸ƒå±€"><a href="#float-margin-å¸ƒå±€" class="headerlink" title="float + margin å¸ƒå±€"></a>float + margin å¸ƒå±€</h4><p>html ä»£ç </p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"left"</span>&gt;</span>å·¦åˆ—å®šå®½<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"right"</span>&gt;</span>å³åˆ—è‡ªé€‚åº”<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>css ä»£ç ï¼š</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-id">#left</span> &#123;</span><br><span class="line">  <span class="attribute">float</span>: left;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">400px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: lightblue;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#right</span> &#123;</span><br><span class="line">  <span class="attribute">margin-left</span>: <span class="number">200px</span>; <span class="comment">/* å¤§äºæˆ–ç­‰äºå·¦åˆ—çš„å®½åº¦ */</span></span><br><span class="line">  <span class="attribute">height</span>: <span class="number">400px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: lightgreen;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="float-overflow-å¸ƒå±€"><a href="#float-overflow-å¸ƒå±€" class="headerlink" title="float + overflow å¸ƒå±€"></a>float + overflow å¸ƒå±€</h4><p>html ä»£ç </p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"left"</span>&gt;</span>å·¦åˆ—å®šå®½<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"right"</span>&gt;</span>å³åˆ—è‡ªé€‚åº”<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>css ä»£ç </p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-id">#left</span> &#123;</span><br><span class="line">  <span class="attribute">float</span>: left;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">400px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: lightblue;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#right</span> &#123;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">400px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: lightgreen;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="ç»å¯¹å®šä½å¸ƒå±€"><a href="#ç»å¯¹å®šä½å¸ƒå±€" class="headerlink" title="ç»å¯¹å®šä½å¸ƒå±€"></a>ç»å¯¹å®šä½å¸ƒå±€</h4><p>html ä»£ç ï¼š</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"parent"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"left"</span>&gt;</span>å·¦åˆ—å®šå®½<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"right"</span>&gt;</span>å³åˆ—è‡ªé€‚åº”<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>css ä»£ç ï¼š</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-id">#parent</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#left</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">400px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: lightblue;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#right</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">400px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: lightgreen;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="table-å¸ƒå±€"><a href="#table-å¸ƒå±€" class="headerlink" title="table å¸ƒå±€"></a>table å¸ƒå±€</h4><p>html ä»£ç ï¼š</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"parent"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"left"</span>&gt;</span>å·¦åˆ—å®šå®½<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"right"</span>&gt;</span>å³åˆ—è‡ªé€‚åº”<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>css ä»£ç ï¼š</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-id">#parent</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">400px</span>;</span><br><span class="line">  <span class="attribute">display</span>: table;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#left</span>,</span><br><span class="line"><span class="selector-id">#right</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: table-cell;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#left</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: lightblue;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#right</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: lightgreen;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="flex-å¸ƒå±€"><a href="#flex-å¸ƒå±€" class="headerlink" title="flex å¸ƒå±€"></a>flex å¸ƒå±€</h4><p>html ä»£ç ï¼š</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"parent"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"left"</span>&gt;</span>å·¦åˆ—å®šå®½<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"right"</span>&gt;</span>å³åˆ—è‡ªé€‚åº”<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>css ä»£ç ï¼š</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-id">#parent</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">400px</span>;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#left</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: lightblue;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#right</span> &#123;</span><br><span class="line">  <span class="attribute">flex</span>: <span class="number">1</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: lightgreen;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="grid-ç½‘æ ¼å¸ƒå±€"><a href="#grid-ç½‘æ ¼å¸ƒå±€" class="headerlink" title="grid ç½‘æ ¼å¸ƒå±€"></a>grid ç½‘æ ¼å¸ƒå±€</h4><p>html ä»£ç ï¼š</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"parent"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"left"</span>&gt;</span>å·¦åˆ—å®šå®½<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"right"</span>&gt;</span>å³åˆ—è‡ªé€‚åº”<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>css ä»£ç ï¼š</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-id">#parent</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">400px</span>;</span><br><span class="line">  <span class="attribute">display</span>: grid;</span><br><span class="line">  <span class="attribute">grid-template-columns</span>: <span class="number">200px</span> auto;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#left</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: lightblue;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#right</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: lightgreen;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="å·¦åˆ—ä¸å®šå®½ï¼Œå³åˆ—è‡ªé€‚åº”"><a href="#å·¦åˆ—ä¸å®šå®½ï¼Œå³åˆ—è‡ªé€‚åº”" class="headerlink" title="å·¦åˆ—ä¸å®šå®½ï¼Œå³åˆ—è‡ªé€‚åº”"></a>å·¦åˆ—ä¸å®šå®½ï¼Œå³åˆ—è‡ªé€‚åº”</h3><p>å·¦åˆ—ç›’å­å®½åº¦éšç€å†…å®¹å¢åŠ æˆ–å‡å°‘å‘ç”Ÿå˜åŒ–ï¼Œå³åˆ—ç›’å­è‡ªé€‚åº”</p>
<h4 id="float-overflow-å¸ƒå±€-1"><a href="#float-overflow-å¸ƒå±€-1" class="headerlink" title="float + overflow å¸ƒå±€"></a>float + overflow å¸ƒå±€</h4><p>html ä»£ç ï¼š</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"left"</span>&gt;</span>å·¦åˆ—ä¸å®šå®½<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"right"</span>&gt;</span>å³åˆ—è‡ªé€‚åº”<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>css ä»£ç ï¼š</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-id">#left</span> &#123;</span><br><span class="line">  <span class="attribute">float</span>: left;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">400px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: lightblue;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#right</span> &#123;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">400px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: lightgreen;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="flex-å¸ƒå±€-1"><a href="#flex-å¸ƒå±€-1" class="headerlink" title="flex å¸ƒå±€"></a>flex å¸ƒå±€</h4><p>html ä»£ç ï¼š</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"parent"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"left"</span>&gt;</span>å·¦åˆ—ä¸å®šå®½<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"right"</span>&gt;</span>å³åˆ—è‡ªé€‚åº”<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>css ä»£ç ï¼š</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-id">#parent</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">400px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#left</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: lightblue;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#right</span> &#123;</span><br><span class="line">  <span class="attribute">flex</span>: <span class="number">1</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: lightgreen;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="grid-å¸ƒå±€"><a href="#grid-å¸ƒå±€" class="headerlink" title="grid å¸ƒå±€"></a>grid å¸ƒå±€</h4><p>html ä»£ç ï¼š</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"parent"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"left"</span>&gt;</span>å·¦åˆ—ä¸å®šå®½<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"right"</span>&gt;</span>å³åˆ—è‡ªé€‚åº”<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>css ä»£ç ï¼š</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-id">#parent</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: grid;</span><br><span class="line">  <span class="attribute">grid-template-columns</span>: auto <span class="number">1</span>fr;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">400px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#left</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: lightblue;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#right</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: lightgreen;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ä¸‰åˆ—å¸ƒå±€"><a href="#ä¸‰åˆ—å¸ƒå±€" class="headerlink" title="ä¸‰åˆ—å¸ƒå±€"></a>ä¸‰åˆ—å¸ƒå±€</h2><h3 id="ä¸¤åˆ—å®šå®½ï¼Œä¸€åˆ—è‡ªé€‚åº”"><a href="#ä¸¤åˆ—å®šå®½ï¼Œä¸€åˆ—è‡ªé€‚åº”" class="headerlink" title="ä¸¤åˆ—å®šå®½ï¼Œä¸€åˆ—è‡ªé€‚åº”"></a>ä¸¤åˆ—å®šå®½ï¼Œä¸€åˆ—è‡ªé€‚åº”</h3><p><img src="https://user-gold-cdn.xitu.io/2020/6/26/172ee126919a5ecb?w=1916&h=408&f=png&s=21184" alt=""></p>
<h4 id="float-margin-å¸ƒå±€-1"><a href="#float-margin-å¸ƒå±€-1" class="headerlink" title="float + margin å¸ƒå±€"></a>float + margin å¸ƒå±€</h4><p>html ä»£ç ï¼š</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"parent"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"left"</span>&gt;</span>å·¦åˆ—å®šå®½<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"center"</span>&gt;</span>ä¸­é—´åˆ—å®šå®½<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"right"</span>&gt;</span>å³åˆ—è‡ªé€‚åº”<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>css ä»£ç ï¼š</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-id">#parent</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">400px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#left</span> &#123;</span><br><span class="line">  <span class="attribute">float</span>: left;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">400px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: lightblue;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#center</span> &#123;</span><br><span class="line">  <span class="attribute">float</span>: left;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">400px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: lightgrey;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#right</span> &#123;</span><br><span class="line">  <span class="attribute">margin-left</span>: <span class="number">300px</span>; <span class="comment">/* å·¦åˆ—çš„å®½åº¦ + ä¸­é—´åˆ—çš„å®½åº¦ */</span></span><br><span class="line">  <span class="attribute">height</span>: <span class="number">400px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: lightgreen;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="float-overflow-å¸ƒå±€-2"><a href="#float-overflow-å¸ƒå±€-2" class="headerlink" title="float + overflow å¸ƒå±€"></a>float + overflow å¸ƒå±€</h4><p>html ä»£ç ï¼š</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"parent"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"left"</span>&gt;</span>å·¦åˆ—å®šå®½<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"center"</span>&gt;</span>ä¸­é—´åˆ—å®šå®½<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"right"</span>&gt;</span>å³åˆ—è‡ªé€‚åº”<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>css ä»£ç ï¼š</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-id">#parent</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">400px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#left</span> &#123;</span><br><span class="line">  <span class="attribute">float</span>: left;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">400px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: lightblue;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#center</span> &#123;</span><br><span class="line">  <span class="attribute">float</span>: left;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">400px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: lightgrey;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#right</span> &#123;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">400px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: lightgreen;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="table-å¸ƒå±€-1"><a href="#table-å¸ƒå±€-1" class="headerlink" title="table å¸ƒå±€"></a>table å¸ƒå±€</h4><p>html ä»£ç ï¼š</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"parent"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"left"</span>&gt;</span>å·¦åˆ—å®šå®½<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"center"</span>&gt;</span>ä¸­é—´åˆ—å®šå®½<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"right"</span>&gt;</span>å³åˆ—è‡ªé€‚åº”<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>css ä»£ç ï¼š</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-id">#parent</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: table;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">400px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#left</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: table-cell;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: lightblue;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#center</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: table-cell;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: lightgrey;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#right</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: table-cell;</span><br><span class="line">  <span class="attribute">background-color</span>: lightgreen;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="flex-å¸ƒå±€-2"><a href="#flex-å¸ƒå±€-2" class="headerlink" title="flex å¸ƒå±€"></a>flex å¸ƒå±€</h4><p>html ä»£ç ï¼š</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"parent"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"left"</span>&gt;</span>å·¦åˆ—å®šå®½<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"center"</span>&gt;</span>ä¸­é—´åˆ—å®šå®½<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"right"</span>&gt;</span>å³åˆ—è‡ªé€‚åº”<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>css ä»£ç ï¼š</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-id">#parent</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">400px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#left</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: lightblue;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#center</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: lightgrey;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#right</span> &#123;</span><br><span class="line">  <span class="attribute">flex</span>: <span class="number">1</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: lightgreen;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="grid-å¸ƒå±€-1"><a href="#grid-å¸ƒå±€-1" class="headerlink" title="grid å¸ƒå±€"></a>grid å¸ƒå±€</h4><p>html ä»£ç </p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"parent"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"left"</span>&gt;</span>å·¦åˆ—å®šå®½<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"center"</span>&gt;</span>ä¸­é—´åˆ—å®šå®½<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"right"</span>&gt;</span>å³åˆ—è‡ªé€‚åº”<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>css ä»£ç </p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-id">#parent</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: grid;</span><br><span class="line">  <span class="attribute">grid-template-columns</span>: <span class="number">100px</span> <span class="number">200px</span> auto;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">400px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#left</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: lightblue;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#center</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: lightgrey;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#right</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: lightgreen;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="å·¦å³å®šå®½ï¼Œä¸­é—´è‡ªé€‚åº”"><a href="#å·¦å³å®šå®½ï¼Œä¸­é—´è‡ªé€‚åº”" class="headerlink" title="å·¦å³å®šå®½ï¼Œä¸­é—´è‡ªé€‚åº”"></a>å·¦å³å®šå®½ï¼Œä¸­é—´è‡ªé€‚åº”</h3><p><img src="https://user-gold-cdn.xitu.io/2020/6/27/172f36b76f3065b5?w=1914&h=409&f=png&s=21663" alt=""></p>
<p>åœ£æ¯å¸ƒå±€å’ŒåŒé£ç¿¼å¸ƒå±€ç›®çš„éƒ½æ˜¯å¸Œæœ›å…ˆåŠ è½½çš„æ˜¯ä¸­é—´çš„éƒ¨åˆ†ï¼Œç„¶åå†å¼€å§‹åŠ è½½ left å’Œ right ä¸¤éƒ¨åˆ†ç›¸å¯¹æ¥è¯´ä¸æ˜¯å¾ˆé‡è¦çš„ä¸œè¥¿ã€‚</p>
<h4 id="åœ£æ¯å¸ƒå±€"><a href="#åœ£æ¯å¸ƒå±€" class="headerlink" title="åœ£æ¯å¸ƒå±€"></a>åœ£æ¯å¸ƒå±€</h4><p>åœ£æ¯å¸ƒå±€ï¼šä¸ºäº†è®©ä¸­é—´çš„å†…å®¹ä¸è¢«é®æŒ¡ï¼Œå°†ä¸­é—´ divï¼ˆæˆ–æœ€å¤–å±‚çˆ¶ divï¼‰è®¾ç½® padding-left å’Œ padding-right ï¼ˆå€¼ç­‰äº left å’Œ right çš„å®½åº¦ï¼‰ï¼Œå°†å·¦å³ä¸¤ä¸ª div ç”¨ç›¸å¯¹å¸ƒå±€ position: relative å¹¶åˆ†åˆ«é…åˆ left å’Œ right å±æ€§ï¼Œä»¥ä¾¿å·¦å³ä¸¤æ  div ç§»åŠ¨åä¸é®æŒ¡ä¸­é—´ divã€‚</p>
<p>html ä»£ç ï¼š</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"parent"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"center"</span>&gt;</span>ä¸­é—´åˆ—<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"left"</span>&gt;</span>å·¦åˆ—<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"right"</span>&gt;</span>å³åˆ—<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>css ä»£ç ï¼š</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-id">#parent</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">400px</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#left</span>,</span><br><span class="line"><span class="selector-id">#right</span> &#123;</span><br><span class="line">  <span class="attribute">float</span>: left;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">background-color</span>: lightblue;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#left</span> &#123;</span><br><span class="line">  <span class="attribute">margin-left</span>: -<span class="number">100%</span>; <span class="comment">/* ä½¿ #left ä¸Šå»ä¸€è¡Œ */</span></span><br><span class="line">  <span class="attribute">left</span>: -<span class="number">200px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#right</span> &#123;</span><br><span class="line">  <span class="attribute">right</span>: -<span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">margin-left</span>: -<span class="number">200px</span>; <span class="comment">/* ä½¿ #right ä¸Šå»ä¸€è¡Œ */</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#center</span> &#123;</span><br><span class="line">  <span class="attribute">float</span>: left;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: lightgrey;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="åŒé£ç¿¼å¸ƒå±€"><a href="#åŒé£ç¿¼å¸ƒå±€" class="headerlink" title="åŒé£ç¿¼å¸ƒå±€"></a>åŒé£ç¿¼å¸ƒå±€</h4><p>åŒé£ç¿¼å¸ƒå±€ï¼Œä¸ºäº†ä¸­é—´ div å†…å®¹ä¸è¢«é®æŒ¡ï¼Œç›´æ¥åœ¨ä¸­é—´ div å†…éƒ¨åˆ›å»ºå­ div ç”¨äºæ”¾ç½®å†…å®¹ï¼Œåœ¨è¯¥å­ div é‡Œç”¨ margin-left å’Œ margin-right ä¸ºå·¦å³ä¸¤æ  div ç•™å‡ºä½ç½®ã€‚</p>
<p>html ä»£ç ï¼š</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"parent"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"center"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"center-inside"</span>&gt;</span>ä¸­é—´åˆ—<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"left"</span>&gt;</span>å·¦åˆ—<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"right"</span>&gt;</span>å³åˆ—<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>css ä»£ç ï¼š</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-id">#left</span>,</span><br><span class="line"><span class="selector-id">#right</span> &#123;</span><br><span class="line">  <span class="attribute">float</span>: left;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">400px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: lightblue;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#left</span> &#123;</span><br><span class="line">  <span class="attribute">margin-left</span>: -<span class="number">100%</span>; <span class="comment">/* ä½¿ #left ä¸Šå»ä¸€è¡Œ */</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#right</span> &#123;</span><br><span class="line">  <span class="attribute">margin-left</span>: -<span class="number">200px</span>; <span class="comment">/* ä½¿ #right ä¸Šå»ä¸€è¡Œ */</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#center</span> &#123;</span><br><span class="line">  <span class="attribute">float</span>: left;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">400px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: lightgrey;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#center-inside</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span> <span class="number">200px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="flex-å®ç°"><a href="#flex-å®ç°" class="headerlink" title="flex å®ç°"></a>flex å®ç°</h3><p>html ä»£ç ï¼š</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"parent"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"center"</span>&gt;</span>ä¸­é—´åˆ—<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"left"</span>&gt;</span>å·¦åˆ—<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"right"</span>&gt;</span>å³åˆ—<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>css ä»£ç ï¼š</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-id">#parent</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#left</span>,</span><br><span class="line"><span class="selector-id">#right</span> &#123;</span><br><span class="line">  <span class="attribute">flex</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">400px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: lightblue;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#left</span> &#123;</span><br><span class="line">  <span class="attribute">order</span>: -<span class="number">1</span>; <span class="comment">/* è®© #left å±…äºå·¦ä¾§ */</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#center</span> &#123;</span><br><span class="line">  <span class="attribute">flex</span>: <span class="number">1</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">400px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: lightgrey;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>CSSç³»åˆ—</category>
      </categories>
      <tags>
        <tag>CSS</tag>
      </tags>
  </entry>
  <entry>
    <title>CSSä¼ªå…ƒç´ å®ç°ä¸­é—´æ–‡å­—ï¼Œä¸¤è¾¹æ¨ªçº¿çš„æ•ˆæœ</title>
    <url>/2020/06/16/CSS%E4%BC%AA%E5%85%83%E7%B4%A0%E5%AE%9E%E7%8E%B0%E4%B8%AD%E9%97%B4%E6%96%87%E5%AD%97%EF%BC%8C%E4%B8%A4%E8%BE%B9%E6%A8%AA%E7%BA%BF%E7%9A%84%E6%95%88%E6%9E%9C/</url>
    <content><![CDATA[<p>ä»Šå¤©åšé¡¹ç›®çš„æ—¶å€™ï¼Œè¦å®ç°æ•ˆæœï¼šä¸­é—´æ˜¯æ–‡å­—ï¼Œä¸¤è¾¹æ˜¯æ¨ªçº¿å›´ç€ï¼Œå…¶ä¸­æœ‰é—´è·ã€‚äº†è§£äº†å‡ ç§åšæ³•ã€‚ä¼ªå…ƒç´ è¿™ä¸ªåˆšå¼€å§‹æ²¡æƒ³åˆ°ï¼Œå›æ¥åˆè‡ªå·±æ•²äº†ä¸€éï¼Œä»¥åšè®°å½•â€¦</p>
<a id="more"></a>

<p>æ•ˆæœï¼š</p>
<p><img src="/images/css-pseudo.png" alt="image.png"></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>CSSä¼ªå…ƒç´ å®ç°ä¸­é—´æ–‡å­—, ä¸¤è¾¹æ¨ªçº¿æ•ˆæœ<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">      <span class="selector-class">.container</span> &#123;</span></span><br><span class="line">        position: relative;</span><br><span class="line">        width: 640px;</span><br><span class="line">        margin: 0 auto;</span><br><span class="line">      &#125;</span><br><span class="line"><span class="css">      <span class="selector-class">.wrapper</span> &#123;</span></span><br><span class="line">        text-align: center;</span><br><span class="line">        width: 100%;</span><br><span class="line">      &#125;</span><br><span class="line"><span class="css">      <span class="selector-class">.wrapper</span> <span class="selector-class">.word</span><span class="selector-pseudo">:before</span>,</span></span><br><span class="line"><span class="css">      <span class="selector-class">.wrapper</span> <span class="selector-class">.word</span><span class="selector-pseudo">:after</span> &#123;</span></span><br><span class="line">        position: absolute;</span><br><span class="line">        top: 50%;</span><br><span class="line">        width: 40%;</span><br><span class="line">        height: 1px;</span><br><span class="line">        background: blue;</span><br><span class="line">        content: '';</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">      <span class="comment">/* è°ƒæ•´èƒŒæ™¯æ¨ªçº¿çš„å·¦å³è·ç¦» */</span></span></span><br><span class="line"><span class="css">      <span class="selector-class">.wrapper</span> <span class="selector-class">.word</span><span class="selector-pseudo">::before</span> &#123;</span></span><br><span class="line">        left: 0;</span><br><span class="line">      &#125;</span><br><span class="line"><span class="css">      <span class="selector-class">.wrapper</span> <span class="selector-class">.word</span><span class="selector-pseudo">::after</span> &#123;</span></span><br><span class="line">        right: 0;</span><br><span class="line">      &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"wrapper"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"word"</span>&gt;</span>ä¸­é—´çš„å­—<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>å¼€å‘æ‚è®°</category>
      </categories>
      <tags>
        <tag>CSS</tag>
      </tags>
  </entry>
  <entry>
    <title>ä½¿ç”¨ Formik +Yup å¤„ç† React è¡¨å•éªŒè¯</title>
    <url>/2020/06/13/%E4%BD%BF%E7%94%A8-Formik-Yup-%E5%A4%84%E7%90%86-React-%E8%A1%A8%E5%8D%95%E9%AA%8C%E8%AF%81/</url>
    <content><![CDATA[<p>React æ“ä½œè¡¨å•ä¸€ç›´éƒ½æ˜¯æ¯”è¾ƒç¹ççš„æ“ä½œï¼Œåœ¨ä»¥å‰ç”¨çš„æ˜¯ redux-formï¼Œ ä½†ç°åœ¨ formik è¿™ä¸ªåº“è®¾è®¡å¾—æ›´åŠ ä¼˜é›…ï¼ŒGithub çš„ star æ•°ç›®å·²ç»è¿œè¿œè¶…è¿‡ redux-form äº†ã€‚åšè¡¨å•å°±æ˜¯ä¸ºäº†æ”¶é›†ä¸€äº›æ•°æ®ï¼Œç„¶åè¿›è¡Œæäº¤ã€‚è€Œ redux-form ç†å¿µæ˜¯æŠŠè¿™äº›æ•°æ®å­˜æ”¾åˆ° reducer ä¸­å»ï¼Œå½“æˆ‘ä»¬è¡¨å•å¤šçš„æ—¶å€™ï¼Œæ˜¾ç„¶å¯¹æ•´ä¸ª store çš„æ•°æ®ç®¡ç†ä¸å¤ªå‹å¥½ï¼Œå› ä¸ºå¤šäº†å¾ˆå¤šè¡¨å•æ•°æ®ã€‚è€Œ formik è§£å†³çš„å…¶ä¸­ä¸€ä¸ªç—›ç‚¹å°±æ˜¯è¿™ä¸ªï¼Œå®ƒå¯ä»¥åœ¨ç»„ä»¶å†…éƒ¨å¤„ç†è¿™äº›è¡¨å•é¡¹è€Œç®€å•æ˜“ç”¨ã€‚</p>
<p>Formik æ—¨åœ¨è½»æ¾ç®¡ç†å…·æœ‰å¤æ‚éªŒè¯çš„è¡¨å•, Formik æ”¯æŒåŒæ­¥å’Œå¼‚æ­¥è¡¨å•çº§å’Œå­—æ®µçº§éªŒè¯ã€‚</p>
<a id="more"></a>

<p><code>ä¾‹å­çš„ Formik ä¸º 2.1.4 ç‰ˆ</code></p>
<p>å…ˆæ¥çœ‹ä¸ªåŸºæœ¬çš„ä¾‹å­ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> &#123; useFormik &#125; <span class="keyword">from</span> <span class="string">'formik'</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">'./FormDemo.css'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ£€æŸ¥è¡¨å•å­—æ®µ</span></span><br><span class="line"><span class="keyword">const</span> validate = <span class="function"><span class="params">values</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> errors = &#123;&#125;</span><br><span class="line">  <span class="keyword">if</span> (!values.name) &#123;</span><br><span class="line">    errors.name = <span class="string">'ä¸èƒ½ä¸ºç©º'</span></span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (values.name.length &gt; <span class="number">20</span>) &#123;</span><br><span class="line">    errors.name = <span class="string">'åå­—å¤ªé•¿ï¼Œè¾“å…¥æœ‰è¯¯'</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (!values.email) &#123;</span><br><span class="line">    errors.email = <span class="string">'ä¸èƒ½ä¸ºç©º'</span></span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (!<span class="regexp">/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]&#123;2,4&#125;$/i</span>.test(values.email)) &#123;</span><br><span class="line">    errors.email = <span class="string">'é‚®ç®±æ ¼å¼é”™è¯¯'</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> errors</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> FormDemo = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> formik = useFormik(&#123;</span><br><span class="line">    initialValues: &#123;</span><br><span class="line">      name: <span class="string">''</span>,</span><br><span class="line">      email: <span class="string">''</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    validate,</span><br><span class="line">    onSubmit: <span class="function"><span class="params">values</span> =&gt;</span> &#123;</span><br><span class="line">      alert(<span class="built_in">JSON</span>.stringify(values, <span class="literal">null</span>, <span class="number">2</span>))</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;form onSubmit=&#123;formik.handleSubmit&#125; className=<span class="string">'form-wrap'</span>&gt;</span><br><span class="line">      &lt;div className=<span class="string">'form-group'</span>&gt;</span><br><span class="line">        &lt;label&gt;åå­—&lt;<span class="regexp">/label&gt;</span></span><br><span class="line"><span class="regexp">        &lt;input</span></span><br><span class="line"><span class="regexp">          name='name'</span></span><br><span class="line"><span class="regexp">          onChange=&#123;formik.handleChange&#125;</span></span><br><span class="line"><span class="regexp">          onBlur=&#123;formik.handleBlur&#125;</span></span><br><span class="line"><span class="regexp">          value=&#123;formik.values.name&#125;</span></span><br><span class="line"><span class="regexp">        /</span>&gt;</span><br><span class="line">        &#123;formik.touched.name &amp;&amp; formik.errors.name ? (</span><br><span class="line">          &lt;div className=<span class="string">'error-tip'</span>&gt;&#123;formik.errors.name&#125;&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">        ) : null&#125;</span></span><br><span class="line"><span class="regexp">      &lt;/</span>div&gt;</span><br><span class="line">      &lt;div className=<span class="string">'form-group'</span>&gt;</span><br><span class="line">        &lt;label&gt;é‚®ç®±&lt;<span class="regexp">/label&gt;</span></span><br><span class="line"><span class="regexp">        &lt;input</span></span><br><span class="line"><span class="regexp">          name='email'</span></span><br><span class="line"><span class="regexp">          onChange=&#123;formik.handleChange&#125;</span></span><br><span class="line"><span class="regexp">          onBlur=&#123;formik.handleBlur&#125;</span></span><br><span class="line"><span class="regexp">          value=&#123;formik.values.email&#125;</span></span><br><span class="line"><span class="regexp">        /</span>&gt;</span><br><span class="line">        &#123;formik.touched.email &amp;&amp; formik.errors.email ? (</span><br><span class="line">          &lt;div className=<span class="string">'error-tip'</span>&gt;&#123;formik.errors.email&#125;&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">        ) : null&#125;</span></span><br><span class="line"><span class="regexp">      &lt;/</span>div&gt;</span><br><span class="line"></span><br><span class="line">      &lt;button type=<span class="string">'submit'</span>&gt;Submit&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>form&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> FormDemo</span><br></pre></td></tr></table></figure>

<p>ä»¥ä¸Šæ˜¯ä¸€ä¸ªå¾ˆç®€å•çš„è¡¨å•ï¼Œè¾“å…¥åå­—ä¸é‚®ç®±ã€‚</p>
<p><img src="https://user-gold-cdn.xitu.io/2020/6/13/172acf9ec35b272f?w=433&h=232&f=gif&s=31469" alt=""></p>
<p>ä¸Šé¢ä¾‹å­ä¸­æˆ‘ä»¬ä½¿ç”¨çš„æ˜¯ useFormik è¿™ç§ç”¨æ³•ï¼Œè¿˜æœ‰ä½¿ç”¨ <code>&lt;Formik /&gt;</code> å’Œ <code>withFormik</code> çš„ç”¨æ³•ã€‚</p>
<p>ä½†æˆ‘ä»¬å‘ç°ä¸€ä¸ªé—®é¢˜ï¼Œå½“æ­£åœ¨è¾“å…¥åå­—çš„æ—¶å€™ï¼Œé‚®ç®±å·²ç»ç«‹é©¬æ˜¾ç¤ºä¸èƒ½ä¸ºç©ºäº†ï¼Œæˆ‘ä»¬éœ€è¦çš„æ˜¯å½“ç‚¹å‡»çš„æ—¶å€™æ‰åšå…¶ä»–è¡¨å•å…ƒç´ çš„åˆ¤æ–­è€Œä¸æ˜¯ä¸€æ¬¡æ€§åˆ¤æ–­å®Œã€‚å¯¹è¿™ä¸€é—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦å†åŠ ä¸€ä¸ªåˆ¤æ–­<code>touched</code>, è¿™ä¸ªä»£è¡¨è¡¨å•ä¸­çš„æŸä¸ªå­—æ®µæ˜¯å¦è¢«ç‚¹å‡»è¿‡ï¼Œç›´è¯‘çš„è¯å°±æ˜¯â€è§¦ç¢°è¿‡â€æˆ–â€åŠ¨è¿‡â€ï¼Œè¿™æ ·å°±ä¸ä¼šå‡ºç°ä¸Šé¢çš„é—®é¢˜äº†</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  formik.touched.name &amp;&amp; formik.errors.name ? (</span><br><span class="line">    &lt;div className=<span class="string">'error-tip'</span>&gt;&#123;formik.errors.name&#125;&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">  ) : null</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure>

<p>ä½†å‘ç°ä¸Šé¢çš„ä»£ç è¿˜æ˜¯æŒºå¤š, onChange, onBlur, value ç­‰å±æ€§è¿˜æ˜¯æŒºé‡å¤çš„ï¼Œæ¯ä¸ªè¡¨å•å…ƒç´ å†™ä¸€æ®µï¼Œå…¶å®æˆ‘ä»¬å¯ä»¥æ›´ç²¾ç®€ï¼Œä½¿ç”¨ formik é‡Œé¢çš„<code>getFieldProps</code>æ–¹æ³•</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">onSubmit</span>=<span class="string">"&#123;formik.handleSubmit&#125;"</span> <span class="attr">className</span>=<span class="string">"form-wrap"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">"form-group"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">label</span>&gt;</span>åå­—<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">'name'</span> &#123;<span class="attr">...formik.getFieldProps</span>('<span class="attr">name</span>')&#125; /&gt;</span> &#123;formik.touched.name &amp;&amp;</span><br><span class="line">    formik.errors.name ? (</span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">"error-tip"</span>&gt;</span>&#123;formik.errors.name&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    ) : null&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">"form-group"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">label</span>&gt;</span>é‚®ç®±<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">'email'</span> &#123;<span class="attr">...formik.getFieldProps</span>('<span class="attr">email</span>')&#125; /&gt;</span> &#123;formik.touched.email &amp;&amp;</span><br><span class="line">    formik.errors.email ? (</span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">"error-tip"</span>&gt;</span>&#123;formik.errors.email&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    ) : null&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"submit"</span>&gt;</span>Submit<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>é‚£ä¹ˆè¡¨å•å­—æ®µçš„éªŒè¯èƒ½ä¸èƒ½ç®€åŒ–å‘¢ï¼Ÿformik è¡¨å•éªŒè¯å¤§å¤šæ•°æˆ‘ä»¬ä¼šé€‰æ‹©å’Œ yup åº“è¿›è¡Œæ­é…ï¼Œyup çš„ä¸“é•¿å°±æ˜¯ä½œè§„åˆ™æ ¡éªŒçš„ã€‚ç”¨æ³•å¦‚ä¸‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> formik = useFormik(&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  validationSchema: Yup.object(&#123;</span><br><span class="line">    name: Yup.string().max(<span class="number">20</span>, <span class="string">'åå­—å¤ªé•¿ï¼Œè¾“å…¥æœ‰è¯¯'</span>).required(<span class="string">'ä¸èƒ½ä¸ºç©º'</span>),</span><br><span class="line">    email: Yup.string().email(<span class="string">'é‚®ç®±æ ¼å¼é”™è¯¯'</span>).required(<span class="string">'ä¸èƒ½ä¸ºç©º'</span>),</span><br><span class="line">  &#125;),</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// ...</span></span><br></pre></td></tr></table></figure>

<p>ä¸Šé¢ validationSchema ä¸º Formik ä¸“é—¨ä¸º yup ç•™å‡ºçš„æ¥å£ï¼Œæ‰€ä»¥ formik æ˜¯å¾ˆå¥½æ”¯æŒ yup æ­é…ä½¿ç”¨çš„ã€‚</p>
<p>æœ€åé™„ä¸Šå®˜ç½‘ï¼š<a href="https://jaredpalmer.com/formik/" target="_blank" rel="noopener">https://jaredpalmer.com/formik/</a><br><br></p>
<ul>
<li>psï¼š <a href="https://github.com/Jacky-Summer/personal-blog" target="_blank" rel="noopener">ä¸ªäººæŠ€æœ¯åšæ–‡ Github ä»“åº“</a>ï¼Œè§‰å¾—ä¸é”™çš„è¯æ¬¢è¿ starï¼Œç»™æˆ‘ä¸€ç‚¹é¼“åŠ±ç»§ç»­å†™ä½œå§~</li>
</ul>
]]></content>
      <categories>
        <category>å¼€å‘æ‚è®°</category>
      </categories>
      <tags>
        <tag>Formik</tag>
        <tag>Yup</tag>
      </tags>
  </entry>
  <entry>
    <title>ã€React åŸç†ï¼ˆä¸€ï¼‰ã€‘å®ç° createElement å’Œ render æ–¹æ³•</title>
    <url>/2020/06/06/%E3%80%90React-%E5%8E%9F%E7%90%86%EF%BC%88%E4%B8%80%EF%BC%89%E3%80%91%E5%AE%9E%E7%8E%B0-createElement-%E5%92%8C-render-%E6%96%B9%E6%B3%95/</url>
    <content><![CDATA[<p>åœ¨ React ä¸­ï¼Œæˆ‘ä»¬éƒ½çŸ¥é“å¯ä»¥å†™ jsx ä»£ç ä¼šè¢«ç¼–è¯‘æˆçœŸæ­£çš„ DOM æ’å…¥åˆ°è¦æ˜¾ç¤ºçš„é¡µé¢ä¸Šã€‚è¿™å…·ä½“æ˜¯æ€ä¹ˆå®ç°çš„ï¼Œä»Šå¤©æˆ‘ä»¬å°±è‡ªå·±åŠ¨æ‰‹åšä¸€ä¸‹ã€‚</p>
<a id="more"></a>

<h2 id="å®ç°-createElement-æ–¹æ³•"><a href="#å®ç°-createElement-æ–¹æ³•" class="headerlink" title="å®ç° createElement æ–¹æ³•"></a>å®ç° createElement æ–¹æ³•</h2><p>è¿™ä¸ªæ–¹æ³•å¹³æ—¶å¼€å‘æˆ‘ä»¬å¹¶ä¸ä¼šç”¨åˆ°ï¼Œå› ä¸ºå®ƒæ˜¯ç» babel ç¼–è¯‘åçš„ä»£ç ï¼Œæˆ‘ä»¬æ–°å»ºä¸€ä¸ª React é¡¹ç›®ï¼Œindex.js æœ€ç®€å•çš„ä»£ç ç»“æ„å¦‚ä¸‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">'react-dom'</span></span><br><span class="line">ReactDOM.render(<span class="xml"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">className</span>=<span class="string">'title'</span>&gt;</span>Hello React<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span>, <span class="built_in">document</span>.getElementById(<span class="string">'root'</span>))</span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œå°± jsx ä¼šå˜ç¼–è¯‘æˆçœŸæ­£çš„ DOM ï¼ŒæŠŠ html ä»£ç æ‹¿åˆ° babel å®˜ç½‘ç¼–è¯‘</p>
<p><img src="https://images.weserv.nl/?url=https://user-gold-cdn.xitu.io/2020/6/6/17287948badb8312?w=1162&h=182&f=png&s=14232" alt=""></p>
<p>äºæ˜¯æˆ‘ä»¬å°±çœ‹åˆ°äº† React.createElement() æ–¹æ³•ï¼Œä½†è¿™åªæ˜¯è°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼Œå®ƒå…·ä½“åšäº†ä»€ä¹ˆè¿”å›ä»€ä¹ˆæˆ‘ä»¬è¿˜ä¸çŸ¥é“ï¼Œæˆ‘ä»¬å¯ä»¥æ‰“å°è¿™ä¸ªå‡½æ•°è¿è¡Œçš„ç»“æœï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(</span><br><span class="line">  React.createElement(</span><br><span class="line">    <span class="string">'h1'</span>,</span><br><span class="line">    &#123;</span><br><span class="line">      className: <span class="string">'title'</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">'Hello React'</span></span><br><span class="line">  )</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p><img src="https://images.weserv.nl/?url=https://user-gold-cdn.xitu.io/2020/6/6/1728796fcf7d2054?w=567&h=181&f=png&s=12796" alt=""><br>è¿”å›çš„è¿™ä¸ªå¯¹è±¡å°±æ˜¯è™šæ‹Ÿ DOM äº†ã€‚</p>
<p>æˆ‘ä»¬æ¥åˆ†æå®ƒè¿”å›çš„å¯¹è±¡å‚æ•°ï¼Œé¦–å…ˆç¬¬ä¸€ä¸ªæ˜¯</p>
<ul>
<li><code>$$typeof: REACT_ELEMENT_TYPE</code></li>
</ul>
<p>è¿™ä¸ªæ˜¯ React å…ƒç´ å¯¹è±¡çš„æ ‡è¯†å±æ€§</p>
<p>REACT_ELEMENT_TYPE çš„å€¼æ˜¯ä¸€ä¸ª Symbol ç±»å‹ï¼Œä»£è¡¨äº†ä¸€ä¸ªç‹¬ä¸€æ— äºŒçš„å€¼ã€‚å¦‚æœæµè§ˆå™¨ä¸æ”¯æŒ Symbol ç±»å‹ï¼Œå€¼å°±æ˜¯ä¸€ä¸ªäºŒè¿›åˆ¶å€¼ã€‚</p>
<blockquote>
<p>ä¸ºä»€ä¹ˆæ˜¯ Symbolï¼Ÿä¸»è¦é˜²æ­¢ XSS æ”»å‡»ä¼ªé€ ä¸€ä¸ªå‡çš„ React ç»„ä»¶ã€‚å› ä¸º JSON ä¸­æ˜¯ä¸ä¼šå­˜åœ¨ Symbol ç±»å‹çš„ã€‚</p>
</blockquote>
<ul>
<li>keyï¼šè¿™ä¸ªæ¯”å¦‚å¾ªç¯ä¸­ä¼šç”¨åˆ°è¿™ä¸ª key å€¼</li>
<li>propsï¼šä¼ å…¥çš„å±æ€§å€¼ï¼Œæ¯”å¦‚ id, className, style, children ç­‰</li>
<li>refï¼š DOM çš„å¼•ç”¨</li>
<li>å‰©ä¸‹çš„æ˜¯ç§æœ‰å±æ€§ï¼ˆæœ¬ç¯‡ä¸å±•å¼€è®¨è®ºï¼‰</li>
</ul>
<p>åœ¨æœ¬ç¯‡æˆ‘ä»¬ä¼šç”¨è‡ªå·±ç®€å•çš„æ–¹å¼å®ç°è¿™ä¸¤ä¸ªæ–¹æ³•ï¼Œè€Œä¸æ˜¯æ ¹æ®æºç ï¼Œæ‰€ä»¥å®ç°ä¸Šçš„æ–¹æ³•åªè¦èƒ½å®ç°å®ƒçš„åŸºæœ¬åŠŸèƒ½å³å¯ï¼›æœ‰ä¸ªåŸºæœ¬æ¦‚å¿µåœ¨ï¼Œä»¥åå†å¾ªåºæ¸è¿›å­¦ä¹ æºç ã€‚</p>
<p>è€Œ createElement ä¸­æœ‰ä¸‰ä¸ªå‚æ•°ï¼Œæ›´ç¡®åˆ‡è¯´æ˜¯ n ä¸ªå‚æ•°ï¼š</p>
<ul>
<li>typeï¼šè¡¨ç¤ºè¦æ¸²æŸ“çš„å…ƒç´ ç±»å‹ã€‚è¿™é‡Œå¯ä»¥ä¼ å…¥ä¸€ä¸ªå…ƒç´  Tag åç§°ï¼Œä¹Ÿå¯ä»¥ä¼ å…¥ä¸€ä¸ªç»„ä»¶ï¼ˆå¦‚ div span ç­‰ï¼Œä¹Ÿå¯ä»¥æ˜¯æ˜¯å‡½æ•°ç»„ä»¶å’Œç±»ç»„ä»¶ï¼‰</li>
<li>propsï¼šåˆ›å»º React å…ƒç´ æ‰€éœ€è¦çš„ propsã€‚</li>
<li>childrensï¼ˆå¯é€‰å‚æ•°ï¼‰ï¼šè¦æ¸²æŸ“å…ƒç´ çš„å­å…ƒç´ ï¼Œè¿™é‡Œå¯ä»¥å‘åä¼ å…¥ n ä¸ªå‚æ•°ã€‚å¯ä»¥ä¸ºæ–‡æœ¬å­—ç¬¦ä¸²ï¼Œä¹Ÿå¯ä»¥ä¸ºæ•°ç»„</li>
</ul>
<p>åˆæ­¥ createElement æ–¹æ³•ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// åˆ›å»º JSX å¯¹è±¡</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createElement</span>(<span class="params">type, props, ...childrens</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        type,</span><br><span class="line">        props: &#123;</span><br><span class="line">          ...props,</span><br><span class="line">          children: childrens.length &lt;= <span class="number">1</span> ? childrens[<span class="number">0</span>] || <span class="string">''</span> : childrens,</span><br><span class="line">        &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å‚æ•°ä¸­ props å’Œ childrens æ˜¯å¹¶åˆ—å…³ç³»ï¼Œç„¶åè¿”å›çš„ props å¯¹è±¡ï¼Œé‡Œé¢åŒ…å«äº† childrenï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å† props é‡Œé¢æ·»åŠ  children å‚æ•°ï¼Œç„¶åæ ¹æ® children å‚æ•°ä¸ºä¸€ä¸ªæˆ–å¤šä¸ªçš„å¯èƒ½åœ¨è¿›è¡Œå–å€¼å¤„ç†ã€‚</p>
<p>è°ƒç”¨è¯¥æ–¹æ³•ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(</span><br><span class="line">  createElement(</span><br><span class="line">    <span class="string">'h1'</span>,</span><br><span class="line">    &#123;</span><br><span class="line">      className: <span class="string">'title'</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">'Hello React'</span></span><br><span class="line">  )</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p><img src="https://images.weserv.nl/?url=https://user-gold-cdn.xitu.io/2020/6/6/17287aecec9a3e91?w=237&h=116&f=png&s=4860" alt=""><br>é™¤å»å…¶å®ƒæœ¬ç¯‡æˆ‘ä»¬ä¸è®¨è®ºçš„å±æ€§ï¼Œç›®å‰ç®—æ˜¯å®ç°äº†ä¸€åŠï¼›æˆ‘ä»¬è§‚å¯ŸåŸæ¥ React è‡ªèº«æ–¹æ³•è¾“å‡ºçš„ç»“æœæœ‰ key, refï¼Œ åŒè¾“å‡ºçš„ props ä¹Ÿæ˜¯å¹¶åˆ—å…³ç³»ï¼Œäºæ˜¯æˆ‘ä»¬è¿›ä¸€æ­¥ä½œå‡ºå¤„ç†</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createElement</span>(<span class="params">type, props, ...childrens</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> ref, key</span><br><span class="line">  <span class="keyword">if</span> (<span class="string">'ref'</span> <span class="keyword">in</span> props) &#123;</span><br><span class="line">    ref = props[<span class="string">'ref'</span>]</span><br><span class="line">    props[<span class="string">'ref'</span>] = <span class="literal">undefined</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (<span class="string">'key'</span> <span class="keyword">in</span> props) &#123;</span><br><span class="line">    key = props[<span class="string">'key'</span>]</span><br><span class="line">    props[<span class="string">'key'</span>] = <span class="literal">undefined</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    type,</span><br><span class="line">    props: &#123;</span><br><span class="line">      ...props,</span><br><span class="line">      children: childrens.length &lt;= <span class="number">1</span> ? childrens[<span class="number">0</span>] || <span class="string">''</span> : childrens,</span><br><span class="line">    &#125;,</span><br><span class="line">    ref,</span><br><span class="line">    key,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åŒæ ·çš„æ–¹å¼è°ƒç”¨ç»“æœå¦‚ä¸‹ï¼š</p>
<p><img src="https://images.weserv.nl/?url=https://user-gold-cdn.xitu.io/2020/6/6/17287b33de749a06?w=453&h=145&f=png&s=8494" alt=""><br>å¦‚æœæ·»åŠ å¤šä¸€äº›å±æ€§ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹ç»“æœ</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(</span><br><span class="line">  createElement(</span><br><span class="line">    <span class="string">'div'</span>,</span><br><span class="line">    &#123; <span class="attr">id</span>: <span class="string">'box'</span>, <span class="attr">className</span>: <span class="string">'box'</span>, <span class="attr">style</span>: &#123; <span class="attr">color</span>: <span class="string">'red'</span> &#125;, <span class="attr">key</span>: <span class="string">'20'</span> &#125;,</span><br><span class="line">    <span class="string">'this is text'</span>,</span><br><span class="line">    createElement(<span class="string">'h2'</span>, &#123; <span class="attr">className</span>: <span class="string">'title'</span> &#125;, <span class="string">'hello'</span>),</span><br><span class="line">    createElement(<span class="string">'div'</span>, &#123; <span class="attr">className</span>: <span class="string">'content'</span> &#125;, <span class="string">'Hi'</span>)</span><br><span class="line">  )</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p><img src="https://images.weserv.nl/?url=https://user-gold-cdn.xitu.io/2020/6/6/17287c9de8368ddd?w=467&h=280&f=png&s=17373" alt=""><br>ç”¨äº†è¿™ç§æ¯”è¾ƒç²—é²çš„æ–¹å¼æ·»åŠ ï¼Œè®¾ç½®ä¸º undefined åœ¨å®ç° render æ–¹æ³•çš„æ—¶å€™æˆ‘ä»¬ä¼šæ ¹æ®è¿™ä¸ªå¿½ç•¥ props å†…éƒ¨çš„ key å’Œ props å±æ€§ï¼Œè¿™é‡Œå°±å®ç°äº†æœ€åŸºæœ¬çš„ createElement æ–¹æ³•äº†ã€‚</p>
<h2 id="å®ç°-render-æ–¹æ³•"><a href="#å®ç°-render-æ–¹æ³•" class="headerlink" title="å®ç° render æ–¹æ³•"></a>å®ç° render æ–¹æ³•</h2><p>render æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°æ¥æ”¶çš„æ˜¯ createElement è¿”å›çš„å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯è™šæ‹Ÿ DOMï¼›<br>ç¬¬äºŒä¸ªå‚æ•°åˆ™æ˜¯æŒ‚è½½çš„ç›®æ ‡ DOMã€‚åŒæ ·çš„åšæ³•ï¼Œæˆ‘ä»¬ç”¨ babel ç¼–è¯‘æ¥çœ‹ï¼š</p>
<p><img src="https://images.weserv.nl/?url=https://user-gold-cdn.xitu.io/2020/6/6/17287ca773a9b742?w=1259&h=362&f=png&s=43471" alt=""><br>æ‰§è¡Œåï¼Œå°±è¢«æŒ‚åœ¨åˆ°é¡µé¢äº†</p>
<p><img src="https://images.weserv.nl/?url=https://user-gold-cdn.xitu.io/2020/6/6/17287cc414f3731c?w=343&h=122&f=png&s=6145" alt=""></p>
<p>å®ç°ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * åŠŸèƒ½ï¼šæŠŠåˆ›å»ºçš„å¯¹è±¡ç”Ÿæˆå¯¹åº”çš„DOMå…ƒç´ ï¼Œæœ€åæ’å…¥åˆ°é¡µé¢ä¸­</span></span><br><span class="line"><span class="comment"> * objJSXï¼š createElement è¿”å›çš„ JSX å¯¹è±¡</span></span><br><span class="line"><span class="comment"> * containerï¼šæŒ‚è½½çš„å®¹å™¨ï¼Œå¦‚ document.getElementById('root')</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">render</span>(<span class="params">objJSX, container</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> &#123; type, props &#125; = objJSX</span><br><span class="line">  <span class="keyword">let</span> newElement = <span class="built_in">document</span>.createElement(type)</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> attr <span class="keyword">in</span> props) &#123;</span><br><span class="line">    <span class="comment">// éå†ä¼ å…¥çš„ props å±æ€§</span></span><br><span class="line">    <span class="keyword">if</span> (!props.hasOwnProperty(attr)) <span class="keyword">break</span> <span class="comment">// ä¸æ˜¯ç§æœ‰çš„ç›´æ¥ç»“æŸéå†</span></span><br><span class="line">    <span class="keyword">let</span> value = props[attr] <span class="comment">// &gt;å¦‚æœå½“å‰å±æ€§æ²¡æœ‰å€¼,ç›´æ¥ä¸å¤„ç†å³å¯</span></span><br><span class="line">    <span class="keyword">if</span> (value == <span class="literal">undefined</span>) <span class="keyword">continue</span> <span class="comment">// NULL OR UNDEFINED</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¯¹å‡ ä¸ªç‰¹æ®Šå±æ€§å•ç‹¬è®¾ç½®</span></span><br><span class="line">    <span class="keyword">switch</span> (attr.toUpperCase()) &#123;</span><br><span class="line">      <span class="keyword">case</span> <span class="string">'ID'</span>:</span><br><span class="line">        newElement.setAttribute(<span class="string">'id'</span>, value)</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">      <span class="keyword">case</span> <span class="string">'CLASSNAME'</span>:</span><br><span class="line">        newElement.setAttribute(<span class="string">'class'</span>, value)</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">      <span class="keyword">case</span> <span class="string">'STYLE'</span>: <span class="comment">// ä¼ å…¥çš„è¡Œå†…æ ·å¼ style æ˜¯ä¸ªå¯¹è±¡ï¼Œæ•…éœ€éå†èµ‹å€¼</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> styleAttr <span class="keyword">in</span> value) &#123;</span><br><span class="line">          <span class="keyword">if</span> (value.hasOwnProperty(styleAttr)) &#123;</span><br><span class="line">            newElement[<span class="string">'style'</span>][styleAttr] = value[styleAttr]</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">      <span class="keyword">case</span> <span class="string">'CHILDREN'</span>:</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">         * å¯èƒ½æ˜¯ä¸€ä¸ªå€¼ï¼šå¯èƒ½æ˜¯å­—ç¬¦ä¸²ä¹Ÿå¯èƒ½æ˜¯ä¸€ä¸ªJSXå¯¹è±¡</span></span><br><span class="line"><span class="comment">         * å¯èƒ½æ˜¯ä¸€ä¸ªæ•°ç»„ï¼šæ•°ç»„ä¸­çš„æ¯ä¸€é¡¹å¯èƒ½æ˜¯å­—ç¬¦ä¸²ä¹Ÿå¯èƒ½æ˜¯JSXå¯¹è±¡</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="comment">// é¦–å…ˆæŠŠä¸€ä¸ªå€¼ä¹Ÿå˜ä¸ºæ•°ç»„ï¼Œè¿™æ ·åæœŸç»Ÿä¸€æ“ä½œæ•°ç»„å³å¯</span></span><br><span class="line">        !(value <span class="keyword">instanceof</span> <span class="built_in">Array</span>) ? (value = [value]) : <span class="literal">null</span></span><br><span class="line">        value.forEach(<span class="function">(<span class="params">item, index</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="comment">// éªŒè¯ITEMæ˜¯ä»€ä¹ˆç±»å‹çš„ï¼šå¦‚æœæ˜¯å­—ç¬¦ä¸²å°±æ˜¯åˆ›å»ºæ–‡æœ¬èŠ‚ç‚¹ï¼Œå¦‚æœæ˜¯å¯¹è±¡ï¼Œæˆ‘ä»¬éœ€è¦å†æ¬¡æ‰§è¡ŒRENDERæ–¹æ³•ï¼ŒæŠŠåˆ›å»ºçš„å…ƒç´ æ”¾åˆ°æœ€å¼€å§‹åˆ›å»ºçš„å¤§ç›’å­ä¸­</span></span><br><span class="line">          <span class="keyword">if</span> (<span class="keyword">typeof</span> item === <span class="string">'string'</span>) &#123;</span><br><span class="line">            <span class="keyword">let</span> text = <span class="built_in">document</span>.createTextNode(item)</span><br><span class="line">            newElement.appendChild(text)</span><br><span class="line">          &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            render(item, newElement)</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">      <span class="keyword">default</span>:</span><br><span class="line">        newElement.setAttribute(attr, value)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  container.appendChild(newElement)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<br>

<ul>
<li>psï¼š <a href="https://images.weserv.nl/?url=https://github.com/Jacky-Summer/personal-blog" target="_blank" rel="noopener">ä¸ªäººæŠ€æœ¯åšæ–‡ Github ä»“åº“</a>ï¼Œè§‰å¾—ä¸é”™çš„è¯æ¬¢è¿ starï¼Œé¼“åŠ±æˆ‘ç»§ç»­å†™ä½œå§~</li>
</ul>
]]></content>
      <categories>
        <category>Reactç¬”è®°</category>
      </categories>
      <tags>
        <tag>React</tag>
      </tags>
  </entry>
  <entry>
    <title>ç†è§£ redux-thunk æºç </title>
    <url>/2020/05/30/%E7%90%86%E8%A7%A3-redux-thunk-%E6%BA%90%E7%A0%81/</url>
    <content><![CDATA[<p>å‰é¢å‡ ç¯‡æˆ‘ä»¬å°± Redux å±•å¼€äº†å‡ ç¯‡æ–‡ç« ï¼Œè¿™æ¬¡æˆ‘ä»¬æ¥å®ç° react-thunkï¼Œå°±ä¸æ˜¯å«å®ç° redux-thunk äº†ï¼Œç›´æ¥ä¸Šæºç ï¼Œå› ä¸ºæºç å°± 11 è¡Œã€‚å¦‚æœå¯¹ Redux ä¸­é—´ä»¶è¿˜ä¸ç†è§£çš„ï¼Œå¯ä»¥çœ‹æˆ‘å†™çš„ Redux æ–‡ç« ã€‚</p>
<a id="more"></a>

<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><ul>
<li><a href="https://jacky-summer.github.io/2020/04/22/%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%B8%AA%E8%BF%B7%E4%BD%A0Redux%EF%BC%88%E5%9F%BA%E7%A1%80%E7%89%88%EF%BC%89/#more" target="_blank" rel="noopener">å®ç°ä¸€ä¸ªè¿·ä½  Reduxï¼ˆåŸºç¡€ç‰ˆï¼‰</a></li>
<li><a href="https://jacky-summer.github.io/2020/05/14/%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%B8%AARedux%EF%BC%88%E5%AE%8C%E5%96%84%E7%89%88%EF%BC%89/#more" target="_blank" rel="noopener">å®ç°ä¸€ä¸ª Reduxï¼ˆå®Œå–„ç‰ˆï¼‰</a></li>
<li><a href="https://jacky-summer.github.io/2020/04/28/%E6%B5%85%E8%B0%88React%E7%9A%84Context-API/#more" target="_blank" rel="noopener">æµ…è°ˆ React çš„ Context API</a></li>
<li><a href="https://jacky-summer.github.io/2020/05/24/%E5%B8%A6%E4%BD%A0%E5%AE%9E%E7%8E%B0-react-redux/" target="_blank" rel="noopener">å¸¦ä½ å®ç° react-redux</a></li>
</ul>
<h2 id="ä¸ºä»€ä¹ˆè¦ç”¨-redux-thunk"><a href="#ä¸ºä»€ä¹ˆè¦ç”¨-redux-thunk" class="headerlink" title="ä¸ºä»€ä¹ˆè¦ç”¨ redux-thunk"></a>ä¸ºä»€ä¹ˆè¦ç”¨ redux-thunk</h2><p>åœ¨ä½¿ç”¨ Redux è¿‡ç¨‹ï¼Œé€šè¿‡ dispatch æ–¹æ³•æ´¾å‘ä¸€ä¸ª action å¯¹è±¡ã€‚å½“æˆ‘ä»¬ä½¿ç”¨ redux-thunk åï¼Œå¯ä»¥ dispatch ä¸€ä¸ª functionã€‚redux-thunk ä¼šè‡ªåŠ¨è°ƒç”¨è¿™ä¸ª functionï¼Œå¹¶ä¸”ä¼ é€’ dispatch, getState æ–¹æ³•ä½œä¸ºå‚æ•°ã€‚è¿™æ ·ä¸€æ¥ï¼Œæˆ‘ä»¬å°±èƒ½åœ¨è¿™ä¸ª function é‡Œé¢å¤„ç†å¼‚æ­¥é€»è¾‘ï¼Œå¤„ç†å¤æ‚é€»è¾‘ï¼Œè¿™æ˜¯åŸæ¥ Redux åšä¸åˆ°çš„ï¼Œå› ä¸ºåŸæ¥å°±åªèƒ½ dispatch ä¸€ä¸ªç®€å•å¯¹è±¡ã€‚</p>
<h2 id="ç”¨æ³•"><a href="#ç”¨æ³•" class="headerlink" title="ç”¨æ³•"></a>ç”¨æ³•</h2><p>redux-thunk ä½œä¸º redux çš„ä¸­é—´ä»¶ï¼Œä¸»è¦ç”¨æ¥å¤„ç†å¼‚æ­¥è¯·æ±‚ï¼Œæ¯”å¦‚ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">fetchData</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function">(<span class="params">dispatch, getState</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// to do ...</span></span><br><span class="line">    axios.get(<span class="string">'https://jsonplaceholder.typicode.com/todos/1'</span>).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(res)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="redux-thunk-æºç "><a href="#redux-thunk-æºç " class="headerlink" title="redux-thunk æºç "></a>redux-thunk æºç </h2><p>redux-thunk çš„æºç æ¯”è¾ƒç®€æ´ï¼Œå®é™…å°± 11 è¡Œã€‚å‰å‡ ç¯‡æˆ‘ä»¬è¯´åˆ° redux çš„ä¸­é—´ä»¶å½¢å¼ï¼Œ<br>æœ¬è´¨ä¸Šæ˜¯å¯¹ store.dispatch æ–¹æ³•è¿›è¡Œäº†å¢å¼ºæ”¹é€ ï¼ŒåŸºæœ¬æ˜¯ç±»ä¼¼è¿™ç§å½¢å¼ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">const middleware &#x3D; (store) &#x3D;&gt; next &#x3D;&gt; action &#x3D;&gt; &#123;&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨è¿™é‡Œå°±ä¸è¯¦ç»†è§£é‡Šäº†ï¼Œå¯ä»¥çœ‹ <a href="https://juejin.im/post/5ebb9375f265da7bfe0bf16a" target="_blank" rel="noopener">å®ç°ä¸€ä¸ª Reduxï¼ˆå®Œå–„ç‰ˆï¼‰</a></p>
<p>å…ˆç»™ä¸ªç¼©æ°´ç‰ˆçš„å®ç°ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> thunk = <span class="function">(<span class="params">&#123; getState, dispatch &#125;</span>) =&gt;</span> <span class="function"><span class="params">next</span> =&gt;</span> <span class="function"><span class="params">action</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> action === <span class="string">'function'</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> action(dispatch, getState)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> next(action)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> thunk</span><br></pre></td></tr></table></figure>

<ul>
<li>åŸç†ï¼šå³å½“ action ä¸º function çš„æ—¶å€™ï¼Œå°±è°ƒç”¨è¿™ä¸ª function (ä¼ å…¥ dispatch, getState)å¹¶è¿”å›ï¼›å¦‚æœä¸æ˜¯ï¼Œå°±ç›´æ¥ä¼ ç»™ä¸‹ä¸€ä¸ªä¸­é—´ä»¶ã€‚</li>
</ul>
<p>å®Œæ•´æºç å¦‚ä¸‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createThunkMiddleware</span>(<span class="params">extraArgument</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function">(<span class="params">&#123; dispatch, getState &#125;</span>) =&gt;</span> <span class="function"><span class="params">next</span> =&gt;</span> <span class="function"><span class="params">action</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// å¦‚æœactionæ˜¯ä¸€ä¸ªfunctionï¼Œå°±è¿”å›action(dispatch, getState, extraArgument)ï¼Œå¦åˆ™è¿”å›next(action)ã€‚</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> action === <span class="string">'function'</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> action(dispatch, getState, extraArgument)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// nextä¸ºä¹‹å‰ä¼ å…¥çš„store.dispatchï¼Œå³æ”¹å†™å‰çš„dispatch</span></span><br><span class="line">    <span class="keyword">return</span> next(action)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> thunk = createThunkMiddleware()</span><br><span class="line"><span class="comment">// ç»™thunkè®¾ç½®ä¸€ä¸ªå˜é‡withExtraArgumentï¼Œå¹¶ä¸”å°†createThunkMiddlewareæ•´ä¸ªå‡½æ•°èµ‹ç»™å®ƒ</span></span><br><span class="line">thunk.withExtraArgument = createThunkMiddleware</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> thunk</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬å‘ç°å…¶å®è¿˜å¤šäº† extraArgument ä¼ å…¥ï¼Œè¿™ä¸ªæ˜¯è‡ªå®šä¹‰å‚æ•°ï¼Œå¦‚ä¸‹ç”¨æ³•ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> api = <span class="string">'https://jsonplaceholder.typicode.com/todos/1'</span></span><br><span class="line"><span class="keyword">const</span> whatever = <span class="number">10</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> store = createStore(</span><br><span class="line">  reducer,</span><br><span class="line">  applyMiddleware(thunk.withExtraArgument(&#123; api, whatever &#125;))</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// later</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fetchData</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function">(<span class="params">dispatch, getState, &#123; api, whatever &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// you can use api and something else here</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>åŒ redux-thunk éå¸¸æµè¡Œçš„åº“ redux-saga ä¸€æ ·ï¼Œéƒ½æ˜¯åœ¨ redux ä¸­åšå¼‚æ­¥è¯·æ±‚ç­‰å‰¯ä½œç”¨ã€‚Redux ç›¸å…³çš„ç³»åˆ—æ–‡ç« å°±æš‚æ—¶å†™åˆ°è¿™éƒ¨åˆ†ä¸ºæ­¢ï¼Œä¸‹æ¬¡ä¼šå†™å…¶ä»–ç³»åˆ—ã€‚</p>
<br>

<ul>
<li>psï¼š <a href="https://github.com/Jacky-Summer/personal-blog" target="_blank" rel="noopener">ä¸ªäººæŠ€æœ¯åšæ–‡ Github ä»“åº“</a>ï¼Œè§‰å¾—ä¸é”™çš„è¯æ¬¢è¿ starï¼Œç»™æˆ‘ä¸€ç‚¹é¼“åŠ±ç»§ç»­å†™ä½œå§~</li>
</ul>
]]></content>
      <categories>
        <category>Reactç¬”è®°</category>
      </categories>
      <tags>
        <tag>React</tag>
        <tag>react-thunk</tag>
      </tags>
  </entry>
  <entry>
    <title>å¸¦ä½ å®ç°-react-redux</title>
    <url>/2020/05/24/%E5%B8%A6%E4%BD%A0%E5%AE%9E%E7%8E%B0-react-redux/</url>
    <content><![CDATA[<p>ä¹‹å‰æˆ‘ä»¬å®ç°äº† redux çš„åŠŸèƒ½ï¼Œè¿™æ¬¡æˆ‘ä»¬æ¥å®ç°ä¸€ä¸‹é…åˆ redux å¼€å‘ä¸­ç»å¸¸ä¼šç”¨åˆ°çš„ä¸€ä¸ªåº“â€”â€” react-reduxã€‚æœ¬æ–‡ä¸ä¼šè¯¦ç»†ä»‹ç» react-redux çš„ä½¿ç”¨ï¼Œå¦å¤–éœ€è¦äº†è§£ Context APIï¼Œ å†çœ‹æ­¤æ–‡å°±å¾ˆå®¹æ˜“ç†è§£äº†ã€‚</p>
<a id="more"></a>

<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>å¯ä»¥çœ‹çœ‹æˆ‘ä¹‹å‰å†™çš„å‡ ç¯‡æ–‡ç« </p>
<ul>
<li><a href="https://jacky-summer.github.io/2020/04/22/%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%B8%AA%E8%BF%B7%E4%BD%A0Redux%EF%BC%88%E5%9F%BA%E7%A1%80%E7%89%88%EF%BC%89/#more" target="_blank" rel="noopener">å®ç°ä¸€ä¸ªè¿·ä½  Reduxï¼ˆåŸºç¡€ç‰ˆï¼‰</a></li>
<li><a href="https://jacky-summer.github.io/2020/05/14/%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%B8%AARedux%EF%BC%88%E5%AE%8C%E5%96%84%E7%89%88%EF%BC%89/#more" target="_blank" rel="noopener">å®ç°ä¸€ä¸ª Reduxï¼ˆå®Œå–„ç‰ˆï¼‰</a></li>
<li><a href="https://jacky-summer.github.io/2020/04/28/%E6%B5%85%E8%B0%88React%E7%9A%84Context-API/#more" target="_blank" rel="noopener">æµ…è°ˆ React çš„ Context API</a></li>
</ul>
<h2 id="react-redux-åŸºæœ¬ä½¿ç”¨"><a href="#react-redux-åŸºæœ¬ä½¿ç”¨" class="headerlink" title="react-redux åŸºæœ¬ä½¿ç”¨"></a>react-redux åŸºæœ¬ä½¿ç”¨</h2><p>ç”¨ä¸ªç®€å•çš„åŠ å‡æ•°å­—ä½œä¾‹å­, æŠŠä»£ç è´´å‡ºæ¥ï¼š</p>
<ul>
<li>redux.js</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createStore &#125; <span class="keyword">from</span> <span class="string">'redux'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// actions</span></span><br><span class="line"><span class="keyword">const</span> ADD_NUM = <span class="string">'ADD_NUM'</span></span><br><span class="line"><span class="keyword">const</span> DESC_NUM = <span class="string">'DESC_NUM'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// action creators</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">addNumAction</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    type: ADD_NUM,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">reduceNumAction</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    type: DESC_NUM,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> defaultState = &#123;</span><br><span class="line">  num: <span class="number">0</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// reducer</span></span><br><span class="line"><span class="keyword">const</span> reducer = <span class="function">(<span class="params">state = defaultState, action</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">switch</span> (action.type) &#123;</span><br><span class="line">    <span class="keyword">case</span> ADD_NUM:</span><br><span class="line">      <span class="keyword">return</span> &#123; <span class="attr">num</span>: state.num + <span class="number">1</span> &#125;</span><br><span class="line">    <span class="keyword">case</span> DESC_NUM:</span><br><span class="line">      <span class="keyword">return</span> &#123; <span class="attr">num</span>: state.num - <span class="number">1</span> &#125;</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      <span class="keyword">return</span> state</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> store = createStore(reducer)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> store</span><br></pre></td></tr></table></figure>

<p>index.js</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">'react-dom'</span></span><br><span class="line"><span class="keyword">import</span> Demo <span class="keyword">from</span> <span class="string">'./Demo'</span></span><br><span class="line"><span class="keyword">import</span> &#123; Provider &#125; <span class="keyword">from</span> <span class="string">'react-redux'</span></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">'./redux.js'</span></span><br><span class="line"></span><br><span class="line">ReactDOM.render(</span><br><span class="line">  &lt;Provider store=&#123;store&#125;&gt;</span><br><span class="line">    &lt;Demo /&gt;</span><br><span class="line">  &lt;<span class="regexp">/Provider&gt;,</span></span><br><span class="line"><span class="regexp">  document.getElementById('root')</span></span><br><span class="line"><span class="regexp">)</span></span><br></pre></td></tr></table></figure>

<p>Demo.js</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> &#123; connect &#125; <span class="keyword">from</span> <span class="string">'react-redux'</span></span><br><span class="line"><span class="keyword">import</span> &#123; addNumAction, reduceNumAction &#125; <span class="keyword">from</span> <span class="string">'./redux.js'</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Demo</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.props)</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;p&gt;&#123;<span class="keyword">this</span>.props.num&#125;&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">        &lt;button onClick=&#123;this.props.addNum&#125;&gt;å¢åŠ 1&lt;/</span>button&gt;</span><br><span class="line">        &lt;button onClick=&#123;<span class="keyword">this</span>.props.reduceNum&#125;&gt;å‡å°‘<span class="number">1</span>&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">      &lt;/</span>div&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> mapStateToProps = <span class="function"><span class="params">state</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    num: state.num,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> mapDispatchToProps = <span class="function"><span class="params">dispatch</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    addNum() &#123;</span><br><span class="line">      <span class="keyword">const</span> action = addNumAction()</span><br><span class="line">      dispatch(action)</span><br><span class="line">    &#125;,</span><br><span class="line">    reduceNum() &#123;</span><br><span class="line">      <span class="keyword">const</span> action = reduceNumAction()</span><br><span class="line">      dispatch(action)</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> connect(mapStateToProps, mapDispatchToProps)(Demo)</span><br></pre></td></tr></table></figure>

<p>å°±å¯ä»¥å®ç° num çš„å¢å‡ï¼š</p>
<p><img src="https://images.weserv.nl/?url=https://user-gold-cdn.xitu.io/2020/5/24/172443ab8612774b?w=143&h=82&f=png&s=1764" alt=""><br>å…¶å®ä¸€ä¸ªç®€å•çš„ react-reduxï¼Œ ä¸»è¦ä¹Ÿå°±æ˜¯å®ç° connect å’Œ Provider çš„åŸºæœ¬åŠŸèƒ½</p>
<ul>
<li><strong>connect</strong>ï¼šå¯ä»¥æŠŠ state å’Œ dispatch ç»‘å®šåˆ° react ç»„ä»¶ï¼Œä½¿å¾—ç»„ä»¶å¯ä»¥è®¿é—®åˆ° redux çš„æ•°æ®</li>
<li><strong>Provider</strong>ï¼šæä¾›çš„æ˜¯ä¸€ä¸ªé¡¶å±‚å®¹å™¨çš„ä½œç”¨ï¼Œå®ç° store çš„ä¸Šä¸‹æ–‡ä¼ é€’</li>
</ul>
<h2 id="ä½¿ç”¨æ—§ç‰ˆ-Context-API-å®ç°"><a href="#ä½¿ç”¨æ—§ç‰ˆ-Context-API-å®ç°" class="headerlink" title="ä½¿ç”¨æ—§ç‰ˆ Context API å®ç°"></a>ä½¿ç”¨æ—§ç‰ˆ Context API å®ç°</h2><h3 id="å®ç°-Provider"><a href="#å®ç°-Provider" class="headerlink" title="å®ç° Provider"></a>å®ç° Provider</h3><p>é¦–å…ˆæˆ‘ä»¬çœ‹å®ƒçš„ç”¨æ³•ï¼Œå°±çŸ¥é“å®ƒä¸æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè€Œæ˜¯ä¸€ä¸ªç»„ä»¶ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;Provider store&#x3D;&#123;store&#125;&gt;</span><br><span class="line">    &lt;Demo &#x2F;&gt;</span><br><span class="line">&lt;&#x2F;Provider&gt;</span><br></pre></td></tr></table></figure>

<p>React çš„ Context API æä¾›äº†ä¸€ç§é€šè¿‡ç»„ä»¶æ ‘ä¼ é€’æ•°æ®çš„æ–¹æ³•ï¼Œæ— éœ€åœ¨æ¯ä¸ªçº§åˆ«æ‰‹åŠ¨ä¼ é€’ props å±æ€§ã€‚</p>
<p>Provider çš„å®ç°æ¯”è¾ƒç®€å•ï¼Œæ ¸å¿ƒå°±æ˜¯<strong>æŠŠ store æ”¾åˆ° context é‡Œé¢ï¼Œæ‰€æœ‰çš„å­å…ƒç´ å¯ä»¥ç›´æ¥å–åˆ° store</strong>ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">Provider</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">static</span> childContextTypes = &#123;</span><br><span class="line">    store: PropTypes.object,</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">    <span class="keyword">super</span>(props)</span><br><span class="line">    <span class="keyword">this</span>.store = props.store <span class="comment">// ä¹Ÿå°±æ˜¯ Provider ç»„ä»¶ä»å¤–éƒ¨ä¼ å…¥çš„ store</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  getChildContext() &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123; <span class="attr">store</span>: <span class="keyword">this</span>.store &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.props.children <span class="comment">// ä¸­é—´åŒ…çš„ç»„ä»¶ä¼ å…¥äº† contextï¼Œå…¶ä½™åŸå°ä¸åŠ¨è¿”å›ç»„ä»¶</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿˜æœ‰ä¸ªåœ°æ–¹å¤§å®¶çŸ¥é“å°±å¥½ï¼Œä¸¤ç§å†™æ³•ä¸€æ ·çš„ï¼Œå¯¹ context type çš„çº¦æŸ</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">Provider</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="comment">// ä¸ç”¨ static æ¥å£°æ˜...</span></span><br><span class="line">&#125;</span><br><span class="line">Provider.childContextTypes = &#123;</span><br><span class="line">  store: PropTypes.object,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="å®ç°-connect"><a href="#å®ç°-connect" class="headerlink" title="å®ç° connect"></a>å®ç° connect</h3><p>connect ç”¨æ³•</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> connect(mapStateToProps, mapDispatchToProps)(Demo)</span><br></pre></td></tr></table></figure>

<p>connect æ˜¯ä¸€ä¸ªé«˜é˜¶ç»„ä»¶ï¼Œå°±æ˜¯ä»¥ç»„ä»¶ä½œä¸ºå‚æ•°ï¼Œè¿”å›ä¸€ä¸ªç»„ä»¶ã€‚</p>
<p><strong>connect è´Ÿè´£è¿æ¥ç»„ä»¶ï¼Œç»™åˆ° redux çš„æ•°æ®æ”¾åˆ°ç»„ä»¶çš„å±æ€§é‡Œ</strong></p>
<ol>
<li>è´Ÿè´£æ¥æ”¶ä¸€ä¸ªç»„ä»¶ï¼ŒæŠŠ state çš„ä¸€äº›æ•°æ®æ”¾è¿›å»ï¼Œè¿”å›ä¸€ä¸ªç»„ä»¶</li>
<li>æ•°æ®å˜åŒ–çš„æ—¶å€™ï¼Œèƒ½å¤Ÿé€šçŸ¥ç»„ä»¶ï¼ˆéœ€è¦è¿›è¡Œç›‘å¬ï¼‰</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">connect</span>(<span class="params">mapStateToProps, mapDispatchToProps</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">WrapComponent</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="class"><span class="keyword">class</span> <span class="title">ConnectComponent</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">      <span class="keyword">static</span> contextTypes = &#123;</span><br><span class="line">        store: PropTypes.object,</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">        <span class="keyword">super</span>(props)</span><br><span class="line">        <span class="keyword">this</span>.state = &#123;</span><br><span class="line">          props: &#123;&#125;,</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      componentDidMount() &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123; store &#125; = <span class="keyword">this</span>.context</span><br><span class="line">        store.subscribe(<span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">this</span>.update()) <span class="comment">// ç›‘å¬æ›´æ–°äº‹ä»¶</span></span><br><span class="line">        <span class="keyword">this</span>.update()</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      update() &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123; store &#125; = <span class="keyword">this</span>.context</span><br><span class="line">        <span class="keyword">let</span> stateToProps = mapStateToProps(store.getState()) <span class="comment">// ä¼ å…¥ redux çš„ state</span></span><br><span class="line">        <span class="keyword">let</span> dispatchToProps = mapDispatchToProps(store.dispatch) <span class="comment">// ä¼ å…¥ redux çš„ dispatch</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">this</span>.setState(&#123;</span><br><span class="line">          props: &#123;</span><br><span class="line">            ...this.state.props,</span><br><span class="line">            ...stateToProps,</span><br><span class="line">            ...dispatchToProps,</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      render() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">WrapComponent</span> &#123;<span class="attr">...this.state.props</span>&#125; /&gt;</span></span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™æ · connect å°±å®ç°äº†ï¼Œä½†è¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œåƒä¸Šé¢çš„ä¾‹å­ï¼Œæˆ‘ä»¬å…¶å®å¯ä»¥ç›´æ¥ä¼ å…¥ action creatorsï¼Œ è€Œä¸ç”¨è‡ªå·±å®šä¹‰å‡½æ•°ä¼ å…¥ dispatch</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">export default connect(mapStateToProps, &#123; addNumAction, reduceNumAction &#125;)(Demo)</span><br></pre></td></tr></table></figure>

<p>è°ƒç”¨çš„æ—¶å€™ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;button onClick&#x3D;&#123;this.props.addNumAction&#125;&gt;å¢åŠ 1&lt;&#x2F;button&gt;</span><br><span class="line">&lt;button onClick&#x3D;&#123;this.props.reduceNumAction&#125;&gt;å‡å°‘1&lt;&#x2F;button&gt;</span><br></pre></td></tr></table></figure>

<p>é‚£å®ƒçš„ dispatch å“ªé‡Œæ¥çš„ï¼Œå…¶å®æ˜¯ç”¨äº† redux çš„ bindActionCreators å‡½æ•°ï¼Œåœ¨æˆ‘ä»‹ç» redux çš„æ–‡ç« æœ‰æåˆ°ï¼Œå®ƒä½œç”¨æ˜¯å°† actionCreator è½¬åŒ–æˆ dispatch å½¢å¼ï¼Œå³</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123; addNumAction &#125;  &#x3D;&gt;  (...args) &#x3D;&gt; dispatch(addNumAction(args))</span><br></pre></td></tr></table></figure>

<p>æ‰€ä»¥æˆ‘ä»¬éœ€è¦å†æ›´æ”¹ connect å‡½æ•°ï¼ŒåŒæ—¶ï¼Œè¿™æ¬¡æˆ‘ä»¬ç”¨ç®­å¤´å‡½æ•°çš„å½¢å¼ç®€åŒ–ä»£ç </p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; bindActionCreators &#125; <span class="keyword">from</span> <span class="string">'redux'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> connect = <span class="function">(<span class="params">mapStateToProps, mapDispatchToProps</span>) =&gt;</span> <span class="function"><span class="params">WrapComponent</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="class"><span class="keyword">class</span> <span class="title">ConnectComponent</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> contextTypes = &#123;</span><br><span class="line">      store: PropTypes.object,</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">      <span class="keyword">super</span>(props)</span><br><span class="line">      <span class="keyword">this</span>.state = &#123;</span><br><span class="line">        props: &#123;&#125;,</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    componentDidMount() &#123;</span><br><span class="line">      <span class="keyword">const</span> &#123; store &#125; = <span class="keyword">this</span>.context</span><br><span class="line">      store.subscribe(<span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">this</span>.update())</span><br><span class="line">      <span class="keyword">this</span>.update()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    update() &#123;</span><br><span class="line">      <span class="keyword">const</span> &#123; store &#125; = <span class="keyword">this</span>.context</span><br><span class="line">      <span class="keyword">let</span> stateToProps = mapStateToProps(store.getState())</span><br><span class="line">      <span class="keyword">let</span> dispatchToProps</span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">typeof</span> mapDispatchToProps === <span class="string">'function'</span>) &#123;</span><br><span class="line">        dispatchToProps = mapDispatchToProps(store.dispatch)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// ä¼ é€’äº†ä¸€ä¸ª actionCreator å¯¹è±¡è¿‡æ¥</span></span><br><span class="line">        dispatchToProps = bindActionCreators(mapDispatchToProps, store.dispatch)</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">this</span>.setState(&#123;</span><br><span class="line">        props: &#123;</span><br><span class="line">          ...this.state.props,</span><br><span class="line">          ...stateToProps,</span><br><span class="line">          ...dispatchToProps,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    render() &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">WrapComponent</span> &#123;<span class="attr">...this.state.props</span>&#125; /&gt;</span></span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä»¥ä¸Šï¼Œæˆ‘ä»¬å®ç°äº†æœ€åŸºæœ¬ç‰ˆçš„ react-reduxï¼Œç„¶åæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ç”¨æ–°ç‰ˆçš„ Context API å†å†™ä¸€æ¬¡</p>
<h2 id="ä½¿ç”¨æ–°ç‰ˆ-Context-API-å®ç°"><a href="#ä½¿ç”¨æ–°ç‰ˆ-Context-API-å®ç°" class="headerlink" title="ä½¿ç”¨æ–°ç‰ˆ Context API å®ç°"></a>ä½¿ç”¨æ–°ç‰ˆ Context API å®ç°</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> &#123; bindActionCreators &#125; <span class="keyword">from</span> <span class="string">'redux'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> StoreContext = React.createContext(<span class="literal">null</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿™æ¬¡ Provider é‡‡å–æ›´ç®€æ´çš„å½¢å¼å†™</span></span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">Provider</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;StoreContext.Provider value=&#123;<span class="keyword">this</span>.props.store&#125;&gt;</span><br><span class="line">        &#123;<span class="keyword">this</span>.props.children&#125;</span><br><span class="line">      &lt;<span class="regexp">/StoreContext.Provider&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">export function connect(mapStateToProps, mapDispatchToProps) &#123;</span></span><br><span class="line"><span class="regexp">  return function (WrapComponent) &#123;</span></span><br><span class="line"><span class="regexp">    class ConnectComponent extends Component &#123;</span></span><br><span class="line"><span class="regexp">      constructor(props) &#123;</span></span><br><span class="line"><span class="regexp">        super(props)</span></span><br><span class="line"><span class="regexp">        this.state = &#123;</span></span><br><span class="line"><span class="regexp">          props: &#123;&#125;,</span></span><br><span class="line"><span class="regexp">        &#125;</span></span><br><span class="line"><span class="regexp">      &#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">      componentDidMount() &#123;</span></span><br><span class="line"><span class="regexp">        const &#123; store &#125; = this.props</span></span><br><span class="line"><span class="regexp">        store.subscribe(() =&gt; this.update())</span></span><br><span class="line"><span class="regexp">        this.update()</span></span><br><span class="line"><span class="regexp">      &#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">      update() &#123;</span></span><br><span class="line"><span class="regexp">        const &#123; store &#125; = this.props</span></span><br><span class="line"><span class="regexp">        let stateToProps = mapStateToProps(store.getState())</span></span><br><span class="line"><span class="regexp">        let dispatchToProps</span></span><br><span class="line"><span class="regexp">        if (typeof mapDispatchToProps === 'function') &#123;</span></span><br><span class="line"><span class="regexp">          dispatchToProps = mapDispatchToProps(store.dispatch)</span></span><br><span class="line"><span class="regexp">        &#125; else &#123;</span></span><br><span class="line"><span class="regexp">          /</span><span class="regexp">/ ä¼ é€’äº†ä¸€ä¸ª actionCreator å¯¹è±¡è¿‡æ¥</span></span><br><span class="line"><span class="regexp">          dispatchToProps = bindActionCreators(mapDispatchToProps, store.dispatch)</span></span><br><span class="line"><span class="regexp">        &#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">        this.setState(&#123;</span></span><br><span class="line"><span class="regexp">          props: &#123;</span></span><br><span class="line"><span class="regexp">            ...this.state.props,</span></span><br><span class="line"><span class="regexp">            ...stateToProps,</span></span><br><span class="line"><span class="regexp">            ...dispatchToProps,</span></span><br><span class="line"><span class="regexp">          &#125;,</span></span><br><span class="line"><span class="regexp">        &#125;)</span></span><br><span class="line"><span class="regexp">      &#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">      render() &#123;</span></span><br><span class="line"><span class="regexp">        return &lt;WrapComponent &#123;...this.state.props&#125; /</span>&gt;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="params">()</span> =&gt;</span> (</span><br><span class="line">      &lt;StoreContext.Consumer&gt;</span><br><span class="line">        &#123;value =&gt; <span class="xml"><span class="tag">&lt;<span class="name">ConnectComponent</span> <span class="attr">store</span>=<span class="string">&#123;value&#125;</span> /&gt;</span></span>&#125;</span><br><span class="line">      &lt;<span class="regexp">/StoreContext.Consumer&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Reactç¬”è®°</category>
      </categories>
      <tags>
        <tag>React</tag>
        <tag>react-redux</tag>
      </tags>
  </entry>
  <entry>
    <title>å®ç°ä¸€ä¸ªReduxï¼ˆå®Œå–„ç‰ˆï¼‰</title>
    <url>/2020/05/14/%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%B8%AARedux%EF%BC%88%E5%AE%8C%E5%96%84%E7%89%88%EF%BC%89/</url>
    <content><![CDATA[<p>ä¸Šç¯‡å†™äº†å®ç°ä¸€ä¸ªè¿·ä½  Reduxï¼ˆåŸºç¡€ç‰ˆï¼‰ï¼Œæœ¬ç¯‡å°†ç»§ç»­å®Œå–„ Redux</p>
<a id="more"></a>

<p>é˜…è¯»æœ¬æ–‡å‰å…ˆçœ‹ï¼š<a href="https://jacky-summer.github.io/2020/04/22/%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%B8%AA%E8%BF%B7%E4%BD%A0Redux%EF%BC%88%E5%9F%BA%E7%A1%80%E7%89%88%EF%BC%89/" target="_blank" rel="noopener">å®ç°ä¸€ä¸ªè¿·ä½  Reduxï¼ˆåŸºç¡€ç‰ˆï¼‰</a></p>
<h2 id="ä¸­é—´ä»¶"><a href="#ä¸­é—´ä»¶" class="headerlink" title="ä¸­é—´ä»¶"></a>ä¸­é—´ä»¶</h2><p>Redux æœ‰ä¸ª API æ˜¯ applyMiddlewareï¼Œ ä¸“é—¨ç”¨æ¥ä½¿ç”¨ä¸­é—´ä»¶çš„ï¼Œé¦–å…ˆæˆ‘ä»¬å¾—çŸ¥é“ï¼Œå®ƒç”¨æ¥å¹²å˜›çš„ã€‚</p>
<h3 id="ä¸ºä»€ä¹ˆä¼šéœ€è¦ä¸­é—´ä»¶ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆä¼šéœ€è¦ä¸­é—´ä»¶ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆä¼šéœ€è¦ä¸­é—´ä»¶ï¼Ÿ"></a>ä¸ºä»€ä¹ˆä¼šéœ€è¦ä¸­é—´ä»¶ï¼Ÿ</h3><p>å‡è®¾æˆ‘ä»¬ç°åœ¨éœ€è¦è®°å½•æ¯æ¬¡çš„ dispatch å‰å state çš„è®°å½•ï¼Œ é‚£è¦æ€ä¹ˆåšå‘¢ï¼Ÿäºæ˜¯ï¼Œç®€å•ç²—æš´çš„åœ¨ç¬¬ä¸€ä¸ª dispatch æ–¹æ³•å‰ååŠ ä»£ç </p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">'prev state'</span>, store.getState())</span><br><span class="line"><span class="built_in">console</span>.log(action)</span><br><span class="line">store.dispatch(&#123; <span class="attr">type</span>: <span class="string">'INCREMENT'</span> &#125;)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'next state'</span>, store.getState())</span><br></pre></td></tr></table></figure>

<p>è¿™éƒ¨åˆ†è¿è¡Œç»“æœï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">prev state &#123;<span class="attr">value</span>: <span class="number">10</span>&#125;</span><br><span class="line">&#123;<span class="attr">type</span>: <span class="string">"INCREMENT"</span>&#125;</span><br><span class="line">å½“å‰æ•°å­—ä¸ºï¼š<span class="number">11</span></span><br><span class="line">next state &#123;<span class="attr">value</span>: <span class="number">11</span>&#125;</span><br></pre></td></tr></table></figure>

<p>ä½†åŠ å®Œå‘ç°æƒ…å†µä¸å¯¹ï¼Œé¡µé¢æœ‰å¤šä¸ª dispatch çš„è¯ï¼Œè¦è¿™æ ·å†™å¾ˆå¤šæ¬¡ï¼Œä¼šäº§ç”Ÿå¤§é‡é‡å¤ä»£ç ã€‚çªç„¶ï¼Œåˆè¦åŠ éœ€æ±‚äº†ï¼Œéœ€è¦è®°å½•æ¯æ¬¡å‡ºé”™çš„åŸå› ,å•ç‹¬çš„åŠŸèƒ½è¦æ±‚å¦‚ä¸‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  store.dispatch(action)</span><br><span class="line">&#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">  <span class="built_in">console</span>.error(<span class="string">'é”™è¯¯ä¿¡æ¯: '</span>, err)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç„¶åä¸¤ä¸ªéœ€æ±‚éƒ½è¦ï¼Œé‚£å°±å‡‘åˆä¸¤ä¸ªï¼Œä½†å ä¸€èµ·çœ‹æ›´ä¹±äº†ã€‚</p>
<h3 id="ä¸­é—´ä»¶çš„æ¦‚å¿µ"><a href="#ä¸­é—´ä»¶çš„æ¦‚å¿µ" class="headerlink" title="ä¸­é—´ä»¶çš„æ¦‚å¿µ"></a>ä¸­é—´ä»¶çš„æ¦‚å¿µ</h3><p>æ˜¾ç„¶ï¼Œæˆ‘ä»¬ä¸èƒ½é€šè¿‡è¿™ç§æ–¹å¼æ¥åšã€‚æ¯”è¾ƒç†æƒ³çš„æ–¹æ¡ˆæ˜¯ Redux æœ¬èº«æä¾›ä¸€ä¸ªåŠŸèƒ½å…¥å£ï¼Œè®©æˆ‘ä»¬å¯ä»¥åœ¨å¤–é¢æ·»åŠ åŠŸèƒ½è¿›å»ï¼Œè¿™æ ·ä»£ç å°±ä¸ä¼šå¤æ‚ã€‚</p>
<p>ä½†å¦‚æœç»™æˆ‘ä»¬ç°æœ‰å®ç°çš„ Redux æ·»åŠ åŠŸèƒ½ï¼Œåœ¨å“ªä¸ªç¯èŠ‚æ·»åŠ æ¯”è¾ƒåˆé€‚å‘¢ï¼Ÿ</p>
<ul>
<li>Reducerï¼š çº¯å‡½æ•°ï¼Œåªæ‰¿æ‹…è®¡ç®— State çš„åŠŸèƒ½ï¼Œä¸åˆé€‚æ‰¿æ‹…å…¶ä»–åŠŸèƒ½ï¼Œä¹Ÿæ‰¿æ‹…ä¸äº†ï¼Œå› ä¸ºç†è®ºä¸Šï¼Œçº¯å‡½æ•°ä¸èƒ½è¿›è¡Œè¯»å†™æ“ä½œã€‚</li>
<li>Viewï¼šä¸ State ä¸€ä¸€å¯¹åº”ï¼Œå¯ä»¥çœ‹ä½œ State çš„è§†è§‰å±‚ï¼Œä¹Ÿä¸åˆé€‚æ‰¿æ‹…å…¶ä»–åŠŸèƒ½ã€‚</li>
<li>Actionï¼šå­˜æ”¾æ•°æ®çš„å¯¹è±¡ï¼Œå³æ¶ˆæ¯çš„è½½ä½“ï¼Œåªèƒ½è¢«åˆ«äººæ“ä½œï¼Œè‡ªå·±ä¸èƒ½è¿›è¡Œä»»ä½•æ“ä½œã€‚</li>
</ul>
<p>æˆ‘ä»¬å‘ç°ï¼Œä»¥ä¸Šéœ€æ±‚éƒ½æ˜¯å’Œ dispatch ç›¸å…³ï¼Œåªæœ‰å‘é€ action çš„è¿™ä¸ªæ­¥éª¤ï¼Œå³ store.dispatch() æ–¹æ³•ï¼Œå¯ä»¥æ·»åŠ åŠŸèƒ½ã€‚æ¯”å¦‚æ·»åŠ æ—¥å¿—åŠŸèƒ½ï¼Œæˆ‘ä»¬åªè¦æŠŠæ—¥å¿—æ”¾è¿› dispatch å‡½æ•°é‡Œï¼Œä¸å°±å¥½äº†å—ï¼Œæˆ‘ä»¬åªéœ€è¦æ”¹é€  dispatch å‡½æ•°ï¼ŒæŠŠ dispatch è¿›è¡Œä¸€å±‚å°è£…ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> store = createStore(counter)</span><br><span class="line"><span class="keyword">const</span> next = store.dispatch</span><br><span class="line">store.dispatch = <span class="function"><span class="params">action</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'prev state'</span>, store.getState())</span><br><span class="line">    <span class="built_in">console</span>.log(action)</span><br><span class="line">    next(action)</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'next state'</span>, store.getState())</span><br><span class="line">  &#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">    <span class="built_in">console</span>.error(<span class="string">'é”™è¯¯ä¿¡æ¯: '</span>, err)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸Šé¢ä»£ç ï¼Œå¯¹ store.dispatch è¿›è¡Œäº†é‡æ–°å®šä¹‰ï¼Œè¿™å°±æ˜¯ä¸­é—´ä»¶çš„é›å½¢ã€‚</p>
<p>æ‰€ä»¥è¯´ Redux çš„ä¸­é—´ä»¶å°±æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œæ˜¯å¯¹ dispatch æ–¹æ³•çš„æ‰©å±•ï¼Œå¢å¼º dispatch çš„åŠŸèƒ½ã€‚</p>
<h3 id="å®ç°ä¸­é—´ä»¶"><a href="#å®ç°ä¸­é—´ä»¶" class="headerlink" title="å®ç°ä¸­é—´ä»¶"></a>å®ç°ä¸­é—´ä»¶</h3><p>å¯¹äºä¸Šè¿° dispatch çš„å°è£…ï¼Œå®é™…ä¸Šæ˜¯ç¼ºé™·å¾ˆå¤§çš„ã€‚ä¸‡ä¸€åˆæ¥ n å¤šä¸ªéœ€æ±‚æ€ä¹ˆåŠ? é‚£ dispatch å‡½æ•°å°±æ··ä¹±åˆ°æ— æ³•ç»´æŠ¤äº†ï¼Œæ•…éœ€è¦æ‰©å±•æ€§å¼ºçš„å¤šä¸­é—´ä»¶åˆä½œæ¨¡å¼ã€‚</p>
<ol>
<li>æˆ‘ä»¬æŠŠ loggerMiddleware æå–å‡ºæ¥</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> store = createStore(counter)</span><br><span class="line"><span class="keyword">const</span> next = store.dispatch</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> loggerMiddleware = <span class="function"><span class="params">action</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'prev state'</span>, store.getState())</span><br><span class="line">  <span class="built_in">console</span>.log(action)</span><br><span class="line">  next(action)</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'next state'</span>, store.getState())</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">store.dispatch = <span class="function"><span class="params">action</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    loggerMiddleware(action)</span><br><span class="line">  &#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">    <span class="built_in">console</span>.error(<span class="string">'é”™è¯¯ä¿¡æ¯: '</span>, err)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>æŠŠ exceptionMiddleware æå–å‡ºæ¥</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> exceptionMiddleware = <span class="function"><span class="params">action</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    loggerMiddleware(action)</span><br><span class="line">  &#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">    <span class="built_in">console</span>.error(<span class="string">'é”™è¯¯ä¿¡æ¯: '</span>, err)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">store.dispatch = exceptionMiddleware</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>ç°åœ¨ä»£ç æœ‰ä¸ªé—®é¢˜ï¼Œå°±æ˜¯ exceptionMiddleware ä¸­é—´ä»¶å†™æ­» loggerMiddlewareï¼Œä½†ä»¥ååˆä¸‡ä¸€ä¸è¦è®°å½•åŠŸèƒ½å‘¢ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦è®© next(action) å˜æˆåŠ¨æ€çš„ï¼Œå³æ¢å“ªä¸ªä¸­é—´ä»¶éƒ½å¯ä»¥</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> exceptionMiddleware = <span class="function"><span class="params">next</span> =&gt;</span> <span class="function"><span class="params">action</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="comment">// loggerMiddleware(action)</span></span><br><span class="line">    next(action)</span><br><span class="line">  &#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">    <span class="built_in">console</span>.error(<span class="string">'é”™è¯¯ä¿¡æ¯: '</span>, err)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ªå†™æ³•å¯èƒ½åˆšå¼€å§‹çœ‹ä¸å¤ªé€‚åº”ï¼Œå®é™…å°±æ˜¯å‡½æ•°é‡Œé¢ï¼Œè¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œå³ç­‰æ•ˆäº</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> exceptionMiddleware = <span class="function"><span class="keyword">function</span> (<span class="params">next</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">action</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="comment">// loggerMiddleware(action)</span></span><br><span class="line">      next(action)</span><br><span class="line">    &#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">      <span class="built_in">console</span>.error(<span class="string">'é”™è¯¯ä¿¡æ¯: '</span>, err)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¼ å‚æ•°çš„æ—¶å€™å³æ˜¯ exceptionMiddleware(next)(action)</p>
<ol start="4">
<li>åŒç†ï¼Œæˆ‘ä»¬è®© loggerMiddleware é‡Œé¢æ— æ³•æ‰©å±•åˆ«çš„ä¸­é—´ä»¶äº†ï¼æˆ‘ä»¬ä¹ŸæŠŠ next å†™æˆåŠ¨æ€çš„</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> loggerMiddleware = <span class="function"><span class="params">next</span> =&gt;</span> <span class="function"><span class="params">action</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'prev state'</span>, store.getState())</span><br><span class="line">  <span class="built_in">console</span>.log(action)</span><br><span class="line">  next(action)</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'next state'</span>, store.getState())</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç›®å‰ä¸ºæ­¢ï¼Œæ•´ä¸ªä¸­é—´ä»¶è®¾è®¡æ”¹é€ å¦‚ä¸‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> store = createStore(counter)</span><br><span class="line"><span class="keyword">const</span> next = store.dispatch</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> loggerMiddleware = <span class="function"><span class="params">next</span> =&gt;</span> <span class="function"><span class="params">action</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'prev state'</span>, store.getState())</span><br><span class="line">  <span class="built_in">console</span>.log(action)</span><br><span class="line">  next(action)</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'next state'</span>, store.getState())</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> exceptionMiddleware = <span class="function"><span class="params">next</span> =&gt;</span> <span class="function"><span class="params">action</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    next(action)</span><br><span class="line">  &#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">    <span class="built_in">console</span>.error(<span class="string">'é”™è¯¯ä¿¡æ¯: '</span>, err)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">store.dispatch = exceptionMiddleware(loggerMiddleware(next))</span><br></pre></td></tr></table></figure>

<ol start="5">
<li>ç°åœ¨åˆæœ‰ä¸€ä¸ªæ–°é—®é¢˜ï¼Œæƒ³æƒ³å¹³æ—¶ä½¿ç”¨ä¸­é—´ä»¶æ˜¯ä»å¤–éƒ¨å¼•å…¥çš„ï¼Œé‚£å¤–éƒ¨ä¸­é—´ä»¶é‡Œé¢æ€ä¹ˆä¼šæœ‰ store.getState() è¿™ä¸ªæ–¹æ³•ï¼Œäºæ˜¯æˆ‘ä»¬æŠŠ store ä¹Ÿç»™ç‹¬ç«‹å‡ºå»ã€‚</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> store = createStore(counter)</span><br><span class="line"><span class="keyword">const</span> next = store.dispatch</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> loggerMiddleware = <span class="function"><span class="params">store</span> =&gt;</span> <span class="function"><span class="params">next</span> =&gt;</span> <span class="function"><span class="params">action</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'prev state'</span>, store.getState())</span><br><span class="line">  <span class="built_in">console</span>.log(action)</span><br><span class="line">  next(action)</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'next state'</span>, store.getState())</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> exceptionMiddleware = <span class="function"><span class="params">store</span> =&gt;</span> <span class="function"><span class="params">next</span> =&gt;</span> <span class="function"><span class="params">action</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    next(action)</span><br><span class="line">  &#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">    <span class="built_in">console</span>.error(<span class="string">'é”™è¯¯ä¿¡æ¯: '</span>, err)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> logger = loggerMiddleware(store)</span><br><span class="line"><span class="keyword">const</span> exception = exceptionMiddleware(store)</span><br><span class="line">store.dispatch = exception(logger(next))</span><br></pre></td></tr></table></figure>

<ol start="6">
<li>å¦‚æœåˆæœ‰ä¸€ä¸ªæ–°éœ€æ±‚ï¼Œéœ€è¦åœ¨æ‰“å°æ—¥å¿—å‰è¾“å‡ºå½“å‰æ—¶é—´æˆ³ï¼Œæˆ‘ä»¬åˆéœ€è¦æ„é€ ä¸€ä¸ªä¸­é—´ä»¶</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> timeMiddleware = <span class="function"><span class="params">store</span> =&gt;</span> <span class="function"><span class="params">next</span> =&gt;</span> <span class="function"><span class="params">action</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'time'</span>, <span class="keyword">new</span> <span class="built_in">Date</span>().getTime())</span><br><span class="line">  next(action)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> logger = loggerMiddleware(store)</span><br><span class="line"><span class="keyword">const</span> exception = exceptionMiddleware(store)</span><br><span class="line"><span class="keyword">const</span> time = timeMiddleware(store)</span><br><span class="line">store.dispatch = exception(time(logger(next)))</span><br></pre></td></tr></table></figure>

<h3 id="ä¸­é—´ä»¶ä½¿ç”¨æ–¹å¼ä¼˜åŒ–"><a href="#ä¸­é—´ä»¶ä½¿ç”¨æ–¹å¼ä¼˜åŒ–" class="headerlink" title="ä¸­é—´ä»¶ä½¿ç”¨æ–¹å¼ä¼˜åŒ–"></a>ä¸­é—´ä»¶ä½¿ç”¨æ–¹å¼ä¼˜åŒ–</h3><p>ä¸Šé¢çš„å†™æ³•å¯çŸ¥ï¼Œä¸­é—´ä»¶çš„ä½¿ç”¨æ–¹å¼æœ‰ç‚¹ç¹çï¼Œæ•…æˆ‘ä»¬éœ€è¦æŠŠç»†èŠ‚å°è£…èµ·æ¥ï¼Œé€šè¿‡æ‰©å±• createStore æ¥å®ç°ã€‚<br>å…ˆæ¥çœ‹çœ‹æœŸæœ›çš„ç”¨æ³•ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* æ¥æ”¶æ—§çš„ createStoreï¼Œè¿”å›æ–°çš„ createStore */</span></span><br><span class="line"><span class="keyword">const</span> newCreateStore = applyMiddleware(</span><br><span class="line">  exceptionMiddleware,</span><br><span class="line">  timeMiddleware,</span><br><span class="line">  loggerMiddleware</span><br><span class="line">)(createStore)</span><br><span class="line"></span><br><span class="line"><span class="comment">/* è¿”å›äº†ä¸€ä¸ª dispatch è¢«é‡å†™è¿‡çš„ store */</span></span><br><span class="line"><span class="keyword">const</span> store = newCreateStore(reducer)</span><br></pre></td></tr></table></figure>

<h3 id="å®ç°-applyMiddleware"><a href="#å®ç°-applyMiddleware" class="headerlink" title="å®ç° applyMiddleware"></a>å®ç° applyMiddleware</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> applyMiddleware = <span class="function"><span class="keyword">function</span> (<span class="params">...middlewares</span>) </span>&#123;</span><br><span class="line">  <span class="comment">/* è¿”å›ä¸€ä¸ªé‡å†™createStoreçš„æ–¹æ³• */</span></span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="title">rewriteCreateStoreFunc</span>(<span class="params">oldCreateStore</span>) </span>&#123;</span><br><span class="line">    <span class="comment">/* è¿”å›é‡å†™åæ–°çš„ createStore */</span></span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="title">newCreateStore</span>(<span class="params">reducer, preloadedState</span>) </span>&#123;</span><br><span class="line">      <span class="comment">// ç”Ÿæˆ store</span></span><br><span class="line">      <span class="keyword">const</span> store = oldCreateStore(reducer, preloadedState)</span><br><span class="line">      <span class="keyword">let</span> dispatch = store.dispatch</span><br><span class="line"></span><br><span class="line">      <span class="comment">// åªæš´éœ² store éƒ¨åˆ†ç»™ä¸­é—´ä»¶ç”¨çš„APIï¼Œè€Œä¸ä¼ å…¥æ•´ä¸ªstore</span></span><br><span class="line">      <span class="keyword">const</span> middlewareAPI = &#123;</span><br><span class="line">        getState: store.getState,</span><br><span class="line">        dispatch: <span class="function"><span class="params">action</span> =&gt;</span> store.dispatch(action),</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">// ç»™æ¯ä¸ªä¸­é—´ä»¶ä¼ å…¥API</span></span><br><span class="line">      <span class="comment">// ç›¸å½“äº const logger = loggerMiddleware(store)ï¼Œå³ const logger = loggerMiddleware(&#123; getState, dispatch &#125;)</span></span><br><span class="line">      <span class="comment">// const chain = [exception, time, logger]</span></span><br><span class="line">      <span class="keyword">const</span> chain = middlewares.map(<span class="function"><span class="params">middleware</span> =&gt;</span> middleware(middlewareAPI))</span><br><span class="line">      <span class="comment">// å®ç° exception(time((logger(dispatch))))</span></span><br><span class="line">      chain.reverse().map(<span class="function"><span class="params">middleware</span> =&gt;</span> &#123;</span><br><span class="line">        dispatch = middleware(dispatch)</span><br><span class="line">      &#125;)</span><br><span class="line">      <span class="comment">// é‡å†™dispatch</span></span><br><span class="line">      store.dispatch = dispatch</span><br><span class="line">      <span class="keyword">return</span> store</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬æ¥çœ‹è¿™ä¸€å¤„ä»£ç ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">chain.reverse().map(<span class="function"><span class="params">middleware</span> =&gt;</span> &#123;</span><br><span class="line">  dispatch = middleware(dispatch)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>è¦æ³¨æ„ä¸€ç‚¹ï¼Œä¸­é—´ä»¶æ˜¯é¡ºåºæ‰§è¡Œï¼Œä½†æ˜¯ dispatch å´æ˜¯ååºç”Ÿæˆçš„ã€‚æ‰€ä»¥åœ¨è¿™æ­¥ä¼šæŠŠæ•°ç»„é¡ºåºç»™ååºï¼ˆæ¯”å¦‚ applyMiddleware(A, B, C)ï¼Œå› ä¸º A åœ¨è°ƒç”¨æ—¶éœ€è¦çŸ¥é“ B çš„ dispatchï¼ŒB åœ¨æ‰§è¡Œæ—¶éœ€è¦çŸ¥é“ C çš„ dispatchï¼Œé‚£ä¹ˆéœ€è¦å…ˆçŸ¥é“ C çš„ dispatchã€‚ï¼‰</p>
<p>å®˜æ–¹ Redux æºç ï¼Œé‡‡ç”¨äº† compose å‡½æ•°ï¼Œæˆ‘ä»¬ä¹Ÿè¯•è¯•è¿™ç§æ–¹å¼æ¥å†™ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> applyMiddleware = <span class="function">(<span class="params">...middlewares</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="params">createStore</span> =&gt;</span> <span class="function">(<span class="params">...args</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    dispatch = compose(...chain)(store.dispatch)</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// compose(fn1, fn2, fn3)</span></span><br><span class="line"><span class="comment">// fn1(fn2(fn3))</span></span><br><span class="line"><span class="comment">// ä»å³åˆ°å·¦æ¥ç»„åˆå¤šä¸ªå‡½æ•°: ä»å³åˆ°å·¦æŠŠæ¥æ”¶åˆ°çš„å‡½æ•°åˆæˆåçš„æœ€ç»ˆå‡½æ•°</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> compose = <span class="function">(<span class="params">...funcs</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (funcs.length === <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="params">arg</span> =&gt;</span> arg</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (funcs.length === <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> funcs[<span class="number">0</span>]</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> funcs.reduce(<span class="function">(<span class="params">ret, item</span>) =&gt;</span> <span class="function">(<span class="params">...args</span>) =&gt;</span> ret(item(...args)))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬å†å¯¹ä»£ç ç²¾ç®€ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> applyMiddleware = <span class="function">(<span class="params">...middlewares</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="params">createStore</span> =&gt;</span> <span class="function">(<span class="params">...args</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> store = createStore(...args)</span><br><span class="line">    <span class="keyword">let</span> dispatch = store.dispatch</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> middlewareAPI = &#123;</span><br><span class="line">      getState: store.getState,</span><br><span class="line">      dispatch: <span class="function"><span class="params">action</span> =&gt;</span> dispatch(action),</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> chain = middlewares.map(<span class="function"><span class="params">middleware</span> =&gt;</span> middleware(middlewareAPI))</span><br><span class="line">    dispatch = compose(...chain)(store.dispatch)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      ...store,</span><br><span class="line">      dispatch,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> compose = <span class="function">(<span class="params">...funcs</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (funcs.length === <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="params">arg</span> =&gt;</span> arg</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (funcs.length === <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> funcs[<span class="number">0</span>]</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> funcs.reduce(<span class="function">(<span class="params">ret, item</span>) =&gt;</span> <span class="function">(<span class="params">...args</span>) =&gt;</span> ret(item(...args)))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="createStore-çš„å¤„ç†"><a href="#createStore-çš„å¤„ç†" class="headerlink" title="createStore çš„å¤„ç†"></a>createStore çš„å¤„ç†</h3><p>ç°åœ¨çš„é—®é¢˜æ˜¯ï¼Œæœ‰ä¸¤ä¸ª createStore äº†ï¼Œè¿™æ€ä¹ˆåŒºåˆ†ï¼Œä¸Šç¯‡æˆ‘ä»¬å…¶å®å·²ç»å…ˆå‘ŠçŸ¥äº†å¯¹ä¸­é—´ä»¶ä»£ç å¤„ç†ï¼Œä½†å…·ä½“æ€ä¹ˆæ¨å‡ºçš„ï¼Œæˆ‘ä»¬ç»§ç»­çœ‹ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ²¡æœ‰ä¸­é—´ä»¶çš„ createStore</span></span><br><span class="line"><span class="keyword">const</span> store = createStore(counter)</span><br><span class="line"></span><br><span class="line"><span class="comment">// æœ‰ä¸­é—´ä»¶çš„ createStore</span></span><br><span class="line"><span class="keyword">const</span> rewriteCreateStoreFunc = applyMiddleware(</span><br><span class="line">  exceptionMiddleware,</span><br><span class="line">  timeMiddleware,</span><br><span class="line">  loggerMiddleware</span><br><span class="line">)</span><br><span class="line"><span class="keyword">const</span> newCreateStore = rewriteCreateStoreFunc(createStore)</span><br><span class="line"><span class="keyword">const</span> store = newCreateStore(counter, preloadedState)</span><br></pre></td></tr></table></figure>

<p>ä¸ºäº†è®©ç”¨æˆ·ç”¨èµ·æ¥ç»Ÿä¸€ä¸€äº›ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆç®€å•çš„ä½¿ä»–ä»¬çš„ä½¿ç”¨æ–¹å¼ä¸€è‡´ï¼Œæˆ‘ä»¬ä¿®æ”¹ä¸‹ createStore æ–¹æ³•</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> createStore = <span class="function">(<span class="params">reducer, preloadedState, rewriteCreateStoreFunc</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// å¦‚æœæœ‰ rewriteCreateStoreFuncï¼Œé‚£å°±é‡‡ç”¨æ–°çš„ createStore</span></span><br><span class="line">  <span class="keyword">if</span> (rewriteCreateStoreFunc) &#123;</span><br><span class="line">    <span class="keyword">const</span> newCreateStore = rewriteCreateStoreFunc(createStore)</span><br><span class="line">    <span class="keyword">return</span> newCreateStore(reducer, preloadedState)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸è¿‡ Redux æºç  rewriteCreateStoreFunc æ¢äº†ä¸ªåå­—ï¼Œè¿˜åŠ äº†åˆ¤æ–­ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬ä¸Šç¯‡çš„ä»£ç ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="keyword">typeof</span> enhancer !== <span class="string">'undefined'</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> enhancer !== <span class="string">'function'</span>) &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'Expected the enhancer to be a function.'</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> enhancer(createStore)(reducer, preloadedState)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ‰€ä»¥ä¸­é—´ä»¶çš„ç”¨æ³•ä¸º</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> store = createStore(counter, <span class="comment">/* preloadedStateå¯é€‰ */</span> applyMiddleware(logger))</span><br></pre></td></tr></table></figure>

<h2 id="combineReducers"><a href="#combineReducers" class="headerlink" title="combineReducers"></a>combineReducers</h2><p>å¦‚æœæˆ‘ä»¬åšçš„é¡¹ç›®å¾ˆå¤§ï¼Œæœ‰å¤§é‡ stateï¼Œé‚£ä¹ˆç»´æŠ¤èµ·æ¥å¾ˆéº»çƒ¦ã€‚Redux æä¾›äº† combineReducers è¿™ä¸ªæ–¹æ³•ï¼Œä½œç”¨æ˜¯æŠŠå¤šä¸ª reducer åˆå¹¶æˆä¸€ä¸ª reducerï¼Œ æ¯ä¸ª reducer è´Ÿè´£ç‹¬ç«‹çš„æ¨¡å—ã€‚</p>
<p>æˆ‘ä»¬ç”¨ä¸€ä¸ªæ–°ä¾‹å­æ¥ä¸¾ä¾‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createStore, applyMiddleware, combineReducers &#125; <span class="keyword">from</span> <span class="string">'redux'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> initCounterState = &#123;</span><br><span class="line">  value: <span class="number">10</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> initInfoState = &#123;</span><br><span class="line">  name: <span class="string">'jacky'</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> reducer = combineReducers(&#123;</span><br><span class="line">  counter: counterReducer,</span><br><span class="line">  info: infoReducer,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// counter reducerå¤„ç†å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">counterReducer</span>(<span class="params">state = initCounterState, action</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">switch</span> (action.type) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">'INCREMENT'</span>:</span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">        ...state,</span><br><span class="line">        value: state.value + <span class="number">1</span>,</span><br><span class="line">      &#125;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">'DECREMENT'</span>:</span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">        ...state,</span><br><span class="line">        value: state.value - <span class="number">1</span>,</span><br><span class="line">      &#125;</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      <span class="keyword">return</span> state</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">infoReducer</span>(<span class="params">state = initInfoState, action</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">switch</span> (action.type) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">'FULL_NAME'</span>:</span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">        ...state,</span><br><span class="line">        name: state.name + <span class="string">' lin'</span>,</span><br><span class="line">      &#125;</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      <span class="keyword">return</span> state</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> store = createStore(reducer)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> init = store.getState()</span><br><span class="line"><span class="comment">// ä¸€å¼€å§‹counterä¸ºï¼š10ï¼Œinfoä¸º jacky</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">`ä¸€å¼€å§‹counterä¸ºï¼š<span class="subst">$&#123;init.counter.value&#125;</span>ï¼Œinfoä¸º <span class="subst">$&#123;init.info.name&#125;</span>`</span>)</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">listener</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  store.getState()</span><br><span class="line">&#125;</span><br><span class="line">store.subscribe(listener) <span class="comment">// ç›‘å¬stateçš„æ”¹å˜</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// counterReducer</span></span><br><span class="line">store.dispatch(&#123; <span class="attr">type</span>: <span class="string">'INCREMENT'</span> &#125;)</span><br><span class="line">store.dispatch(&#123; <span class="attr">type</span>: <span class="string">'INCREMENT'</span> &#125;)</span><br><span class="line">store.dispatch(&#123; <span class="attr">type</span>: <span class="string">'DECREMENT'</span> &#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// infoReducer</span></span><br><span class="line">store.dispatch(&#123; <span class="attr">type</span>: <span class="string">'FULL_NAME'</span> &#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‰§è¡Œå®Œcounterä¸ºï¼š11ï¼Œinfoä¸ºjacky lin</span></span><br><span class="line"><span class="built_in">console</span>.log(</span><br><span class="line">  <span class="string">`æ‰§è¡Œå®Œcounterä¸ºï¼š<span class="subst">$&#123;store.getState().counter.value&#125;</span>ï¼Œinfoä¸º<span class="subst">$&#123;</span></span></span><br><span class="line"><span class="string"><span class="subst">    store.getState().info.name</span></span></span><br><span class="line"><span class="string"><span class="subst">  &#125;</span>`</span></span><br><span class="line">)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> store</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬æ¥å°è¯•ä¸‹å¦‚ä½•å®ç°è¿™ä¸ª APIï¼Œ</p>
<p>é¦–å…ˆè¦æŠŠä¸€ä¸ªå‡½æ•°é‡Œçš„æ‰€æœ‰ reducers å¾ªç¯æ‰§è¡Œä¸€éï¼Œå¹¶ä¸”è¿™ä¸ªå‡½æ•°è¦éµå¾ª(state, action) =&gt; newState æ ¼å¼ã€‚è¿˜éœ€è¦æŠŠæ¯ä¸ª reducer çš„ initState åˆå¹¶æˆä¸€ä¸ª rootStateã€‚<br>å®ç°å¦‚ä¸‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">combineReducers</span>(<span class="params">reducers</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// reducerKeys = ['counter', 'info']</span></span><br><span class="line">  <span class="keyword">const</span> reducerKeys = <span class="built_in">Object</span>.keys(reducers)</span><br><span class="line">  <span class="comment">// è¿”å›åˆå¹¶åçš„æ–°çš„reducerå‡½æ•°</span></span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="title">combination</span>(<span class="params">state = &#123;&#125;, action</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// ç”Ÿæˆçš„æ–°çš„state</span></span><br><span class="line">    <span class="keyword">const</span> nextState = &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// éå†æ‰§è¡Œæ‰€æœ‰çš„reducersï¼Œæ•´åˆæˆä¸ºä¸€ä¸ªæ–°çš„state</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; reducerKeys.length; i++) &#123;</span><br><span class="line">      <span class="keyword">const</span> key = reducerKeys[i]</span><br><span class="line">      <span class="keyword">const</span> reducer = reducers[key]</span><br><span class="line">      <span class="comment">// ä¹‹å‰çš„ key çš„ state</span></span><br><span class="line">      <span class="keyword">const</span> previousStateForKey = state[key]</span><br><span class="line">      <span class="comment">// æ‰§è¡Œ åˆ† reducerï¼Œè·å¾—æ–°çš„state</span></span><br><span class="line">      <span class="keyword">const</span> nextStateForKey = reducer(previousStateForKey, action)</span><br><span class="line"></span><br><span class="line">      nextState[key] = nextStateForKey</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> nextState</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="replaceReducer"><a href="#replaceReducer" class="headerlink" title="replaceReducer"></a>replaceReducer</h2><blockquote>
<p>åœ¨å¤§å‹ Web åº”ç”¨ç¨‹åºä¸­ï¼Œé€šå¸¸éœ€è¦å°†åº”ç”¨ç¨‹åºä»£ç æ‹†åˆ†ä¸ºå¤šä¸ªå¯ä»¥æŒ‰éœ€åŠ è½½çš„ JS åŒ…ã€‚ è¿™ç§ç§°ä¸ºâ€œä»£ç åˆ†å‰²â€çš„ç­–ç•¥é€šè¿‡å‡å°åˆæ¬¡åŠ è½½æ—¶çš„ JS çš„åŒ…çš„å¤§å°ï¼Œæ¥æé«˜åº”ç”¨ç¨‹åºçš„æ€§èƒ½ã€‚</p>
</blockquote>
<p>reducer æ‹†åˆ†åï¼Œå’Œç»„ä»¶æ˜¯ä¸€ä¸€å¯¹åº”çš„ã€‚æˆ‘ä»¬å°±å¸Œæœ›åœ¨åšæŒ‰éœ€åŠ è½½çš„æ—¶å€™ï¼Œreducer ä¹Ÿå¯ä»¥è·Ÿç€ç»„ä»¶åœ¨å¿…è¦çš„æ—¶å€™å†åŠ è½½ï¼Œç„¶åç”¨æ–°çš„ reducer æ›¿æ¢è€çš„ reducerã€‚ä½†å®é™…ä¸Šåªæœ‰ä¸€ä¸ª root reducer å‡½æ•°, å¦‚æœè¦å®ç°çš„è¯å°±å¯ä»¥ç”¨ replaceReducer è¿™ä¸ªå‡½æ•°ï¼Œå®ç°å¦‚ä¸‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> createStore = <span class="function"><span class="keyword">function</span> (<span class="params">reducer, initState</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  <span class="keyword">const</span> replaceReducer = <span class="function"><span class="params">nextReducer</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> nextReducer !== <span class="string">'function'</span>) &#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'Expected the nextReducer to be a function.'</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    reducer = nextReducer</span><br><span class="line">    <span class="comment">// åˆ·æ–°ä¸€é state çš„å€¼ï¼Œæ–°æ¥çš„ reducer æŠŠè‡ªå·±çš„é»˜è®¤çŠ¶æ€æ”¾åˆ° state æ ‘ä¸Šå»</span></span><br><span class="line">    dispatch(&#123; <span class="attr">type</span>: <span class="built_in">Symbol</span>() &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    replaceReducer,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨å¦‚ä¸‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> reducer = combineReducers(&#123;</span><br><span class="line">  counter: counterReducer,</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">const</span> store = createStore(reducer)</span><br><span class="line"></span><br><span class="line"><span class="comment">/*ç”Ÿæˆæ–°çš„reducer*/</span></span><br><span class="line"><span class="keyword">const</span> nextReducer = combineReducers(&#123;</span><br><span class="line">  counter: counterReducer,</span><br><span class="line">  info: infoReducer,</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">/*replaceReducer*/</span></span><br><span class="line">store.replaceReducer(nextReducer)</span><br></pre></td></tr></table></figure>

<h2 id="bindActionCreators"><a href="#bindActionCreators" class="headerlink" title="bindActionCreators"></a>bindActionCreators</h2><p>bindActionCreators ä¸€èˆ¬æ¯”è¾ƒå°‘ç”¨åˆ°ï¼Œåœ¨ react-redux çš„ connect å‡½æ•°å®ç°ä¼šç”¨åˆ°</p>
<p>ä¼šä½¿ç”¨åˆ° bindActionCreators çš„åœºæ™¯æ˜¯å½“ä½ éœ€è¦æŠŠ action creator å¾€ä¸‹ä¼ åˆ°ä¸€ä¸ªç»„ä»¶ä¸Šï¼Œå´ä¸æƒ³è®©è¿™ä¸ªç»„ä»¶è§‰å¯Ÿåˆ° Redux çš„å­˜åœ¨ï¼Œè€Œä¸”ä¸å¸Œæœ›æŠŠ dispatch æˆ– Redux store ä¼ ç»™å®ƒã€‚</p>
<p>æˆ‘ä»¬é€šè¿‡æ™®é€šçš„æ–¹å¼æ¥ éšè— dispatch å’Œ actionCreator è¯•è¯•</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> reducer = combineReducers(&#123;</span><br><span class="line">  counter: counterReducer,</span><br><span class="line">  info: infoReducer,</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">const</span> store = createStore(reducer)</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿”å› action çš„å‡½æ•°å°±å« actionCreator</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">increment</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    type: <span class="string">'INCREMENT'</span>,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getName</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    type: <span class="string">'FULL_NAME'</span>,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> actions = &#123;</span><br><span class="line">  increment: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> store.dispatch(increment.apply(<span class="keyword">this</span>, <span class="built_in">arguments</span>))</span><br><span class="line">  &#125;,</span><br><span class="line">  getName: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> store.dispatch(getName.apply(<span class="keyword">this</span>, <span class="built_in">arguments</span>))</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å…¶ä»–åœ°æ–¹åœ¨å®ç°è‡ªå¢çš„æ—¶å€™ï¼Œæ ¹æœ¬ä¸çŸ¥é“ dispatchï¼ŒactionCreatorç­‰ç»†èŠ‚</span></span><br><span class="line">actions.increment() <span class="comment">// è‡ªå¢</span></span><br><span class="line">actions.getName() <span class="comment">// è·å¾—å…¨å</span></span><br></pre></td></tr></table></figure>

<p>æŠŠ actions ç”Ÿæˆæ—¶å€™çš„å…¬å…±ä»£ç æå–å‡ºæ¥ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> actions = bindActionCreators(&#123; increment, getName &#125;, store.dispatch)</span><br></pre></td></tr></table></figure>

<p>bindActionCreators çš„å®ç°å¦‚ä¸‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// è¿”å›åŒ…è£¹ dispatch çš„å‡½æ•°, å°† actionCreator è½¬åŒ–æˆ dispatch å½¢å¼</span></span><br><span class="line"><span class="comment">// eg. &#123; addNumAction &#125;  =&gt;  (...args) =&gt; dispatch(addNumAction(args))</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">bindActionCreator</span>(<span class="params">actionCreator, dispatch</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">...args</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> dispatch(actionCreator.apply(<span class="keyword">this</span>, args))</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">bindActionCreators</span>(<span class="params">actionCreators, dispatch</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> actionCreators === <span class="string">'function'</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> bindActionCreator(actionCreators, dispatch)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// actionCreators å¿…é¡»æ˜¯ function æˆ–è€… object</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> actionCreators !== <span class="string">'object'</span> || actionCreators === <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>()</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> keys = <span class="built_in">Object</span>.keys(actionCreators)</span><br><span class="line">  <span class="keyword">const</span> boundActionCreators = &#123;&#125;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; keys.length; i++) &#123;</span><br><span class="line">    <span class="keyword">const</span> key = keys[i]</span><br><span class="line">    <span class="keyword">const</span> actionCreator = actionCreators[key]</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> actionCreator === <span class="string">'function'</span>) &#123;</span><br><span class="line">      boundActionCreators[key] = bindActionCreator(actionCreator, dispatch)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> boundActionCreators</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¯èƒ½å¤§å®¶çœ‹åˆ°è¿™é‡Œæœ‰ç‚¹æ‡µé€¼ï¼Œè®©æˆ‘ä»¬æ¥å›å¿†ä¸‹ react-redux ä¸­ connect å‡½æ•°çš„ç”¨æ³•ï¼Œ<br>æ¯”å¦‚æœ‰è¿™æ ·ä¸€ä¸ª actionCreators</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// actionCreators.js</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">addNumAction</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123; <span class="attr">type</span>: <span class="string">'ADD_NUM'</span> &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// Demo.jsï¼šåœ¨éœ€è¦ç”¨åˆ° store æ•°æ®çš„ç»„ä»¶ï¼Œå¦‚ Demo ç»„ä»¶åº•éƒ¨æˆ‘ä»¬ç”¨ connect å‡½æ•°è¿æ¥ï¼Œå¦‚ä¸‹:</span></span><br><span class="line"><span class="keyword">import</span> &#123; addNumAction &#125; <span class="keyword">from</span> <span class="string">'./actionCreators'</span></span><br><span class="line"><span class="keyword">const</span> mapDispatchToProps = <span class="function"><span class="params">dispatch</span> =&gt;</span> (&#123;</span><br><span class="line">  addNum() &#123;</span><br><span class="line">    dispatch(addNumAction())</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> connect(mapStateToProps, mapDispatchToProps)(Demo)</span><br></pre></td></tr></table></figure>

<p>ç„¶åé€šè¿‡é¡µé¢çš„æŒ‰é’®æ¥å‡ºå‘ action ä¸º ADD_NUM å¯¹åº”äº‹ä»¶</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;button onClick=&#123;<span class="keyword">this</span>.props.addNum&#125;&gt;å¢åŠ <span class="number">1</span>&lt;<span class="regexp">/button&gt;</span></span><br></pre></td></tr></table></figure>

<p>ä½†é™¤äº†ä¸Šé¢çš„ç”¨æ³•ï¼ŒmapDispatchToProps ä¹Ÿå¯ä»¥è¿™æ ·ç”¨ï¼Œç›´æ¥ä¼ å…¥ä¸€ä¸ªå¯¹è±¡ï¼Œéƒ½æ²¡æœ‰ dispatch æ–¹æ³•</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> connect(mapStateToProps, &#123; addNumAction &#125;)(Demo)</span><br></pre></td></tr></table></figure>

<p>ç„¶ååªéœ€è§¦å‘ addNumAction å°±èƒ½å®ç°å’Œä¸Šé¢ä¸€æ ·çš„æ•ˆæœã€‚</p>
<p>ä¸ºä»€ä¹ˆå¯ä»¥ä¸ä¼ ï¼Œå½“ä½ ä¼ å…¥å¯¹è±¡çš„æ—¶å€™ï¼Œ connect å‡½æ•°ä¼šåˆ¤æ–­ï¼Œå¤§è‡´ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> dispatchToProps</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">typeof</span> mapDispatchToProps === <span class="string">'function'</span>) &#123;</span><br><span class="line">  dispatchToProps = mapDispatchToProps(store.dispatch)</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="comment">// ä¼ é€’äº†ä¸€ä¸ª actionCreator å¯¹è±¡è¿‡æ¥</span></span><br><span class="line">  dispatchToProps = bindActionCreators(mapDispatchToProps, store.dispatch)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œå°±ä½¿ç”¨äº† bindActionCreators å‡½æ•°ï¼Œå®ƒå°±æ˜¯æŠŠä½ ä¼ å…¥çš„ actionCreator å†åŒ…ä¸€å±‚ dispatch æ–¹æ³•ï¼Œå³</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&#123; addNumAction &#125;  =&gt;  <span class="function">(<span class="params">...args</span>) =&gt;</span> dispatch(addNumAction(args))</span><br></pre></td></tr></table></figure>

<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>Redux å®ç°è®²åˆ°è¿™é‡Œå°±ç»“æŸäº†ï¼ŒæŠŠåŸç†ææ‡‚äº†ç¡®å®å¯¹ Redux çš„ç†è§£åŠ æ·±äº†å¥½å¤šï¼Œä¹‹åä¼šç»§ç»­å†™ç›¸å…³æ’ä»¶çš„å®ç°ï¼Œå¦‚ react-redux ç­‰ã€‚</p>
<p>å‚è€ƒèµ„æ–™ï¼š</p>
<p><a href="https://github.com/brickspert/blog/issues/22" target="_blank" rel="noopener">å®Œå…¨ç†è§£ reduxï¼ˆä»é›¶å®ç°ä¸€ä¸ª reduxï¼‰</a></p>
<br>

<ul>
<li>psï¼š <a href="https://github.com/Jacky-Summer/personal-blog" target="_blank" rel="noopener">ä¸ªäººæŠ€æœ¯åšæ–‡ Github ä»“åº“</a>ï¼Œè§‰å¾—ä¸é”™çš„è¯æ¬¢è¿ starï¼Œç»™æˆ‘ä¸€ç‚¹é¼“åŠ±å§~</li>
</ul>
]]></content>
      <categories>
        <category>Reactç¬”è®°</category>
      </categories>
      <tags>
        <tag>React</tag>
        <tag>Redux</tag>
      </tags>
  </entry>
  <entry>
    <title>æ€»ç»“JSæ•°ç»„æ–¹æ³•</title>
    <url>/2020/05/10/%E6%80%BB%E7%BB%93JS%E6%95%B0%E7%BB%84%E6%96%B9%E6%B3%95/</url>
    <content><![CDATA[<p>åœ¨æ—¥å¸¸å¼€å‘ä¸­ï¼Œä½¿ç”¨æ•°ç»„æ–¹æ³•çš„æƒ…å†µæ˜¯å¾ˆå¤šçš„ã€‚ä½†æ€»æœ‰å‡ ä¸ªæ–¹æ³•ç”¨å¾—ä¸æ˜¯å¾ˆå¤šï¼Œå°±å®¹æ˜“å¿˜è®°å…·ä½“ç”¨æ³•ï¼Œäºæ˜¯ï¼Œä»Šå¤©æ‰“ç®—åšä¸‹æ€»ç»“ç¬”è®°ï¼Œå›é¡¾æ•°ç»„æ–¹æ³•ã€‚</p>
<a id="more"></a>

<h2 id="æ”¹å˜åŸæ•°ç»„çš„æ–¹æ³•ï¼ˆ9-ä¸ªï¼‰"><a href="#æ”¹å˜åŸæ•°ç»„çš„æ–¹æ³•ï¼ˆ9-ä¸ªï¼‰" class="headerlink" title="æ”¹å˜åŸæ•°ç»„çš„æ–¹æ³•ï¼ˆ9 ä¸ªï¼‰"></a>æ”¹å˜åŸæ•°ç»„çš„æ–¹æ³•ï¼ˆ9 ä¸ªï¼‰</h2><h3 id="push-å’Œ-pop"><a href="#push-å’Œ-pop" class="headerlink" title="push()å’Œ pop()"></a>push()å’Œ pop()</h3><p>å…±åŒç‚¹ï¼š<strong>æ•°ç»„å°¾éƒ¨æ“ä½œçš„æ–¹æ³•</strong></p>
<h4 id="push"><a href="#push" class="headerlink" title="push()"></a>push()</h4><ul>
<li>ç”¨æ³•ï¼špush() æ–¹æ³•å¯å‘æ•°ç»„çš„æœ«å°¾æ·»åŠ ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´ ï¼Œå¹¶è¿”å›æ–°çš„é•¿åº¦ã€‚</li>
<li>è¿”å›å€¼ï¼šæŠŠæŒ‡å®šçš„å€¼æ·»åŠ åˆ°æ•°ç»„åçš„æ–°é•¿åº¦ã€‚</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">arrayObject.push(newEle1, newEle2, ..., newEleX)  è¦æ·»åŠ åˆ°æ•°ç»„æœ«å°¾çš„å…ƒç´ </span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">2</span>]</span><br><span class="line">arr.push(<span class="number">4</span>) <span class="comment">// 3</span></span><br><span class="line"><span class="built_in">console</span>.log(arr) <span class="comment">// [1, 2, 4]</span></span><br></pre></td></tr></table></figure>

<h4 id="pop"><a href="#pop" class="headerlink" title="pop()"></a>pop()</h4><ul>
<li>ç”¨æ³•ï¼špop() æ–¹æ³•ç”¨äºåˆ é™¤å¹¶è¿”å›æ•°ç»„çš„æœ€åä¸€ä¸ªå…ƒç´ ã€‚</li>
<li>è¿”å›å€¼ï¼šarrayObject çš„æœ€åä¸€ä¸ªå…ƒç´ </li>
<li>è¯´æ˜ï¼šå¦‚æœæ•°ç»„å·²ç»ä¸ºç©ºï¼Œåˆ™ pop() ä¸æ”¹å˜æ•°ç»„ï¼Œå¹¶è¿”å› undefined å€¼ã€‚</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">arrayObject.pop()</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">arr.pop() <span class="comment">// 3</span></span><br><span class="line"><span class="built_in">console</span>.log(arr) <span class="comment">// [1, 2]</span></span><br></pre></td></tr></table></figure>

<h3 id="shift-å’Œ-unshift"><a href="#shift-å’Œ-unshift" class="headerlink" title="shift()å’Œ unshift()"></a>shift()å’Œ unshift()</h3><p>å…±åŒç‚¹ï¼š<strong>æ•°ç»„é¦–éƒ¨æ“ä½œçš„æ–¹æ³•</strong></p>
<h4 id="shift"><a href="#shift" class="headerlink" title="shift()"></a>shift()</h4><ul>
<li>ç”¨æ³•ï¼šç”¨äºæŠŠæ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ ä»å…¶ä¸­åˆ é™¤ï¼Œå¹¶è¿”å›ç¬¬ä¸€ä¸ªå…ƒç´ çš„å€¼ã€‚</li>
<li>è¿”å›å€¼ï¼šæ•°ç»„åŸæ¥çš„ç¬¬ä¸€ä¸ªå…ƒç´ çš„å€¼ã€‚</li>
<li>è¯´æ˜ï¼šå¦‚æœæ•°ç»„æ˜¯ç©ºçš„ï¼Œé‚£ä¹ˆ shift() æ–¹æ³•å°†ä¸è¿›è¡Œä»»ä½•æ“ä½œï¼Œè¿”å› undefined å€¼ã€‚</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">arrayObject.shift()</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">arr.shift() <span class="comment">// 1</span></span><br><span class="line"><span class="built_in">console</span>.log(arr) <span class="comment">// [2, 3]</span></span><br></pre></td></tr></table></figure>

<h4 id="unshift"><a href="#unshift" class="headerlink" title="unshift()"></a>unshift()</h4><ul>
<li>ç”¨æ³•ï¼šå¯å‘æ•°ç»„çš„å¼€å¤´æ·»åŠ ä¸€ä¸ªæˆ–æ›´å¤šå…ƒç´ ï¼Œå¹¶è¿”å›æ–°çš„é•¿åº¦ã€‚</li>
<li>è¿”å›å€¼ï¼šarrayObject çš„æ–°é•¿åº¦ã€‚</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">arrayObject.unshift(newEle1, newEle2, ..., newEleX)  è¦æ·»åŠ åˆ°æ•°ç»„é¦–éƒ¨çš„å…ƒç´ </span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">arr.unshift(<span class="number">100</span>) <span class="comment">// 4</span></span><br><span class="line"><span class="built_in">console</span>.log(arr) <span class="comment">// [100, 1, 2, 3]</span></span><br></pre></td></tr></table></figure>

<h3 id="reverse-å’Œ-sort"><a href="#reverse-å’Œ-sort" class="headerlink" title="reverse()å’Œ sort()"></a>reverse()å’Œ sort()</h3><p>å…±åŒç‚¹ï¼š<strong>é‡æ’åºçš„æ–¹æ³•</strong></p>
<h4 id="reverse"><a href="#reverse" class="headerlink" title="reverse()"></a>reverse()</h4><ul>
<li>ç”¨æ³•ï¼šç”¨äºé¢ å€’æ•°ç»„ä¸­å…ƒç´ çš„é¡ºåºã€‚</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">arrayObject.reverse()</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>]</span><br><span class="line">arr.reverse()</span><br><span class="line"><span class="built_in">console</span>.log(arr) <span class="comment">// ['c', 'b', 'a']</span></span><br></pre></td></tr></table></figure>

<h4 id="sort"><a href="#sort" class="headerlink" title="sort()"></a>sort()</h4><ul>
<li>ç”¨æ³•ï¼šç”¨äºå¯¹æ•°ç»„çš„å…ƒç´ è¿›è¡Œæ’åºã€‚</li>
<li>è¯´æ˜ï¼šå¦‚æœè°ƒç”¨è¯¥æ–¹æ³•æ—¶æ²¡æœ‰ä½¿ç”¨å‚æ•°ï¼Œå°†æŒ‰å­—æ¯é¡ºåºå¯¹æ•°ç»„ä¸­çš„å…ƒç´ è¿›è¡Œæ’åºï¼Œè¯´å¾—æ›´ç²¾ç¡®ç‚¹ï¼Œæ˜¯æŒ‰ç…§å­—ç¬¦ç¼–ç çš„é¡ºåºè¿›è¡Œæ’åºã€‚è¦å®ç°è¿™ä¸€ç‚¹ï¼Œé¦–å…ˆåº”æŠŠæ•°ç»„çš„å…ƒç´ éƒ½è½¬æ¢æˆå­—ç¬¦ä¸²ï¼ˆå¦‚æœ‰å¿…è¦ï¼‰ï¼Œä»¥ä¾¿è¿›è¡Œæ¯”è¾ƒã€‚</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">arrayObject.sort(sortby) å¯é€‰ã€‚è§„å®šæ’åºé¡ºåºã€‚å¿…é¡»æ˜¯å‡½æ•°ã€‚</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="string">'monkey'</span>, <span class="string">'jacky'</span>, <span class="string">'tom'</span>, <span class="string">'john'</span>]</span><br><span class="line">arr.sort()</span><br><span class="line"><span class="built_in">console</span>.log(arr) <span class="comment">// ['jacky', 'john', 'monkey', 'tom']</span></span><br></pre></td></tr></table></figure>

<ul>
<li>æ¯”è¾ƒå‡½æ•°çš„ä¸¤ä¸ªå‚æ•°</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sortçš„æ¯”è¾ƒå‡½æ•°æœ‰ä¸¤ä¸ªé»˜è®¤å‚æ•°ï¼Œæ¥å—å‚æ•°ç„¶åè¿”å›ä¸€ä¸ªç”¨äºè¯´æ˜è¿™ä¸¤ä¸ªå€¼çš„ç›¸å¯¹é¡ºåºçš„æ•°å­—ã€‚æ¯”è¾ƒå‡½æ•°åº”è¯¥å…·æœ‰ä¸¤ä¸ªå‚æ•° a å’Œ bï¼Œå…¶è¿”å›å€¼å¦‚ä¸‹ï¼š</span><br><span class="line"></span><br><span class="line">è‹¥ a å°äº bï¼Œåœ¨æ’åºåçš„æ•°ç»„ä¸­ a åº”è¯¥å‡ºç°åœ¨ b ä¹‹å‰ï¼Œåˆ™è¿”å›ä¸€ä¸ªå°äº 0 çš„å€¼ã€‚</span><br><span class="line">è‹¥ a ç­‰äº bï¼Œåˆ™è¿”å› 0ã€‚</span><br><span class="line">è‹¥ a å¤§äº bï¼Œåˆ™è¿”å›ä¸€ä¸ªå¤§äº 0 çš„å€¼ã€‚</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">3</span>, <span class="number">100</span>, <span class="number">4</span>, <span class="number">8</span>]</span><br><span class="line"><span class="comment">// å‡åº</span></span><br><span class="line">arr.sort(<span class="function"><span class="keyword">function</span> (<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> a - b</span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(arr) <span class="comment">// [1, 3, 4, 5, 7, 8, 100]</span></span><br><span class="line"><span class="comment">// é™åº</span></span><br><span class="line">arr.sort(<span class="function"><span class="keyword">function</span> (<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> b - a</span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(arr) <span class="comment">// [100, 8, 7, 5, 4, 3, 1]</span></span><br></pre></td></tr></table></figure>

<h3 id="splice"><a href="#splice" class="headerlink" title="splice()"></a>splice()</h3><ul>
<li>ç”¨æ³•ï¼šå‘/ä»æ•°ç»„ä¸­æ·»åŠ /åˆ é™¤é¡¹ç›®ï¼Œç„¶åè¿”å›è¢«åˆ é™¤çš„é¡¹ç›®ã€‚</li>
<li>è¿”å›å€¼ï¼šåŒ…å«è¢«åˆ é™¤é¡¹ç›®çš„æ–°æ•°ç»„ï¼Œå¦‚æœæœ‰çš„è¯ã€‚</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">arrayObject.splice(index, howmany, item1, ....., itemX)</span><br><span class="line"><span class="comment">// index:å¿…éœ€ã€‚æ•´æ•°ï¼Œè§„å®šæ·»åŠ /åˆ é™¤é¡¹ç›®çš„ä½ç½®ï¼Œä½¿ç”¨è´Ÿæ•°å¯ä»æ•°ç»„ç»“å°¾å¤„è§„å®šä½ç½®ã€‚</span></span><br><span class="line"><span class="comment">// howmany:å¿…éœ€ã€‚è¦åˆ é™¤çš„é¡¹ç›®æ•°é‡ã€‚å¦‚æœè®¾ç½®ä¸º 0ï¼Œåˆ™ä¸ä¼šåˆ é™¤é¡¹ç›®ã€‚</span></span><br><span class="line"><span class="comment">// item, ..., itemX:å¯é€‰ã€‚å‘æ•°ç»„æ·»åŠ çš„æ–°é¡¹ç›®ã€‚</span></span><br></pre></td></tr></table></figure>

<ul>
<li>åˆ é™¤å…ƒç´ </li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>]</span><br><span class="line">arr.splice(<span class="number">1</span>, <span class="number">1</span>) <span class="comment">// åˆ é™¤æ•°ç»„ä¸‹æ ‡ä¸º 1 çš„å…ƒç´ ï¼Œåˆ é™¤ä¸€ä¸ª</span></span><br><span class="line"><span class="built_in">console</span>.log(arr) <span class="comment">// [1, 3, 4, 5, 6, 7, 8]</span></span><br><span class="line">arr.splice(<span class="number">-3</span>, <span class="number">2</span>) <span class="comment">// ä»å€’æ•°ç¬¬ä¸‰ä¸ªå…ƒç´ å¼€å§‹åˆ é™¤ï¼Œåˆ é™¤ä¸¤ä¸ª</span></span><br><span class="line"><span class="built_in">console</span>.log(arr) <span class="comment">// [1, 3, 4, 5, 8]</span></span><br></pre></td></tr></table></figure>

<ul>
<li>åˆ é™¤å¹¶æ·»åŠ </li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>]</span><br><span class="line">arr.splice(<span class="number">0</span>, <span class="number">2</span>, <span class="number">100</span>) <span class="comment">// åˆ é™¤æ•°ç»„ä¸‹æ ‡ä¸º 0 çš„å…ƒç´ ï¼Œåˆ é™¤ä¸¤ä¸ªï¼›å¹¶åœ¨æ•°ç»„ä¸‹æ ‡ä¸º0çš„ä½ç½®æ·»åŠ 100</span></span><br><span class="line"><span class="built_in">console</span>.log(arr) <span class="comment">// [100, 3, 4, 5, 6, 7, 8]</span></span><br></pre></td></tr></table></figure>

<ul>
<li>ä¸åˆ é™¤åªæ·»åŠ </li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>]</span><br><span class="line">arr.splice(<span class="number">0</span>, <span class="number">0</span>, <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>) <span class="comment">// åœ¨æ•°ç»„ä¸‹æ ‡ä¸º0çš„ä½ç½®æ·»åŠ 9 10 11</span></span><br><span class="line"><span class="built_in">console</span>.log(arr) <span class="comment">// [9, 10, 11, 1, 2, 3, 4, 5, 6, 7, 8]</span></span><br></pre></td></tr></table></figure>

<h3 id="ES6ï¼šfill"><a href="#ES6ï¼šfill" class="headerlink" title="ES6ï¼šfill()"></a>ES6ï¼šfill()</h3><ul>
<li>ç”¨æ³•ï¼šç”¨äºå°†ä¸€ä¸ªå›ºå®šå€¼æ›¿æ¢æ•°ç»„çš„å…ƒç´ ã€‚</li>
<li>è¿”å›å€¼ï¼šä¿®æ”¹åçš„æ•°ç»„ã€‚</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">arrayObject.fill(value, start, end)</span><br><span class="line"><span class="comment">// value:å¿…éœ€ã€‚å¡«å……çš„å€¼ã€‚</span></span><br><span class="line"><span class="comment">// start:å¯é€‰ã€‚å¼€å§‹å¡«å……ä½ç½®ã€‚</span></span><br><span class="line"><span class="comment">// end:	å¯é€‰ã€‚åœæ­¢å¡«å……ä½ç½® (é»˜è®¤ä¸º arrayObject.length)</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å¡«å…… "replace" åˆ°æ•°ç»„çš„ç¬¬ä¸‰å’Œç¬¬å››ä¸ªå…ƒç´ ï¼š</span></span><br><span class="line"><span class="keyword">let</span> arr = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>, <span class="string">'e'</span>]</span><br><span class="line">arr.fill(<span class="string">'replace'</span>, <span class="number">2</span>, <span class="number">4</span>)</span><br><span class="line"><span class="built_in">console</span>.log(arr) <span class="comment">// ["a", "b", "replace", "replace", "e"]</span></span><br></pre></td></tr></table></figure>

<h3 id="ES6ï¼šcopyWithin"><a href="#ES6ï¼šcopyWithin" class="headerlink" title="ES6ï¼šcopyWithin()"></a>ES6ï¼šcopyWithin()</h3><ul>
<li>ç”¨æ³•ï¼šç”¨äºä»æ•°ç»„çš„æŒ‡å®šä½ç½®æ‹·è´å…ƒç´ åˆ°æ•°ç»„çš„å¦ä¸€ä¸ªæŒ‡å®šä½ç½®ä¸­ã€‚</li>
<li>è¿”å›å€¼ï¼šä¿®æ”¹åçš„æ•°ç»„ã€‚</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">arrayObject.copyWithin(target, start, end)</span><br><span class="line"><span class="comment">// value:å¿…éœ€ã€‚å¤åˆ¶åˆ°æŒ‡å®šç›®æ ‡ç´¢å¼•ä½ç½®ã€‚ã€‚</span></span><br><span class="line"><span class="comment">// start:å¯é€‰ã€‚å…ƒç´ å¤åˆ¶çš„èµ·å§‹ä½ç½®ã€‚</span></span><br><span class="line"><span class="comment">// end:	å¯é€‰ã€‚åœæ­¢å¤åˆ¶çš„ç´¢å¼•ä½ç½® (é»˜è®¤ä¸º arrayObject.length)ã€‚å¦‚æœä¸ºè´Ÿå€¼ï¼Œè¡¨ç¤ºå€’æ•°ã€‚</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>, <span class="string">'e'</span>]</span><br><span class="line">arr.copyWithin(<span class="number">2</span>, <span class="number">0</span>, <span class="number">2</span>)</span><br><span class="line"><span class="built_in">console</span>.log(arr) <span class="comment">// ["a", "b", "a", "b", "e"]</span></span><br></pre></td></tr></table></figure>

<h2 id="ä¸æ”¹å˜åŸæ•°ç»„çš„æ–¹æ³•ï¼ˆ8-ä¸ªï¼‰"><a href="#ä¸æ”¹å˜åŸæ•°ç»„çš„æ–¹æ³•ï¼ˆ8-ä¸ªï¼‰" class="headerlink" title="ä¸æ”¹å˜åŸæ•°ç»„çš„æ–¹æ³•ï¼ˆ8 ä¸ªï¼‰"></a>ä¸æ”¹å˜åŸæ•°ç»„çš„æ–¹æ³•ï¼ˆ8 ä¸ªï¼‰</h2><ul>
<li>æ³¨: æ•°ç»„çš„æ¯ä¸€é¡¹æ˜¯ç®€å•æ•°æ®ç±»å‹ï¼Œä¸”æœªç›´æ¥æ“ä½œæ•°ç»„çš„æƒ…å†µä¸‹</li>
</ul>
<h3 id="slice"><a href="#slice" class="headerlink" title="slice()"></a>slice()</h3><ul>
<li>ç”¨æ³•ï¼šä»å·²æœ‰çš„æ•°ç»„ä¸­è¿”å›é€‰å®šçš„å…ƒç´ ã€‚</li>
<li>è¿”å›å€¼ï¼šè¿”å›ä¸€ä¸ªæ–°çš„æ•°ç»„ï¼ŒåŒ…å«ä» start åˆ° end ï¼ˆä¸åŒ…æ‹¬è¯¥å…ƒç´ ï¼‰çš„ arrayObject ä¸­çš„å…ƒç´ ã€‚</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">arrayObject.slice(start, end)</span><br><span class="line"><span class="comment">// start:å¿…éœ€ã€‚è§„å®šä»ä½•å¤„å¼€å§‹é€‰å–ã€‚å¦‚æœæ˜¯è´Ÿæ•°ï¼Œé‚£ä¹ˆå®ƒè§„å®šä»æ•°ç»„å°¾éƒ¨å¼€å§‹ç®—èµ·çš„ä½ç½®ã€‚</span></span><br><span class="line"><span class="comment">// end:å¯é€‰ã€‚è§„å®šä»ä½•å¤„ç»“æŸé€‰å–ã€‚è¯¥å‚æ•°æ˜¯æ•°ç»„ç‰‡æ–­ç»“æŸå¤„çš„æ•°ç»„ä¸‹æ ‡ã€‚å¦‚æœæ²¡æœ‰æŒ‡å®šè¯¥å‚æ•°ï¼Œé‚£ä¹ˆåˆ‡åˆ†çš„æ•°ç»„åŒ…å«ä» start åˆ°æ•°ç»„ç»“æŸçš„æ‰€æœ‰å…ƒç´ ã€‚</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>, <span class="string">'e'</span>]</span><br><span class="line"><span class="built_in">console</span>.log(arr.slice()) <span class="comment">// ["a", "b", "c", "d", "e"]</span></span><br><span class="line"><span class="built_in">console</span>.log(arr.slice(<span class="number">2</span>)) <span class="comment">// ["c", "d", "e"]</span></span><br><span class="line"><span class="built_in">console</span>.log(arr.slice(<span class="number">0</span>, <span class="number">3</span>)) <span class="comment">// ["a", "b", "c"]</span></span><br></pre></td></tr></table></figure>

<h3 id="indexOf"><a href="#indexOf" class="headerlink" title="indexOf()"></a>indexOf()</h3><ul>
<li>ç”¨æ³•ï¼šæ–¹æ³•è¿”å›åœ¨æ•°ç»„ä¸­å¯ä»¥æ‰¾åˆ°ä¸€ä¸ªç»™å®šå…ƒç´ çš„ç¬¬ä¸€ä¸ªç´¢å¼•ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œåˆ™è¿”å›-1ã€‚</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">arrayObject.indexOf(item, start)</span><br><span class="line"><span class="comment">// start:å¿…é¡»ã€‚æŸ¥æ‰¾çš„å…ƒç´ ã€‚</span></span><br><span class="line"><span class="comment">// end:	å¯é€‰çš„æ•´æ•°å‚æ•°ã€‚è§„å®šåœ¨æ•°ç»„ä¸­å¼€å§‹æ£€ç´¢çš„ä½ç½®ã€‚å®ƒçš„åˆæ³•å–å€¼æ˜¯ 0 åˆ° stringObject.length - 1ã€‚å¦‚çœç•¥è¯¥å‚æ•°ï¼Œåˆ™å°†ä»å­—ç¬¦ä¸²çš„é¦–å­—ç¬¦å¼€å§‹æ£€ç´¢ã€‚</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>, <span class="string">'e'</span>, <span class="string">'a'</span>]</span><br><span class="line"><span class="built_in">console</span>.log(arr.indexOf(<span class="string">'c'</span>)) <span class="comment">// 2</span></span><br><span class="line"><span class="built_in">console</span>.log(arr.indexOf(<span class="string">'a'</span>, <span class="number">1</span>)) <span class="comment">// 5</span></span><br></pre></td></tr></table></figure>

<h3 id="lastIndexOf"><a href="#lastIndexOf" class="headerlink" title="lastIndexOf()"></a>lastIndexOf()</h3><ul>
<li>ç”¨æ³•ï¼šè¿”å›ä¸€ä¸ªæŒ‡å®šçš„å…ƒç´ åœ¨æ•°ç»„ä¸­æœ€åå‡ºç°çš„ä½ç½®ï¼Œä»è¯¥å­—ç¬¦ä¸²çš„åé¢å‘å‰æŸ¥æ‰¾ã€‚</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">arrayObject.lastIndexOf(item, start)</span><br><span class="line"><span class="comment">// start:å¿…é¡»ã€‚æŸ¥æ‰¾çš„å…ƒç´ ã€‚</span></span><br><span class="line"><span class="comment">// end:	å¯é€‰çš„æ•´æ•°å‚æ•°ã€‚è§„å®šåœ¨æ•°ç»„ä¸­å¼€å§‹æ£€ç´¢çš„ä½ç½®ã€‚å®ƒçš„åˆæ³•å–å€¼æ˜¯ 0 åˆ° stringObject.length - 1ã€‚åˆ™å°†ä»å­—ç¬¦ä¸²çš„æœ€åä¸€ä¸ªå­—ç¬¦å¤„å¼€å§‹æ£€ç´¢ã€‚</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'b'</span>, <span class="string">'e'</span>, <span class="string">'a'</span>]</span><br><span class="line"><span class="built_in">console</span>.log(arr.lastIndexOf(<span class="string">'a'</span>)) <span class="comment">// 5</span></span><br><span class="line"><span class="built_in">console</span>.log(arr.lastIndexOf(<span class="string">'b'</span>, <span class="number">2</span>)) <span class="comment">// 1</span></span><br></pre></td></tr></table></figure>

<h3 id="join"><a href="#join" class="headerlink" title="join()"></a>join()</h3><ul>
<li>ç”¨æ³•ï¼šç”¨äºæŠŠæ•°ç»„ä¸­çš„æ‰€æœ‰å…ƒç´ æ”¾å…¥ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚å…ƒç´ æ˜¯é€šè¿‡æŒ‡å®šçš„åˆ†éš”ç¬¦è¿›è¡Œåˆ†éš”çš„ã€‚</li>
<li>è¿”å›å€¼ï¼šè¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚è¯¥å­—ç¬¦ä¸²æ˜¯é€šè¿‡æŠŠ arrayObject çš„æ¯ä¸ªå…ƒç´ è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œç„¶åæŠŠè¿™äº›å­—ç¬¦ä¸²è¿æ¥èµ·æ¥ï¼Œåœ¨ä¸¤ä¸ªå…ƒç´ ä¹‹é—´æ’å…¥ separator å­—ç¬¦ä¸²è€Œç”Ÿæˆçš„ã€‚</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">arrayObject.join(separator)</span><br><span class="line"><span class="comment">// separator:å¯é€‰ã€‚æŒ‡å®šè¦ä½¿ç”¨çš„åˆ†éš”ç¬¦ã€‚å¦‚æœçœç•¥è¯¥å‚æ•°ï¼Œåˆ™ä½¿ç”¨é€—å·ä½œä¸ºåˆ†éš”ç¬¦ã€‚</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'b'</span>, <span class="string">'e'</span>, <span class="string">'a'</span>]</span><br><span class="line"><span class="built_in">console</span>.log(arr.join()) <span class="comment">// a,b,c,b,e,a</span></span><br><span class="line"><span class="built_in">console</span>.log(arr.join(<span class="string">'.'</span>)) <span class="comment">// a.b.c.b.e.a</span></span><br></pre></td></tr></table></figure>

<h3 id="concat"><a href="#concat" class="headerlink" title="concat()"></a>concat()</h3><ul>
<li>ç”¨æ³•ï¼šç”¨äºè¿æ¥ä¸¤ä¸ªæˆ–å¤šä¸ªæ•°ç»„ã€‚</li>
<li>è¿”å›å€¼ï¼šè¿”å›ä¸€ä¸ªæ–°çš„æ•°ç»„ã€‚è¯¥æ•°ç»„æ˜¯é€šè¿‡æŠŠæ‰€æœ‰ arrayX å‚æ•°æ·»åŠ åˆ° arrayObject ä¸­ç”Ÿæˆçš„ã€‚å¦‚æœè¦è¿›è¡Œ concat() æ“ä½œçš„å‚æ•°æ˜¯æ•°ç»„ï¼Œé‚£ä¹ˆæ·»åŠ çš„æ˜¯æ•°ç»„ä¸­çš„å…ƒç´ ï¼Œè€Œä¸æ˜¯æ•°ç»„ã€‚</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">arrayObject.concat(arrayX, arrayX, ......, arrayX)</span><br><span class="line"><span class="comment">// arrayX: å¿…éœ€ã€‚è¯¥å‚æ•°å¯ä»¥æ˜¯å…·ä½“çš„å€¼ï¼Œä¹Ÿå¯ä»¥æ˜¯æ•°ç»„å¯¹è±¡ã€‚å¯ä»¥æ˜¯ä»»æ„å¤šä¸ªã€‚</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> arr1 = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"><span class="keyword">let</span> arr2 = [<span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>]</span><br><span class="line"><span class="built_in">console</span>.log(arr1.concat(<span class="number">4</span>, <span class="number">5</span>)) <span class="comment">// [1, 2, 3, 4, 5]</span></span><br><span class="line"><span class="built_in">console</span>.log(arr1.concat(arr2)) <span class="comment">// [1, 2, 3, 6, 7, 8]</span></span><br></pre></td></tr></table></figure>

<h3 id="toString-NaN"><a href="#toString-NaN" class="headerlink" title="toString()"></a>toString()</h3><ul>
<li>ç”¨æ³•ï¼šæŠŠæ•°ç»„è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œå¹¶è¿”å›ç»“æœã€‚</li>
<li>è¿”å›å€¼ï¼šarrayObject çš„å­—ç¬¦ä¸²è¡¨ç¤ºã€‚è¿”å›å€¼ä¸æ²¡æœ‰å‚æ•°çš„ join() æ–¹æ³•è¿”å›çš„å­—ç¬¦ä¸²ç›¸åŒã€‚</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">arrayObject.toString()</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'b'</span>, <span class="string">'e'</span>, <span class="string">'a'</span>]</span><br><span class="line"><span class="built_in">console</span>.log(arr.toString()) <span class="comment">// a,b,c,b,e,a</span></span><br></pre></td></tr></table></figure>

<p>ç›¸å¯¹ join() æ–¹æ³•ï¼Œæ›´æ¨èä½¿ç”¨ join() æ–¹æ³•ï¼Œä¸æ¨èä½¿ç”¨è¯¥æ–¹æ³•</p>
<h3 id="toLocaleString-NaN"><a href="#toLocaleString-NaN" class="headerlink" title="toLocaleString()"></a>toLocaleString()</h3><ul>
<li>ç”¨æ³•ï¼šæŠŠæ•°ç»„è½¬æ¢ä¸ºæœ¬åœ°å­—ç¬¦ä¸²ã€‚</li>
<li>è¿”å›å€¼ï¼šarrayObject çš„æœ¬åœ°å­—ç¬¦ä¸²è¡¨ç¤ºã€‚</li>
<li>è¯´æ˜ï¼šé¦–å…ˆè°ƒç”¨æ¯ä¸ªæ•°ç»„å…ƒç´ çš„ toLocaleString() æ–¹æ³•ï¼Œç„¶åä½¿ç”¨åœ°åŒºç‰¹å®šçš„åˆ†éš”ç¬¦æŠŠç”Ÿæˆçš„å­—ç¬¦ä¸²è¿æ¥èµ·æ¥ï¼Œå½¢æˆä¸€ä¸ªå­—ç¬¦ä¸²ã€‚</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">arrayObject.toLocaleString()</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="string">'a'</span>, <span class="number">23</span>, &#123; <span class="attr">name</span>: <span class="string">'jacky'</span> &#125;, <span class="keyword">new</span> <span class="built_in">Date</span>()]</span><br><span class="line"><span class="built_in">console</span>.log(arr.toLocaleString()) <span class="comment">// a,23,[object Object],2020/5/10 ä¸Šåˆ10:58:37</span></span><br></pre></td></tr></table></figure>

<h3 id="includes"><a href="#includes" class="headerlink" title="includes()"></a>includes()</h3><ul>
<li>ç”¨æ³•ï¼šç”¨æ¥åˆ¤æ–­ä¸€ä¸ªæ•°ç»„æ˜¯å¦åŒ…å«ä¸€ä¸ªæŒ‡å®šçš„å€¼ï¼Œæ ¹æ®æƒ…å†µï¼Œå¦‚æœåŒ…å«åˆ™è¿”å› trueï¼Œå¦åˆ™è¿”å› falseã€‚</li>
<li>è¿”å›å€¼ï¼šarrayObject çš„æœ¬åœ°å­—ç¬¦ä¸²è¡¨ç¤ºã€‚</li>
<li>è¯´æ˜ï¼šé¦–å…ˆè°ƒç”¨æ¯ä¸ªæ•°ç»„å…ƒç´ çš„ toLocaleString() æ–¹æ³•ï¼Œç„¶åä½¿ç”¨åœ°åŒºç‰¹å®šçš„åˆ†éš”ç¬¦æŠŠç”Ÿæˆçš„å­—ç¬¦ä¸²è¿æ¥èµ·æ¥ï¼Œå½¢æˆä¸€ä¸ªå­—ç¬¦ä¸²ã€‚</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">arrayObject.includes(searchElement, fromIndex)</span><br><span class="line"><span class="comment">// searchElementï¼šå¿…é¡»ã€‚éœ€è¦æŸ¥æ‰¾çš„å…ƒç´ å€¼ã€‚</span></span><br><span class="line"><span class="comment">// fromIndexï¼šå¯é€‰ã€‚ä»è¯¥ç´¢å¼•å¤„å¼€å§‹æŸ¥æ‰¾ searchElementã€‚å¦‚æœä¸ºè´Ÿå€¼ï¼Œåˆ™æŒ‰å‡åºä» array.length + fromIndex çš„ç´¢å¼•å¼€å§‹æœç´¢ã€‚é»˜è®¤ä¸º 0ã€‚</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"><span class="built_in">console</span>.log(arr.includes(<span class="number">2</span>)) <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(arr.includes(<span class="number">4</span>)) <span class="comment">// false</span></span><br><span class="line"><span class="built_in">console</span>.log(arr.includes(<span class="number">3</span>, <span class="number">3</span>)) <span class="comment">// false</span></span><br><span class="line"><span class="built_in">console</span>.log(arr.includes(<span class="number">3</span>, <span class="number">-1</span>)) <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<h2 id="éå†æ–¹æ³•"><a href="#éå†æ–¹æ³•" class="headerlink" title="éå†æ–¹æ³•"></a>éå†æ–¹æ³•</h2><h3 id="forEach"><a href="#forEach" class="headerlink" title="forEach()"></a>forEach()</h3><ul>
<li>ç”¨æ³•ï¼šç”¨äºè°ƒç”¨æ•°ç»„çš„æ¯ä¸ªå…ƒç´ ï¼Œå¹¶å°†å…ƒç´ ä¼ é€’ç»™å›è°ƒå‡½æ•°ã€‚</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">arrayObject.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">currentValue, index, arr</span>), <span class="title">thisValue</span>)</span></span><br><span class="line"><span class="function">// <span class="title">currentValue</span>ï¼šå¿…éœ€ã€‚å½“å‰å…ƒç´ </span></span><br><span class="line"><span class="function">// <span class="title">index</span>ï¼šå¯é€‰ã€‚å½“å‰å…ƒç´ çš„ç´¢å¼•å€¼ã€‚</span></span><br><span class="line"><span class="function">// <span class="title">arr</span>ï¼šå¯é€‰ã€‚å½“å‰å…ƒç´ æ‰€å±çš„æ•°ç»„å¯¹è±¡ã€‚</span></span><br><span class="line"><span class="function">// <span class="title">thisValue</span>ï¼šå¯é€‰ã€‚ä¼ é€’ç»™å‡½æ•°çš„å€¼ä¸€èˆ¬ç”¨ "<span class="title">this</span>" å€¼ã€‚å¦‚æœè¿™ä¸ªå‚æ•°ä¸ºç©ºï¼Œ "<span class="title">undefined</span>" ä¼šä¼ é€’ç»™ "<span class="title">this</span>" å€¼</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">8</span>]</span><br><span class="line">arr.forEach(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(item) <span class="comment">// 1 2 4 6 8</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">8</span>]</span><br><span class="line">arr.forEach(<span class="function">(<span class="params">item, index, arr</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(item, index, arr)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 1 0 [1, 2, 4, 6, 8]</span></span><br><span class="line"><span class="comment">// 2 1 [1, 2, 4, 6, 8]</span></span><br><span class="line"><span class="comment">// 4 2 [1, 2, 4, 6, 8]</span></span><br><span class="line"><span class="comment">// 6 3 [1, 2, 4, 6, 8]</span></span><br><span class="line"><span class="comment">// 8 4 [1, 2, 4, 6, 8]</span></span><br></pre></td></tr></table></figure>

<h3 id="every"><a href="#every" class="headerlink" title="every()"></a>every()</h3><ul>
<li>ç”¨æ³•ï¼šç”¨äºæ£€æµ‹æ•°ç»„æ‰€æœ‰å…ƒç´ æ˜¯å¦éƒ½ç¬¦åˆæŒ‡å®šæ¡ä»¶ï¼ˆé€šè¿‡å‡½æ•°æä¾›ï¼‰ã€‚</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">arrayObject.every(<span class="function"><span class="keyword">function</span>(<span class="params">currentValue, index, arr</span>), <span class="title">thisValue</span>)</span></span><br><span class="line"><span class="function">// <span class="title">currentValue</span>ï¼šå¿…éœ€ã€‚å½“å‰å…ƒç´ </span></span><br><span class="line"><span class="function">// <span class="title">index</span>ï¼šå¯é€‰ã€‚å½“å‰å…ƒç´ çš„ç´¢å¼•å€¼ã€‚</span></span><br><span class="line"><span class="function">// <span class="title">arr</span>ï¼šå¯é€‰ã€‚å½“å‰å…ƒç´ æ‰€å±çš„æ•°ç»„å¯¹è±¡ã€‚</span></span><br><span class="line"><span class="function">// <span class="title">thisValue</span>ï¼šå¯é€‰ã€‚å¯¹è±¡ä½œä¸ºè¯¥æ‰§è¡Œå›è°ƒæ—¶ä½¿ç”¨ï¼Œä¼ é€’ç»™å‡½æ•°ï¼Œç”¨ä½œ "<span class="title">this</span>" çš„å€¼ã€‚</span></span><br><span class="line"><span class="function">å¦‚æœçœç•¥äº† <span class="title">thisValue</span> ï¼Œ"<span class="title">this</span>" çš„å€¼ä¸º "<span class="title">undefined</span>"</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>every() æ–¹æ³•ä½¿ç”¨æŒ‡å®šå‡½æ•°æ£€æµ‹æ•°ç»„ä¸­çš„æ‰€æœ‰å…ƒç´ ï¼š</p>
<ul>
<li>å¦‚æœæ•°ç»„ä¸­æ£€æµ‹åˆ°æœ‰ä¸€ä¸ªå…ƒç´ ä¸æ»¡è¶³ï¼Œåˆ™æ•´ä¸ªè¡¨è¾¾å¼è¿”å› false ï¼Œä¸”å‰©ä½™çš„å…ƒç´ ä¸ä¼šå†è¿›è¡Œæ£€æµ‹ã€‚</li>
<li>å¦‚æœæ‰€æœ‰å…ƒç´ éƒ½æ»¡è¶³æ¡ä»¶ï¼Œåˆ™è¿”å› trueã€‚</li>
</ul>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">4</span>, <span class="number">6</span>, <span class="number">8</span>, <span class="number">10</span>, <span class="number">12</span>]</span><br><span class="line"><span class="keyword">let</span> res1 = arr.every(<span class="function">(<span class="params">num</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// æ£€æµ‹æ•°ç»„ä¸­çš„æ‰€æœ‰å…ƒç´ æ˜¯å¦å¤§äº2</span></span><br><span class="line">  <span class="keyword">return</span> num &gt; <span class="number">2</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">let</span> res2 = arr.every(<span class="function">(<span class="params">num</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// æ£€æµ‹æ•°ç»„ä¸­çš„æ‰€æœ‰å…ƒç´ æ˜¯å¦å¤§äº10</span></span><br><span class="line">  <span class="keyword">return</span> num &gt; <span class="number">10</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(res1) <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(res2) <span class="comment">// false</span></span><br></pre></td></tr></table></figure>

<h3 id="some"><a href="#some" class="headerlink" title="some()"></a>some()</h3><ul>
<li>ç”¨æ³•ï¼šç”¨äºæ£€æµ‹æ•°ç»„ä¸­çš„å…ƒç´ æ˜¯å¦æ»¡è¶³æŒ‡å®šæ¡ä»¶ï¼ˆå‡½æ•°æä¾›ï¼‰ã€‚</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">arrayObject.some(<span class="function"><span class="keyword">function</span>(<span class="params">currentValue, index, arr</span>), <span class="title">thisValue</span>)</span></span><br><span class="line"><span class="function">// <span class="title">currentValue</span>ï¼šå¿…éœ€ã€‚å½“å‰å…ƒç´ </span></span><br><span class="line"><span class="function">// <span class="title">index</span>ï¼šå¯é€‰ã€‚å½“å‰å…ƒç´ çš„ç´¢å¼•å€¼ã€‚</span></span><br><span class="line"><span class="function">// <span class="title">arr</span>ï¼šå¯é€‰ã€‚å½“å‰å…ƒç´ æ‰€å±çš„æ•°ç»„å¯¹è±¡ã€‚</span></span><br><span class="line"><span class="function">// <span class="title">thisValue</span>ï¼šå¯é€‰ã€‚å¯¹è±¡ä½œä¸ºè¯¥æ‰§è¡Œå›è°ƒæ—¶ä½¿ç”¨ï¼Œä¼ é€’ç»™å‡½æ•°ï¼Œç”¨ä½œ "<span class="title">this</span>" çš„å€¼ã€‚</span></span><br><span class="line"><span class="function">å¦‚æœçœç•¥äº† <span class="title">thisValue</span> ï¼Œ"<span class="title">this</span>" çš„å€¼ä¸º "<span class="title">undefined</span>"</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>some() æ–¹æ³•ä¼šä¾æ¬¡æ‰§è¡Œæ•°ç»„çš„æ¯ä¸ªå…ƒç´ ï¼š</p>
<ul>
<li>å¦‚æœæœ‰ä¸€ä¸ªå…ƒç´ æ»¡è¶³æ¡ä»¶ï¼Œåˆ™è¡¨è¾¾å¼è¿”å› true , å‰©ä½™çš„å…ƒç´ ä¸ä¼šå†æ‰§è¡Œæ£€æµ‹ã€‚</li>
<li>å¦‚æœæ²¡æœ‰æ»¡è¶³æ¡ä»¶çš„å…ƒç´ ï¼Œåˆ™è¿”å› falseã€‚</li>
</ul>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">4</span>, <span class="number">6</span>, <span class="number">8</span>, <span class="number">10</span>, <span class="number">12</span>]</span><br><span class="line"><span class="keyword">let</span> res1 = arr.some(<span class="function">(<span class="params">num</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// æ£€æµ‹æ•°ç»„ä¸­æ˜¯å¦æœ‰ä¸€ä¸ªå…ƒç´ æ˜¯å¦å¤§äº10</span></span><br><span class="line">  <span class="keyword">return</span> num &gt; <span class="number">10</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">let</span> res2 = arr.some(<span class="function">(<span class="params">num</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// æ£€æµ‹æ•°ç»„ä¸­æ˜¯å¦æœ‰ä¸€ä¸ªå…ƒç´ æ˜¯å¦å¤§äº100</span></span><br><span class="line">  <span class="keyword">return</span> num &gt; <span class="number">100</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(res1) <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(res2) <span class="comment">// false</span></span><br></pre></td></tr></table></figure>

<h3 id="filter"><a href="#filter" class="headerlink" title="filter()"></a>filter()</h3><ul>
<li>ç”¨æ³•ï¼šåˆ›å»ºä¸€ä¸ªæ–°çš„æ•°ç»„ï¼Œæ–°æ•°ç»„ä¸­çš„å…ƒç´ æ˜¯é€šè¿‡æ£€æŸ¥æŒ‡å®šæ•°ç»„ä¸­ç¬¦åˆæ¡ä»¶çš„æ‰€æœ‰å…ƒç´ ã€‚</li>
<li>è¿”å›å€¼ï¼šè¿”å›æ•°ç»„ï¼ŒåŒ…å«äº†ç¬¦åˆæ¡ä»¶çš„æ‰€æœ‰å…ƒç´ ã€‚å¦‚æœæ²¡æœ‰ç¬¦åˆæ¡ä»¶çš„å…ƒç´ åˆ™è¿”å›ç©ºæ•°ç»„ã€‚</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">arrayObject.filter(<span class="function"><span class="keyword">function</span>(<span class="params">currentValue, index, arr</span>), <span class="title">thisValue</span>)</span></span><br><span class="line"><span class="function">// <span class="title">currentValue</span>ï¼šå¿…éœ€ã€‚å½“å‰å…ƒç´ </span></span><br><span class="line"><span class="function">// <span class="title">index</span>ï¼šå¯é€‰ã€‚å½“å‰å…ƒç´ çš„ç´¢å¼•å€¼ã€‚</span></span><br><span class="line"><span class="function">// <span class="title">arr</span>ï¼šå¯é€‰ã€‚å½“å‰å…ƒç´ æ‰€å±çš„æ•°ç»„å¯¹è±¡ã€‚</span></span><br><span class="line"><span class="function">// <span class="title">thisValue</span>ï¼šå¯é€‰ã€‚å¯¹è±¡ä½œä¸ºè¯¥æ‰§è¡Œå›è°ƒæ—¶ä½¿ç”¨ï¼Œä¼ é€’ç»™å‡½æ•°ï¼Œç”¨ä½œ "<span class="title">this</span>" çš„å€¼ã€‚</span></span><br><span class="line"><span class="function">å¦‚æœçœç•¥äº† <span class="title">thisValue</span> ï¼Œ"<span class="title">this</span>" çš„å€¼ä¸º "<span class="title">undefined</span>"</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">4</span>, <span class="number">6</span>, <span class="number">8</span>, <span class="number">10</span>, <span class="number">12</span>]</span><br><span class="line"><span class="keyword">let</span> res1 = arr.filter(<span class="function">(<span class="params">num</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// è¿”å›æ•°ç»„ä¸­æ‰€æœ‰å¤§äº5çš„å…ƒç´ </span></span><br><span class="line">  <span class="keyword">return</span> num &gt; <span class="number">5</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">let</span> res2 = arr.filter(<span class="function">(<span class="params">num</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// è¿”å›æ•°ç»„ä¸­æ‰€æœ‰å°äº5çš„å…ƒç´ </span></span><br><span class="line">  <span class="keyword">return</span> num &lt; <span class="number">5</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(res1) <span class="comment">// [6, 8, 10, 12]</span></span><br><span class="line"><span class="built_in">console</span>.log(res2) <span class="comment">// [4]</span></span><br></pre></td></tr></table></figure>

<h3 id="map"><a href="#map" class="headerlink" title="map()"></a>map()</h3><ul>
<li>ç”¨æ³•ï¼šè¿”å›ä¸€ä¸ªæ–°æ•°ç»„ï¼Œæ•°ç»„ä¸­çš„å…ƒç´ ä¸ºåŸå§‹æ•°ç»„å…ƒç´ è°ƒç”¨å‡½æ•°å¤„ç†åçš„å€¼ã€‚</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">arrayObject.map(<span class="function"><span class="keyword">function</span>(<span class="params">currentValue, index, arr</span>), <span class="title">thisValue</span>)</span></span><br><span class="line"><span class="function">// <span class="title">currentValue</span>ï¼šå¿…éœ€ã€‚å½“å‰å…ƒç´ </span></span><br><span class="line"><span class="function">// <span class="title">index</span>ï¼šå¯é€‰ã€‚å½“å‰å…ƒç´ çš„ç´¢å¼•å€¼ã€‚</span></span><br><span class="line"><span class="function">// <span class="title">arr</span>ï¼šå¯é€‰ã€‚å½“å‰å…ƒç´ æ‰€å±çš„æ•°ç»„å¯¹è±¡ã€‚</span></span><br><span class="line"><span class="function">// <span class="title">thisValue</span>ï¼šå¯é€‰ã€‚å¯¹è±¡ä½œä¸ºè¯¥æ‰§è¡Œå›è°ƒæ—¶ä½¿ç”¨ï¼Œä¼ é€’ç»™å‡½æ•°ï¼Œç”¨ä½œ "<span class="title">this</span>" çš„å€¼ã€‚</span></span><br><span class="line"><span class="function">å¦‚æœçœç•¥äº† <span class="title">thisValue</span> ï¼Œ"<span class="title">this</span>" çš„å€¼ä¸º "<span class="title">undefined</span>"</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">4</span>, <span class="number">6</span>, <span class="number">8</span>, <span class="number">10</span>, <span class="number">12</span>]</span><br><span class="line"><span class="keyword">let</span> res = arr.map(<span class="function">(<span class="params">num</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// æ•°ç»„æ¯ä¸ªå…ƒç´ éƒ½ä¹˜10</span></span><br><span class="line">  <span class="keyword">return</span> num * <span class="number">10</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(res) <span class="comment">// [40, 60, 80, 100, 120]</span></span><br></pre></td></tr></table></figure>

<h2 id="æ•°ç»„å½’å¹¶æ–¹æ³•"><a href="#æ•°ç»„å½’å¹¶æ–¹æ³•" class="headerlink" title="æ•°ç»„å½’å¹¶æ–¹æ³•"></a>æ•°ç»„å½’å¹¶æ–¹æ³•</h2><h3 id="reduce"><a href="#reduce" class="headerlink" title="reduce()"></a>reduce()</h3><ul>
<li>ç”¨æ³•ï¼šæ¥æ”¶ä¸€ä¸ªå‡½æ•°ä½œä¸ºç´¯åŠ å™¨ï¼Œæ•°ç»„ä¸­çš„æ¯ä¸ªå€¼ï¼ˆä»å·¦åˆ°å³ï¼‰å¼€å§‹ç¼©å‡ï¼Œæœ€ç»ˆè®¡ç®—ä¸ºä¸€ä¸ªå€¼ã€‚</li>
<li>reduce() å¯ä»¥ä½œä¸ºä¸€ä¸ªé«˜é˜¶å‡½æ•°ï¼Œç”¨äºå‡½æ•°çš„ composeã€‚</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">arrayObject.reduce(<span class="function"><span class="keyword">function</span>(<span class="params">total, currentValue, currentIndex, arr</span>), <span class="title">initialValue</span>)</span></span><br><span class="line"><span class="function">// <span class="title">total</span>ï¼šå¿…éœ€ã€‚åˆå§‹å€¼, æˆ–è€…è®¡ç®—ç»“æŸåçš„è¿”å›å€¼ã€‚</span></span><br><span class="line"><span class="function">// <span class="title">currentValue</span>ï¼šå¿…éœ€ã€‚å½“å‰å…ƒç´ </span></span><br><span class="line"><span class="function">// <span class="title">currentIndex</span>ï¼šå¯é€‰ã€‚å½“å‰å…ƒç´ çš„ç´¢å¼•</span></span><br><span class="line"><span class="function">// <span class="title">arr</span>ï¼šå¯é€‰ã€‚å¯é€‰ã€‚å½“å‰å…ƒç´ æ‰€å±çš„æ•°ç»„å¯¹è±¡ã€‚</span></span><br><span class="line"><span class="function">// <span class="title">initialValue</span>ï¼šå¯é€‰ã€‚ä¼ é€’ç»™å‡½æ•°çš„åˆå§‹å€¼</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">4</span>, <span class="number">6</span>, <span class="number">8</span>, <span class="number">10</span>, <span class="number">12</span>]</span><br><span class="line"><span class="keyword">let</span> res = arr.reduce(<span class="function">(<span class="params">total, num</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> total + num</span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(res) <span class="comment">// 40</span></span><br></pre></td></tr></table></figure>

<h3 id="reduceRight"><a href="#reduceRight" class="headerlink" title="reduceRight()"></a>reduceRight()</h3><ul>
<li>ç”¨æ³•ï¼šæ–¹æ³•çš„åŠŸèƒ½å’Œ reduce() åŠŸèƒ½æ˜¯ä¸€æ ·çš„ï¼Œä¸åŒçš„æ˜¯ reduceRight() ä»æ•°ç»„çš„æœ«å°¾å‘å‰å°†æ•°ç»„ä¸­çš„æ•°ç»„é¡¹åšç´¯åŠ ã€‚</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">arrayObject.reduceRight(<span class="function"><span class="keyword">function</span>(<span class="params">total, currentValue, currentIndex, arr</span>), <span class="title">initialValue</span>)</span></span><br><span class="line"><span class="function">// <span class="title">total</span>ï¼šå¿…éœ€ã€‚åˆå§‹å€¼, æˆ–è€…è®¡ç®—ç»“æŸåçš„è¿”å›å€¼ã€‚</span></span><br><span class="line"><span class="function">// <span class="title">currentValue</span>ï¼šå¿…éœ€ã€‚å½“å‰å…ƒç´ </span></span><br><span class="line"><span class="function">// <span class="title">currentIndex</span>ï¼šå¯é€‰ã€‚å½“å‰å…ƒç´ çš„ç´¢å¼•</span></span><br><span class="line"><span class="function">// <span class="title">arr</span>ï¼šå¯é€‰ã€‚å¯é€‰ã€‚å½“å‰å…ƒç´ æ‰€å±çš„æ•°ç»„å¯¹è±¡ã€‚</span></span><br><span class="line"><span class="function">// <span class="title">initialValue</span>ï¼šå¯é€‰ã€‚ä¼ é€’ç»™å‡½æ•°çš„åˆå§‹å€¼</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">20</span>]</span><br><span class="line"><span class="keyword">let</span> res = arr.reduceRight(<span class="function">(<span class="params">total, num</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> total - num</span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(res) <span class="comment">// 8</span></span><br></pre></td></tr></table></figure>

<br>

<ul>
<li>psï¼š <a href="https://github.com/Jacky-Summer/personal-blog" target="_blank" rel="noopener">ä¸ªäººæŠ€æœ¯åšæ–‡ Github ä»“åº“</a>ï¼Œè§‰å¾—ä¸é”™çš„è¯æ¬¢è¿ starï¼Œç»™æˆ‘ä¸€ç‚¹é¼“åŠ±ç»§ç»­å†™ä½œå§~</li>
</ul>
]]></content>
      <categories>
        <category>æ—¥å¸¸æ€»ç»“</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title>æµ…è°ˆReactçš„Context-API</title>
    <url>/2020/04/28/%E6%B5%85%E8%B0%88React%E7%9A%84Context-API/</url>
    <content><![CDATA[<p>ä¸Šä¸‹æ–‡(Context) æä¾›äº†åœ¨ç»„ä»¶ä¹‹é—´å…±äº«è¿™äº›å€¼çš„æ–¹æ³•ï¼Œè€Œä¸å¿…åœ¨æ ‘çš„æ¯ä¸ªå±‚çº§æ˜¾å¼ä¼ é€’ä¸€ä¸ª prop ã€‚</p>
<a id="more"></a>

<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œåœ¨ä½ æ²¡æœ‰ç»å¯¹æŠŠæ¡ç”¨å¥½å’Œå¿…é¡»çš„åœºæ™¯ä¸‹ï¼Œæ˜¯ä¸æ¨èä½¿ç”¨çš„ã€‚</p>
<p>ä½†æ˜¯æˆ‘ä»¬ä¾ç„¶é—´æ¥çš„ä½¿ç”¨ç€å®ƒï¼Œæ¯”å¦‚è®¸å¤šå®˜æ–¹ä¾èµ–åœ¨ä½¿ç”¨ï¼Œå¦‚ï¼šreact-redux, mobx-reactï¼Œreact-routerã€‚æˆ‘ä»¬éœ€è¦å®ƒåŠŸèƒ½çš„æ—¶å€™ï¼Œæ›´å¤šæ˜¯é ç¬¬ä¸‰æ–¹ä¾èµ–åº“å°±èƒ½å®ç°ï¼Œè€Œä¸æ˜¯è‡ªå·±æ‰‹åŠ¨å†™ contextã€‚ä½†æ˜¯ï¼Œä¾ç„¶éœ€è¦ç†è§£å®ƒï¼Œå¯¹ç”¨å®ƒçš„ä¸€äº›ä¾èµ–åº“æºç ç†è§£å¾ˆæœ‰å¸®åŠ©ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Grandpa</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  state = &#123;</span><br><span class="line">    info: <span class="string">'GrandPaç»„ä»¶çš„ä¿¡æ¯'</span>,</span><br><span class="line">  &#125;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;Father info=&#123;<span class="keyword">this</span>.state.info&#125; /&gt;</span><br><span class="line">      &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">class Father extends Component &#123;</span></span><br><span class="line"><span class="regexp">  render() &#123;</span></span><br><span class="line"><span class="regexp">    return (</span></span><br><span class="line"><span class="regexp">      &lt;div&gt;</span></span><br><span class="line"><span class="regexp">        &lt;Son info=&#123;this.props.info&#125; /</span>&gt;</span><br><span class="line">      &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">class Son extends Component &#123;</span></span><br><span class="line"><span class="regexp">  render() &#123;</span></span><br><span class="line"><span class="regexp">    return &lt;div&gt;æˆ‘æ˜¯Sonç»„ä»¶ï¼Œæ‹¿åˆ°ä¿¡æ¯ä¸ºï¼š&#123;this.props.info&#125;&lt;/</span>div&gt;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> Grandpa</span><br></pre></td></tr></table></figure>

<p>æœ€åé¡µé¢è¾“å‡ºï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">æˆ‘æ˜¯Sonç»„ä»¶ï¼Œæ‹¿åˆ°ä¿¡æ¯ä¸ºï¼šGrandPaç»„ä»¶çš„ä¿¡æ¯</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬ä¼šå‘ç°è¿™æ ·çš„ç¼ºç‚¹æ˜¯ä¸€å±‚ä¸€å±‚ä¼ å€¼ï¼Œå¦‚æœæœ‰æ›´å¤šå±‚çº§å’Œæ›´å¤šæ•°æ®çš„è¯ï¼Œä¼šè®©ä»£ç çœ‹èµ·æ¥å¾ˆä¸æ•´æ´ï¼Œå¦‚æœä¸­é—´å“ªä¸ªç»„ä»¶å¿˜äº†ä¼ å€¼åŸºæœ¬å°±å®Œäº†ï¼›è€Œä¸” Father ç»„ä»¶ä¹Ÿå¹¶æ²¡æœ‰ç”¨åˆ° info å€¼ï¼Œåªæ˜¯å°†å€¼ä¼ ç»™ Son ç»„ä»¶ã€‚</p>
<p>å¦‚æœä½¿ç”¨ contextï¼Œå°±èƒ½å¸®æˆ‘ä»¬è§£å†³è¿™ä¸ªå±‚çº§ä¸åœä¼ å€¼çš„é—®é¢˜ã€‚</p>
<p>context æœ‰æ—§ç‰ˆå’Œæ–°ç‰ˆä¹‹åˆ†ï¼Œä»¥ React v16.3.0 ç‰ˆæœ¬åˆ’åˆ†ã€‚</p>
<h2 id="æ—§ç‰ˆ-Context-API"><a href="#æ—§ç‰ˆ-Context-API" class="headerlink" title="æ—§ç‰ˆ Context API"></a>æ—§ç‰ˆ Context API</h2><p>æˆ‘ä»¬å…ˆæ¥è¯´ä¸‹æ—§ç‰ˆ context API</p>
<p>å°†ä»£ç æ”¹æˆå¦‚ä¸‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> PropTypes <span class="keyword">from</span> <span class="string">'prop-types'</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Grandpa</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  state = &#123;</span><br><span class="line">    info: <span class="string">'GrandPaç»„ä»¶çš„ä¿¡æ¯'</span>,</span><br><span class="line">  &#125;</span><br><span class="line">  getChildContext() &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123; <span class="attr">info</span>: <span class="keyword">this</span>.state.info &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;Father /&gt;</span><br><span class="line">      &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ å£°æ˜Contextå¯¹è±¡å±æ€§</span></span><br><span class="line"><span class="regexp">Grandpa.childContextTypes = &#123;</span></span><br><span class="line"><span class="regexp">  info: PropTypes.string,</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">class Father extends Component &#123;</span></span><br><span class="line"><span class="regexp">  render() &#123;</span></span><br><span class="line"><span class="regexp">    return (</span></span><br><span class="line"><span class="regexp">      &lt;div&gt;</span></span><br><span class="line"><span class="regexp">        &lt;Son /</span>&gt;</span><br><span class="line">      &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">class Son extends Component &#123;</span></span><br><span class="line"><span class="regexp">  render() &#123;</span></span><br><span class="line"><span class="regexp">    return &lt;div&gt;æˆ‘æ˜¯Sonç»„ä»¶ï¼Œæ‹¿åˆ°ä¿¡æ¯ä¸ºï¼š&#123;this.context.info&#125;&lt;/</span>div&gt;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// æ ¹æ®çº¦å®šå¥½çš„å‚æ•°ç±»å‹å£°æ˜</span></span><br><span class="line">Son.contextTypes = &#123;</span><br><span class="line">  info: PropTypes.string,</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> Grandpa</span><br></pre></td></tr></table></figure>

<p>å¯¹ PropTypes ç±»å‹æ£€æŸ¥ï¼Œè¿˜å¯ä»¥å†™æˆä¸‹é¢è¿™ç§å†™æ³•</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Grandpa</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">static</span> childContextTypes = &#123;</span><br><span class="line">    info: PropTypes.string,</span><br><span class="line">  &#125;</span><br><span class="line">  state = &#123;</span><br><span class="line">    info: <span class="string">'GrandPaç»„ä»¶çš„ä¿¡æ¯'</span>,</span><br><span class="line">  &#125;</span><br><span class="line">  getChildContext() &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123; <span class="attr">info</span>: <span class="keyword">this</span>.state.info &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;Father /&gt;</span><br><span class="line">      &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure>

<p>åœ¨éœ€è¦ä¼ å‡ºå»çš„ context å€¼å’Œéœ€è¦æ¥æ”¶ context å€¼éƒ½è¦è¿›è¡Œç±»å‹æ£€æŸ¥åˆ¤æ–­ã€‚</p>
<p>æ­£å¸¸ç”¨è¿™ä¸ª api å¯èƒ½æ²¡ä»€ä¹ˆé—®é¢˜ï¼Œä½†å¦‚æœä¸­é—´å“ªä¸ªç»„ä»¶ç”¨åˆ°<code>shouldComponentUpdate</code>æ–¹æ³•çš„è¯ï¼Œå°±å¾ˆå¯èƒ½å‡ºç°é—®é¢˜ã€‚</p>
<p>ä¸‰ä¸ªç»„ä»¶çš„å±‚çº§å…³ç³»å¦‚ä¸‹</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;GrandPa&gt;</span><br><span class="line">  &lt;Father&gt;</span><br><span class="line">    &lt;Son /&gt;</span><br><span class="line">  &lt;<span class="regexp">/Father&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>GrandPa&gt;</span><br></pre></td></tr></table></figure>

<p>å¦‚æœåœ¨ GrandPa ç»„ä»¶è®¾ç½®æŒ‰é’®ç‚¹å‡»å¯ä»¥æ›´æ–° info çš„å€¼ï¼Œå³é€šè¿‡<code>this.setState({info: &#39;æ”¹å˜å€¼&#39;})</code>æ–¹æ³•<br>æ›´æ–° Contextï¼š<br>é‚£ä¹ˆ</p>
<ul>
<li>GrandPa ç»„ä»¶é€šè¿‡ setState è®¾ç½®æ–°çš„ Context å€¼åŒæ—¶è§¦å‘å­ç»„ä»¶é‡æ–° renderã€‚</li>
<li>Father ç»„ä»¶é‡æ–° renderã€‚</li>
<li>Son ç»„ä»¶é‡æ–° renderï¼Œå¹¶æ‹¿åˆ°æ›´æ–°åçš„ Contextã€‚</li>
</ul>
<p>å‡å¦‚åœ¨ Father ç»„ä»¶æ·»åŠ å‡½æ•°</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">shouldComponentUpdate () &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç”±äº Father å¹¶ä¸ä¾èµ–ä»»ä½•å€¼ï¼Œæ‰€ä»¥æˆ‘ä»¬é»˜è®¤è®©å®ƒæ— éœ€é‡æ–° renderã€‚ä½†æ˜¯ï¼Œè¿™ä¼šå¯¼è‡´ Son ç»„ä»¶ä¹Ÿä¸ä¼šé‡æ–° renderï¼Œå³æ— æ³•è·å–åˆ°æœ€æ–°çš„ Context å€¼ã€‚</p>
<p>è¿™æ ·çš„ä¸ç¡®å®šæ€§å¯¹äºç›®æ ‡ç»„ä»¶æ¥è¯´æ˜¯å®Œå…¨ä¸å¯æ§çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ç›®æ ‡ç»„ä»¶æ— æ³•ä¿è¯è‡ªå·±æ¯ä¸€æ¬¡éƒ½å¯ä»¥æ¥æ”¶åˆ°æ›´æ–°åçš„ Context å€¼ã€‚è¿™æ˜¯æ—§ç‰ˆ API å­˜åœ¨çš„ä¸€ä¸ªå¤§é—®é¢˜ã€‚</p>
<p>è€Œæ–°ç‰ˆ API è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹æ–°ç‰ˆ API æ€ä¹ˆå†™çš„</p>
<h2 id="æ–°ç‰ˆ-Context-API"><a href="#æ–°ç‰ˆ-Context-API" class="headerlink" title="æ–°ç‰ˆ Context API"></a>æ–°ç‰ˆ Context API</h2><blockquote>
<p>æ–°ç‰ˆ Context æ–°å¢äº† creactContext() æ–¹æ³•ç”¨æ¥åˆ›å»ºä¸€ä¸ª context å¯¹è±¡ã€‚è¿™ä¸ªå¯¹è±¡åŒ…å«ä¸¤ä¸ªç»„ä»¶ï¼Œä¸€ä¸ªæ˜¯ Providerï¼ˆç”Ÿäº§è€…ï¼‰ï¼Œå¦ä¸€ä¸ªæ˜¯ Consumerï¼ˆæ¶ˆè´¹è€…ï¼‰ã€‚</p>
</blockquote>
<ol>
<li>Provider å’Œ Consumer å¿…é¡»æ¥è‡ªåŒä¸€ä¸ª Context å¯¹è±¡ï¼Œå³ä¸€ä¸ªç”± React.createContext()åˆ›å»ºçš„ Context å¯¹è±¡ã€‚</li>
<li>React.createContext()æ–¹æ³•æ¥æ”¶ä¸€ä¸ªå‚æ•°åšé»˜è®¤å€¼ï¼Œå½“ Consumer å¤–å±‚æ²¡æœ‰å¯¹åº”çš„ Provider æ—¶å°±ä¼šä½¿ç”¨è¯¥é»˜è®¤å€¼ã€‚</li>
<li>Provider ç»„ä»¶ä½¿ç”¨ Object.is æ–¹æ³•åˆ¤æ–­ prop å€¼æ˜¯å¦å‘ç”Ÿæ”¹å˜ï¼Œå½“ prop çš„å€¼æ”¹å˜æ—¶ï¼Œå…¶å†…éƒ¨ç»„ä»¶æ ‘ä¸­å¯¹åº”çš„ Consumer ç»„ä»¶ä¼šæ¥æ”¶åˆ°æ–°å€¼å¹¶é‡æ–°æ¸²æŸ“ã€‚æ­¤è¿‡ç¨‹ä¸å— shouldComponentUpdete æ–¹æ³•çš„å½±å“ã€‚</li>
<li>Consumer ç»„ä»¶æ¥æ”¶ä¸€ä¸ªå‡½æ•°ä½œä¸º children prop å¹¶åˆ©ç”¨è¯¥å‡½æ•°çš„è¿”å›å€¼ç”Ÿæˆç»„ä»¶æ ‘çš„æ¨¡å¼è¢«ç§°ä¸º Render Props æ¨¡å¼ã€‚</li>
</ol>
<h3 id="ç”¨æ³•"><a href="#ç”¨æ³•" class="headerlink" title="ç”¨æ³•"></a>ç”¨æ³•</h3><ol>
<li>é¦–å…ˆåˆ›å»ºä¸€ä¸ª context å¯¹è±¡</li>
</ol>
<blockquote>
<p>React.createContext æ–¹æ³•ç”¨äºåˆ›å»ºä¸€ä¸ª Context å¯¹è±¡ã€‚è¯¥å¯¹è±¡åŒ…å« Provider å’Œ Consumer ä¸¤ä¸ªå±æ€§ï¼Œåˆ†åˆ«ä¸ºä¸¤ä¸ª React ç»„ä»¶ã€‚</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> InfoContext = React.createContext(<span class="string">''</span>)</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>ä½¿ç”¨ Provider ç»„ä»¶ç”Ÿæˆä¸€ä¸ª context</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Grandpa</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  state = &#123;</span><br><span class="line">    info: <span class="string">'GrandPaç»„ä»¶çš„ä¿¡æ¯'</span>,</span><br><span class="line">  &#125;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;InfoContext.Provider value=&#123;&#123; <span class="attr">info</span>: <span class="keyword">this</span>.state.info &#125;&#125;&gt;</span><br><span class="line">        &lt;Father /&gt;</span><br><span class="line">      &lt;<span class="regexp">/InfoContext.Provider&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure>

<ol start="3">
<li>ä½¿ç”¨ Consumer ç»„ä»¶è·å– context å¯¹è±¡çš„å€¼</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Son</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;InfoContext.Consumer&gt;</span><br><span class="line">        &#123;(value) =&gt; &#123;</span><br><span class="line">          <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>æˆ‘æ˜¯Sonç»„ä»¶ï¼Œæ‹¿åˆ°ä¿¡æ¯ä¸ºï¼š&#123;value.info&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">        &#125;&#125;</span><br><span class="line">      &lt;<span class="regexp">/InfoContext.Consumer&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Reactç¬”è®°</category>
      </categories>
      <tags>
        <tag>React</tag>
      </tags>
  </entry>
  <entry>
    <title>å®ç°ä¸€ä¸ªè¿·ä½ Reduxï¼ˆåŸºç¡€ç‰ˆï¼‰</title>
    <url>/2020/04/22/%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%B8%AA%E8%BF%B7%E4%BD%A0Redux%EF%BC%88%E5%9F%BA%E7%A1%80%E7%89%88%EF%BC%89/</url>
    <content><![CDATA[<p>æœ¬æ–‡ä»å°†ä»ReduxåŸç†å‡ºå‘ï¼Œä¸€æ­¥æ­¥è‡ªå·±å®ç°ä¸€ä¸ªç®€å•çš„Reduxï¼Œä¸»è¦ç›®çš„æ˜¯äº†è§£Reduxå†…éƒ¨ä¹‹é—´çš„è”ç³»ã€‚çœ‹æœ¬æ–‡ä¹‹å‰å…ˆè¦çŸ¥é“Reduxæ˜¯æ€ä¹ˆç”¨çš„ï¼Œå¯¹Reduxç”¨æ³•ä¸ä¼šè®²è§£å¤ªå¤šã€‚</p>
<a id="more"></a>

<h2 id="Reduxä»‹ç»"><a href="#Reduxä»‹ç»" class="headerlink" title="Reduxä»‹ç»"></a>Reduxä»‹ç»</h2><p>é¦–å…ˆè¦çŸ¥é“çš„æ˜¯ï¼ŒRedux å’Œ React æ²¡æœ‰å…³ç³»ï¼ŒRedux å¯ä»¥ç”¨åœ¨ä»»ä½•æ¡†æ¶ä¸­ã€‚<br>Redux æ˜¯ä¸€ä¸ªJavaScript çŠ¶æ€ç®¡ç†å™¨ï¼Œæ˜¯ä¸€ç§æ–°å‹çš„å‰ç«¯â€œæ¶æ„æ¨¡å¼â€ã€‚</p>
<p>è¿˜æœ‰é€šå¸¸ä¸reduxä¸€èµ·ç”¨çš„ä¸€ä¸ªåº“â€”â€”react-reduxï¼Œ å®ƒå°±æ˜¯æŠŠ Redux è¿™ç§æ¶æ„æ¨¡å¼å’Œ React.js ç»“åˆèµ·æ¥çš„ä¸€ä¸ªåº“ï¼Œå°±æ˜¯ Redux æ¶æ„åœ¨ React.js ä¸­çš„ä½“ç°ã€‚</p>
<h2 id="è®¾è®¡æ€æƒ³"><a href="#è®¾è®¡æ€æƒ³" class="headerlink" title="è®¾è®¡æ€æƒ³"></a>è®¾è®¡æ€æƒ³</h2><ol>
<li>Web åº”ç”¨æ˜¯ä¸€ä¸ªçŠ¶æ€æœºï¼Œè§†å›¾ä¸çŠ¶æ€æ˜¯ä¸€ä¸€å¯¹åº”çš„ã€‚</li>
<li>æ‰€æœ‰çš„çŠ¶æ€ï¼Œä¿å­˜åœ¨ä¸€ä¸ªå¯¹è±¡é‡Œé¢ã€‚</li>
</ol>
<h2 id="ä½•æ—¶ä½¿ç”¨Redux"><a href="#ä½•æ—¶ä½¿ç”¨Redux" class="headerlink" title="ä½•æ—¶ä½¿ç”¨Redux"></a>ä½•æ—¶ä½¿ç”¨Redux</h2><ol>
<li>ç”¨æˆ·çš„ä½¿ç”¨æ–¹å¼å¤æ‚</li>
<li>ä¸åŒèº«ä»½çš„ç”¨æˆ·æœ‰ä¸åŒçš„ä½¿ç”¨æ–¹å¼ï¼ˆæ¯”å¦‚æ™®é€šç”¨æˆ·å’Œç®¡ç†å‘˜ï¼‰</li>
<li>å¤šä¸ªç”¨æˆ·ä¹‹é—´å¯ä»¥åä½œ</li>
<li>ä¸æœåŠ¡å™¨å¤§é‡äº¤äº’ï¼Œæˆ–è€…ä½¿ç”¨äº†WebSocket</li>
<li>Viewè¦ä»å¤šä¸ªæ¥æºè·å–æ•°æ®</li>
</ol>
<p>ä»ç»„ä»¶çš„è§’åº¦çœ‹ï¼š</p>
<ol>
<li>æŸä¸ªç»„ä»¶çš„çŠ¶æ€ï¼Œéœ€è¦å…±äº«</li>
<li>æŸä¸ªçŠ¶æ€éœ€è¦åœ¨ä»»ä½•åœ°æ–¹éƒ½å¯ä»¥æ‹¿åˆ°</li>
<li>ä¸€ä¸ªç»„ä»¶éœ€è¦æ”¹å˜å…¨å±€çŠ¶æ€</li>
<li>ä¸€ä¸ªç»„ä»¶éœ€è¦æ”¹å˜å¦ä¸€ä¸ªç»„ä»¶çš„çŠ¶æ€</li>
</ol>
<h2 id="Reduxå·¥ä½œæµç¨‹"><a href="#Reduxå·¥ä½œæµç¨‹" class="headerlink" title="Reduxå·¥ä½œæµç¨‹"></a>Reduxå·¥ä½œæµç¨‹</h2><p><img src="https://user-gold-cdn.xitu.io/2020/4/18/1718ce1ceca204e3?w=898&h=421&f=png&s=148790" alt=""></p>
<ol>
<li>Redux å°†æ•´ä¸ªåº”ç”¨çŠ¶æ€(state)å­˜å‚¨åˆ°ä¸€ä¸ªåœ°æ–¹(é€šå¸¸æˆ‘ä»¬ç§°å…¶ä¸º store)</li>
<li>å½“æˆ‘ä»¬éœ€è¦ä¿®æ”¹çŠ¶æ€æ—¶ï¼Œå¿…é¡»æ´¾å‘(dispatch)ä¸€ä¸ª action( action æ˜¯ä¸€ä¸ªå¸¦æœ‰ type å­—æ®µçš„å¯¹è±¡)</li>
<li>ä¸“é—¨çš„çŠ¶æ€å¤„ç†å‡½æ•° reducer æ¥æ”¶æ—§çš„ state å’Œ action ï¼Œå¹¶ä¼šè¿”å›ä¸€ä¸ªæ–°çš„ state</li>
<li>é€šè¿‡ subscribe è®¾ç½®è®¢é˜…ï¼Œæ¯æ¬¡æ´¾å‘åŠ¨ä½œæ—¶ï¼Œé€šçŸ¥æ‰€æœ‰çš„è®¢é˜…è€…ã€‚</li>
</ol>
<p>ä»è¿™ä¸ªæµç¨‹ä¸­å¯ä»¥çœ‹å‡ºï¼ŒRedux çš„æ ¸å¿ƒå°±æ˜¯ä¸€ä¸ª è§‚å¯Ÿè€… æ¨¡å¼ã€‚ä¸€æ—¦ store å‘ç”Ÿäº†å˜åŒ–å°±ä¼šé€šçŸ¥æ‰€æœ‰çš„è®¢é˜…è€…ï¼Œè§†å›¾(åœ¨è¿™é‡Œæ˜¯reactç»„ä»¶)æ¥æ”¶åˆ°é€šçŸ¥ä¹‹åä¼šè¿›è¡Œé‡æ–°æ¸²æŸ“ã€‚</p>
<h2 id="Reduxæ¡ˆä¾‹"><a href="#Reduxæ¡ˆä¾‹" class="headerlink" title="Reduxæ¡ˆä¾‹"></a>Reduxæ¡ˆä¾‹</h2><p>ä¸ºäº†ç®€åŒ–è¯´æ˜ï¼Œæˆ‘ç”¨å’Œå®˜ç½‘å·®ä¸å¤šçš„ä¾‹å­æ”¹å†™æ¥ä½œæ¡ˆä¾‹<br><a href="https://redux.js.org/introduction/getting-started" target="_blank" rel="noopener">å®˜ç½‘redux demo</a></p>
<p>æ–°å»ºä¸€ä¸ªæ–‡ä»¶redux.jsï¼Œç„¶åç›´æ¥å¼•å…¥ï¼Œè§‚å¯Ÿæ§åˆ¶å°è¾“å‡º</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createStore &#125; <span class="keyword">from</span> <span class="string">'redux'</span></span><br><span class="line"><span class="keyword">const</span> defaultState = &#123;</span><br><span class="line">    value: <span class="number">10</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// reducerå¤„ç†å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">reducer</span> (<span class="params">state = defaultState, action</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(state, action)</span><br><span class="line">    <span class="keyword">switch</span> (action.type) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">'INCREMENT'</span>:</span><br><span class="line">            <span class="keyword">return</span> &#123;</span><br><span class="line">                ...state,</span><br><span class="line">                value: state.value + <span class="number">1</span></span><br><span class="line">            &#125;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">'DECREMENT'</span>:</span><br><span class="line">            <span class="keyword">return</span> &#123;</span><br><span class="line">                ...state,</span><br><span class="line">                value: state.value - <span class="number">1</span></span><br><span class="line">            &#125;</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            <span class="keyword">return</span> state</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> store = createStore(reducer)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> init = store.getState()</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">`ä¸€å¼€å§‹æ•°å­—ä¸ºï¼š<span class="subst">$&#123;init.value&#125;</span>`</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">listener</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> current = store.getState()</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`å½“å‰æ•°å­—ä¸ºï¼š<span class="subst">$&#123;current.value&#125;</span>`</span>)</span><br><span class="line">&#125;</span><br><span class="line">store.subscribe(listener) <span class="comment">// ç›‘å¬stateçš„æ”¹å˜</span></span><br><span class="line"></span><br><span class="line">store.dispatch(&#123; <span class="attr">type</span>: <span class="string">'INCREMENT'</span> &#125;)</span><br><span class="line"><span class="comment">// å½“å‰æ•°å­—ä¸ºï¼š11</span></span><br><span class="line">store.dispatch(&#123; <span class="attr">type</span>: <span class="string">'INCREMENT'</span> &#125;)</span><br><span class="line"><span class="comment">// å½“å‰æ•°å­—ä¸ºï¼š12</span></span><br><span class="line">store.dispatch(&#123; <span class="attr">type</span>: <span class="string">'DECREMENT'</span> &#125;)</span><br><span class="line"><span class="comment">// å½“å‰æ•°å­—ä¸ºï¼š11</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> store</span><br></pre></td></tr></table></figure>
<p>è¾“å‡ºç»“æœï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;value: 10&#125; &#123;type: &quot;@@redux&#x2F;INIT1.a.7.g.7.t&quot;&#125;</span><br><span class="line">ä¸€å¼€å§‹æ•°å­—ä¸ºï¼š10</span><br><span class="line">&#123;value: 10&#125; &#123;type: &quot;INCREMENT&quot;&#125;</span><br><span class="line">å½“å‰æ•°å­—ä¸ºï¼š11</span><br><span class="line">&#123;value: 11&#125; &#123;type: &quot;INCREMENT&quot;&#125;</span><br><span class="line">å½“å‰æ•°å­—ä¸ºï¼š12</span><br><span class="line">&#123;value: 12&#125; &#123;type: &quot;DECREMENT&quot;&#125;</span><br><span class="line">å½“å‰æ•°å­—ä¸ºï¼š11</span><br></pre></td></tr></table></figure>
<p>æ‰€æœ‰å¯¹æ•°æ®çš„æ“ä½œå¿…é¡»é€šè¿‡ dispatch å‡½æ•°ï¼Œå®ƒæ¥å—ä¸€ä¸ªå‚æ•°actionï¼Œactionæ˜¯ä¸€ä¸ªæ™®é€šçš„JavaScriptå¯¹è±¡ï¼Œactionå¿…é¡»åŒ…å«ä¸€ä¸ª<code>type</code>å­—æ®µï¼Œå‘Šè¯‰å®ƒè¦ä¿®æ”¹ä»€ä¹ˆï¼Œåªæœ‰å®ƒå…è®¸æ‰èƒ½ä¿®æ”¹ã€‚</p>
<p>åœ¨æ¯æ¬¡è°ƒç”¨è¿›æ¥reducerå‡½æ•°æˆ‘ä»¬éƒ½æ‰“å°äº†stateå’Œactionï¼Œæˆ‘ä»¬æ‰‹åŠ¨é€šè¿‡store.dispatchæ–¹æ³•æ´¾å‘äº†ä¸‰æ¬¡actionï¼Œä½†ä½ ä¼šå‘ç°è¾“å‡ºäº†å››æ¬¡.è¿™æ˜¯å› ä¸ºReduxå†…éƒ¨åˆå§‹åŒ–å°±è‡ªåŠ¨æ‰§è¡Œäº†ä¸€æ¬¡dispatchæ–¹æ³•ï¼Œå¯ä»¥çœ‹åˆ°ç¬¬ä¸€æ¬¡æ‰§è¡Œå®ƒçš„typeå¯¹æˆ‘ä»¬æ•°æ®æ¥è¯´æ˜¯æ²¡æœ‰å½±å“çš„ï¼ˆå› ä¸ºtypeå–å€¼<code>@@redux/INIT1.a.7.g.7.t</code>ï¼Œæˆ‘ä»¬è‡ªå·±reduxçš„æ•°æ®typeä¸ä¼šå–åæˆè¿™ä¸ªæ ·å­ï¼Œæ‰€ä»¥ä¸ä¼šè·Ÿå®ƒé‡å¤ï¼‰ï¼Œå³é»˜è®¤è¾“å‡ºstateå€¼</p>
<h2 id="åŠ¨æ‰‹å®ç°ä¸€ä¸ªRedux"><a href="#åŠ¨æ‰‹å®ç°ä¸€ä¸ªRedux" class="headerlink" title="åŠ¨æ‰‹å®ç°ä¸€ä¸ªRedux"></a>åŠ¨æ‰‹å®ç°ä¸€ä¸ªRedux</h2><ol>
<li>é¦–å…ˆè¦æ‰‹åŠ¨å®ç°ä¸€ä¸ªReduxä¹‹å‰ï¼Œå…ˆçœ‹çœ‹æœ‰ä¸Šè¿°ä»£ç æ¶‰åŠåˆ°Reduxä»€ä¹ˆæ–¹æ³•ï¼Œé¦–å…ˆå¼•å…¥äº†<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">import &#123; createStore &#125; from &#39;redux&#39;</span><br><span class="line">&#x2F;&#x2F; ä¼ å…¥reducer</span><br><span class="line">const store &#x3D; createStore(reducer)</span><br></pre></td></tr></table></figure>
createStore ä¼šè¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡åŒ…å«ä¸‰ä¸ªæ–¹æ³•ï¼Œäºæ˜¯æˆ‘ä»¬å¯ä»¥åˆ—å‡ºReduxé›å½¢ã€‚</li>
</ol>
<p>æ–°å»ºmini-redux.js</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">export function createStore (reducer) &#123;</span><br><span class="line"></span><br><span class="line">    const getState &#x3D; () &#x3D;&gt; &#123;&#125;</span><br><span class="line">    const subscribe &#x3D; () &#x3D;&gt; &#123;&#125;</span><br><span class="line">    const dispatch &#x3D; () &#x3D;&gt; &#123;&#125;</span><br><span class="line">    </span><br><span class="line">    return &#123; </span><br><span class="line">        getState, </span><br><span class="line">        subscribe, </span><br><span class="line">        dispatch </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li><p>store.getState()ç”¨äºè·å– state æ•°æ®ï¼Œå…¶å®å°±æ˜¯ç®€å•åœ°æŠŠ state å‚æ•°è¿”å›ã€‚äºæ˜¯</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">createStore</span> (<span class="params">reducer</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> currentState = &#123;&#125;</span><br><span class="line">    <span class="keyword">const</span> getState = <span class="function"><span class="params">()</span> =&gt;</span> currentState</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> &#123; </span><br><span class="line">        getState</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>dispatchæ–¹æ³•ä¼šæ¥æ”¶ä¸€ä¸ªactionï¼Œæ‰§è¡Œä¼šè°ƒç”¨ <code>reducer</code> è¿”å›ä¸€ä¸ªæ–°çŠ¶æ€</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">createStore</span> (<span class="params">reducer</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> currentState = &#123;&#125;</span><br><span class="line">    <span class="keyword">const</span> getState = <span class="function"><span class="params">()</span> =&gt;</span> currentState</span><br><span class="line">    <span class="keyword">const</span> dispatch = <span class="function">(<span class="params">action</span>) =&gt;</span> &#123;</span><br><span class="line">        currentState = reducer(currentState, action) <span class="comment">// è¦†ç›–åŸæ¥çš„state</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> &#123; </span><br><span class="line">        getState,</span><br><span class="line">        dispatch</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>é€šè¿‡ subscribe è®¾ç½®ç›‘å¬å‡½æ•°ï¼ˆè®¾ç½®è®¢é˜…ï¼‰ï¼Œä¸€æ—¦ state å‘ç”Ÿå˜åŒ–ï¼Œå°±è‡ªåŠ¨æ‰§è¡Œè¿™ä¸ªå‡½æ•°ï¼ˆé€šçŸ¥æ‰€æœ‰çš„è®¢é˜…è€…ï¼‰ã€‚</p>
</li>
</ol>
<p>æ€ä¹ˆå®ç°å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨subscribeå‡½æ•°æŠŠä½ è¦ç›‘å¬çš„äº‹ä»¶æ·»åŠ åˆ°æ•°ç»„, ç„¶åæ‰§è¡Œdispatchæ–¹æ³•çš„æ—¶å€™æŠŠlistenersæ•°ç»„çš„ç›‘å¬å‡½æ•°ç»™æ‰§è¡Œä¸€éã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">createStore</span> (<span class="params">reducer</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> currentState = &#123;&#125;</span><br><span class="line">    <span class="keyword">let</span> currentListeners = [] <span class="comment">// ç›‘å¬å‡½æ•°ï¼Œå¯æ·»åŠ å¤šä¸ª</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">const</span> getState = <span class="function"><span class="params">()</span> =&gt;</span> currentState</span><br><span class="line">    <span class="keyword">const</span> subscribe = <span class="function">(<span class="params">listener</span>) =&gt;</span> &#123;</span><br><span class="line">        currentListeners.push(listener)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">const</span> dispatch = <span class="function">(<span class="params">action</span>) =&gt;</span> &#123;</span><br><span class="line">        currentState = reducer(currentState, action) <span class="comment">// è¦†ç›–åŸæ¥çš„state</span></span><br><span class="line">        currentListeners.forEach(<span class="function"><span class="params">listener</span> =&gt;</span> listener())</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> &#123; </span><br><span class="line">        getState,</span><br><span class="line">        subscribe,</span><br><span class="line">        dispatch</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç¿»å¼€ä¸€å¼€å§‹æˆ‘ä»¬é‚£ä¸ªReduxä¾‹å­ï¼Œå…¶å®å°±æ˜¯æŠŠ<code>store.getState()</code>æ·»åŠ è¿›æ¥ï¼Œdispatchæ´¾å‘ä¸€ä¸ªactionåï¼Œreduceræ‰§è¡Œè¿”å›æ–°çš„stateï¼Œå¹¶æ‰§è¡Œäº†ç›‘å¬å‡½æ•°<code>store.getState()</code>ï¼Œstateçš„å€¼å°±å‘ç”Ÿå˜åŒ–äº†ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">listener</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> current = store.getState()</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`å½“å‰æ•°å­—ä¸ºï¼š<span class="subst">$&#123;current.value&#125;</span>`</span>)</span><br><span class="line">&#125;</span><br><span class="line">store.subscribe(listener) <span class="comment">// ç›‘å¬stateçš„æ”¹å˜</span></span><br></pre></td></tr></table></figure>
<p>ä¸Šè¿°ä»£ç ï¼Œè·ŸReactä¾ç„¶æ²¡æœ‰å…³ç³»ï¼Œåªæ˜¯çº¯å±Reduxä¾‹å­ã€‚ä½†æƒ³ä¸€æƒ³å½“æˆ‘ä»¬æŠŠReduxå’ŒReactä¸€èµ·ç”¨çš„æ—¶å€™ï¼Œè¿˜ä¼šå¤šåšè¿™ä¹ˆä¸€æ­¥ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"> <span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">    <span class="keyword">super</span>(props)</span><br><span class="line">    <span class="keyword">this</span>.state = store.getState()</span><br><span class="line">    <span class="keyword">this</span>.storeChange = <span class="keyword">this</span>.storeChange.bind(<span class="keyword">this</span>)</span><br><span class="line">    store.subscribe(<span class="keyword">this</span>.storeChange)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">storeChange () &#123;</span><br><span class="line">    <span class="keyword">this</span>.setState(store.getState())</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨Reacté‡Œé¢ç›‘å¬çš„æ–¹æ³•ï¼Œè¿˜è¦ç”¨<code>this.setState()</code>, è¿™æ˜¯å› ä¸ºReactä¸­stateçš„æ”¹å˜å¿…é¡»ä¾èµ–äº<code>this.setState</code>æ–¹æ³•ã€‚æ‰€ä»¥å¯¹äº React é¡¹ç›®ï¼Œå°±æ˜¯ç»„ä»¶çš„renderæ–¹æ³•æˆ–setStateæ–¹æ³•æ”¾å…¥listenï¼ˆç›‘å¬å‡½æ•°ï¼‰ï¼Œæ‰ä¼šå®ç°è§†å›¾çš„è‡ªåŠ¨æ¸²æŸ“ï¼Œæ”¹å˜é¡µé¢ä¸­çš„stateå€¼ã€‚</p>
<p>æœ€åä¸€æ­¥ï¼Œæ³¨æ„æˆ‘ä»¬ä¸Šé¢è¯´çš„ï¼Œå½“åˆå§‹åŒ–çš„æ—¶å€™ï¼Œdispatchä¼šå…ˆè‡ªåŠ¨æ‰§è¡Œä¸€æ¬¡ï¼Œç»§ç»­æ”¹ä»£ç </p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">createStore</span> (<span class="params">reducer</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> currentState = &#123;&#125;</span><br><span class="line">    <span class="keyword">let</span> currentListeners = [] <span class="comment">// ç›‘å¬å™¨ï¼Œå¯ç›‘å¬å¤šä¸ªäº‹ä»¶</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">const</span> getState = <span class="function"><span class="params">()</span> =&gt;</span> currentState</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> subscribe = <span class="function">(<span class="params">listener</span>) =&gt;</span> &#123;</span><br><span class="line">        currentListeners.push(listener)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> dispatch = <span class="function">(<span class="params">action</span>) =&gt;</span> &#123;</span><br><span class="line">        currentState = reducer(currentState, action) <span class="comment">// è¦†ç›–åŸæ¥çš„state</span></span><br><span class="line">        currentListeners.forEach(<span class="function"><span class="params">listener</span> =&gt;</span> listener())</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// å°½é‡å†™å¾—å¤æ‚ï¼Œä½¿ä¸ä¼šä¸æˆ‘ä»¬è‡ªå®šä¹‰çš„actionæœ‰é‡å¤å¯èƒ½</span></span><br><span class="line">    dispatch(&#123; <span class="attr">type</span>: <span class="string">'@@mini-redux/~GSDG4%FDG#*&amp;'</span> &#125;)</span><br><span class="line">    <span class="keyword">return</span> &#123; </span><br><span class="line">        getState, </span><br><span class="line">        subscribe, </span><br><span class="line">        dispatch </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å†™åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬æŠŠå¼•å…¥çš„reduxæ›¿æ¢æˆ‘ä»¬å†™çš„æ–‡ä»¶</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">import &#123; createStore &#125; from &#39;.&#x2F;mini-redux&#39;</span><br></pre></td></tr></table></figure>
<p>å½“æˆ‘ä»¬æ‰§è¡Œçš„æ—¶å€™ï¼Œå‘ç°ç»“æœå¹¶ä¸å¦‚æˆ‘ä»¬æ‰€æ„¿ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;&#125; &#123;type: &quot;@@mini-redux&#x2F;~GSDG4%FDG#*&amp;&quot;&#125;</span><br><span class="line">ä¸€å¼€å§‹æ•°å­—ä¸ºï¼šundefined</span><br><span class="line">&#123;&#125; &#123;type: &quot;INCREMENT&quot;&#125;</span><br><span class="line">å½“å‰æ•°å­—ä¸ºï¼šNaN</span><br><span class="line">&#123;type: &quot;INCREMENT&quot;&#125;</span><br><span class="line">å½“å‰æ•°å­—ä¸ºï¼šNaN</span><br><span class="line">&#123;value: NaN&#125; &#123;type: &quot;DECREMENT&quot;&#125;</span><br><span class="line">å½“å‰æ•°å­—ä¸ºï¼šNaN</span><br></pre></td></tr></table></figure>
<p>è¿™ä¸ªæ€ä¹ˆå›äº‹å‘¢ï¼Ÿå› ä¸ºæˆ‘ä»¬å†™çš„reduxä¸€å¼€å§‹å°±ç»™stateèµ‹å€¼ä¸º{}ï¼Œåœ¨äº‹å®stateåˆå§‹å€¼æ˜¯ç”±å¤–éƒ¨ä¼ å…¥çš„ï¼Œé€šå¸¸æˆ‘ä»¬è‡ªå·±å†™çš„æ—¶å€™ä¼šè®¾ç½®é»˜è®¤å€¼</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> defaultState = &#123;</span><br><span class="line">    value: <span class="number">10</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">reducer</span> (<span class="params">state = defaultState, action</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">switch</span> (action.type) &#123;</span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            <span class="keyword">return</span> state</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä½†åœ¨æˆ‘ä»¬Reduxå®ç°ä¸­å´æŠŠå®ƒæ‰‹åŠ¨ç½®ä¸ºç©ºå¯¹è±¡ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬æš‚æ—¶è§£å†³æ–¹æ³•å°±æ˜¯ä¸ç»™å®ƒèµ‹å€¼ï¼Œè®©å®ƒä¸ºundefinedï¼Œè¿™æ ·reducerçš„é»˜è®¤å‚æ•°å°±ä¼šç”Ÿæ•ˆã€‚reduxåˆå§‹åŒ–ç¬¬ä¸€æ¬¡dispatchæ—¶ï¼Œå°±ä¼šè®©å®ƒè‡ªåŠ¨èµ‹å€¼ä¸ºreducerä¼ å…¥çš„ç¬¬ä¸€ä¸ªå‚æ•°stateé»˜è®¤å€¼ï¼ˆES6å‡½æ•°é»˜è®¤èµ‹å€¼ï¼‰ï¼Œæ‰€ä»¥ä¿®æ”¹å¦‚ä¸‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">createStore</span> (<span class="params">reducer</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> currentState </span><br><span class="line">    <span class="keyword">let</span> currentListeners = [] <span class="comment">// ç›‘å¬å™¨ï¼Œå¯ç›‘å¬å¤šä¸ªäº‹ä»¶</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">const</span> getState = <span class="function"><span class="params">()</span> =&gt;</span> currentState</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> subscribe = <span class="function">(<span class="params">listener</span>) =&gt;</span> &#123;</span><br><span class="line">        currentListeners.push(listener)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> dispatch = <span class="function">(<span class="params">action</span>) =&gt;</span> &#123;</span><br><span class="line">        currentState = reducer(currentState, action) <span class="comment">// è¦†ç›–åŸæ¥çš„state</span></span><br><span class="line">        currentListeners.forEach(<span class="function"><span class="params">listener</span> =&gt;</span> listener())</span><br><span class="line">    &#125;</span><br><span class="line">    dispatch(&#123; <span class="attr">type</span>: <span class="string">'@@mini-redux/~GSDG4%FDG#*&amp;'</span> &#125;)</span><br><span class="line">    <span class="keyword">return</span> &#123; </span><br><span class="line">        getState, </span><br><span class="line">        subscribe, </span><br><span class="line">        dispatch </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™ä¸ªmini-redux.jsï¼Œæˆ‘ä»¬å°±å¯ä»¥å®ç°è·ŸåŸæ¥çš„reduxå®Œå…¨ä¸€æ ·çš„è¾“å‡ºæ•ˆæœäº†ã€‚</p>
<h2 id="å®Œå–„Redux"><a href="#å®Œå–„Redux" class="headerlink" title="å®Œå–„Redux"></a>å®Œå–„Redux</h2><p>æ¥ä¸‹æ¥æˆ‘ä»¬ç»§ç»­è¡¥å……çŸ¥è¯†ç‚¹</p>
<ol>
<li>createStoreå®é™…æœ‰ä¸‰ä¸ªå‚æ•°ï¼Œå³<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">createStore(reducer, [preloadedState], enhancer)</span><br></pre></td></tr></table></figure>

</li>
</ol>
<p>ç¬¬äºŒä¸ªå‚æ•° <code>[preloadedState] (any)</code>æ˜¯å¯é€‰çš„: initial state</p>
<p>ç¬¬ä¸‰ä¸ªå‚æ•°<code>enhancer(function)</code>ä¹Ÿæ˜¯å¯é€‰çš„ï¼šç”¨äºæ·»åŠ ä¸­é—´ä»¶çš„</p>
<p>é€šå¸¸æƒ…å†µä¸‹ï¼Œé€šè¿‡ preloadedState æŒ‡å®šçš„ state ä¼˜å…ˆçº§è¦é«˜äºé€šè¿‡ reducer æŒ‡å®šçš„ stateã€‚è¿™ç§æœºåˆ¶çš„å­˜åœ¨å…è®¸æˆ‘ä»¬åœ¨ reducer å¯ä»¥é€šè¿‡æŒ‡æ˜é»˜è®¤å‚æ•°æ¥æŒ‡å®šåˆå§‹æ•°æ®ï¼Œè€Œä¸”è¿˜ä¸ºé€šè¿‡æœåŠ¡ç«¯æˆ–è€…å…¶å®ƒæœºåˆ¶æ³¨å…¥æ•°æ®åˆ° store ä¸­æä¾›äº†å¯èƒ½ã€‚</p>
<p>ç¬¬ä¸‰ä¸ªå‚æ•°æˆ‘ä»¬ä¸‹ç¯‡ä¼šè¯´ï¼Œå…ˆç»§ç»­å®Œå–„ä¸€ä¸‹ä»£ç ï¼Œæˆ‘ä»¬éœ€è¦å¯¹ç¬¬äºŒä¸ªå’Œç¬¬ä¸‰ä¸ªå¯é€‰å‚æ•°è¿›è¡Œåˆ¤æ–­ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">createStore</span> (<span class="params">reducer, preloadedState, enhancer</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å½“ç¬¬äºŒä¸ªå‚æ•°æ²¡æœ‰ä¼ preloadedStateï¼Œè€Œç›´æ¥ä¼ functionçš„è¯ï¼Œå°±ä¼šç›´æ¥æŠŠè¿™ä¸ªfunctionå½“æˆenhancer</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> preloadedState === <span class="string">'function'</span> &amp;&amp; <span class="keyword">typeof</span> enhancer === <span class="string">'undefined'</span>) &#123;</span><br><span class="line">        enhancer = preloadedState</span><br><span class="line">        preloadedState = <span class="literal">undefined</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// å½“ç¬¬ä¸‰ä¸ªå‚æ•°ä¼ äº†ä½†ä¸æ˜¯functionä¹Ÿä¼šæŠ¥é”™</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> enhancer !== <span class="string">'undefined'</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">typeof</span> enhancer !== <span class="string">'function'</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'Expected the enhancer to be a function.'</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> enhancer(createStore)(reducer, preloadedState)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// reducerå¿…é¡»ä¸ºå‡½æ•°</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> reducer !== <span class="string">'function'</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'Expected the reducer to be a function.'</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> currentState = preloadedState <span class="comment">// ç¬¬äºŒä¸ªå‚æ•°æ²¡ä¼ é»˜è®¤å°±æ˜¯undefinedèµ‹ç»™currentState</span></span><br><span class="line">    <span class="keyword">let</span> currentListeners = [] <span class="comment">// ç›‘å¬å™¨ï¼Œå¯ç›‘å¬å¤šä¸ªäº‹ä»¶</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å…³äºç¬¬ä¸‰ä¸ªå‚æ•°åˆ¤æ–­ä¸ºä»€ä¹ˆè¿”å›<br><code>return enhancer(createStore)(reducer, preloadedState)</code>æˆ‘ä»¬ä¸‹ç¯‡ä¼šè¯´ï¼Œè¿™ç¯‡å…ˆå¿½ç•¥ã€‚<br>2. æˆ‘ä»¬å®ç°äº†store.subscribe()æ–¹æ³•ï¼Œä½†è¿˜æ˜¯ä¸å®Œæ•´çš„ï¼Œsubscribeæ–¹æ³•å¯ä»¥æ·»åŠ ç›‘å¬å‡½æ•°listener,å®ƒè¿˜æœ‰è¿”å›å€¼ï¼Œè¿”å›ä¸€ä¸ªç§»é™¤listenerçš„å‡½æ•°ï¼›å¦å¤–æˆ‘ä»¬ä¾ç„¶è¦å¯¹ç±»å‹è¿›è¡Œåˆ¤æ–­ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">createStore</span> (<span class="params">reducer, preloadedState, enhancer</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    <span class="keyword">let</span> currentListeners = [] <span class="comment">// ç›‘å¬å™¨ï¼Œå¯ç›‘å¬å¤šä¸ªäº‹ä»¶</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> subscribe = <span class="function">(<span class="params">listener</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">typeof</span> listener !== <span class="string">'function'</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'Expected listener to be a function.'</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        currentListeners.push(listener)</span><br><span class="line">        <span class="comment">// é€šè¿‡filterè¿‡æ»¤ï¼Œæ‰§è¡Œçš„æ—¶å€™å°†ä¹‹å‰æœ¬èº«å·²ç»æ·»åŠ è¿›æ•°ç»„çš„äº‹ä»¶åç§»é™¤æ•°ç»„</span></span><br><span class="line">        <span class="keyword">return</span> <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">            currentListeners = currentListeners.filter(<span class="function"><span class="params">l</span> =&gt;</span> l !== listener);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¹Ÿå¯ä»¥é€šè¿‡æ‰¾æ•°ç»„ä¸‹æ ‡çš„æ–¹å¼ç§»é™¤listener</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> subscribe = <span class="function">(<span class="params">listener</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> listener !== <span class="string">'function'</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'Expected listener to be a function.'</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    currentListeners.push(listener)</span><br><span class="line">    <span class="comment">// é€šè¿‡filterè¿‡æ»¤ï¼Œæ‰§è¡Œçš„æ—¶å€™å°†ä¹‹å‰æœ¬èº«å·²ç»æ·»åŠ è¿›æ•°ç»„çš„äº‹ä»¶åç§»é™¤æ•°ç»„</span></span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> index = currentListeners.indexOf(listener)</span><br><span class="line">        currentListeners.splice(index, <span class="number">1</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç§»é™¤listenerå®é™…å°±æ˜¯å–æ¶ˆè®¢é˜…ï¼Œä½¿ç”¨æ–¹å¼å¦‚ä¸‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> unsubscribe = store.subscribe(<span class="function"><span class="params">()</span> =&gt;</span></span><br><span class="line">  <span class="built_in">console</span>.log(store.getState())</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">unsubscribe(); <span class="comment">// å–æ¶ˆç›‘å¬</span></span><br></pre></td></tr></table></figure>

<ol start="3">
<li>diaptchæ–¹æ³•æ‰§è¡Œå®Œè¿”å›ä¸ºactionï¼Œç„¶åæˆ‘ä»¬åŒæ ·éœ€è¦ä¸ºå®ƒä½œåˆ¤æ–­<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">createStore</span> (<span class="params">reducer, preloadedState, enhancer</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    <span class="keyword">let</span> isDispatching = <span class="literal">false</span></span><br><span class="line">    <span class="keyword">const</span> dispatch = <span class="function">(<span class="params">action</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// ç”¨äºåˆ¤æ–­actionæ˜¯å¦ä¸ºä¸€ä¸ªæ™®é€šå¯¹è±¡</span></span><br><span class="line">        <span class="keyword">if</span> (!isPlainObject(action)) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'Actions must be plain objects. '</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// é˜²æ­¢å¤šæ¬¡dispatchè¯·æ±‚åŒæ—¶æ”¹çŠ¶æ€ï¼Œä¸€å®šæ˜¯å‰é¢çš„dispatchç»“æŸä¹‹åï¼Œæ‰dispatchä¸‹ä¸€ä¸ª</span></span><br><span class="line">        <span class="keyword">if</span> (isDispatching) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'Reducers may not dispatch actions.'</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    </span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            isDispatching = <span class="literal">true</span></span><br><span class="line">            currentState = reducer(currentState, action) <span class="comment">// è¦†ç›–åŸæ¥çš„state</span></span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            isDispatching = <span class="literal">false</span></span><br><span class="line">        &#125;</span><br><span class="line">    </span><br><span class="line">        currentListeners.forEach(<span class="function"><span class="params">listener</span> =&gt;</span> listener())</span><br><span class="line">        <span class="keyword">return</span> action</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç”¨äºåˆ¤æ–­ä¸€ä¸ªå€¼æ˜¯å¦ä¸ºä¸€ä¸ªæ™®é€šçš„å¯¹è±¡(æ™®é€šå¯¹è±¡å³ç›´æ¥ä»¥å­—é¢é‡å½¢å¼æˆ–è°ƒç”¨ new Object() æ‰€åˆ›å»ºçš„å¯¹è±¡)</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">isPlainObject</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> obj !== <span class="string">'object'</span> || obj === <span class="literal">null</span>) <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> proto = obj</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">Object</span>.getPrototypeOf(proto) !== <span class="literal">null</span>) &#123;</span><br><span class="line">        proto = <span class="built_in">Object</span>.getPrototypeOf(proto)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Object</span>.getPrototypeOf(obj) === proto</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ...</span></span><br></pre></td></tr></table></figure>
isPlainObjectå‡½æ•°ä¸­é€šè¿‡ while ä¸æ–­åœ°åˆ¤æ–­ Object.getPrototypeOf(proto) !== null å¹¶æ‰§è¡Œ, æœ€ç»ˆ proto ä¼šæŒ‡å‘ Object.prototype. è¿™æ—¶å†åˆ¤æ–­ Object.getPrototypeOf(obj) === proto, å¦‚æœä¸º true çš„è¯å°±ä»£è¡¨ obj æ˜¯é€šè¿‡å­—é¢é‡æˆ–è°ƒç”¨ new Object() æ‰€åˆ›å»ºçš„å¯¹è±¡äº†ã€‚</li>
</ol>
<p>ä¿æŒactionå¯¹è±¡æ˜¯ç®€å•å¯¹è±¡çš„ä½œç”¨æ˜¯æ–¹ä¾¿reducerè¿›è¡Œå¤„ç†ï¼Œä¸ç”¨å¤„ç†å…¶ä»–çš„æƒ…å†µï¼ˆæ¯”å¦‚function/classå®ä¾‹ç­‰ï¼‰</p>
<p>è‡³æ­¤ï¼Œæˆ‘ä»¬å®ç°äº†æœ€åŸºæœ¬èƒ½ç”¨çš„Reduxä»£ç ï¼Œä¸‹ç¯‡å†ç»§ç»­å®Œå–„Reduxä»£ç ï¼Œæœ€åæ”¾å‡ºåŸºç¡€ç‰ˆReduxæ‰€æœ‰ä»£ç ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">createStore</span> (<span class="params">reducer, preloadedState, enhancer</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å½“ç¬¬äºŒä¸ªå‚æ•°æ²¡æœ‰ä¼ preloadedStateï¼Œè€Œç›´æ¥ä¼ functionçš„è¯ï¼Œå°±ä¼šç›´æ¥æŠŠè¿™ä¸ªfunctionå½“æˆenhancer</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> preloadedState === <span class="string">'function'</span> &amp;&amp; <span class="keyword">typeof</span> enhancer === <span class="string">'undefined'</span>) &#123;</span><br><span class="line">        enhancer = preloadedState </span><br><span class="line">        preloadedState = <span class="literal">undefined</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// å½“ç¬¬ä¸‰ä¸ªå‚æ•°ä¼ äº†ä½†ä¸æ˜¯functionä¹Ÿä¼šæŠ¥é”™</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> enhancer !== <span class="string">'undefined'</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">typeof</span> enhancer !== <span class="string">'function'</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'Expected the enhancer to be a function.'</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> enhancer(createStore)(reducer, preloadedState)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// reducerå¿…é¡»ä¸ºå‡½æ•°</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> reducer !== <span class="string">'function'</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'Expected the reducer to be a function.'</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> currentState = preloadedState <span class="comment">// ç¬¬äºŒä¸ªå‚æ•°æ²¡ä¼ é»˜è®¤å°±æ˜¯undefinedèµ‹ç»™currentState</span></span><br><span class="line">    <span class="keyword">let</span> currentListeners = [] <span class="comment">// ç›‘å¬å™¨ï¼Œå¯ç›‘å¬å¤šä¸ªäº‹ä»¶</span></span><br><span class="line">    <span class="keyword">let</span> isDispatching = <span class="literal">false</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">const</span> getState = <span class="function"><span class="params">()</span> =&gt;</span> currentState</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> subscribe = <span class="function">(<span class="params">listener</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">typeof</span> listener !== <span class="string">'function'</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'Expected listener to be a function.'</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        currentListeners.push(listener)</span><br><span class="line">        <span class="comment">// é€šè¿‡filterè¿‡æ»¤ï¼Œæ‰§è¡Œçš„æ—¶å€™å°†ä¹‹å‰æœ¬èº«å·²ç»æ·»åŠ è¿›æ•°ç»„çš„äº‹ä»¶åç§»é™¤æ•°ç»„</span></span><br><span class="line">        <span class="keyword">return</span> <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">            currentListeners = currentListeners.filter(<span class="function"><span class="params">l</span> =&gt;</span> l !== listener);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> dispatch = <span class="function">(<span class="params">action</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// ç”¨äºåˆ¤æ–­actionæ˜¯å¦ä¸ºä¸€ä¸ªæ™®é€šå¯¹è±¡</span></span><br><span class="line">        <span class="keyword">if</span> (!isPlainObject(action)) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'Actions must be plain objects. '</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// é˜²æ­¢å¤šæ¬¡dispatchè¯·æ±‚åŒæ—¶æ”¹çŠ¶æ€ï¼Œä¸€å®šæ˜¯å‰é¢çš„dispatchç»“æŸä¹‹åï¼Œæ‰dispatchä¸‹ä¸€ä¸ª</span></span><br><span class="line">        <span class="keyword">if</span> (isDispatching) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'Reducers may not dispatch actions.'</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    </span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            isDispatching = <span class="literal">true</span></span><br><span class="line">            currentState = reducer(currentState, action) <span class="comment">// è¦†ç›–åŸæ¥çš„state</span></span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            isDispatching = <span class="literal">false</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        currentListeners.forEach(<span class="function"><span class="params">listener</span> =&gt;</span> listener())</span><br><span class="line">        <span class="keyword">return</span> action</span><br><span class="line">    &#125;</span><br><span class="line">    dispatch(&#123; <span class="attr">type</span>: <span class="string">'@@mini-redux/~GSDG4%FDG#*&amp;'</span> &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> &#123; </span><br><span class="line">        getState, </span><br><span class="line">        subscribe, </span><br><span class="line">        dispatch </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç”¨äºåˆ¤æ–­ä¸€ä¸ªå€¼æ˜¯å¦ä¸ºä¸€ä¸ªæ™®é€šçš„å¯¹è±¡(æ™®é€šå¯¹è±¡å³ç›´æ¥ä»¥å­—é¢é‡å½¢å¼æˆ–è°ƒç”¨ new Object() æ‰€åˆ›å»ºçš„å¯¹è±¡)</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">isPlainObject</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> obj !== <span class="string">'object'</span> || obj === <span class="literal">null</span>) <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> proto = obj</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">Object</span>.getPrototypeOf(proto) !== <span class="literal">null</span>) &#123;</span><br><span class="line">        proto = <span class="built_in">Object</span>.getPrototypeOf(proto)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Object</span>.getPrototypeOf(obj) === proto</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å‚è€ƒèµ„æ–™ï¼š</p>
<p><a href="http://www.ruanyifeng.com/blog/2016/09/redux_tutorial_part_one_basic_usages.html" target="_blank" rel="noopener">Redux å…¥é—¨æ•™ç¨‹ï¼ˆä¸€ï¼‰ï¼šåŸºæœ¬ç”¨æ³•</a></p>
<br>

<ul>
<li>psï¼š <a href="https://github.com/Jacky-Summer/personal-blog" target="_blank" rel="noopener">ä¸ªäººæŠ€æœ¯åšæ–‡Githubä»“åº“</a>ï¼Œè§‰å¾—ä¸é”™çš„è¯æ¬¢è¿starï¼Œç»™æˆ‘ä¸€ç‚¹é¼“åŠ±å§~</li>
</ul>
]]></content>
      <categories>
        <category>Reactç¬”è®°</category>
      </categories>
      <tags>
        <tag>React</tag>
        <tag>Redux</tag>
      </tags>
  </entry>
  <entry>
    <title>Reactå‡½æ•°thisç»‘å®šçš„åŸå› åŠå››ç§ç»‘å®šæ–¹å¼å¯¹æ¯”</title>
    <url>/2020/04/16/React%E5%87%BD%E6%95%B0this%E7%BB%91%E5%AE%9A%E7%9A%84%E5%8E%9F%E5%9B%A0%E5%8F%8A%E5%9B%9B%E7%A7%8D%E7%BB%91%E5%AE%9A%E6%96%B9%E5%BC%8F%E5%AF%B9%E6%AF%94/</url>
    <content><![CDATA[<p>reactç»„ä»¶åœ¨ç»‘å®šå‡½æ•°æ—¶ï¼Œé€šå¸¸æœ‰ä¸‰ç§æ–¹æ³•ï¼Œæ­¤æ–‡å°†å¯¹ä¸‰ç§æ–¹æ³•æ€§èƒ½å’Œå†™æ³•å±•å¼€å†™â€¦</p>
<a id="more"></a>

<h2 id="ä¸ºä»€ä¹ˆè¦ç»‘å®šthis"><a href="#ä¸ºä»€ä¹ˆè¦ç»‘å®šthis" class="headerlink" title="ä¸ºä»€ä¹ˆè¦ç»‘å®šthis"></a>ä¸ºä»€ä¹ˆè¦ç»‘å®šthis</h2><p>é¦–å…ˆï¼Œç¬¬ä¸€ä¸ªå¾ˆé‡è¦çš„é—®é¢˜å°±æ˜¯ï¼Œç»‘å®šthisæ˜¯ä»€ä¹ˆåŸå› ï¼Ÿ</p>
<p>jsé‡Œé¢çš„thisç»‘å®šæ˜¯ä»£ç æ‰§è¡Œçš„æ—¶å€™è¿›è¡Œç»‘å®šçš„ï¼Œè€Œä¸æ˜¯ç¼–å†™çš„æ—¶å€™ï¼Œæ‰€ä»¥thisçš„æŒ‡å‘å–å†³äºå‡½æ•°è°ƒç”¨æ—¶çš„å„ç§æ¡ä»¶ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BindEvent</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">        <span class="keyword">super</span>(props)</span><br><span class="line">        <span class="keyword">this</span>.state = &#123;</span><br><span class="line">            name: <span class="string">'jacky'</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    handleClick() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.state.name)</span><br><span class="line">    &#125;</span><br><span class="line">    render() &#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            &lt;div&gt;</span><br><span class="line">                &lt;button onClick=&#123;<span class="keyword">this</span>.handleClick&#125;&gt;Click&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">            &lt;/</span>div&gt;</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> BindEvent;</span><br></pre></td></tr></table></figure>
<p>æ¥çœ‹ä¸Šé¢è¿™ä¸ªä¾‹å­ï¼Œè¿è¡Œç‚¹å‡»æŒ‰é’®ï¼Œå‘ç°ç¨‹åºæŠ¥é”™ï¼Œå³thisæŒ‡å‘ä¸æ˜¯æ‰€åœ¨ç±»ã€‚ç”±äºç±»çš„æ–¹æ³•é»˜è®¤ä¸ä¼šç»‘å®šthisï¼Œå› æ­¤åœ¨è°ƒç”¨çš„æ—¶å€™å¦‚æœæ²¡æœ‰ç»‘å®šï¼Œthisçš„å€¼å°†ä¼šæ˜¯undefinedã€‚æ•…æˆ‘ä»¬éœ€è¦æ‰‹åŠ¨ç»‘å®šthis</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Uncaught TypeError: Cannot read property &#39;state&#39; of undefined</span><br></pre></td></tr></table></figure>
<p>éœ€è¦æˆ‘ä»¬è‡ªå·±ç»‘å®šthisï¼Œå…¶å®è¿™ä¸æ˜¯reactçš„é”…ï¼Œæœ¬è´¨åŸå› æ˜¯ JavaScript çš„ this æœºåˆ¶é—®é¢˜</p>
<h2 id="thisæœºåˆ¶"><a href="#thisæœºåˆ¶" class="headerlink" title="thisæœºåˆ¶"></a>thisæœºåˆ¶</h2><p>æ¥çœ‹ä¸‹é¢ä¸€ä¸ªä¾‹å­ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123;</span><br><span class="line">    name: <span class="string">'obj'</span>,</span><br><span class="line">    getName: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>, <span class="keyword">this</span>.name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">obj.getName(); <span class="comment">// &#123;name: "obj", getName: Æ’&#125; "obj"</span></span><br></pre></td></tr></table></figure>
<p>ç»“æœç†æ‰€åº”å½“ï¼Œä½¿ç”¨<code>.</code>æ“ä½œç¬¦è°ƒç”¨å‡½æ•°obj.getName()ï¼ŒthisæŒ‡å‘çš„æ˜¯objå¯¹è±¡ï¼Œå³objå¯¹è±¡æ˜¯å‡½æ•°getNameçš„è°ƒç”¨è€…ï¼Œä½†å¦‚æœæ”¹æˆè¿™æ ·ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> middleObj = obj.getName;</span><br><span class="line">middleObj(); <span class="comment">// Window &#123;...&#125; ""</span></span><br></pre></td></tr></table></figure>
<p>å°†getNameå‡½æ•°å¼•ç”¨èµ‹å€¼ç»™middleObjå˜é‡ï¼Œå¹¶ä½¿ç”¨è¿™ä¸ªæ–°çš„å‡½æ•°å¼•ç”¨å»è°ƒç”¨è¯¥å‡½æ•°æ—¶ï¼Œæ‰“å°å‡ºthisä¸ºWindowå¯¹è±¡ï¼Œå…³äºthisçš„æŒ‡å‘ï¼Œå¯ç®€å•ç²—æš´ç†è§£ä¸º<strong>this æ°¸è¿œæŒ‡å‘æœ€åè°ƒç”¨å®ƒçš„é‚£ä¸ªå¯¹è±¡</strong>ã€‚</p>
<p>å¦‚æœæ²¡æœ‰æ˜¾å¼è°ƒç”¨ä¸€ä¸ªå‡½æ•°ï¼ŒJS çš„è§£é‡Šå™¨å°±ä¼šæŠŠå…¨å±€å¯¹è±¡å½“ä½œè°ƒç”¨è€…ï¼Œåœ¨æµè§ˆå™¨åˆ™æ˜¯Windowå¯¹è±¡ä¸ºè°ƒç”¨è€…ã€‚</p>
<p>å¦‚æœä½¿ç”¨ä¸¥æ ¼æ¨¡å¼ï¼Œé‚£ä¹ˆæ²¡æœ‰æ˜¾å¼çš„ä½¿ç”¨è°ƒç”¨è€…çš„æƒ…å†µä¸‹ï¼ŒthisæŒ‡å‘undefined ã€‚</p>
<p>ç†è§£å®Œä¸Šé¢ï¼Œæˆ‘ä»¬ç”¨ç±»æ¥ä½œä¸ºå‚ç…§ï¼š</p>
<p>ä¸‹é¢å®šä¹‰äº†ä¸€ä¸ªç±»ï¼Œç±»é‡Œçš„displayè®¿é—®this.nameå±æ€§</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Foo</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(name) &#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name</span><br><span class="line">    &#125;</span><br><span class="line">    display() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>); <span class="comment">// è¿è¡Œæ‰“å°ï¼š Foo &#123;name: "jacky"&#125;</span></span><br><span class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> foo = <span class="keyword">new</span> Foo(<span class="string">'jacky'</span>);</span><br><span class="line">foo.display(); <span class="comment">// jacky</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> display = foo.display; </span><br><span class="line">display();  </span><br><span class="line"><span class="comment">// undefined</span></span><br><span class="line"><span class="comment">// Uncaught TypeError: Cannot read property 'name' of undefined</span></span><br></pre></td></tr></table></figure>
<p>å½“æˆ‘ä»¬å°†ä¸€ä¸ªå‡½æ•°å¼•ç”¨èµ‹å€¼ç»™æŸä¸ªå…¶ä»–å˜é‡ï¼Œå¹¶ä½¿ç”¨è¿™ä¸ªæ–°çš„å‡½æ•°å¼•ç”¨å»è°ƒç”¨è¯¥å‡½æ•°æ—¶ï¼Œåœ¨ display() æ–¹æ³•thisä¸º<code>undefined</code>ï¼Œæ•…æ‰¾ä¸åˆ°nameå€¼æŠ¥é”™ã€‚</p>
<p>åœ¨è¿™é‡Œåˆæœ‰ä¸€ä¸ªé—®é¢˜äº†ï¼Œdisplayè¿™æ ·ç›´æ¥è°ƒç”¨ï¼Œåœ¨éä¸¥æ ¼æ¨¡å¼ä¸‹è°ƒç”¨è€…ä¸æ˜¯åº”è¯¥ä¸ºWindowå¯¹è±¡å—ï¼Ÿåœ¨è¿™é‡Œï¼Œè¦çŸ¥é“ä¸€ä¸ªçŸ¥è¯†ç‚¹ï¼š</p>
<p><strong>ES6 çš„ class è¯­æ³•ï¼Œæ‰€æœ‰åœ¨ class ä¸­å£°æ˜çš„æ–¹æ³•éƒ½ä¼šè‡ªåŠ¨åœ°ä½¿ç”¨ä¸¥æ ¼æ¨¡å¼</strong></p>
<h2 id="Reactçš„JSX"><a href="#Reactçš„JSX" class="headerlink" title="Reactçš„JSX"></a>Reactçš„JSX</h2><p>è¯´äº†è¿™ä¹ˆå¤šï¼Œè¿™è·ŸReacté‚£ä¸ªæœ‰ä»€ä¹ˆè”ç³»å‘¢ï¼Œæƒ³ææ¸…æ¥šä¸ºä»€ä¹ˆç»‘å®šthisè¿™ä¸ªé—®é¢˜å‰ï¼Œå°±æƒ³å…ˆå¼„æ˜ç™½JSXåˆ°åº•æ˜¯ä¸€ä¸ªä»€ä¹ˆä¸œè¥¿ã€‚</p>
<blockquote>
<p>æœ¬è´¨ä¸Šæ¥è®²ï¼ŒJSX åªæ˜¯ä¸º React.createElement(component, props, â€¦children) æ–¹æ³•æä¾›çš„è¯­æ³•ç³–ã€‚</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;button className=<span class="string">"btn"</span> onClick=&#123;<span class="keyword">this</span>.handleClick&#125;&gt;</span><br><span class="line">    Click Me</span><br><span class="line">&lt;<span class="regexp">/button&gt;</span></span><br></pre></td></tr></table></figure>
<p>ç»babelç¼–è¯‘ä¸ºï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">React.createElement(</span><br><span class="line">    <span class="string">"button"</span>, </span><br><span class="line">    &#123; <span class="attr">className</span>: <span class="string">"btn"</span>, <span class="attr">onClick</span>: <span class="keyword">this</span>.handleClick &#125;, </span><br><span class="line">    <span class="string">"Click Me"</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬æŠŠrenderæ–¹æ³•é‡Œçš„JSXæ‰‹åŠ¨å†™æˆç¼–è¯‘åè¿™ç§å½¢å¼ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Example</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(props)&#123;</span><br><span class="line">        <span class="keyword">super</span>(props);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    handleClick(e) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(e);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    render()&#123;</span><br><span class="line">        <span class="keyword">return</span> React.createElement(</span><br><span class="line">            <span class="string">"button"</span>, </span><br><span class="line">            &#123; <span class="attr">className</span>: <span class="string">"btn"</span>, <span class="attr">onClick</span>: <span class="keyword">this</span>.handleClick &#125;, </span><br><span class="line">            <span class="string">"Click Me"</span></span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>React.createElementçš„ç¬¬äºŒä¸ªå‚æ•°ï¼Œä¼ å…¥çš„æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œè€Œè¿™ä¸ªå¯¹è±¡é‡Œé¢æœ‰å±æ€§çš„å€¼æ˜¯å–this å¯¹è±¡é‡Œé¢çš„å±æ€§ ï¼Œå½“è¿™ä¸ªå¯¹è±¡æ”¾å…¥React.createElementæ‰§è¡Œåï¼Œå»å–è¿™ä¸ªthis.handleClickå±æ€§çš„æ—¶å€™ï¼Œthiså·²ç»ä¸æ˜¯æˆ‘ä»¬åœ¨ä¹¦å†™çš„æ—¶å€™è®¤ä¸ºçš„ç»‘å®šåœ¨Exampleç»„ä»¶ä¸Šäº†ã€‚this.handleClickè¿™é‡Œçš„thisä¼šé»˜è®¤ç»‘å®šï¼Œä½†æ˜¯åˆæ˜¯åœ¨ES6çš„classä¸­ï¼Œæ‰€ä»¥thisç»‘å®šäº†undefinedã€‚</p>
<p> åœ¨JSXè¯­æ³•ä¸­: <code>onClick={ this.handleClick }</code>ä¸­onClickè¿™ä¸ªå±æ€§å°±æ˜¯ç›¸å½“äºä¸Šé¢çš„â€ä¸­é—´å˜é‡â€ã€‚</p>
<p> å³æ˜¯å°†<code>this.handleClick</code>å‡½æ•°èµ‹å€¼ç»™onClickè¿™ä¸ªä¸­é—´å˜é‡ï¼Œåé¢ä¸ä»…è¦è¿›è¡ŒJSXè¯­æ³•è½¬åŒ–,å°†JSXç»„ä»¶è½¬æ¢æˆ<strong>JSå¯¹è±¡</strong>,è¿˜è¦å†å°†Javascriptå¯¹è±¡è½¬æ¢æˆçœŸå®DOMã€‚æŠŠonClickä½œä¸ºä¸­é—´å˜é‡,æŒ‡å‘ä¸€ä¸ªå‡½æ•°çš„æ—¶å€™,åé¢çš„ä¸€ç³»åˆ—å¤„ç†ä¸­ï¼Œä½¿ç”¨onClickè¿™ä¸ªä¸­é—´å˜é‡æ‰€æŒ‡å‘çš„å‡½æ•°ï¼Œé‡Œé¢çš„thisè‡ªç„¶å°±ä¸¢å¤±æ‰äº†ï¼Œä¸æ˜¯å†æŒ‡å‘ç»„ä»¶å®ä¾‹äº†ã€‚</p>
<p> æ‰€ä»¥ï¼Œå½“åœ¨ç»„ä»¶å®šä¹‰æ–¹æ³•æƒ³è®¿é—®thisï¼Œæ‰éœ€è¦æ‰‹åŠ¨ç»‘å®šã€‚</p>
<h2 id="ç»‘å®šthisçš„æ–¹æ³•"><a href="#ç»‘å®šthisçš„æ–¹æ³•" class="headerlink" title="ç»‘å®šthisçš„æ–¹æ³•"></a>ç»‘å®šthisçš„æ–¹æ³•</h2><h3 id="renderæ–¹æ³•ä¸­ç»‘å®šthis"><a href="#renderæ–¹æ³•ä¸­ç»‘å®šthis" class="headerlink" title="renderæ–¹æ³•ä¸­ç»‘å®šthis"></a>renderæ–¹æ³•ä¸­ç»‘å®šthis</h3> <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"> <span class="class"><span class="keyword">class</span> <span class="title">BindEvent</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">        <span class="keyword">super</span>(props)</span><br><span class="line">        <span class="keyword">this</span>.state = &#123;</span><br><span class="line">            name: <span class="string">'jacky'</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    handleClick () &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.state.name)</span><br><span class="line">    &#125;</span><br><span class="line">    render() &#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            &lt;div&gt;</span><br><span class="line">                &lt;button onClick=&#123;<span class="keyword">this</span>.handleClick.bind(<span class="keyword">this</span>)&#125;&gt;ç‚¹å‡»&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">            &lt;/</span>div&gt;</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™ç§æ–¹æ³•å³æ˜¯åœ¨äº‹ä»¶å‡½æ•°åä½¿ç”¨<code>.bind(this)</code>å°†thisç»‘å®šåˆ°å½“å‰ç»„ä»¶ä¸­ã€‚å› ä¸º bind å‡½æ•°ä¼šè¿”å›ä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œæ‰€ä»¥æ¯æ¬¡çˆ¶ç»„ä»¶åˆ·æ–°æ—¶ï¼Œéƒ½ä¼šé‡æ–°ç”Ÿæˆä¸€ä¸ªå‡½æ•°ï¼Œå³ä½¿çˆ¶ç»„ä»¶ä¼ é€’ç»™å­ç»„ä»¶å…¶ä»–çš„ props å€¼ä¸å˜ï¼Œå­ç»„ä»¶æ¯æ¬¡éƒ½ä¼šåˆ·æ–°ï¼Œè¿™å°†ä¼šå½±å“æ€§èƒ½ï¼Œæ•…ä¸æ¨èä½¿ç”¨ã€‚</p>
<h3 id="renderæ–¹æ³•ä¸­ä½¿ç”¨ç®­å¤´å‡½æ•°"><a href="#renderæ–¹æ³•ä¸­ä½¿ç”¨ç®­å¤´å‡½æ•°" class="headerlink" title="renderæ–¹æ³•ä¸­ä½¿ç”¨ç®­å¤´å‡½æ•°"></a>renderæ–¹æ³•ä¸­ä½¿ç”¨ç®­å¤´å‡½æ•°</h3> <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"> <span class="class"><span class="keyword">class</span> <span class="title">BindEvent</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">        <span class="keyword">super</span>(props)</span><br><span class="line">        <span class="keyword">this</span>.state = &#123;</span><br><span class="line">            name: <span class="string">'jacky'</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    handleClick () &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.state.name)</span><br><span class="line">    &#125;</span><br><span class="line">    render() &#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            &lt;div&gt;</span><br><span class="line">                &lt;button onClick=&#123;() =&gt; <span class="keyword">this</span>.handleClick()&#125;&gt;ç‚¹å‡»&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">            &lt;/</span>div&gt;</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é¦–é€‰è¦æ˜ç¡®ä¸€ç‚¹ï¼Œ<strong>ç®­å¤´å‡½æ•°ä¸­ï¼Œthis æ°¸è¿œç»‘å®šäº†å®šä¹‰ç®­å¤´å‡½æ•°æ‰€åœ¨çš„é‚£ä¸ªå¯¹è±¡</strong></p>
<p>è¿™ç§æ–¹æ³•å†™æ³•æ¯”è¾ƒç®€æ´ï¼Œ æœ€å¤§å¥½å¤„å°±æ˜¯ä¼ å‚å¾ˆçµæ´»ï¼Œçˆ¶ç»„ä»¶åˆ·æ–°çš„æ—¶å€™ï¼Œå³ä½¿ä¸¤ä¸ªç®­å¤´å‡½æ•°çš„å‡½æ•°ä½“æ˜¯ä¸€æ ·çš„ï¼Œéƒ½ä¼šç”Ÿæˆä¸€ä¸ªæ–°çš„ç®­å¤´å‡½æ•°ã€‚è¿™ç§æ–¹å¼é‡æ–°åˆ›å»ºå‡½æ•°æ€§èƒ½çš„æŸè€—å°äºç¬¬1ç§ã€‚</p>
<h3 id="æ„é€ å‡½æ•°ç»‘å®šthis"><a href="#æ„é€ å‡½æ•°ç»‘å®šthis" class="headerlink" title="æ„é€ å‡½æ•°ç»‘å®šthis"></a>æ„é€ å‡½æ•°ç»‘å®šthis</h3> <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BindEvent</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">        <span class="keyword">super</span>(props)</span><br><span class="line">        <span class="keyword">this</span>.state = &#123;</span><br><span class="line">            name: <span class="string">'jacky'</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">this</span>.handleClick = <span class="keyword">this</span>.handleClick.bind(<span class="keyword">this</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    handleClick () &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.state.name)</span><br><span class="line">    &#125;</span><br><span class="line">    render() &#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            &lt;div&gt;</span><br><span class="line">                &lt;button onClick=&#123;<span class="keyword">this</span>.handleClick&#125;&gt;ç‚¹å‡»&lt;<span class="regexp">/button&gt; </span></span><br><span class="line"><span class="regexp">            &lt;/</span>div&gt;</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p> ä¸ºäº†é¿å…åœ¨renderä¸­ç»‘å®šthiså¼•å‘å¯èƒ½çš„æ€§èƒ½é—®é¢˜ï¼Œå¯ä»¥åœ¨constructorä¸­é¢„å…ˆè¿›è¡Œç»‘å®šã€‚å¥½å¤„æ˜¯ä»…éœ€è¦ç»‘å®šä¸€æ¬¡ï¼Œé¿å…æ¯æ¬¡æ¸²æŸ“æ—¶éƒ½è¦é‡æ–°ç»‘å®šï¼Œä¹Ÿæ˜¯å¸¸æ¨èçš„å†™æ³•ï¼Œå°±æ˜¯å†™èµ·æ¥ç¹çä¸€ç‚¹ï¼Œè¦å•ç‹¬ç»‘å®šã€‚</p>
<h3 id="åœ¨å®šä¹‰é˜¶æ®µä½¿ç”¨ç®­å¤´å‡½æ•°ç»‘å®š"><a href="#åœ¨å®šä¹‰é˜¶æ®µä½¿ç”¨ç®­å¤´å‡½æ•°ç»‘å®š" class="headerlink" title="åœ¨å®šä¹‰é˜¶æ®µä½¿ç”¨ç®­å¤´å‡½æ•°ç»‘å®š"></a>åœ¨å®šä¹‰é˜¶æ®µä½¿ç”¨ç®­å¤´å‡½æ•°ç»‘å®š</h3>  <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">BindEvent</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">        <span class="keyword">super</span>(props)</span><br><span class="line">        <span class="keyword">this</span>.state = &#123;</span><br><span class="line">            name: <span class="string">'jacky'</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    handleClick = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.state.name)</span><br><span class="line">    &#125;</span><br><span class="line">    render() &#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            &lt;div&gt;</span><br><span class="line">                &lt;button onClick=&#123;<span class="keyword">this</span>.handleClick&#125;&gt;ç‚¹å‡»&lt;<span class="regexp">/button&gt; </span></span><br><span class="line"><span class="regexp">            &lt;/</span>div&gt;</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™ç§å†™æ³•æ˜¯ES7çš„å†™æ³•ï¼ŒES6å¹¶ä¸æ”¯æŒï¼Œä¸è¿‡æˆ‘ä»¬å¯ä»¥é…ç½®ä½ çš„å¼€å‘ç¯å¢ƒæ”¯æŒES7ã€‚</p>
<p>è¿™ç§æ–¹æ³•é¿å…äº†ç¬¬1ç§å’Œç¬¬2ç§çš„å¯èƒ½æ½œåœ¨çš„æ€§èƒ½é—®é¢˜ï¼Œä¹Ÿæ¯”ç¬¬3ç§æ–¹æ³•ç®€æ´ï¼Œä¹Ÿæ˜¯å¸¸æ¨èçš„å†™æ³•ã€‚</p>
<p>è‡³äºå“ªä¸€ç§æ˜¯æœ€å¥½çš„å†™æ³•ï¼Œç›®å‰è¿˜çœŸçš„æ— æ³•å®šè®ºï¼Œæœ‰å¾…ä»¥åå¼€å‘ä¸­å¾—å‡ºæœ€ä½³å®è·µâ€¦</p>
<br>

<ul>
<li>psï¼š <a href="https://github.com/Jacky-Summer/personal-blog" target="_blank" rel="noopener">ä¸ªäººæŠ€æœ¯åšæ–‡Githubä»“åº“</a>ï¼Œæ¬¢è¿star</li>
</ul>
]]></content>
      <categories>
        <category>Reactç¬”è®°</category>
      </categories>
      <tags>
        <tag>React</tag>
      </tags>
  </entry>
  <entry>
    <title>åŸç”ŸJavaScript DOMæ“ä½œå¸¸è§æ±‡æ€»</title>
    <url>/2020/04/09/%E5%8E%9F%E7%94%9FJavaScript-DOM%E6%93%8D%E4%BD%9C%E5%B8%B8%E8%A7%81%E6%B1%87%E6%80%BB/</url>
    <content><![CDATA[<p>æœ€è¿‘åœ¨çœ‹JSæ€§èƒ½ä¼˜åŒ–æ–¹é¢ï¼Œè¯´åˆ°äº†createDocumentFragment()æ–¹æ³•ï¼Œå¯¹è¯¥æ–¹æ³•æœ‰å°è±¡ï¼Œä½†ä¸ºäº†è¿›ä¸€æ­¥äº†è§£ï¼Œæˆ‘è¿˜æ˜¯é‡æ–°æŸ¥é˜…ä¸€éï¼Œé¡ºä¾¿æŠŠDOMæ“ä½œä¹Ÿç»™æ€»ç»“ä¸€ä¸‹ã€‚</p>
<a id="more"></a>

<h2 id="åˆ›å»ºæ–°èŠ‚ç‚¹"><a href="#åˆ›å»ºæ–°èŠ‚ç‚¹" class="headerlink" title="åˆ›å»ºæ–°èŠ‚ç‚¹"></a>åˆ›å»ºæ–°èŠ‚ç‚¹</h2><ul>
<li><strong>createDocumentFragment()æ–¹æ³•</strong></li>
</ul>
<p>è¯¥æ–¹æ³•æ˜¯ç”¨æ¥åˆ›å»ºä¸€ä¸ªè™šæ‹Ÿçš„èŠ‚ç‚¹å¯¹è±¡ï¼Œæˆ–è€…è¯´ï¼Œæ˜¯ç”¨æ¥åˆ›å»ºæ–‡æ¡£ç¢ç‰‡èŠ‚ç‚¹ã€‚å®ƒå¯ä»¥åŒ…å«å„ç§ç±»å‹çš„èŠ‚ç‚¹ï¼Œåœ¨åˆ›å»ºä¹‹åˆæ˜¯ç©ºçš„ã€‚</p>
<p>DocumentFragment ä¸æ˜¯çœŸå® DOM æ ‘çš„ä¸€éƒ¨åˆ†ï¼Œå®ƒçš„å˜åŒ–ä¸ä¼šè§¦å‘ DOM æ ‘çš„é‡æ–°æ¸²æŸ“ï¼Œä¸”ä¸ä¼šå¯¼è‡´æ€§èƒ½ç­‰é—®é¢˜ã€‚</p>
<p>å½“æŠŠä¸€ä¸ªDocumentFragmentèŠ‚ç‚¹æ’å…¥æ–‡æ¡£æ ‘æ—¶ï¼Œæ’å…¥çš„ä¸æ˜¯DocumentFragmentè‡ªèº«ï¼Œè€Œæ˜¯å®ƒçš„æ‰€æœ‰å­å­™èŠ‚ç‚¹ï¼Œå³æ’å…¥çš„æ˜¯æ‹¬å·é‡Œçš„èŠ‚ç‚¹ã€‚è¿™ä¸ªç‰¹æ€§ä½¿å¾—DocumentFragmentæˆäº†å ä½ç¬¦ï¼Œæš‚æ—¶å­˜æ”¾é‚£äº›ä¸€æ¬¡æ’å…¥æ–‡æ¡£çš„èŠ‚ç‚¹ã€‚</p>
<ul>
<li><strong>createElement()æ–¹æ³•</strong></li>
</ul>
<p>åœ¨ HTML æ–‡æ¡£ä¸­ï¼Œdocument.createElement() æ–¹æ³•ç”¨äºåˆ›å»ºä¸€ä¸ªç”±æ ‡ç­¾åç§° tagName æŒ‡å®šçš„ HTML å…ƒç´ </p>
<p>æ¥çœ‹ä¸€ä¸ªä¾‹å­, å¯¹äºé¡µé¢å·²å­˜åœ¨çš„<code>&lt;ul id=&quot;ul&quot;&gt;&lt;/ul&gt;</code>å…ƒç´ ï¼Œæˆ‘ä»¬æƒ³å¾€é‡Œé¢æ·»åŠ liæ ‡ç­¾</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> ul = <span class="built_in">document</span>.getElementById(<span class="string">"ul"</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">50</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">var</span> li = <span class="built_in">document</span>.createElement(<span class="string">"li"</span>);</span><br><span class="line">    li.innerHTML = <span class="string">"index: "</span> + i;</span><br><span class="line">    ul.appendChild(li);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢æ“ä½œçœ‹èµ·æ¥å¾ˆæ­£å¸¸ï¼Œä½†å®é™…è¦å¾ˆå¤šçš„æ’å…¥æ“ä½œå’Œæ”¹åŠ¨ï¼›è€Œæ¯ä¸€æ¬¡çš„æ’å…¥éƒ½ä¼šå¼•èµ·é‡æ–°æ¸²æŸ“ï¼Œè¯¥æ“ä½œä¼šå¼•å‘å¤šæ¬¡æ¸²æŸ“ï¼Œåœ¨æ€§èƒ½ä¼˜åŒ–æ–¹é¢ï¼Œæœ‰ä¸€ç‚¹æ˜¯å‡å°‘DOMæ“ä½œï¼Œå› ä¸ºDOMæ“ä½œå¯¼è‡´äº†é¡µé¢çš„é‡ç»˜æˆ–é‡æ’ã€‚</p>
<ul>
<li>createDocumentFragment()æ–¹æ³•å’ŒcreateElement()æ–¹æ³•åŒºåˆ«</li>
</ul>
<p>å¦‚æœæ˜¯ç”¨createDocumentFragment()æ–¹æ³•æ“ä½œ</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> ul = <span class="built_in">document</span>.getElementById(<span class="string">"ul"</span>);</span><br><span class="line"><span class="keyword">var</span> fragment = <span class="built_in">document</span>.createDocumentFragment();</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">50</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">var</span> li = <span class="built_in">document</span>.createElement(<span class="string">"li"</span>);</span><br><span class="line">    li.innerHTML = <span class="string">"index: "</span> + i;</span><br><span class="line">    fragment.appendChild(li);</span><br><span class="line">&#125;</span><br><span class="line">ul.appendChild(fragment);</span><br></pre></td></tr></table></figure>

<p>ç›¸æ¯”createElement()æ–¹æ³•ï¼Œè¿™æ¬¡æ˜¯å…ˆå°†è¿™äº›å…ƒç´ æ·»åŠ åˆ°fragmentä¸­ï¼Œå†ç»Ÿä¸€å°†fragmentæ·»åŠ åˆ°é¡µé¢ï¼Œä¼šå‡å°‘é¡µé¢æ¸²æŸ“domçš„æ¬¡æ•°ï¼Œæ•ˆç‡ä¼šæ˜æ˜¾æå‡ã€‚å› ä¸ºfragmentæ–‡æ¡£ç‰‡æ®µå­˜åœ¨äºå†…å­˜ä¸­ï¼Œå¹¶ä¸åœ¨DOMä¸­ï¼Œæ‰€ä»¥å°†å­å…ƒç´ æ’å…¥åˆ°æ–‡æ¡£ç‰‡æ®µä¸­æ—¶ä¸ä¼šå¼•èµ·é¡µé¢å›æµï¼ˆæ–°åˆ›å»ºçš„fragmentç‰‡æ®µåœ¨æ–‡æ¡£å†…æ˜¯æ²¡æœ‰å¯¹åº”çš„æ ‡ç­¾çš„ï¼Œè¿™é‡Œæ·»åŠ çš„æ˜¯ç‰‡æ®µçš„æ‰€æœ‰å­èŠ‚ç‚¹ï¼‰</p>
<ul>
<li>createTextNode()æ–¹æ³•</li>
</ul>
<p>è¯¥æ–¹æ³•ä¼šåˆ›å»ºä¸€ä¸ªæ–‡æœ¬èŠ‚ç‚¹ã€‚</p>
<p>HTMLå…ƒç´ é€šå¸¸æ˜¯ç”±å…ƒç´ èŠ‚ç‚¹å’Œæ–‡æœ¬èŠ‚ç‚¹ç»„æˆã€‚åˆ›å»ºä¸€ä¸ªæ ‡é¢˜ (h1), ä½ å¿…é¡»åˆ›å»º â€œh1â€ å…ƒç´ å’Œæ–‡æœ¬èŠ‚ç‚¹:</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> h = <span class="built_in">document</span>.createElement(<span class="string">"h1"</span>)</span><br><span class="line"><span class="keyword">var</span> t = <span class="built_in">document</span>.createTextNode(<span class="string">"Hello World"</span>);</span><br><span class="line">h.appendChild(t);</span><br></pre></td></tr></table></figure>

<h2 id="DOMæ›´æ”¹ï¼šæ·»åŠ ã€ç§»é™¤ã€æ›¿æ¢ã€æ’å…¥"><a href="#DOMæ›´æ”¹ï¼šæ·»åŠ ã€ç§»é™¤ã€æ›¿æ¢ã€æ’å…¥" class="headerlink" title="DOMæ›´æ”¹ï¼šæ·»åŠ ã€ç§»é™¤ã€æ›¿æ¢ã€æ’å…¥"></a>DOMæ›´æ”¹ï¼šæ·»åŠ ã€ç§»é™¤ã€æ›¿æ¢ã€æ’å…¥</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ·»åŠ ã€åˆ é™¤å­å…ƒç´ </span></span><br><span class="line">ele.appendChild(el);</span><br><span class="line">ele.removeChild(el);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ›¿æ¢å­å…ƒç´ </span></span><br><span class="line">ele.replaceChild(el1, el2);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ’å…¥å­å…ƒç´ </span></span><br><span class="line">parentElement.insertBefore(newElement, referenceElement);</span><br></pre></td></tr></table></figure>
<p>å‰é¢ä¸‰ä¸ªç”¨æ³•å°±ä¸€ç›®äº†ç„¶ï¼Œå¯¹äºinsertBefore()æ–¹æ³•æ¥ä¸¾ä¸ªä¾‹å­ï¼š</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">"ul"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>1<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>2<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>3<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> newEle = <span class="built_in">document</span>.createElement(<span class="string">'li'</span>);</span><br><span class="line"><span class="keyword">var</span> textNode = <span class="built_in">document</span>.createTextNode(<span class="string">'insertNode'</span>);</span><br><span class="line">newEle.appendChild(textNode);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> ul = <span class="built_in">document</span>.getElementById(<span class="string">'ul'</span>);</span><br><span class="line">ul.insertBefore(newEle, ul.firstChild);</span><br></pre></td></tr></table></figure>
<p>é¡µé¢è¾“å‡ºï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">insertNode</span><br><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td></tr></table></figure>

<h2 id="DOMæŸ¥è¯¢"><a href="#DOMæŸ¥è¯¢" class="headerlink" title="DOMæŸ¥è¯¢"></a>DOMæŸ¥è¯¢</h2><p>å…ƒç´ æŸ¥è¯¢çš„APIè¿”å›çš„çš„ç»“æœæ˜¯DOMèŠ‚ç‚¹æˆ–è€…DOMèŠ‚ç‚¹çš„åˆ—è¡¨</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">getElementById()  </span><br><span class="line">getElementsByName()  </span><br><span class="line">getElementsByTagName()</span><br><span class="line">getElementsByClassName()</span><br><span class="line">querySelector()</span><br><span class="line">querySelectorAll()</span><br></pre></td></tr></table></figure>

<p>querySelector() æ–¹æ³•è¿”å›åŒ¹é…æŒ‡å®š CSS é€‰æ‹©å™¨å…ƒç´ çš„ç¬¬ä¸€ä¸ªå­å…ƒç´ ï¼Œ è¯¥æ–¹æ³•åªè¿”å›åŒ¹é…æŒ‡å®šé€‰æ‹©å™¨çš„ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚å¦‚æœè¦è¿”å›æ‰€æœ‰åŒ¹é…å…ƒç´ ï¼Œéœ€è¦ä½¿ç”¨ querySelectorAll() æ–¹æ³•æ›¿ä»£ï¼</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">document.querySelector(&quot;#test&quot;); &#x2F;&#x2F; è·å–åˆ°idåä¸ºtestçš„é¦–ä¸ªå…ƒç´ </span><br></pre></td></tr></table></figure>
<ul>
<li>querySelectorç³»åˆ—æ–¹æ³•ä¸getElementByç³»åˆ—æ–¹æ³•å¯¹æ¯”</li>
</ul>
<ol>
<li>å¾—åˆ°çš„å…ƒç´ ä¸æ˜¯éœ€è¦å¾ˆéº»çƒ¦çš„å¤šæ¬¡getElementBy..çš„è¯ï¼Œå°½é‡ä½¿ç”¨getElementByç³»åˆ—æ–¹æ³•,å› ä¸ºgetElementByç³»åˆ—æ‰§è¡Œé€Ÿåº¦æ›´å¿«ã€‚</li>
<li>å¾—åˆ°çš„å…ƒç´ éœ€è¦å¾ˆéº»çƒ¦çš„å¤šæ¬¡getElementByâ€¦ç»„åˆæ‰èƒ½å¾—åˆ°çš„è¯ä½¿ç”¨querySelectorï¼Œæ–¹ä¾¿ã€‚</li>
<li>querySelector()é€‰æ‹©çš„æ ‡ç­¾æ˜¯é™æ€çš„ï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨é€‰ä¸­ä¹‹åï¼Œèƒ½å¤Ÿä¸€ç›´ä¿å­˜ï¼Œä¹Ÿå°±æ˜¯è„±ç¦»äº†è¢«é€‰æ‹©çš„æˆä¸ºå‰¯æœ¬ã€‚è€ŒgetelementsByç³»åˆ—æ–¹æ³•æ˜¯åŠ¨æ€çš„ï¼Œç›¸äº’æ˜ å°„ï¼Œåœ¨è°ƒç”¨æ—¶ï¼Œå˜åŒ–å¯ä»¥åŠæ—¶çš„åæ˜ åœ¨é¡µé¢ä¸Šã€‚<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ç”¨ querySelector æ“ä½œå…ƒç´ </span></span><br><span class="line"><span class="keyword">var</span> ul = <span class="built_in">document</span>.querySelector(<span class="string">'ul'</span>);</span><br><span class="line"><span class="keyword">var</span> list = ul.querySelectorAll(<span class="string">'li'</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; i++) &#123; <span class="comment">// åˆ›å»º3ä¸ªæ–°çš„liæ ‡ç­¾ï¼Œæ·»åŠ åˆ°ulåˆ—è¡¨ä¸­</span></span><br><span class="line">    ul.appendChild(<span class="built_in">document</span>.createElement(<span class="string">'li'</span>));</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(list.length); <span class="comment">// 3  </span></span><br><span class="line"><span class="comment">// è¾“å‡ºçš„æ˜¯æ·»åŠ å‰liçš„æ•°é‡3ï¼Œè€Œéæ­¤æ—¶liçš„æ€»æ•°é‡6</span></span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> ul = <span class="built_in">document</span>.getElementsByTagName(<span class="string">'ul'</span>)[<span class="number">0</span>];</span><br><span class="line"><span class="keyword">var</span> list = ul.getElementsByTagName(<span class="string">'li'</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; i++) &#123; <span class="comment">// åˆ›å»º3ä¸ªæ–°çš„liæ ‡ç­¾ï¼Œæ·»åŠ åˆ°ulåˆ—è¡¨ä¸­</span></span><br><span class="line">    ul.appendChild(<span class="built_in">document</span>.createElement(<span class="string">'li'</span>));</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(list.length); <span class="comment">// 6</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<ul>
<li>è¿˜æœ‰å…ƒç´ çš„DOMå¯¼èˆªæ–¹æ³•ï¼š<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// è·å–çˆ¶å…ƒç´ ã€çˆ¶èŠ‚ç‚¹</span></span><br><span class="line"><span class="keyword">var</span> parent = ele.parentElement;</span><br><span class="line"><span class="keyword">var</span> parent = ele.parentNode;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–å­èŠ‚ç‚¹ï¼Œå­èŠ‚ç‚¹å¯ä»¥æ˜¯ä»»ä½•ä¸€ç§èŠ‚ç‚¹ï¼Œå¯ä»¥é€šè¿‡nodeTypeæ¥åˆ¤æ–­</span></span><br><span class="line"><span class="keyword">var</span> nodes = ele.children;    </span><br><span class="line"></span><br><span class="line"><span class="comment">// æŸ¥è¯¢å­å…ƒç´ </span></span><br><span class="line"><span class="keyword">var</span> els = ele.getElementsByTagName(<span class="string">'li'</span>);</span><br><span class="line"><span class="keyword">var</span> els = ele.getElementsByClassName(<span class="string">'test'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å½“å‰å…ƒç´ çš„ç¬¬ä¸€ä¸ª/æœ€åä¸€ä¸ªå­å…ƒç´ èŠ‚ç‚¹</span></span><br><span class="line"><span class="keyword">var</span> el = ele.firstElementChild;</span><br><span class="line"><span class="keyword">var</span> el = ele.lastElementChild;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸‹ä¸€ä¸ª/ä¸Šä¸€ä¸ªå…„å¼Ÿå…ƒç´ èŠ‚ç‚¹</span></span><br><span class="line"><span class="keyword">var</span> el = ele.nextElementSibling;</span><br><span class="line"><span class="keyword">var</span> el = ele.previousElementSibling;</span><br></pre></td></tr></table></figure>
<h2 id="å±æ€§æ“ä½œ"><a href="#å±æ€§æ“ä½œ" class="headerlink" title="å±æ€§æ“ä½œ"></a>å±æ€§æ“ä½œ</h2></li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">getAttribute(key)</span><br><span class="line">setAttribute(key,value)</span><br><span class="line">hasAttribute(key)</span><br><span class="line">removeAttribute(key)</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>æ—¥å¸¸æ€»ç»“</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title>ç”¨React+Antdå°è£…Axioså®ç°å…¨å±€Loadingæ•ˆæœ</title>
    <url>/2020/03/29/%E7%94%A8React-Antd%E5%B0%81%E8%A3%85Axios%E5%AE%9E%E7%8E%B0%E5%85%A8%E5%B1%80Loading%E6%95%88%E6%9E%9C/</url>
    <content><![CDATA[<p>ä»Šå¤©åœ¨åšreactåå°ç®¡ç†çš„æ—¶å€™è¦å®ç°ä¸€ä¸ªå…¨å±€Loadingæ•ˆæœï¼Œé€šå¸¸ä½¿ç”¨axiosåº“ä¸åç«¯è¿›è¡Œæ•°æ®äº¤äº’ã€‚ä¸ºäº†æ›´å¥½çš„ç”¨æˆ·ä½“éªŒï¼Œåœ¨æ¯æ¬¡è¯·æ±‚å‰æ·»åŠ ä¸€ä¸ªåŠ è½½æ•ˆæœï¼Œè®©ç”¨æˆ·çŸ¥é“åœ¨ç­‰å¾…åŠ è½½ã€‚</p>
<a id="more"></a>

<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>è¦å®ç°è¿™ä¸ªåŠŸèƒ½ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ¯ä¸ªç»„ä»¶è¯·æ±‚æ‰‹åŠ¨æ·»åŠ åŠ è½½æ•ˆæœè¿”å›åå†å°†å…¶éšè—ï¼Œä½†å¦‚æœæ¯ä¸ªè¯·æ±‚éƒ½è¿™ä¹ˆåšï¼Œå°±è¦åšå¤šæ¬¡é‡å¤è®¾ç½®æ˜¾å¾—å¾ˆéº»çƒ¦ï¼Œä½†å¥½å¤„æ˜¯å¯ä»¥è®¾ç½®å®šåˆ¶å¤šç§è¯·æ±‚æ•ˆæœã€‚ä½†è€ƒè™‘åˆ°è¯¥é¡¹ç›®åœºæ™¯ä¸ºåå°ç®¡ç†ç³»ç»Ÿï¼Œç»™ç®¡ç†å‘˜ä½¿ç”¨ï¼ŒèŠ±æ ·å¯ä»¥ä¸ç”¨æå¤ªå¤šï¼Œç»Ÿä¸€ä¼˜é›…å³å¯ï¼Œæ•…é‡‡å–å…¨å±€è®¾ç½®loadingæ•ˆæœã€‚</p>
<h2 id="å¼€å‘ç‰ˆæœ¬"><a href="#å¼€å‘ç‰ˆæœ¬" class="headerlink" title="å¼€å‘ç‰ˆæœ¬"></a>å¼€å‘ç‰ˆæœ¬</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="string">"react"</span>: <span class="string">"^16.13.1"</span>,</span><br><span class="line"><span class="string">"antd"</span>: <span class="string">"^4.0.4"</span>,</span><br><span class="line"><span class="string">"axios"</span>: <span class="string">"^0.19.2"</span></span><br></pre></td></tr></table></figure>

<h2 id="ä»£ç è¯´æ˜"><a href="#ä»£ç è¯´æ˜" class="headerlink" title="ä»£ç è¯´æ˜"></a>ä»£ç è¯´æ˜</h2><ol>
<li>é€šè¿‡ axios æä¾›çš„è¯·æ±‚æ‹¦æˆªå’Œå“åº”æ‹¦æˆªçš„æ¥å£ï¼Œæ§åˆ¶ loading çš„æ˜¾ç¤ºæˆ–è€…éšè—ã€‚åœ¨æ­¤æˆ‘è¿˜è®¾ç½®äº†æ²¡æœ‰ç½‘ç»œå’Œç½‘ç»œè¶…æ—¶çš„æç¤ºä¿¡æ¯</li>
<li>é‡‡ç”¨antdçš„Spinç»„ä»¶æ¥å®ç°loadingæ•ˆæœï¼Œmessageç»„ä»¶æ¥è¿›è¡Œæ¶ˆæ¯æç¤ºï¼ˆantd.cssè¿™é‡Œæ²¡æœ‰å¼•å…¥ï¼Œæ˜¯å› ä¸ºæˆ‘è®¾ç½®äº†æŒ‰éœ€åŠ è½½ï¼‰</li>
<li>å®šä¹‰å˜é‡requestCountä½œä¸ºè®¡æ•°å™¨ï¼Œç¡®ä¿åŒä¸€æ—¶åˆ»å¦‚æœæœ‰å¤šä¸ªè¯·æ±‚çš„è¯ï¼Œä¸ä¼šåŒæ—¶æ·»åŠ å¤šä¸ª loadingï¼Œè€Œæ˜¯åªæœ‰1ä¸ªï¼Œå¹¶åœ¨æ‰€æœ‰è¯·æ±‚ç»“æŸåæ‰ä¼šéšè— loadingã€‚</li>
<li>é»˜è®¤æ‰€æœ‰è¯·æ±‚éƒ½ä¼šè‡ªåŠ¨æœ‰ loading æ•ˆæœã€‚å¦‚æœæŸä¸ªè¯·æ±‚ä¸éœ€è¦ loading æ•ˆæœï¼Œå¯ä»¥åœ¨è¯·æ±‚ headers ä¸­è®¾ç½® isLoading ä¸ºfalseã€‚</li>
</ol>
<h2 id="æ­¥éª¤"><a href="#æ­¥éª¤" class="headerlink" title="æ­¥éª¤"></a>æ­¥éª¤</h2><ol>
<li>åœ¨srcç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªæ–‡ä»¶axios.js<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">'axios'</span>;</span><br><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">'react-dom'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; message, Spin &#125; <span class="keyword">from</span> <span class="string">'antd'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> Axios = axios.create(&#123;</span><br><span class="line">    <span class="comment">// baseURL: process.env.BASE_URL, // è®¾ç½®è¯·æ±‚çš„base url</span></span><br><span class="line">    timeout: <span class="number">20000</span>, <span class="comment">// è®¾ç½®è¶…æ—¶æ—¶é•¿</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// è®¾ç½®postè¯·æ±‚å¤´</span></span><br><span class="line">Axios.defaults.headers.post[<span class="string">'Content-Type'</span>] = <span class="string">'application/x-www-form-urlencoded;charset=UTF-8'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å½“å‰æ­£åœ¨è¯·æ±‚çš„æ•°é‡</span></span><br><span class="line"><span class="keyword">let</span> requestCount = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ˜¾ç¤ºloading</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">showLoading</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (requestCount === <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> dom = <span class="built_in">document</span>.createElement(<span class="string">'div'</span>)</span><br><span class="line">        dom.setAttribute(<span class="string">'id'</span>, <span class="string">'loading'</span>)</span><br><span class="line">        <span class="built_in">document</span>.body.appendChild(dom)</span><br><span class="line">        ReactDOM.render(<span class="xml"><span class="tag">&lt;<span class="name">Spin</span> <span class="attr">tip</span>=<span class="string">"åŠ è½½ä¸­..."</span> <span class="attr">size</span>=<span class="string">"large"</span>/&gt;</span></span>, dom)</span><br><span class="line">    &#125;</span><br><span class="line">    requestCount++</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// éšè—loading</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">hideLoading</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    requestCount--</span><br><span class="line">    <span class="keyword">if</span> (requestCount === <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="built_in">document</span>.body.removeChild(<span class="built_in">document</span>.getElementById(<span class="string">'loading'</span>))</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¯·æ±‚å‰æ‹¦æˆª</span></span><br><span class="line">Axios.interceptors.request.use(<span class="function"><span class="params">config</span> =&gt;</span> &#123;</span><br><span class="line">   <span class="comment">// requestCountä¸º0ï¼Œæ‰åˆ›å»ºloading, é¿å…é‡å¤åˆ›å»º</span></span><br><span class="line">    <span class="keyword">if</span> (config.headers.isLoading !== <span class="literal">false</span>) &#123;</span><br><span class="line">        showLoading()</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> config</span><br><span class="line">&#125;, err =&gt; &#123;</span><br><span class="line">    <span class="comment">// åˆ¤æ–­å½“å‰è¯·æ±‚æ˜¯å¦è®¾ç½®äº†ä¸æ˜¾ç¤ºLoading</span></span><br><span class="line">    <span class="keyword">if</span> (err.config.headers.isLoading !== <span class="literal">false</span>) &#123;</span><br><span class="line">        hideLoading()</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(err)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿”å›åæ‹¦æˆª</span></span><br><span class="line">Axios.interceptors.response.use(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// åˆ¤æ–­å½“å‰è¯·æ±‚æ˜¯å¦è®¾ç½®äº†ä¸æ˜¾ç¤ºLoading</span></span><br><span class="line">    <span class="keyword">if</span> (res.config.headers.isLoading !== <span class="literal">false</span>) &#123;</span><br><span class="line">        hideLoading()</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line">&#125;, err =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (err.config.headers.isLoading !== <span class="literal">false</span>) &#123;</span><br><span class="line">        hideLoading()</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (err.message === <span class="string">'Network Error'</span>) &#123;</span><br><span class="line">        message.warning(<span class="string">'ç½‘ç»œè¿æ¥å¼‚å¸¸ï¼'</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (err.code === <span class="string">'ECONNABORTED'</span>) &#123;</span><br><span class="line">        message.warning(<span class="string">'è¯·æ±‚è¶…æ—¶ï¼Œè¯·é‡è¯•'</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(err)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// æŠŠç»„ä»¶å¼•å…¥ï¼Œå¹¶å®šä¹‰æˆåŸå‹å±æ€§æ–¹ä¾¿ä½¿ç”¨</span></span><br><span class="line">Component.prototype.$axios = Axios</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> Axios</span><br></pre></td></tr></table></figure></li>
<li>æ·»åŠ loadingæ ·å¼åœ¨å…±ç”¨çš„cssæ–‡ä»¶é‡Œ<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-id">#loading</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">bottom</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.75</span>);</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">align-items</span>: center;</span><br><span class="line">    <span class="attribute">justify-content</span>: center;</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">9999</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>axiosè¯·æ±‚<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 1. å¼•å…¥è‡ªå®šä¹‰axiosæ–‡ä»¶è·¯å¾„</span></span><br><span class="line"><span class="comment">// 2. å¼•å…¥å…±ç”¨cssæ–‡ä»¶ï¼ˆloadingæ ·å¼ï¼‰</span></span><br><span class="line"><span class="comment">// 3. åœ¨reactç»„ä»¶ä¸­æ­£å¸¸å†™æ³•è¯·æ±‚urlå³å¯</span></span><br><span class="line">componentDidMount () &#123;</span><br><span class="line">    axios(&#123;</span><br><span class="line">      url: <span class="string">'/manage/statistic/base_count.do'</span></span><br><span class="line">    &#125;).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">this</span>.setState(res.data)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
ä¸åŠ loadingæ•ˆæœï¼Œè¿™æ ·å†™<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">axios(&#123;</span><br><span class="line">  url: <span class="string">'/manage/statistic/base_count.do'</span>,</span><br><span class="line">  headers: &#123;</span><br><span class="line">    <span class="string">'isLoading'</span>: <span class="literal">false</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">this</span>.setState(res.data)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h2 id="æ•ˆæœ"><a href="#æ•ˆæœ" class="headerlink" title="æ•ˆæœ"></a>æ•ˆæœ</h2></li>
</ol>
<p><img src="https://images.weserv.nl/?url=https://user-gold-cdn.xitu.io/2020/3/29/17126d31a0fc0571?w=1854&h=954&f=gif&s=427836" alt=""></p>
]]></content>
      <categories>
        <category>Reactç¬”è®°</category>
      </categories>
      <tags>
        <tag>React</tag>
      </tags>
  </entry>
  <entry>
    <title>æ·±å…¥ç†è§£ä¹‹JavaScriptä¹‹call, apply, bindæ–¹æ³•</title>
    <url>/2020/03/17/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E4%B9%8BJavaScript%E4%B9%8Bcall-apply-bind%E6%96%B9%E6%B3%95/</url>
    <content><![CDATA[<p>åœ¨JavaScriptä¸­ï¼Œcallã€applyå’Œbindæ˜¯Functionå¯¹è±¡è‡ªå¸¦çš„ä¸‰ä¸ªæ–¹æ³•ï¼Œè¿™ä¸‰ä¸ªæ–¹æ³•çš„ä¸»è¦ä½œç”¨æ˜¯æ”¹å˜å‡½æ•°æ‰§è¡Œæ—¶çš„ä¸Šä¸‹æ–‡ï¼Œå†å…·ä½“ä¸€ç‚¹å°±æ˜¯<strong>æ”¹å˜å‡½æ•°è¿è¡Œæ—¶çš„thisæŒ‡å‘</strong>ã€‚</p>
<a id="more"></a>
<ul>
<li><h2 id="Function-prototype-call"><a href="#Function-prototype-call" class="headerlink" title="Function.prototype.call()"></a>Function.prototype.call()</h2></li>
</ul>
<p>call() æ–¹æ³•è°ƒç”¨ä¸€ä¸ªå‡½æ•°, å…¶å…·æœ‰ä¸€ä¸ªæŒ‡å®šçš„ this å€¼å’Œå¤šä¸ªå‚æ•°(å‚æ•°çš„åˆ—è¡¨)ã€‚</p>
<blockquote>
<p>fun.call(thisArg, arg1, arg2, â€¦)</p>
</blockquote>
<p>thisArgçš„å–å€¼æœ‰ä»¥ä¸‹4ç§æƒ…å†µï¼š</p>
<ol>
<li>ä¸ä¼ ï¼Œæˆ–è€…ä¼ null, undefinedï¼Œ å‡½æ•°ä¸­çš„thisæŒ‡å‘windowå¯¹è±¡ï¼ˆéä¸¥æ ¼æ¨¡å¼ä¸‹ï¼‰</li>
<li>ä¼ é€’å¦ä¸€ä¸ªå‡½æ•°çš„å‡½æ•°åï¼Œå‡½æ•°ä¸­çš„thisæŒ‡å‘è¿™ä¸ªå‡½æ•°çš„å¼•ç”¨</li>
<li>ä¼ é€’å­—ç¬¦ä¸²ã€æ•°å€¼æˆ–å¸ƒå°”ç±»å‹ç­‰åŸºç¡€ç±»å‹ï¼Œå‡½æ•°ä¸­çš„thisæŒ‡å‘å…¶å¯¹åº”çš„åŒ…è£…å¯¹è±¡ï¼Œå¦‚ Stringã€Numberã€Boolean</li>
<li>ä¼ é€’ä¸€ä¸ªå¯¹è±¡ï¼Œå‡½æ•°ä¸­çš„thisæŒ‡å‘è¿™ä¸ªå¯¹è±¡.</li>
</ol>
<p>æˆ‘ä»¬å¯ä»¥ç”¨å¦‚ä¸‹ä»£ç éªŒè¯ä¸€ä¸‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">func1</span>(<span class="params"></span>) </span>&#123;   </span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>);   </span><br><span class="line">&#125;       </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">func2</span>(<span class="params"></span>) </span>&#123;&#125;       </span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> obj = &#123; <span class="attr">name</span>: <span class="string">"jacky"</span> &#125;;  </span><br><span class="line"></span><br><span class="line">func1.call();   <span class="comment">// Window</span></span><br><span class="line">func1.call(<span class="literal">null</span>);   <span class="comment">// Window</span></span><br><span class="line">func1.call(<span class="literal">undefined</span>);   <span class="comment">// Window</span></span><br><span class="line">func1.call(<span class="number">1</span>);   <span class="comment">// Number &#123;1&#125;</span></span><br><span class="line">func1.call(<span class="string">''</span>);   <span class="comment">// String &#123;""&#125;</span></span><br><span class="line">func1.call(<span class="literal">true</span>);   <span class="comment">// Boolean &#123;true&#125;</span></span><br><span class="line">func1.call(func2);   <span class="comment">// Æ’ func2() &#123;&#125;</span></span><br><span class="line">func1.call(obj);   <span class="comment">// &#123;name: "jacky"&#125;</span></span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬å†æ¥çœ‹ä¸ªä¾‹å­ï¼Œç†è§£æ€ä¹ˆæ”¹å˜thisçš„æŒ‡å‘ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Animal</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = <span class="string">'animal'</span>;</span><br><span class="line">    <span class="keyword">this</span>.sayName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Cat</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = <span class="string">'cat'</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> animal = <span class="keyword">new</span> Animal();</span><br><span class="line"><span class="keyword">var</span> cat = <span class="keyword">new</span> Cat();</span><br><span class="line"></span><br><span class="line">animal.sayName.call(cat); <span class="comment">// cat</span></span><br><span class="line"><span class="comment">// this æ°¸è¿œæŒ‡å‘æœ€åè°ƒç”¨å®ƒçš„é‚£ä¸ªå¯¹è±¡</span></span><br><span class="line"><span class="comment">// è¯¥ä¾‹å­ä¸­sayNameæ–¹æ³•çš„thisæŒ‡å‘Cat</span></span><br></pre></td></tr></table></figure>

<ul>
<li><h2 id="Function-prototype-apply"><a href="#Function-prototype-apply" class="headerlink" title="Function.prototype.apply()"></a>Function.prototype.apply()</h2></li>
</ul>
<p>callå’Œapplyçš„ç¬¬ä¸€ä¸ªå‚æ•°éƒ½æ˜¯è¦æ”¹å˜ä¸Šä¸‹æ–‡çš„å¯¹è±¡ï¼Œè€Œcallä»ç¬¬äºŒä¸ªå‚æ•°å¼€å§‹ä»¥å‚æ•°åˆ—è¡¨çš„å½¢å¼å±•ç°ï¼Œapplyåˆ™æ˜¯æŠŠé™¤äº†æ”¹å˜ä¸Šä¸‹æ–‡å¯¹è±¡çš„å‚æ•°æ”¾åœ¨ä¸€ä¸ª<strong>æ•°ç»„</strong>é‡Œé¢ä½œä¸ºå®ƒçš„ç¬¬äºŒä¸ªå‚æ•°ï¼Œä»–ä»¬ä¿©ä¹‹é—´çš„å·®åˆ«åœ¨äº<strong>å‚æ•°</strong>çš„åŒºåˆ«ã€‚</p>
<p>å¦‚ä¸‹ä»£ç ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Animal</span>(<span class="params">...args</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;<span class="keyword">this</span>.name&#125;</span> å’Œå…¶ä»–å‚æ•° <span class="subst">$&#123;args&#125;</span>`</span>); </span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> cat = &#123;</span><br><span class="line">    name: <span class="string">'xiaomao'</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1. ä½¿ç”¨ call</span></span><br><span class="line">Animal.call(cat, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>); <span class="comment">// xiaomao å’Œå…¶ä»–å‚æ•° 1,2,3</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. ä½¿ç”¨ apply</span></span><br><span class="line">Animal.apply(cat, [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]); <span class="comment">// xiaomao å’Œå…¶ä»–å‚æ•° 1,2,3</span></span><br></pre></td></tr></table></figure>

<ul>
<li><h2 id="callã€applyä½¿ç”¨"><a href="#callã€applyä½¿ç”¨" class="headerlink" title="callã€applyä½¿ç”¨"></a>callã€applyä½¿ç”¨</h2></li>
</ul>
<p>ç”±äºä¸¤ä¸ªæ–¹æ³•å®é™…æ•ˆæœæ˜¯ä¸€æ ·çš„ï¼Œå¯¹äºä¸¤è€…å¹³æ—¶ç”¨è¯¥å¦‚ä½•é€‰æ‹©å‘¢ï¼Ÿ</p>
<ol>
<li>å‚æ•°æ•°é‡/é¡ºåºç¡®å®šå°±ç”¨callï¼Œå‚æ•°æ•°é‡/é¡ºåºä¸ç¡®å®šçš„è¯å°±ç”¨applyã€‚</li>
<li>è€ƒè™‘å¯è¯»æ€§ï¼šå‚æ•°æ•°é‡ä¸å¤šå°±ç”¨callï¼Œå‚æ•°æ•°é‡æ¯”è¾ƒå¤šçš„è¯ï¼ŒæŠŠå‚æ•°æ•´åˆæˆæ•°ç»„ï¼Œä½¿ç”¨applyã€‚</li>
<li>å‚æ•°é›†åˆå·²ç»æ˜¯ä¸€ä¸ªæ•°ç»„çš„æƒ…å†µï¼Œç”¨applyã€‚</li>
</ol>
<ul>
<li><h2 id="call-apply-çš„åº”ç”¨"><a href="#call-apply-çš„åº”ç”¨" class="headerlink" title="call, apply çš„åº”ç”¨"></a>call, apply çš„åº”ç”¨</h2></li>
</ul>
<h3 id="æ•°ç»„æ‹¼æ¥"><a href="#æ•°ç»„æ‹¼æ¥" class="headerlink" title="æ•°ç»„æ‹¼æ¥"></a>æ•°ç»„æ‹¼æ¥</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> arr1 = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="keyword">let</span> arr2 = [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç”¨ applyæ–¹æ³•</span></span><br><span class="line">[].push.apply(arr1, arr2);  <span class="comment">// ç»™arr1æ·»åŠ arr2</span></span><br><span class="line"><span class="built_in">console</span>.log(arr1); <span class="comment">// [1, 2, 3, 4, 5, 6]</span></span><br></pre></td></tr></table></figure>

<h3 id="è·å–æ•°ç»„ä¸­çš„æœ€å¤§å€¼æˆ–æœ€å°å€¼"><a href="#è·å–æ•°ç»„ä¸­çš„æœ€å¤§å€¼æˆ–æœ€å°å€¼" class="headerlink" title="è·å–æ•°ç»„ä¸­çš„æœ€å¤§å€¼æˆ–æœ€å°å€¼"></a>è·å–æ•°ç»„ä¸­çš„æœ€å¤§å€¼æˆ–æœ€å°å€¼</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> numbers = [<span class="number">1</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">100</span>, <span class="number">98</span>]; </span><br><span class="line"><span class="built_in">console</span>.log( <span class="built_in">Math</span>.max.apply(<span class="built_in">Math</span>, numbers) );   <span class="comment">// 100</span></span><br><span class="line"><span class="built_in">console</span>.log( <span class="built_in">Math</span>.max.call(<span class="built_in">Math</span>, <span class="number">1</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">100</span>, <span class="number">98</span>) ); <span class="comment">// 100</span></span><br><span class="line"><span class="built_in">console</span>.log( <span class="built_in">Math</span>.min.call(<span class="built_in">Math</span>, ...numbers) ); <span class="comment">// 1</span></span><br></pre></td></tr></table></figure>

<h3 id="åˆ¤æ–­æ•°æ®ç±»å‹"><a href="#åˆ¤æ–­æ•°æ®ç±»å‹" class="headerlink" title="åˆ¤æ–­æ•°æ®ç±»å‹"></a>åˆ¤æ–­æ•°æ®ç±»å‹</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>];</span><br><span class="line"><span class="keyword">let</span> str = <span class="string">'string'</span>,</span><br><span class="line">    obj = &#123; <span class="attr">name</span>: <span class="string">'jacky'</span> &#125;</span><br><span class="line"><span class="comment">// åˆ¤æ–­ä¼ å…¥å‚æ•°æ˜¯å¦ä¸ºæ•°ç»„</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isArray</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Object</span>.prototype.toString.call(obj) === <span class="string">'[object Array]'</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(isArray(arr)); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(isArray(str)); <span class="comment">// false</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.prototype.toString.call(arr)); <span class="comment">// [object Array]</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.prototype.toString.call(str)); <span class="comment">// [object String]</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.prototype.toString.call(obj)); <span class="comment">// [object Object]</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.prototype.toString.call(<span class="literal">null</span>)); <span class="comment">// [object Null]</span></span><br></pre></td></tr></table></figure>

<h3 id="è°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°å®ç°ç»§æ‰¿"><a href="#è°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°å®ç°ç»§æ‰¿" class="headerlink" title="è°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°å®ç°ç»§æ‰¿"></a>è°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°å®ç°ç»§æ‰¿</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Animal</span>(<span class="params">name</span>)</span>&#123;      </span><br><span class="line">    <span class="keyword">this</span>.name = name;      </span><br><span class="line">    <span class="keyword">this</span>.showName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;      </span><br><span class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);      </span><br><span class="line">    &#125;      </span><br><span class="line">&#125;      </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Cat</span>(<span class="params">name</span>)</span>&#123;    </span><br><span class="line">    Animal.call(<span class="keyword">this</span>, name);    </span><br><span class="line">&#125;      </span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> cat = <span class="keyword">new</span> Cat(<span class="string">"xiaomao"</span>);     </span><br><span class="line">cat.showName();   <span class="comment">// xiaomao</span></span><br></pre></td></tr></table></figure>
<p>ç¼ºç‚¹ï¼š</p>
<ol>
<li>åªèƒ½ç»§æ‰¿çˆ¶ç±»çš„å®ä¾‹å±æ€§å’Œæ–¹æ³•ï¼Œä¸èƒ½ç»§æ‰¿åŸå‹å±æ€§/æ–¹æ³•</li>
<li>æ¯æ¬¡å­ç±»å®ä¾‹åŒ–éƒ½è¦æ‰§è¡Œçˆ¶ç±»å‡½æ•°ï¼Œé‡æ–°å£°æ˜çˆ¶ç±»thisé‡Œæ‰€å®šä¹‰çš„æ–¹æ³•ï¼Œå› æ­¤çˆ¶ç±»æ–¹æ³•æ— æ³•å¤ç”¨ã€‚</li>
</ol>
<h3 id="ç±»æ•°ç»„å¯¹è±¡è½¬æ•°ç»„"><a href="#ç±»æ•°ç»„å¯¹è±¡è½¬æ•°ç»„" class="headerlink" title="ç±»æ•°ç»„å¯¹è±¡è½¬æ•°ç»„"></a>ç±»æ•°ç»„å¯¹è±¡è½¬æ•°ç»„</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">func</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> args = [].slice.call(<span class="built_in">arguments</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(args);</span><br><span class="line">&#125;</span><br><span class="line">func(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>); <span class="comment">// [1, 2, 3]</span></span><br></pre></td></tr></table></figure>
<p>è¿˜æœ‰åƒè°ƒç”¨ getElementsByTagName , document.childNodes ä¹‹ç±»çš„ï¼Œå®ƒä»¬è¿”å›NodeListå¯¹è±¡éƒ½å±äºä¼ªæ•°ç»„ã€‚</p>
<h3 id="ä»£ç†console-logæ–¹æ³•"><a href="#ä»£ç†console-logæ–¹æ³•" class="headerlink" title="ä»£ç†console.logæ–¹æ³•"></a>ä»£ç†console.logæ–¹æ³•</h3><p>æ³¨æ„è¿™é‡Œä¼ å…¥å¤šå°‘ä¸ªå‚æ•°æ˜¯ä¸ç¡®å®šçš„ï¼Œæ‰€ä»¥ä½¿ç”¨applyæ˜¯æœ€å¥½çš„ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">log</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log.apply(<span class="built_in">console</span>, <span class="built_in">arguments</span>);</span><br><span class="line">&#125;;</span><br><span class="line">log(<span class="number">1</span>);    <span class="comment">// 1</span></span><br><span class="line">log(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>);    <span class="comment">// 1 2 3</span></span><br></pre></td></tr></table></figure>

<ul>
<li><h2 id="Function-prototype-bind"><a href="#Function-prototype-bind" class="headerlink" title="Function.prototype.bind()"></a>Function.prototype.bind()</h2></li>
</ul>
<p>MDNçš„è§£é‡Šæ˜¯ï¼š</p>
<blockquote>
<p>bind()æ–¹æ³•ä¼šåˆ›å»ºä¸€ä¸ªæ–°å‡½æ•°ï¼Œç§°ä¸ºç»‘å®šå‡½æ•°ï¼Œå½“è°ƒç”¨è¿™ä¸ªç»‘å®šå‡½æ•°æ—¶ï¼Œç»‘å®šå‡½æ•°ä¼šä»¥åˆ›å»ºå®ƒæ—¶ä¼ å…¥ bind()æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°ä½œä¸º thisï¼Œä¼ å…¥ bind() æ–¹æ³•çš„ç¬¬äºŒä¸ªä»¥åŠä»¥åçš„å‚æ•°åŠ ä¸Šç»‘å®šå‡½æ•°è¿è¡Œæ—¶æœ¬èº«çš„å‚æ•°æŒ‰ç…§é¡ºåºä½œä¸ºåŸå‡½æ•°çš„å‚æ•°æ¥è°ƒç”¨åŸå‡½æ•°ã€‚</p>
</blockquote>
<p>è¯´ç›´ç™½ä¸€ç‚¹ï¼Œbindæ–¹æ³•æ˜¯åˆ›å»ºä¸€ä¸ªå‡½æ•°ï¼Œç„¶åå¯ä»¥åœ¨éœ€è¦è°ƒç”¨çš„æ—¶å€™å†æ‰§è¡Œå‡½æ•°ï¼Œå¹¶éæ˜¯ç«‹å³æ‰§è¡Œå‡½æ•°ï¼›è€Œcallï¼Œapplyæ˜¯åœ¨æ”¹å˜äº†ä¸Šä¸‹æ–‡ä¸­çš„thisæŒ‡å‘åå¹¶ç«‹å³æ‰§è¡Œå‡½æ•°ã€‚</p>
<p>bind æ¥æ”¶çš„å‚æ•°ç±»å‹ä¸ call æ˜¯ä¸€æ ·çš„ï¼Œç»™å®ƒä¼ é€’çš„æ˜¯ä¸€ç»„ç”¨é€—å·åˆ†éš”çš„å‚æ•°åˆ—è¡¨ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> bar = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;   </span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.x);   </span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> foo = &#123; </span><br><span class="line">    x: <span class="number">2</span>   </span><br><span class="line">&#125;   </span><br><span class="line">bar(); <span class="comment">// undefined</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> func = bar.bind(foo);   </span><br><span class="line">func(); <span class="comment">// 2</span></span><br></pre></td></tr></table></figure>

<ul>
<li><h2 id="bindçš„åº”ç”¨"><a href="#bindçš„åº”ç”¨" class="headerlink" title="bindçš„åº”ç”¨"></a>bindçš„åº”ç”¨</h2></li>
</ul>
<h3 id="bindç»‘å®šå›è°ƒå‡½æ•°çš„thisæŒ‡å‘"><a href="#bindç»‘å®šå›è°ƒå‡½æ•°çš„thisæŒ‡å‘" class="headerlink" title="bindç»‘å®šå›è°ƒå‡½æ•°çš„thisæŒ‡å‘"></a>bindç»‘å®šå›è°ƒå‡½æ•°çš„thisæŒ‡å‘</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">PageA</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(callBack) &#123;</span><br><span class="line">        <span class="keyword">this</span>.className = <span class="string">'PageA'</span></span><br><span class="line">        <span class="keyword">this</span>.MessageCallBack = callBack </span><br><span class="line">        <span class="keyword">this</span>.MessageCallBack(<span class="string">'æ‰§è¡Œäº†'</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">PageB</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>() &#123;</span><br><span class="line">        <span class="keyword">this</span>.className = <span class="string">'PageB'</span></span><br><span class="line">        <span class="keyword">this</span>.pageClass = <span class="keyword">new</span> PageA(<span class="keyword">this</span>.handleMessage)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// å›è°ƒå‡½æ•°</span></span><br><span class="line">    handleMessage(msg) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'å¤„ç†'</span> + <span class="keyword">this</span>.className + <span class="string">'çš„å›è°ƒ '</span> + msg) <span class="comment">// å¤„ç†PageAçš„å›è°ƒ æ‰§è¡Œäº†</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">new</span> PageB();</span><br></pre></td></tr></table></figure>
<p>è¿è¡Œä¸Šé¢çš„ä»£ç ï¼Œæˆ‘ä»¬å‘ç°å›è°ƒå‡½æ•°thisä¸¢å¤±äº†ï¼Ÿé—®é¢˜å‡ºåœ¨è¿™è¡Œä»£ç </p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">this</span>.pageClass = <span class="keyword">new</span> PageA(<span class="keyword">this</span>.handleMessage)</span><br></pre></td></tr></table></figure>
<p>ä¼ é€’è¿‡å»çš„this.handleMessageæ˜¯ä¸€ä¸ªå‡½æ•°å†…å­˜åœ°å€ï¼Œæ²¡æœ‰ä¸Šä¸‹æ–‡å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯è¯´è¯¥å‡½æ•°æ²¡æœ‰ç»‘å®šå®ƒçš„thisæŒ‡å‘ã€‚</p>
<p>è§£å†³æ–¹æ¡ˆï¼šç”¨bindç»‘å®šthisçš„æŒ‡å‘</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">this</span>.pageClass = <span class="keyword">new</span> PageA(<span class="keyword">this</span>.handleMessage.bind(<span class="keyword">this</span>))</span><br></pre></td></tr></table></figure>
<p>è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆreactçš„renderå‡½æ•°åœ¨ç»‘å®šå›è°ƒå‡½æ•°çš„æ—¶å€™ï¼Œä¹Ÿè¦ä½¿ç”¨bindç»‘å®šä¸€ä¸‹thisçš„æŒ‡å‘ï¼Œä¹Ÿæ˜¯å› ä¸ºåŒæ ·çš„é—®é¢˜ä»¥åŠåŸç†ã€‚</p>
<ul>
<li><p>å¤šä¸ªbindçš„æƒ…å†µ</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> bar = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.x);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> obj1 = &#123;</span><br><span class="line">    x: <span class="number">2</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> obj2 = &#123;</span><br><span class="line">    x: <span class="number">3</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> obj3 = &#123;</span><br><span class="line">    x: <span class="number">4</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> func1 = bar.bind(obj1).bind(obj2);</span><br><span class="line"><span class="keyword">var</span> func2 = bar.bind(obj1).bind(obj2).bind(obj3);</span><br><span class="line">func1(); <span class="comment">// 2</span></span><br><span class="line">func2(); <span class="comment">// 2</span></span><br></pre></td></tr></table></figure>
<p>è¾“å‡ºç»“æœéƒ½ä¸ºç¬¬ä¸€ä¸ªç»‘å®šçš„objå¯¹è±¡çš„xå€¼ã€‚åŸå› æ˜¯ï¼Œåœ¨Javascriptä¸­ï¼Œbind()æ–¹æ³•è¿”å›çš„å¤–æ¥çš„ç»‘å®šå‡½æ•°å¯¹è±¡ä»…åœ¨åˆ›å»ºçš„æ—¶å€™è®°å¿†ä¸Šä¸‹æ–‡ï¼ˆå¦‚æœæä¾›äº†å‚æ•°ï¼‰ï¼Œå¤šæ¬¡ bind() æ˜¯æ— æ•ˆçš„ã€‚æ›´æ·±å±‚æ¬¡çš„åŸå› ï¼Œ bind() çš„å®ç°ï¼Œç›¸å½“äºä½¿ç”¨å‡½æ•°åœ¨å†…éƒ¨åŒ…äº†ä¸€ä¸ª call / apply ï¼Œç¬¬äºŒæ¬¡ bind() ç›¸å½“äºå†åŒ…ä½ç¬¬ä¸€æ¬¡ bind() ,æ•…ç¬¬äºŒæ¬¡ä»¥åçš„ bind æ˜¯æ— æ³•ç”Ÿæ•ˆçš„ã€‚</p>
</li>
<li><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2></li>
</ul>
<p>callå’Œapplyçš„ç¬¬ä¸€ä¸ªå‚æ•°éƒ½æ˜¯è¦æ”¹å˜ä¸Šä¸‹æ–‡çš„å¯¹è±¡ï¼Œè€Œcallä»ç¬¬äºŒä¸ªå‚æ•°å¼€å§‹ä»¥å‚æ•°åˆ—è¡¨çš„å½¢å¼å±•ç°; applyåˆ™æ˜¯æŠŠé™¤äº†æ”¹å˜ä¸Šä¸‹æ–‡å¯¹è±¡çš„å‚æ•°æ”¾åœ¨ä¸€ä¸ªæ•°ç»„é‡Œé¢ä½œä¸ºå®ƒçš„ç¬¬äºŒä¸ªå‚æ•°ï¼Œä»–ä»¬ä¿©ä¹‹é—´çš„å·®åˆ«åœ¨äºå‚æ•°çš„åŒºåˆ«ã€‚</p>
<p>callå’Œapplyæ”¹å˜äº†å‡½æ•°çš„thisä¸Šä¸‹æ–‡åä¾¿æ‰§è¡Œè¯¥å‡½æ•°,è€Œbindåˆ™æ˜¯è¿”å›æ”¹å˜äº†ä¸Šä¸‹æ–‡åçš„ä¸€ä¸ªå‡½æ•°,å…¶å†…çš„thisæŒ‡å‘ä¸ºåˆ›å»ºå®ƒæ—¶ä¼ å…¥bindçš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œè€Œä¼ å…¥bindçš„ç¬¬äºŒä¸ªåŠä»¥åçš„å‚æ•°ä½œä¸ºåŸå‡½æ•°çš„å‚æ•°æ¥è°ƒç”¨åŸå‡½æ•°ã€‚bindçš„å‚æ•°å¯ä»¥åœ¨å‡½æ•°æ‰§è¡Œçš„æ—¶å€™å†æ¬¡æ·»åŠ ã€‚</p>
]]></content>
      <categories>
        <category>æ·±å…¥ç†è§£JavaScript</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title>æ·±å…¥ç†è§£JavaScriptä¹‹ä½œç”¨åŸŸé“¾ä¸é—­åŒ…</title>
    <url>/2020/03/01/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3JavaScript%E4%B9%8B%E4%BD%9C%E7%94%A8%E5%9F%9F%E9%93%BE%E4%B8%8E%E9%97%AD%E5%8C%85/</url>
    <content><![CDATA[<p>ä½œç”¨åŸŸå’Œé—­åŒ…æ˜¯Jså¾ˆé‡è¦çš„æ¦‚å¿µï¼Œå¯¹æ­¤è¿›è¡Œæ·±å…¥äº†è§£</p>
<a id="more"></a>
<h2 id="ä½œç”¨åŸŸ"><a href="#ä½œç”¨åŸŸ" class="headerlink" title="ä½œç”¨åŸŸ"></a>ä½œç”¨åŸŸ</h2><p>ä½œç”¨åŸŸæ˜¯æŒ‡ç¨‹åºæºä»£ç ä¸­å®šä¹‰å˜é‡çš„åŒºåŸŸã€‚</p>
<p>å®é™…ä¸Šæè¿°çš„å°±æ˜¯æŸ¥æ‰¾å˜é‡çš„èŒƒå›´ï¼Œä½œç”¨åŸŸå¿…é¡»æœ‰çš„ä¸¤ä¸ªåŠŸèƒ½å°±æ˜¯<strong>å­˜å‚¨å˜é‡</strong>ä»¥åŠ<strong>æŸ¥æ‰¾å˜é‡</strong>ï¼Œä½œç”¨åŸŸå°±æ˜¯å‘æŒ¥è¿™ä¸¤ä¸ªä½œç”¨ä»¥åŠæ›´å¤šä½œç”¨çš„è§„åˆ™ã€‚</p>
<p>ä½œç”¨åŸŸè§„å®šäº†å¦‚ä½•æŸ¥æ‰¾å˜é‡ï¼Œä¹Ÿå°±æ˜¯ç¡®å®šå½“å‰æ‰§è¡Œä»£ç å¯¹å˜é‡çš„è®¿é—®æƒé™ã€‚</p>
<h3 id="è¯æ³•ä½œç”¨åŸŸå’ŒåŠ¨æ€ä½œç”¨åŸŸ"><a href="#è¯æ³•ä½œç”¨åŸŸå’ŒåŠ¨æ€ä½œç”¨åŸŸ" class="headerlink" title="è¯æ³•ä½œç”¨åŸŸå’ŒåŠ¨æ€ä½œç”¨åŸŸ"></a>è¯æ³•ä½œç”¨åŸŸå’ŒåŠ¨æ€ä½œç”¨åŸŸ</h3><ul>
<li>è¯æ³•ä½œç”¨åŸŸï¼šï¼ˆé™æ€ä½œç”¨åŸŸï¼‰å‡½æ•°çš„ä½œç”¨åŸŸåœ¨å‡½æ•°å®šä¹‰çš„æ—¶å€™å°±å†³å®šäº†ã€‚</li>
<li>åŠ¨æ€ä½œç”¨åŸŸï¼šå‡½æ•°çš„ä½œç”¨åŸŸæ˜¯åœ¨å‡½æ•°è°ƒç”¨çš„æ—¶å€™æ‰å†³å®šçš„ã€‚</li>
</ul>
<p>JavaScripté‡‡ç”¨çš„æ˜¯è¯æ³•ä½œç”¨åŸŸ</p>
<h3 id="å…¨å±€ä½œç”¨åŸŸ"><a href="#å…¨å±€ä½œç”¨åŸŸ" class="headerlink" title="å…¨å±€ä½œç”¨åŸŸ"></a>å…¨å±€ä½œç”¨åŸŸ</h3><p>åœ¨ä»£ç ä¸­ä»»ä½•åœ°æ–¹éƒ½èƒ½è®¿é—®åˆ°çš„å¯¹è±¡æ‹¥æœ‰å…¨å±€ä½œç”¨åŸŸ</p>
<p>å…¨å±€å˜é‡ï¼š</p>
<blockquote>
<ol>
<li>ç”Ÿå‘½å‘¨æœŸå°†å­˜åœ¨äºæ•´ä¸ªç¨‹åºä¹‹å†…ã€‚</li>
<li>èƒ½è¢«ç¨‹åºä¸­ä»»ä½•å‡½æ•°æˆ–è€…æ–¹æ³•è®¿é—®ã€‚</li>
<li>åœ¨ JavaScript å†…é»˜è®¤æ˜¯å¯ä»¥è¢«ä¿®æ”¹çš„ã€‚</li>
</ol>
</blockquote>
<p>JavaScript é‡‡ç”¨è¯æ³•ä½œç”¨åŸŸ(lexical scoping)ï¼Œä¹Ÿå°±æ˜¯é™æ€ä½œç”¨åŸŸã€‚</p>
<h4 id="æ˜¾å¼å£°æ˜"><a href="#æ˜¾å¼å£°æ˜" class="headerlink" title="æ˜¾å¼å£°æ˜"></a>æ˜¾å¼å£°æ˜</h4><p>å¸¦æœ‰å…³é”®å­— var çš„å£°æ˜</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> winValue = <span class="number">10</span>;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">window</span>.winValue); <span class="comment">// 10</span></span><br></pre></td></tr></table></figure>

<h4 id="éšå¼å£°æ˜"><a href="#éšå¼å£°æ˜" class="headerlink" title="éšå¼å£°æ˜"></a>éšå¼å£°æ˜</h4><p>ä¸å¸¦æœ‰å£°æ˜å…³é”®å­—çš„å˜é‡ï¼ŒJS ä¼šé»˜è®¤å¸®ä½ å£°æ˜ä¸€ä¸ªå…¨å±€å˜é‡</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">    result = value + <span class="number">1</span>;	 <span class="comment">// æ²¡æœ‰ç”¨ var å£°æ˜</span></span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;;</span><br><span class="line">foo(<span class="number">1</span>);	</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">window</span>.result);	<span class="comment">// 2 &lt;=  æŒ‚åœ¨äº† windowå…¨å±€å¯¹è±¡ä¸Š</span></span><br></pre></td></tr></table></figure>

<h3 id="å‡½æ•°ä½œç”¨åŸŸ"><a href="#å‡½æ•°ä½œç”¨åŸŸ" class="headerlink" title="å‡½æ•°ä½œç”¨åŸŸ"></a>å‡½æ•°ä½œç”¨åŸŸ</h3><p>å‡½æ•°ä½œç”¨åŸŸå†…ï¼Œå¯¹å¤–æ˜¯å°é—­çš„ï¼Œä»å¤–å±‚çš„ä½œç”¨åŸŸæ— æ³•ç›´æ¥è®¿é—®å‡½æ•°å†…éƒ¨çš„ä½œç”¨åŸŸã€‚</p>
<p>åœ¨å‡½æ•°å†…éƒ¨çš„å˜é‡æƒé™ç§°ä¸ºå‡½æ•°ä½œç”¨åŸŸï¼Œæœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š</p>
<ol>
<li>æ¯ä¸ªå‡½æ•°éƒ½æœ‰è‡ªå·±çš„ä½œç”¨åŸŸï¼Œè€Œä¸”è°ƒç”¨ä¸€æ¬¡å°±ä¼šç”Ÿæˆæ–°çš„ä½œç”¨åŸŸ</li>
<li>åªèƒ½åœ¨å‡½æ•°å†…éƒ¨æ‰èƒ½è®¿é—®ï¼Œå¤–éƒ¨æ˜¯æ²¡æœ‰æƒé™è®¿é—®çš„</li>
<li>è¿›å…¥å‡½æ•°å†…éƒ¨æ—¶å¼€å¯ï¼Œå‡½æ•°æ‰§è¡Œå®Œæ¯•åé”€æ¯</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> foo = <span class="string">'test'</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(foo); <span class="comment">// Uncaught ReferenceError: foo is not defined</span></span><br></pre></td></tr></table></figure>

<h3 id="å—çº§ä½œç”¨åŸŸï¼ˆES6æ–°å¢ï¼‰"><a href="#å—çº§ä½œç”¨åŸŸï¼ˆES6æ–°å¢ï¼‰" class="headerlink" title="å—çº§ä½œç”¨åŸŸï¼ˆES6æ–°å¢ï¼‰"></a>å—çº§ä½œç”¨åŸŸï¼ˆES6æ–°å¢ï¼‰</h3><p>å‡¡æ˜¯ç”±{}ç¬¦å·åŒ…è£¹èµ·æ¥çš„éƒ½æ˜¯å—ä½œç”¨åŸŸ</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(i); <span class="comment">// Uncaught ReferenceError: i is not defined</span></span><br></pre></td></tr></table></figure>
<p>åœ¨ for å¾ªç¯æ‰§è¡Œå®Œæ¯•ä¹‹å i å˜é‡å°±è¢«é‡Šæ”¾äº†</p>
<h2 id="ä½œç”¨åŸŸé“¾"><a href="#ä½œç”¨åŸŸé“¾" class="headerlink" title="ä½œç”¨åŸŸé“¾"></a>ä½œç”¨åŸŸé“¾</h2><p>ä½œç”¨åŸŸé“¾ï¼šå½“è®¿é—®ä¸€ä¸ªå˜é‡æ—¶ï¼Œè§£é‡Šå™¨ä¼šé¦–å…ˆåœ¨å½“å‰ä½œç”¨åŸŸæŸ¥æ‰¾ï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œå°±å»çˆ¶ä½œç”¨åŸŸæ‰¾ï¼Œç›´åˆ°æ‰¾åˆ°è¯¥å˜é‡æˆ–è€…ä¸åœ¨çˆ¶ä½œç”¨åŸŸä¸­ï¼Œè¿™å°±æ˜¯ä½œç”¨åŸŸé“¾ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> b = <span class="number">2</span></span><br><span class="line">    <span class="built_in">console</span>.log(a)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">foo() <span class="comment">// 1</span></span><br><span class="line"><span class="built_in">console</span>.log(b) <span class="comment">// Uncaught ReferenceError: b is not defined</span></span><br></pre></td></tr></table></figure>
<p>ä»ä¸Šé¢ä»£ç çš„æ‰§è¡Œç»“æœå¯ä»¥çœ‹å‡ºï¼Œfoo å‡½æ•°å–åˆ°äº†å®ƒå¤–éƒ¨çš„å˜é‡ a, è€Œæœ€å¤–å±‚çš„ console.log(b) æ“ä½œå¹¶æ²¡èƒ½å–å¾— foo å‡½æ•°é‡Œé¢çš„å˜é‡ bã€‚</p>
<ul>
<li>ä½œç”¨åŸŸé“¾å’ŒåŸå‹ç»§æ‰¿æŸ¥æ‰¾æ—¶çš„åŒºåˆ«ï¼š</li>
</ul>
<p>å¦‚æœå»æŸ¥æ‰¾ä¸€ä¸ªæ™®é€šå¯¹è±¡çš„å±æ€§ï¼Œä½†æ˜¯åœ¨å½“å‰å¯¹è±¡å’Œå…¶åŸå‹ä¸­éƒ½æ‰¾ä¸åˆ°æ—¶ï¼Œä¼šè¿”å›undefinedï¼›ä½†æŸ¥æ‰¾çš„å±æ€§åœ¨ä½œç”¨åŸŸé“¾ä¸­ä¸å­˜åœ¨çš„è¯å°±ä¼šæŠ›å‡ºReferenceErrorã€‚</p>
<h2 id="é—­åŒ…"><a href="#é—­åŒ…" class="headerlink" title="é—­åŒ…"></a>é—­åŒ…</h2><h3 id="å®šä¹‰"><a href="#å®šä¹‰" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h3><p>é—­åŒ…æ˜¯æŒ‡<strong>æœ‰æƒè®¿é—®å¦å¤–ä¸€ä¸ªå‡½æ•°ä½œç”¨åŸŸä¸­çš„å˜é‡çš„å‡½æ•°</strong></p>
<p>åœ¨javascriptä¸­ï¼Œåªæœ‰å‡½æ•°å†…éƒ¨çš„å­å‡½æ•°æ‰èƒ½è¯»å–å±€éƒ¨å˜é‡ï¼Œæ‰€ä»¥é—­åŒ…å¯ä»¥ç†è§£æˆâ€å®šä¹‰åœ¨ä¸€ä¸ªå‡½æ•°å†…éƒ¨çš„å‡½æ•°â€ã€‚åœ¨æœ¬è´¨ä¸Šï¼Œé—­åŒ…æ˜¯å°†å‡½æ•°å†…éƒ¨å’Œå‡½æ•°å¤–éƒ¨è¿æ¥èµ·æ¥çš„æ¡¥æ¢ã€‚</p>
<ul>
<li>é—­åŒ…ç”±ä¸¤éƒ¨åˆ†æ„æˆï¼š</li>
</ul>
<ol>
<li>å‡½æ•°</li>
<li>èƒ½è®¿é—®å¦å¤–ä¸€ä¸ªå‡½æ•°ä½œç”¨åŸŸä¸­çš„å˜é‡</li>
</ol>
<h3 id="ä¸ºä»€ä¹ˆæœ‰é—­åŒ…"><a href="#ä¸ºä»€ä¹ˆæœ‰é—­åŒ…" class="headerlink" title="ä¸ºä»€ä¹ˆæœ‰é—­åŒ…?"></a>ä¸ºä»€ä¹ˆæœ‰é—­åŒ…?</h3><blockquote>
<p>ä¹‹æ‰€ä»¥å‡ºç°é—­åŒ…æ˜¯å› ä¸ºJSçš„åƒåœ¾å›æ”¶æœºåˆ¶ï¼ŒJSæœ¬èº«ä¸ºäº†é¿å…è§£é‡Šå™¨è¿‡é‡æ¶ˆè€—å†…å­˜ï¼Œé€ æˆç³»ç»Ÿå´©æºƒï¼Œè‡ªå¸¦æœ‰ä¸€å¥—åƒåœ¾å›æ”¶æœºåˆ¶ï¼Œåƒåœ¾å›æ”¶æœºåˆ¶èƒ½å¤Ÿæ£€æµ‹åˆ°ä¸€ä¸ªå¯¹è±¡æ˜¯ä¸æ˜¯æ— ç”¨çš„ã€‚æ£€æµ‹åˆ°ä¹‹åï¼Œå°±ä¼šæŠŠå®ƒå ç”¨çš„å†…å­˜é‡Šæ”¾æ‰ã€‚ä½†æ˜¯å®é™…å·¥ä½œä¸­ï¼Œæˆ‘ä»¬ä¹Ÿä¼šéœ€è¦ä¸€äº›å˜é‡ä¸é‚£ä¹ˆåŠæ—¶çš„è¢«æ¸…ç†ï¼Œæ‰€ä»¥å°±å‡ºç°äº†é—­åŒ…ï¼Œç”¨æ¥è¾¾æˆè¿™ä¸ªæ•ˆæœã€‚</p>
</blockquote>
<h3 id="é—­åŒ…çš„ç‰¹ç‚¹"><a href="#é—­åŒ…çš„ç‰¹ç‚¹" class="headerlink" title="é—­åŒ…çš„ç‰¹ç‚¹"></a>é—­åŒ…çš„ç‰¹ç‚¹</h3><ul>
<li>é—­åŒ…å¯ä»¥è®¿é—®å½“å‰å‡½æ•°ä»¥å¤–çš„å˜é‡</li>
<li>å³ä½¿å¤–éƒ¨å‡½æ•°å·²ç»è¿”å›ï¼Œé—­åŒ…ä»èƒ½è®¿é—®å¤–éƒ¨å‡½æ•°å®šä¹‰çš„å˜é‡</li>
<li>å‚æ•°å’Œå˜é‡ä¸ä¼šè¢«åƒåœ¾å›æ”¶æœºåˆ¶æ”¶å›ã€‚</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getOuter</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> name = <span class="string">'jacky'</span>;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">getName</span>(<span class="params">str</span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(str + name);  <span class="comment">// å¯ä»¥è®¿é—®getNameå‡½æ•°å¤–éƒ¨çš„name</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> getName(<span class="string">'åå­—æ˜¯ï¼š'</span>); </span><br><span class="line">&#125;</span><br><span class="line">getOuter(); <span class="comment">// åå­—æ˜¯ï¼šjacky</span></span><br></pre></td></tr></table></figure>
<p>å†æ¥çœ‹ä¸‹é¢ä¸€æ®µä»£ç ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> x = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> y = <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">return</span> x + y;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> foo = bar(); <span class="comment">// è¿™ä¸€å¥æ‰§è¡Œå®Œï¼Œå˜é‡xå¹¶æ²¡æœ‰è¢«å›æ”¶ï¼Œå› ä¸ºè¦å†…éƒ¨å‡½æ•°è¿˜éœ€è¦å¼•ç”¨</span></span><br><span class="line"><span class="built_in">console</span>.log(foo()) <span class="comment">// 3  æ‰§è¡Œå†…éƒ¨å‡½æ•°ï¼Œå¼•ç”¨å¤–éƒ¨å˜é‡x</span></span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œåœ¨å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­å®šä¹‰äº†ä¸€ä¸ªå‡½æ•°barå’Œå˜é‡fooï¼Œå‡½æ•°barå†…éƒ¨è¿”å›ä¸€ä¸ªåŒ¿åå‡½æ•°ï¼Œæ‰€ä»¥æ­¤åˆ»åŒ¿åå‡½æ•°çš„ä½œç”¨åŸŸé“¾åˆå§‹åŒ–ä¸ºåŒ…å«äº†å…¨å±€å˜é‡å¯¹è±¡å’Œbarä¸­çš„å˜é‡å¯¹è±¡ã€‚</p>
<p>å½“æ‰§è¡Œvar foo = bar()æ—¶ï¼ŒæŠŠå‡½æ•°barçš„æ‰§è¡Œä¸Šä¸‹æ–‡å‹å…¥æ ˆï¼Œå½“baræ‰§è¡Œå®Œåï¼Œå…¶æ‰§è¡Œä¸Šä¸‹æ–‡åº”è¯¥å¼¹å‡ºæ ˆï¼Œä½†æ˜¯å› ä¸ºbarå†…éƒ¨çš„åŒ¿åå‡½æ•°ä½œç”¨åŸŸé“¾è¿˜å¼•ç”¨è¿™barå‡½æ•°å†…çš„å˜é‡xï¼Œæ‰€ä»¥barçš„æ‰§è¡Œä¸Šä¸‹æ–‡å¾—ä¸åˆ°é‡Šæ”¾ï¼Œè¿™æ ·å°±å½¢æˆäº†é—­åŒ…ã€‚</p>
<h3 id="é—­åŒ…çš„åº”ç”¨"><a href="#é—­åŒ…çš„åº”ç”¨" class="headerlink" title="é—­åŒ…çš„åº”ç”¨"></a>é—­åŒ…çš„åº”ç”¨</h3><ol>
<li>è®¾è®¡ç§æœ‰çš„æ–¹æ³•å’Œå˜é‡ï¼ˆå°è£…ï¼Œå®šä¹‰æ¨¡å—ï¼‰ã€‚</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> counter = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> privateCounter = <span class="number">0</span>; <span class="comment">//ç§æœ‰å˜é‡</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">change</span>(<span class="params">val</span>)</span>&#123;</span><br><span class="line">        privateCounter += val;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        increment:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;  </span><br><span class="line">            change(<span class="number">1</span>);</span><br><span class="line">        &#125;,</span><br><span class="line">        decrement:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            change(<span class="number">-1</span>);</span><br><span class="line">        &#125;,</span><br><span class="line">        value:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> privateCounter;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>åŒ¿åå‡½æ•°æœ€å¤§çš„ç”¨é€”æ˜¯åˆ›å»ºé—­åŒ…ã€‚å‡å°‘å…¨å±€å˜é‡çš„ä½¿ç”¨ã€‚ä»è€Œä½¿ç”¨é—­åŒ…æ¨¡å—åŒ–ä»£ç ï¼Œå‡å°‘å…¨å±€å˜é‡çš„æ±¡æŸ“ã€‚</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> objEvent = objEvent || &#123;&#125;;</span><br><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> addEvent = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="comment">// some code</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">removeEvent</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="comment">// some code</span></span><br><span class="line">    &#125;</span><br><span class="line">    objEvent.addEvent = addEvent</span><br><span class="line">    objEvent.removeEvent = removeEvent</span><br><span class="line">&#125;)()</span><br></pre></td></tr></table></figure>
<p>addEvent å’Œ removeEvent éƒ½æ˜¯å±€éƒ¨å˜é‡ï¼Œä½†æˆ‘ä»¬å¯ä»¥é€šè¿‡å…¨å±€å˜é‡ objEvent ä½¿ç”¨å®ƒ</p>
<h3 id="å¦‚ä½•é”€æ¯é—­åŒ…"><a href="#å¦‚ä½•é”€æ¯é—­åŒ…" class="headerlink" title="å¦‚ä½•é”€æ¯é—­åŒ…"></a>å¦‚ä½•é”€æ¯é—­åŒ…</h3><p>javascriptä¸­ï¼Œå¦‚æœä¸€ä¸ªå¯¹è±¡ä¸å†è¢«å¼•ç”¨ï¼Œé‚£ä¹ˆè¿™ä¸ªå¯¹è±¡å°±ä¼šè¢«åƒåœ¾å›æ”¶æœºåˆ¶å›æ”¶ã€‚å¦‚æœä¸¤ä¸ªå¯¹è±¡äº’ç›¸å¼•ç”¨ï¼Œè€Œä¸å†è¢«ç¬¬3è€…æ‰€å¼•ç”¨ï¼Œé‚£ä¹ˆè¿™ä¸¤ä¸ªäº’ç›¸å¼•ç”¨çš„å¯¹è±¡ä¹Ÿä¼šè¢«å›æ”¶ã€‚</p>
<p>å³é‡Šæ”¾å¯¹é—­åŒ…çš„å¼•ç”¨ï¼Œä½¿å¼•ç”¨å˜é‡ä¸ºnullã€‚</p>
<h3 id="é—­åŒ…çš„ä¼˜ç¼ºç‚¹"><a href="#é—­åŒ…çš„ä¼˜ç¼ºç‚¹" class="headerlink" title="é—­åŒ…çš„ä¼˜ç¼ºç‚¹"></a>é—­åŒ…çš„ä¼˜ç¼ºç‚¹</h3><p>ä¼˜ç‚¹ï¼š</p>
<ol>
<li>é—­åŒ…é‡Œçš„å˜é‡ä¸ä¼šæ±¡æŸ“å…¨å±€ï¼Œå› ä¸ºå˜é‡è¢«å°åœ¨é—­åŒ…é‡Œï¼›</li>
<li>æ‰€æœ‰å˜é‡éƒ½åœ¨é—­åŒ…é‡Œä¿è¯äº†éšç§æ€§å’Œç§æœ‰æ€§ï¼›</li>
<li>å¯ä»¥è®©è¿™äº›å±€éƒ¨å˜é‡ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œå®ç°å˜é‡æ•°æ®å…±äº«ã€‚</li>
</ol>
<p>ç¼ºç‚¹ï¼š</p>
<p>å½¢æˆé—­åŒ…å³è¦æŠŠä¸€ä¸ªå‡½æ•°å½“æˆå€¼ä¼ é€’ï¼Œè€Œä¸”è¯¥å‡½æ•°è¿˜å¼•ç”¨è¿™å¦ä¸€ä¸ªå‡½æ•°çš„ä½œç”¨åŸŸé“¾ä½¿å¾—è¢«å¼•ç”¨çš„å‡½æ•°ä¸èƒ½è¢«å›æ”¶ï¼Œä½¿ç”¨ä¸å½“å®¹æ˜“é€ æˆå†…å­˜æ³„æ¼ï¼›</p>
]]></content>
      <categories>
        <category>æ·±å…¥ç†è§£JavaScript</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title>æ·±å…¥ç†è§£JavaScriptä¹‹ new åŸç†åŠæ¨¡æ‹Ÿå®ç°</title>
    <url>/2020/02/22/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3JavaScript%E4%B9%8B-new-%E5%8E%9F%E7%90%86%E5%8F%8A%E6%A8%A1%E6%8B%9F%E5%AE%9E%E7%8E%B0/</url>
    <content><![CDATA[<p>æ¢è®¨newåŸç†â€¦â€¦</p>
<a id="more"></a>
<h2 id="å®šä¹‰"><a href="#å®šä¹‰" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h2><p>new è¿ç®—ç¬¦åˆ›å»ºä¸€ä¸ªç”¨æˆ·å®šä¹‰çš„å¯¹è±¡ç±»å‹çš„å®ä¾‹æˆ–å…·æœ‰æ„é€ å‡½æ•°çš„å†…ç½®å¯¹è±¡çš„å®ä¾‹</p>
<p>å…ˆçœ‹çœ‹ new å®ç°äº†å“ªäº›åŠŸèƒ½, å…ˆæ¥çœ‹ä¸€æ®µä»£ç ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">age</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.age = age;</span><br><span class="line">&#125;</span><br><span class="line">Person.prototype.getAge = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"å¹´é¾„ä¸º:"</span> + <span class="keyword">this</span>.age );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person = <span class="keyword">new</span> Person(<span class="number">18</span>);</span><br><span class="line">person.age; <span class="comment">// è®¿é—®æ„é€ å‡½æ•°é‡Œçš„å±æ€§</span></span><br><span class="line"><span class="comment">// 18</span></span><br><span class="line"></span><br><span class="line">person.getAge(); <span class="comment">// è®¿é—®åŸå‹é‡Œçš„å±æ€§</span></span><br><span class="line"><span class="comment">// å¹´é¾„ä¸º:18</span></span><br></pre></td></tr></table></figure>

<p>ä»ä¸Šé¢ä»£ç å¯ä»¥çŸ¥é“ï¼Œå®ä¾‹ person å¯ä»¥ï¼š</p>
<ol>
<li>è®¿é—®åˆ° Person æ„é€ å‡½æ•°é‡Œçš„å±æ€§</li>
<li>è®¿é—®åˆ° Person.prototype ä¸­çš„å±æ€§</li>
</ol>
<p>è¿™ä¸ªæ˜¯æœ€åŸºæœ¬çš„äº†ï¼Œä¹Ÿæ˜¯åˆšå­¦ä¼šnewä¸€ä¸ªå¯¹è±¡å°±çŸ¥é“è¿™æ˜¯newçš„ç‰¹ç‚¹</p>
<h2 id="æ¢è®¨newè¿˜åšäº†ä»€ä¹ˆï¼Ÿ"><a href="#æ¢è®¨newè¿˜åšäº†ä»€ä¹ˆï¼Ÿ" class="headerlink" title="æ¢è®¨newè¿˜åšäº†ä»€ä¹ˆï¼Ÿ"></a>æ¢è®¨newè¿˜åšäº†ä»€ä¹ˆï¼Ÿ</h2><p>æ¢è®¨å®Œä¸Šé¢ï¼Œæ¥ä¸‹æ¥çœ‹çœ‹newè¿˜åšäº†ä»€ä¹ˆï¼Ÿæ¥çœ‹å‡ ä¸ªä¾‹å­</p>
<h3 id="æ²¡æœ‰returnè¯­å¥"><a href="#æ²¡æœ‰returnè¯­å¥" class="headerlink" title="æ²¡æœ‰returnè¯­å¥"></a>æ²¡æœ‰returnè¯­å¥</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">age</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.age = age;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person = <span class="keyword">new</span> Person(<span class="number">18</span>);</span><br><span class="line"><span class="built_in">console</span>.log(person); <span class="comment">// Person &#123;age: 18&#125;</span></span><br></pre></td></tr></table></figure>
<p>ä»æ„é€ å‡½æ•°ç›´è§‚çœ‹ï¼Œæœ€åæ˜¯æ²¡æœ‰ returnè¯­å¥çš„ï¼Œä½†æˆ‘ä»¬ä»è¿”å›ç»“æœä¹Ÿå¯ä»¥çœ‹å‡ºæ„é€ å‡½æ•°æ—¶é»˜è®¤æƒ…å†µä¼šè¿”å›ä¸€ä¸ªæ–°å¯¹è±¡</p>
<h3 id="return-å¯¹è±¡æ•°æ®ç±»å‹"><a href="#return-å¯¹è±¡æ•°æ®ç±»å‹" class="headerlink" title="return å¯¹è±¡æ•°æ®ç±»å‹"></a>return å¯¹è±¡æ•°æ®ç±»å‹</h3><p>æˆ‘ä»¬å°è¯•åœ¨æ„é€ å‡½æ•°æœ€åè¿”å›ä¸€ä¸ªå¯¹è±¡</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">age</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.age = age;</span><br><span class="line">    <span class="keyword">return</span> &#123; <span class="attr">name</span>: <span class="string">'æ‰‹åŠ¨è¿”å›ä¸€ä¸ªå¯¹è±¡'</span> &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person = <span class="keyword">new</span> Person(<span class="number">18</span>);</span><br><span class="line"><span class="built_in">console</span>.log(person); <span class="comment">// &#123;name: "æ‰‹åŠ¨è¿”å›ä¸€ä¸ªå¯¹è±¡"&#125;</span></span><br></pre></td></tr></table></figure>
<p>æ‰“å°å‡ºæ¥çš„ç»“æœå¯ä»¥çœ‹å‡ºï¼šreturn ä¹‹å‰çš„ä»£ç ç‰‡æ®µéƒ½è¢«è¦†ç›–äº†ï¼Œæœ€åè¿”å› return åé¢çš„å¯¹è±¡ã€‚</p>
<h3 id="return-åŸºæœ¬æ•°æ®ç±»å‹"><a href="#return-åŸºæœ¬æ•°æ®ç±»å‹" class="headerlink" title="return åŸºæœ¬æ•°æ®ç±»å‹"></a>return åŸºæœ¬æ•°æ®ç±»å‹</h3><p>å¦‚æœæ„é€ å‡½æ•°æœ€åreturnçš„ä¸æ˜¯å¯¹è±¡å‘¢ï¼Œè¯•ä¸‹åŸºæœ¬æ•°æ®ç±»å‹</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">age</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.age = age;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span> </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person = <span class="keyword">new</span> Person(<span class="number">18</span>);</span><br><span class="line"><span class="built_in">console</span>.log(person); <span class="comment">// Person &#123;age: 18&#125;</span></span><br></pre></td></tr></table></figure>
<p>ä»æ‰“å°å‡ºæ¥çš„ç»“æœå¯çŸ¥ï¼Œå’Œæ²¡æœ‰returnæ•ˆæœä¸€æ ·ã€‚</p>
<h2 id="newåŸç†"><a href="#newåŸç†" class="headerlink" title="newåŸç†"></a>newåŸç†</h2><p>mdnä¸ŠæŠŠå†…éƒ¨æ“ä½œå¤§æ¦‚åˆ†ä¸º4æ­¥ï¼š</p>
<blockquote>
<ol>
<li>åˆ›å»ºä¸€ä¸ªç©ºçš„ç®€å•JavaScriptå¯¹è±¡ï¼ˆå³{ } ï¼‰ï¼›</li>
<li>é“¾æ¥è¯¥å¯¹è±¡ï¼ˆå³è®¾ç½®è¯¥å¯¹è±¡çš„æ„é€ å‡½æ•°ï¼‰åˆ°å¦ä¸€ä¸ªå¯¹è±¡ ï¼›(å› æ­¤thiså°±æŒ‡å‘äº†è¿™ä¸ªæ–°å¯¹è±¡)</li>
<li>æ‰§è¡Œæ„é€ å‡½æ•°ä¸­çš„ä»£ç ï¼ˆä¸ºè¿™ä¸ªæ–°å¯¹è±¡æ·»åŠ å±æ€§ï¼‰ï¼›</li>
<li>å¦‚æœè¯¥å‡½æ•°æ²¡æœ‰è¿”å›å¯¹è±¡ï¼Œåˆ™è¿”å›thisã€‚</li>
</ol>
</blockquote>
<h2 id="æ¨¡æ‹Ÿå®ç°new"><a href="#æ¨¡æ‹Ÿå®ç°new" class="headerlink" title="æ¨¡æ‹Ÿå®ç°new"></a>æ¨¡æ‹Ÿå®ç°new</h2><p>new æ˜¯å…³é”®è¯ï¼Œä¸å¯ä»¥ç›´æ¥è¦†ç›–ã€‚è¿™é‡Œä½¿ç”¨ create æ¥æ¨¡æ‹Ÿå®ç° new çš„æ•ˆæœã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">myNew</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// åˆ›å»ºä¸€ä¸ªç©ºçš„å¯¹è±¡</span></span><br><span class="line">    <span class="keyword">var</span> obj = <span class="keyword">new</span> <span class="built_in">Object</span>(),</span><br><span class="line">    <span class="comment">// è·å¾—æ„é€ å‡½æ•°ï¼Œargumentsä¸­å»é™¤ç¬¬ä¸€ä¸ªå‚æ•°</span></span><br><span class="line">    Con = [].shift.call(<span class="built_in">arguments</span>);</span><br><span class="line">    <span class="comment">// é“¾æ¥åˆ°åŸå‹ï¼Œobj å¯ä»¥è®¿é—®åˆ°æ„é€ å‡½æ•°åŸå‹ä¸­çš„å±æ€§</span></span><br><span class="line">    obj.__proto__ = Con.prototype;</span><br><span class="line">    <span class="comment">// ç»‘å®š this å®ç°ç»§æ‰¿ï¼Œobj å¯ä»¥è®¿é—®åˆ°æ„é€ å‡½æ•°ä¸­çš„å±æ€§</span></span><br><span class="line">    <span class="keyword">var</span> ret = Con.apply(obj, <span class="built_in">arguments</span>);</span><br><span class="line">    <span class="comment">// ä¼˜å…ˆè¿”å›æ„é€ å‡½æ•°è¿”å›çš„å¯¹è±¡</span></span><br><span class="line">    <span class="keyword">return</span> ret <span class="keyword">instanceof</span> <span class="built_in">Object</span> ? ret : obj;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>æ¥çœ‹çœ‹ä¸Šé¢æ˜¯æ€ä¹ˆä¸€æ­¥æ­¥æ¨¡æ‹Ÿå®ç°çš„ï¼š</p>
<ol>
<li>ç”¨new Object() çš„æ–¹å¼æ–°å»ºäº†ä¸€ä¸ªç©ºå¯¹è±¡ obj</li>
<li>å–å‡ºç¬¬ä¸€ä¸ªå‚æ•°ï¼Œå³æ˜¯ä¼ å…¥çš„æ„é€ å‡½æ•°ã€‚shift ä¼šä¿®æ”¹åŸæ•°ç»„ï¼Œæ•°ç»„åŸæ¥çš„ç¬¬ä¸€ä¸ªå…ƒç´ çš„å€¼ã€‚</li>
<li>å°† obj çš„åŸå‹æŒ‡å‘æ„é€ å‡½æ•°ï¼Œè¿™æ · obj å°±å¯ä»¥è®¿é—®åˆ°æ„é€ å‡½æ•°åŸå‹ä¸­çš„å±æ€§</li>
<li>ä½¿ç”¨ applyï¼Œæ”¹å˜æ„é€ å‡½æ•° this çš„æŒ‡å‘ã€‚å°†thisæŒ‡å‘objå¯¹è±¡ å°±å¯ä»¥è®¿é—®åˆ°æ„é€ å‡½æ•°ä¸­çš„å±æ€§</li>
<li>å¤„ç†è¿”å›å€¼ã€‚</li>
</ol>
<ul>
<li>æ„é€ å‡½æ•°è¿”å›å€¼æœ‰ä¸‰ç§æƒ…å†µï¼š</li>
</ul>
<ol>
<li>æ²¡æœ‰returnï¼Œé»˜è®¤è¿”å›ä¹‹å‰åˆ›å»ºçš„å¯¹è±¡</li>
<li>è¿”å›ä¸€ä¸ªå¯¹è±¡   </li>
<li>è¿”å›çš„ä¸æ˜¯å¯¹è±¡ï¼Œé»˜è®¤è¿”å›ä¹‹å‰åˆ›å»ºçš„ç©ºå¯¹è±¡</li>
</ol>
<p>åœ¨ä¸Šé¢æˆ‘ä»¬ç”¨instanceofæ–¹æ³•æ¥åˆ¤æ–­æ˜¯å¦ä¸ºå¯¹è±¡</p>
<blockquote>
<p>instanceof è¿ç®—ç¬¦ç”¨äºæ£€æµ‹æ„é€ å‡½æ•°çš„ prototype å±æ€§æ˜¯å¦å‡ºç°åœ¨æŸä¸ªå®ä¾‹å¯¹è±¡çš„åŸå‹é“¾ä¸Šã€‚</p>
</blockquote>
<p>æµ‹è¯•ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">age</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.age = age;</span><br><span class="line">&#125;</span><br><span class="line">Person.prototype.getAge = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"å¹´é¾„ä¸º:"</span> + <span class="keyword">this</span>.age );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person = create(Person, <span class="number">18</span>)</span><br><span class="line">person.age; <span class="comment">// è®¿é—®æ„é€ å‡½æ•°é‡Œçš„å±æ€§</span></span><br><span class="line"><span class="comment">// 18</span></span><br><span class="line"></span><br><span class="line">person.getAge(); <span class="comment">// è®¿é—®åŸå‹é‡Œçš„å±æ€§</span></span><br><span class="line"><span class="comment">// å¹´é¾„ä¸º:18</span></span><br></pre></td></tr></table></figure>
<p>æ¨¡æ‹Ÿå®ç°æˆåŠŸï¼</p>
]]></content>
      <categories>
        <category>æ·±å…¥ç†è§£JavaScript</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title>æ·±å…¥ç†è§£JavaScriptä¹‹åŸå‹ä¸åŸå‹é“¾</title>
    <url>/2020/02/16/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3JavaScript%E4%B9%8B%E5%8E%9F%E5%9E%8B%E4%B8%8E%E5%8E%9F%E5%9E%8B%E9%93%BE/</url>
    <content><![CDATA[<p>å¯¹äºJavaScriptï¼ŒåŸå‹æ˜¯å¾ˆé‡è¦çš„ä¸€ä¸ªåŸºç¡€çŸ¥è¯†ç‚¹ï¼Œæ¶‰åŠçš„å†…å®¹å¾ˆå¤šï¼Œåœ¨æ­¤æ€»ç»“ä¸€ä¸‹</p>
<a id="more"></a>
<h2 id="åŸå‹prototype"><a href="#åŸå‹prototype" class="headerlink" title="åŸå‹prototype"></a>åŸå‹prototype</h2><p>åŸå‹æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ŒæŠŠprototypeç§°ä¸ºåŸå‹å¯¹è±¡ï¼Œprototypeå¯ä»¥è®©æ‰€æœ‰çš„å¯¹è±¡å®ä¾‹å…±äº«å®ƒåŒ…å«çš„å±æ€§å’Œæ–¹æ³•ã€‚</p>
<p>JavaScriptè§„å®šï¼Œæ¯ä¸€ä¸ªå‡½æ•°éƒ½æœ‰ä¸€ä¸ªprototypeå¯¹è±¡å±æ€§ï¼ŒæŒ‡å‘å¦ä¸€ä¸ªå¯¹è±¡ã€‚prototypeå¯¹è±¡å±æ€§çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•éƒ½ä¼šè¢«æ„é€ å‡½æ•°çš„å®ä¾‹ç»§æ‰¿ã€‚</p>
<h2 id="åªæœ‰å‡½æ•°æœ‰prototypeå±æ€§"><a href="#åªæœ‰å‡½æ•°æœ‰prototypeå±æ€§" class="headerlink" title="åªæœ‰å‡½æ•°æœ‰prototypeå±æ€§"></a>åªæœ‰å‡½æ•°æœ‰prototypeå±æ€§</h2><p>jsåˆ†ä¸ºå‡½æ•°å¯¹è±¡å’Œæ™®é€šå¯¹è±¡ï¼Œæ¯ä¸ªå¯¹è±¡éƒ½æœ‰<strong>proto</strong>å±æ€§ï¼Œä½†æ˜¯åªæœ‰å‡½æ•°å¯¹è±¡æ‰æœ‰prototypeå±æ€§</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> a = &#123;&#125;</span><br><span class="line"><span class="keyword">let</span> func = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; &#125;</span><br><span class="line"><span class="built_in">console</span>.log(a.prototype) <span class="comment">// undefined</span></span><br><span class="line"><span class="built_in">console</span>.log(func.prototype) <span class="comment">// &#123; constructor: function()&#123;...&#125; &#125;</span></span><br></pre></td></tr></table></figure>

<p>JSé€šè¿‡newå…³é”®å­—ï¼Œå³é æ„é€ å‡½æ•°ç”Ÿæˆå¯¹è±¡ï¼Œæ¯æ¬¡ç”Ÿæˆçš„å¯¹è±¡éƒ½ä¸ä¸€æ ·ã€‚å› ä¸ºå¸¸å¸¸éœ€è¦åœ¨ä¸¤ä¸ªå¯¹è±¡ä¹‹é—´å…±äº«å±æ€§ï¼Œç”±äºJSåœ¨è®¾è®¡ä¹‹åˆæ²¡æœ‰ç±»çš„æ¦‚å¿µï¼Œæ‰€ä»¥JSä½¿ç”¨å‡½æ•°çš„prototypeå±æ€§æ¥å¤„ç†è¿™éƒ¨åˆ†éœ€è¦è¢«å…±äº«çš„å±æ€§ã€‚</p>
<h2 id="æ„é€ å‡½æ•°åˆ›å»ºå¯¹è±¡"><a href="#æ„é€ å‡½æ•°åˆ›å»ºå¯¹è±¡" class="headerlink" title="æ„é€ å‡½æ•°åˆ›å»ºå¯¹è±¡"></a>æ„é€ å‡½æ•°åˆ›å»ºå¯¹è±¡</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Animal</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line">Animal.prototype.name = <span class="string">'kiki'</span>;</span><br><span class="line"><span class="keyword">var</span> animal1 = <span class="keyword">new</span> Animal();</span><br><span class="line"><span class="keyword">var</span> animal2 = <span class="keyword">new</span> Animal();</span><br><span class="line"><span class="built_in">console</span>.log(animal1.name, animal2.name) <span class="comment">// kiki kiki</span></span><br></pre></td></tr></table></figure>
<p>åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œå‡½æ•°çš„ prototype å±æ€§æŒ‡å‘äº†ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡æ­£æ˜¯è°ƒç”¨è¯¥æ„é€ å‡½æ•°è€Œåˆ›å»ºçš„å®ä¾‹çš„åŸå‹ï¼Œä¹Ÿå°±æ˜¯è¿™ä¸ªä¾‹å­ä¸­çš„animal1å’Œanimal2çš„åŸå‹</p>
<p>æ¯ä¸€ä¸ªJavaScriptå¯¹è±¡(nullé™¤å¤–)åœ¨åˆ›å»ºçš„æ—¶å€™å°±ä¼šä¸ä¹‹å…³è”å¦ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡å°±æ˜¯æˆ‘ä»¬æ‰€è¯´çš„åŸå‹ï¼Œæ¯ä¸€ä¸ªå¯¹è±¡éƒ½ä¼šä»åŸå‹â€ç»§æ‰¿â€å±æ€§ã€‚</p>
<p>æ„é€ å‡½æ•°å’Œå®ä¾‹åŸå‹å…³ç³»å¦‚ä¸‹å›¾ï¼š</p>
<p><img src="https://images.weserv.nl/?url=https://user-gold-cdn.xitu.io/2020/2/15/17049498b6d308cb?w=885&h=207&f=png&s=21292" alt=""></p>
<h2 id="proto"><a href="#proto" class="headerlink" title="proto"></a><strong>proto</strong></h2><p>é‚£ä¹ˆå¦‚ä½•è¡¨ç¤ºå®ä¾‹ä¸å®ä¾‹åŸå‹ä¹‹é—´çš„å…³ç³»å‘¢ï¼Œè¿™é‡Œéœ€è¦è®²åˆ°å¦ä¸€ä¸ªå±æ€§<strong>proto</strong></p>
<p>æ¯ä¸€ä¸ªJavaScriptå¯¹è±¡(é™¤äº† null)éƒ½å…·æœ‰çš„ä¸€ä¸ªå±æ€§ï¼Œå«<strong>proto</strong>ï¼Œè¿™ä¸ªå±æ€§ä¼šæŒ‡å‘è¯¥å¯¹è±¡çš„åŸå‹</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Animal</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> dog = <span class="keyword">new</span> Animal();</span><br><span class="line"><span class="built_in">console</span>.log(dog.__proto__ === Animal.prototype); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<p>äºæ˜¯æ›´æ–°å®ä¾‹ä¸å®ä¾‹åŸå‹ä¹‹é—´çš„å…³ç³»å¦‚ä¸‹å›¾ï¼š</p>
<p><img src="https://images.weserv.nl/?url=https://user-gold-cdn.xitu.io/2020/2/15/17049522bfa417ec?w=866&h=336&f=png&s=32709" alt=""></p>
<h2 id="constructor-NaN"><a href="#constructor-NaN" class="headerlink" title="constructor"></a>constructor</h2><p>æ¯ä¸ªåŸå‹éƒ½æœ‰ä¸€ä¸ªconstructorå±æ€§æŒ‡å‘å…³è”çš„æ„é€ å‡½æ•°</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Animal</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(Animal === Animal.prototype.constructor); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<p><img src="https://images.weserv.nl/?url=https://user-gold-cdn.xitu.io/2020/2/15/170496796080e487?w=849&h=347&f=png&s=35480" alt=""></p>
<p>åˆ™å¯ä»¥å¾—å‡ºï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Animal</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> dog = <span class="keyword">new</span> Animal();</span><br><span class="line"><span class="built_in">console</span>.log(dog.__proto__ === Animal.prototype) <span class="comment">// true</span></span><br><span class="line"><span class="comment">// Object.getPrototypeOf() æ–¹æ³•è¿”å›æŒ‡å®šå¯¹è±¡çš„åŸå‹</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.getPrototypeOf(dog) === Animal.prototype) <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(Animal.prototype.constructor == Animal) <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<p>å†æä¸€ç‚¹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Animal</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> dog = <span class="keyword">new</span> Animal();</span><br><span class="line"><span class="built_in">console</span>.log(dog.constructor === Animal); <span class="comment">// true</span></span><br><span class="line"><span class="comment">/* å½“è·å– dog.constructor æ—¶ï¼Œå…¶å® dog ä¸­å¹¶æ²¡æœ‰ constructor å±æ€§,</span></span><br><span class="line"><span class="comment">å½“ä¸èƒ½è¯»å–åˆ°constructor å±æ€§æ—¶ï¼Œ</span></span><br><span class="line"><span class="comment">ä¼šä» dog çš„åŸå‹ä¹Ÿå°±æ˜¯ Animal.prototype ä¸­è¯»å–ï¼Œæ­£å¥½åŸå‹ä¸­æœ‰è¯¥å±æ€§, æ‰€ä»¥ä¸‹åˆ—ä»£ç ä¸ºtrue */</span></span><br><span class="line">dog.constructor === Animal.prototype.constructor</span><br></pre></td></tr></table></figure>

<h2 id="å®ä¾‹å’ŒåŸå‹"><a href="#å®ä¾‹å’ŒåŸå‹" class="headerlink" title="å®ä¾‹å’ŒåŸå‹"></a>å®ä¾‹å’ŒåŸå‹</h2><p>å½“è¯»å–å®ä¾‹çš„å±æ€§æ—¶ï¼Œå¦‚æœæ‰¾ä¸åˆ°ï¼Œå°±ä¼šæŸ¥æ‰¾ä¸å¯¹è±¡å…³è”çš„åŸå‹ä¸­çš„å±æ€§ï¼Œå¦‚æœè¿˜æŸ¥ä¸åˆ°ï¼Œå°±å»æ‰¾åŸå‹çš„åŸå‹ï¼Œä¸€ç›´æ‰¾åˆ°æœ€é¡¶å±‚ä¸ºæ­¢ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Animal</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Animal.prototype.name = <span class="string">'kiki'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> dog = <span class="keyword">new</span> Animal();</span><br><span class="line"></span><br><span class="line">dog.name = <span class="string">'xiaobai'</span>;</span><br><span class="line"><span class="built_in">console</span>.log(dog.name) <span class="comment">// xiaobai</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">delete</span> dog.name;</span><br><span class="line"><span class="built_in">console</span>.log(dog.name) <span class="comment">// kiki</span></span><br></pre></td></tr></table></figure>

<p>ä¸Šè¿°ä»£ç ã€‚é¦–å…ˆæ„é€ å‡½æ•°åŸå‹è®¾ç½®äº† nameå€¼ï¼Œæ¥ç€dogå®ä¾‹æ·»åŠ äº†nameå±æ€§ï¼Œè¦†ç›–åŸå‹çš„nameå€¼ï¼Œæ‰“å°dog.nameæ—¶ç»“æœè‡ªç„¶æ˜¯xiaobaiã€‚</p>
<p>å½“åˆ é™¤äº†dogçš„nameå±æ€§æ—¶ï¼Œè¯»å–dog.nameæ—¶ï¼Œä»å¯¹è±¡ä¸­æ— æ³•æ‰¾åˆ°nameå±æ€§ï¼Œå°±ä¼šä»dogçš„åŸå‹ï¼Œä¹Ÿå°±æ˜¯dog.<strong>proto</strong>ï¼Œå³Animal.prototypeä¸­æŸ¥æ‰¾ï¼Œæ‰¾åˆ°ç»“æœä¸ºkikiã€‚</p>
<p>å¦‚æœåŸå‹æ²¡æœ‰è®¾ç½®nameå€¼ï¼Œæ‰¾ä¸åˆ°å‘¢ï¼ŸåŸå‹çš„åŸå‹åˆæ˜¯è°ï¼Ÿ</p>
<h2 id="åŸå‹çš„åŸå‹"><a href="#åŸå‹çš„åŸå‹" class="headerlink" title="åŸå‹çš„åŸå‹"></a>åŸå‹çš„åŸå‹</h2><p>åŸå‹æœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæ—¢ç„¶æ˜¯å¯¹è±¡ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç”¨æœ€åŸå§‹çš„æ–¹å¼åˆ›å»ºå®ƒï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = <span class="keyword">new</span> <span class="built_in">Object</span>();</span><br><span class="line">obj.name = <span class="string">'kiki'</span></span><br><span class="line"><span class="built_in">console</span>.log(obj.name) <span class="comment">// kiki</span></span><br></pre></td></tr></table></figure>
<p>å…¶å®åŸå‹å¯¹è±¡å°±æ˜¯é€šè¿‡ Object æ„é€ å‡½æ•°ç”Ÿæˆçš„ï¼Œæ‰€æœ‰å‡½æ•°çš„ é»˜è®¤åŸå‹ éƒ½æ˜¯ Object çš„å®ä¾‹ï¼Œå› æ­¤é»˜è®¤åŸå‹éƒ½ä¼šåŒ…å«ä¸€ä¸ªå†…éƒ¨æŒ‡é’ˆï¼ŒæŒ‡å‘ Object.prototypeã€‚</p>
<p>ç”±æ­¤ï¼Œæ›´æ–°å…³ç³»å›¾ï¼š</p>
<p><img src="https://images.weserv.nl/?url=https://user-gold-cdn.xitu.io/2020/2/16/1704bf72a35f1a74?w=861&h=505&f=png&s=54960" alt=""></p>
<h2 id="åŸå‹é“¾"><a href="#åŸå‹é“¾" class="headerlink" title="åŸå‹é“¾"></a>åŸå‹é“¾</h2><ol>
<li>æ¯ä¸ªå¯¹è±¡éƒ½æ‹¥æœ‰ä¸€ä¸ªåŸå‹å¯¹è±¡: dogçš„åŸå‹æ˜¯Animal.prototypeã€‚</li>
<li>å¯¹è±¡çš„åŸå‹å¯èƒ½ä¹Ÿæ˜¯ç»§æ‰¿å…¶ä»–åŸå‹å¯¹è±¡çš„: Animal.prototypeä¹Ÿæœ‰å®ƒçš„åŸå‹Object.prototypeã€‚</li>
<li>ä¸€å±‚ä¸€å±‚çš„ï¼Œä»¥æ­¤ç±»æ¨ï¼Œè¿™ç§å…³ç³»å°±æ˜¯åŸå‹é“¾ã€‚</li>
</ol>
<p>é‚£ä¹ˆ<code>Object.prototype</code>çš„åŸå‹æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.prototype.__proto__ === <span class="literal">null</span>) <span class="comment">// true</span></span><br><span class="line"><span class="keyword">const</span> proto = <span class="built_in">Object</span>.getPrototypeOf(<span class="built_in">Object</span>.prototype) <span class="comment">// null</span></span><br></pre></td></tr></table></figure>
<p>æ‰€ä»¥ Object.prototype.<strong>proto</strong> çš„å€¼ä¸º null è·Ÿ Object.prototype æ²¡æœ‰åŸå‹ï¼Œå…¶å®è¡¨è¾¾äº†ä¸€ä¸ªæ„æ€ã€‚null è¡¨ç¤ºæ­¤å¤„ä¸åº”è¯¥æœ‰å€¼ï¼Œä¹Ÿå°±æ˜¯åŸå‹é“¾çš„ç»ˆç‚¹äº†ï¼Œæ‰€ä»¥æŸ¥æ‰¾å±æ€§çš„æ—¶å€™æŸ¥åˆ° Object.prototype å°±å¯ä»¥åœæ­¢æŸ¥æ‰¾äº†ã€‚</p>
<p><img src="https://images.weserv.nl/?url=https://user-gold-cdn.xitu.io/2020/2/16/1704bffc23da9aaf?w=800&h=592&f=png&s=54550" alt=""></p>
<p>ä¸Šå›¾ä¸­çš„çº¢è‰²çº¿ç»„æˆçš„é“¾å°±å¯ä»¥ç§°ä¹‹ä¸ºåŸå‹é“¾ã€‚</p>
<p>ç”±ä¸Šè¿°å…³ç³»å›¾æˆ‘ä»¬å¯ä»¥é‡æ–°æè¿°ä¸€ä¸‹åŸå‹é“¾ï¼š</p>
<blockquote>
<p>ä»ä¸€ä¸ªå®ä¾‹å¯¹è±¡å¼€å§‹å¾€ä¸Šæ‰¾ï¼Œè¿™ä¸ªå®ä¾‹å¯¹è±¡çš„<strong>proto</strong>å±æ€§æ‰€æŒ‡å‘çš„åˆ™æ˜¯è¿™ä¸ªå®ä¾‹å¯¹è±¡çš„åŸå‹å¯¹è±¡ï¼Œå¦‚æœç”¨dogè¡¨ç¤ºè¿™ä¸ªå®ä¾‹ï¼Œåˆ™åŸå‹å¯¹è±¡è¡¨ç¤ºä¸º<code>dog.__proto__</code>ã€‚åŒæ—¶ï¼Œè¿™ä¸ªåŸå‹ä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œè€Œä¸”å®ƒä¹Ÿæœ‰ä¸Šä¸€çº§çš„åŸå‹å¯¹è±¡ï¼Œç›¸å¯¹äºä¸Šä¸€çº§åŸå‹å¯¹è±¡è€Œè¨€ï¼Œå®ƒä¹Ÿæ˜¯ä¸€ä¸ªå®ä¾‹å¯¹è±¡ï¼Œé‚£ä¹ˆå®ƒä¹Ÿæ‹¥æœ‰<strong>proto</strong>å±æ€§ï¼Œå®ƒçš„<strong>proto</strong>å±æ€§ä¹ŸæŒ‡å‘å®ƒçš„åŸå‹å¯¹è±¡ï¼Œåé¢ä¹Ÿä»¥æ­¤ç±»æ¨ï¼Œä¸€ç›´åˆ°Object.prototypeè¿™ä¸ªåŸå‹ä¸ºæ­¢ï¼Œè¿™å°±æ˜¯æ•´ä¸ªåŸå‹é“¾ã€‚</p>
</blockquote>
]]></content>
      <categories>
        <category>æ·±å…¥ç†è§£JavaScript</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title>ES6ç³»åˆ—ä¹‹Generatorç”Ÿæˆå™¨å…¨è§£æ</title>
    <url>/2020/01/13/ES6%E7%B3%BB%E5%88%97%E4%B9%8BGenerator%E7%94%9F%E6%88%90%E5%99%A8%E5%85%A8%E8%A7%A3%E6%9E%90/</url>
    <content><![CDATA[<p>ä¸Šä¸€ç¯‡æˆ‘ä»¬å†™å®Œäº†Iteratorè¿­ä»£å™¨ï¼Œè¿™æ¬¡æˆ‘ä»¬æ¥è®²ä¸‹Generatorç”Ÿæˆå™¨ï¼Œå¦‚æœä¸äº†è§£Iteratorçš„è¯å»ºè®®å…ˆçœ‹æˆ‘ä¸Šä¸€ç¯‡åšå®¢ï¼Œå› ä¸ºè¿™ç¯‡ä¼šæ¶‰åŠè¿­ä»£å™¨çš„å†…å®¹ã€‚</p>
<a id="more"></a>
<h2 id="ä¸ºä»€ä¹ˆéœ€è¦Generator"><a href="#ä¸ºä»€ä¹ˆéœ€è¦Generator" class="headerlink" title="ä¸ºä»€ä¹ˆéœ€è¦Generator"></a>ä¸ºä»€ä¹ˆéœ€è¦Generator</h2><p>åœ¨JavaScriptä¸­ï¼Œå¼‚æ­¥ç¼–ç¨‹åœºæ™¯ä½¿ç”¨éå¸¸å¤šï¼Œç»å¸¸ä¼šå‡ºç°éœ€è¦é€æ­¥å®Œæˆå¤šä¸ªå¼‚æ­¥æ“ä½œçš„æƒ…å†µã€‚ä¹‹å‰ç”¨å›è°ƒå‡½æ•°å®ç°å¼‚æ­¥ç¼–ç¨‹å¦‚æœç¢°åˆ°äº†è¿™ç§é—®é¢˜å°±éœ€è¦åµŒå¥—ä½¿ç”¨å›è°ƒå‡½æ•°ï¼Œå¼‚æ­¥æ“ä½œè¶Šå¤šï¼ŒåµŒå¥—å¾—å°±è¶Šæ·±ï¼Œå¯¼è‡´ä»£ç çš„å¯ç»´æŠ¤æ€§è¾ƒå·®ï¼Œä»£ç é˜…è¯»èµ·æ¥ä¹Ÿå¾ˆå›°éš¾ã€‚</p>
<p>Generatorå‡½æ•°æ˜¯ES6æå‡ºçš„ä¸€ç§å¼‚æ­¥ç¼–ç¨‹è§£å†³æ–¹æ¡ˆï¼Œå®ƒå¯ä»¥é¿å…å›è°ƒçš„åµŒå¥—ï¼Œè¯­æ³•è¡Œä¸ºä¸ä¼ ç»Ÿå‡½æ•°å®Œå…¨ä¸åŒã€‚é™¤æ­¤ä¹‹å¤–ï¼ŒGeneratorçš„ç‰¹æ€§åœ¨æŸäº›åœºæ™¯ä½¿ç”¨ä¹Ÿååˆ†æ–¹ä¾¿ã€‚</p>
<h2 id="æ¦‚å¿µ"><a href="#æ¦‚å¿µ" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h2><p>è¯­æ³•ä¸Šï¼Œé¦–å…ˆå¯ä»¥æŠŠå®ƒç†è§£æˆï¼ŒGenerator å‡½æ•°æ˜¯ä¸€ä¸ªçŠ¶æ€æœºï¼Œè¿˜æ˜¯ä¸€ä¸ªIteratorå¯¹è±¡ç”Ÿæˆå‡½æ•°ã€‚å®ƒè¿”å›çš„éå†å™¨å¯¹è±¡å¯ä»¥ä¾æ¬¡éå†Generatorå‡½æ•°å†…éƒ¨çš„æ¯ä¸€ä¸ªçŠ¶æ€ã€‚Generatorå‡½æ•°æ˜¯ç”Ÿæˆä¸€ä¸ªå¯¹è±¡ï¼Œä½†æ˜¯è°ƒç”¨çš„æ—¶å€™å‰é¢ä¸èƒ½åŠ newå‘½ä»¤ã€‚</p>
<p>é€šä¿—æ¥è¯´ï¼ŒGeneratorå‡½æ•°å®ƒå¯ä»¥éšæ—¶æš‚åœå‡½æ•°è¿è¡Œï¼Œå¹¶å¯ä»¥åœ¨ä»»æ„æ—¶å€™æ¢å¤å‡½æ•°è¿è¡Œã€‚</p>
<h2 id="ä¸-Iterator-æ¥å£çš„å…³ç³»"><a href="#ä¸-Iterator-æ¥å£çš„å…³ç³»" class="headerlink" title="ä¸ Iterator æ¥å£çš„å…³ç³»"></a>ä¸ Iterator æ¥å£çš„å…³ç³»</h2><p>ä»»æ„ä¸€ä¸ªå¯¹è±¡çš„Symbol.iteratoræ–¹æ³•ï¼Œç­‰äºè¯¥å¯¹è±¡çš„éå†å™¨ç”Ÿæˆå‡½æ•°ï¼Œè°ƒç”¨è¯¥å‡½æ•°ä¼šè¿”å›è¯¥å¯¹è±¡çš„ä¸€ä¸ªéå†å™¨å¯¹è±¡ã€‚</p>
<p>ç”±äº Generator å‡½æ•°å°±æ˜¯Iteratorè¿­ä»£å™¨ç”Ÿæˆå‡½æ•°ï¼Œå› æ­¤å¯ä»¥æŠŠ Generator èµ‹å€¼ç»™å¯¹è±¡çš„Symbol.iteratorå±æ€§ï¼Œä»è€Œä½¿å¾—è¯¥å¯¹è±¡å…·æœ‰ Iterator æ¥å£ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> myIterable = &#123;&#125;;</span><br><span class="line">myIterable[<span class="built_in">Symbol</span>.iterator] = <span class="function"><span class="keyword">function</span>* (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">yield</span> <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">yield</span> <span class="number">2</span>;</span><br><span class="line">  <span class="keyword">yield</span> <span class="number">3</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log([...myIterable] ); <span class="comment">// [1, 2, 3]</span></span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢ä»£ç ä¸­ï¼ŒGenerator å‡½æ•°èµ‹å€¼ç»™Symbol.iteratorå±æ€§ï¼Œä»è€Œä½¿å¾—myIterableå¯¹è±¡å…·æœ‰äº† Iterator æ¥å£ï¼Œå¯ä»¥è¢«â€¦è¿ç®—ç¬¦éå†äº†ã€‚</p>
<p>Generator å‡½æ•°æ‰§è¡Œåï¼Œè¿”å›ä¸€ä¸ªè¿­ä»£å™¨å¯¹è±¡ã€‚è¯¥å¯¹è±¡æœ¬èº«ä¹Ÿå…·æœ‰Symbol.iteratorå±æ€§ï¼Œæ‰§è¡Œåè¿”å›è‡ªèº«ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">gen</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="comment">// some code</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> g = gen();</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(g[<span class="built_in">Symbol</span>.iterator]() === g); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œgenæ˜¯ä¸€ä¸ª Generator å‡½æ•°ï¼Œè°ƒç”¨å®ƒä¼šç”Ÿæˆä¸€ä¸ªè¿­ä»£å™¨å¯¹è±¡gã€‚å®ƒçš„Symbol.iteratorå±æ€§ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªéå†å™¨å¯¹è±¡ç”Ÿæˆå‡½æ•°ï¼Œæ‰§è¡Œåè¿”å›å®ƒè‡ªå·±ã€‚</p>
<h2 id="ç‰¹ç‚¹"><a href="#ç‰¹ç‚¹" class="headerlink" title="ç‰¹ç‚¹"></a>ç‰¹ç‚¹</h2><ol>
<li><p>functionå…³é”®å­—ä¸å‡½æ•°åä¹‹é—´æœ‰ä¸€ä¸ª<code>*</code>å·ï¼Œè€Œä¸”è¿™ä¸ª<code>*</code>å‰åå…è®¸æœ‰ç©ºç™½å­—ç¬¦ï¼Œå¦‚ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> * <span class="title">foo</span>(<span class="params"></span>)</span>&#123;&#125;    </span><br><span class="line"><span class="function"><span class="keyword">function</span>*<span class="title">foo</span>(<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">foo</span>(<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> *<span class="title">foo</span>(<span class="params"></span>)</span>&#123;&#125;</span><br></pre></td></tr></table></figure>
<p>ä»¥ä¸Šå››ç§å†™æ³•éƒ½å¯ä»¥ï¼Œæ ¹æ®ä¸ªäººä¸åŒä¹ æƒ¯ï¼Œä¸€èˆ¬ç¬¬ä¸‰å’Œç¬¬å››ç§ç”¨å¾—æ¯”è¾ƒå¤š</p>
</li>
<li><p>å‡½æ•°ä½“å†…éƒ¨ä½¿ç”¨yieldè¡¨è¾¾å¼ï¼Œå®šä¹‰ä¸åŒçš„å†…éƒ¨çŠ¶æ€</p>
</li>
<li><p>æ™®é€šå‡½æ•°çš„æ‰§è¡Œæ¨¡å¼æ˜¯: <strong>æ‰§è¡Œ-ç»“æŸ</strong>, ç”Ÿæˆå™¨çš„æ‰§è¡Œæ¨¡å¼æ˜¯: <strong>æ‰§è¡Œ-æš‚åœ-ç»“æŸ</strong>ã€‚ç”Ÿæˆå™¨å¯ä»¥åœ¨æ‰§è¡Œå½“ä¸­æš‚åœè‡ªèº«ï¼Œå¯ä»¥ç«‹å³æ¢å¤æ‰§è¡Œä¹Ÿå¯ä»¥è¿‡ä¸€æ®µæ—¶é—´ä¹‹åæ¢å¤æ‰§è¡Œã€‚æœ€å¤§çš„åŒºåˆ«å°±æ˜¯å®ƒä¸åƒæ™®é€šå‡½æ•°é‚£æ ·ä¿è¯è¿è¡Œåˆ°å®Œæ¯•ã€‚</p>
</li>
</ol>
<h2 id="yieldå…³é”®å­—"><a href="#yieldå…³é”®å­—" class="headerlink" title="yieldå…³é”®å­—"></a>yieldå…³é”®å­—</h2><p>ç”Ÿæˆå™¨å‡½æ•°ä¸­ï¼Œæœ‰ä¸€ä¸ªç‰¹æ®Šçš„æ–°å…³é”®å­—ï¼š<code>yield</code>ã€‚ç”±äºGeneratorå‡½æ•°è¿”å›çš„æ˜¯ä¸€ä¸ªIteratorå¯¹è±¡ï¼Œåªæœ‰è°ƒç”¨nextæ–¹æ³•æ‰ä¼šéå†ä¸‹ä¸€ä¸ªå†…éƒ¨çŠ¶æ€,è€Œ<code>yield</code>å…³é”®å­—å°±æ˜¯<strong>æš‚åœæ ‡å¿—</strong>ã€‚å› ä¸ºæœ‰å®ƒï¼Œæ‰€ä»¥æ‰èƒ½å®ç°æ‰§è¡Œ-æš‚åœ-ç»“æŸçš„æ‰§è¡Œæ¨¡å¼ã€‚</p>
<p><code>yield</code> åé¢å¯ä»¥æ˜¯ä»»æ„åˆæ³•çš„JavaScriptè¡¨è¾¾å¼ï¼Œ<code>yield</code>è¯­å¥å¯ä»¥å‡ºç°çš„ä½ç½®å¯ä»¥ç­‰ä»·äºä¸€èˆ¬çš„èµ‹å€¼è¡¨è¾¾å¼ï¼ˆæ¯”å¦‚a=2ï¼‰èƒ½å¤Ÿå‡ºç°çš„ä½ç½®ã€‚å¦‚ä¸‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">b = <span class="number">2</span> + a = <span class="number">2</span> <span class="comment">// ä¸åˆæ³•</span></span><br><span class="line">b = <span class="number">2</span> + <span class="keyword">yield</span> <span class="number">2</span> <span class="comment">// ä¸åˆæ³•</span></span><br><span class="line"></span><br><span class="line">b = <span class="number">2</span> + (a = <span class="number">2</span>) <span class="comment">// åˆæ³•</span></span><br><span class="line">b = <span class="number">2</span> + (<span class="keyword">yield</span> <span class="number">2</span>) <span class="comment">// åˆæ³•</span></span><br></pre></td></tr></table></figure>
<p><code>yield</code>å…³é”®å­—çš„ä¼˜å…ˆçº§æ¯”è¾ƒä½ï¼Œå‡ ä¹<code>yield</code>ä¹‹åçš„ä»»ä½•è¡¨è¾¾å¼éƒ½ä¼šå…ˆè¿›è¡Œè®¡ç®—ï¼Œç„¶åå†é€šè¿‡<code>yield</code>å‘å¤–ç•Œäº§ç”Ÿå€¼ã€‚è€Œä¸”<code>yield</code>æ˜¯å³ç»“åˆè¿ç®—ç¬¦ï¼Œä¹Ÿå°±æ˜¯è¯´</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">yield yield 2 ç­‰ä»·äº (yield (yield 2))</span><br></pre></td></tr></table></figure>
<p><strong>æ€»ç»“</strong>ï¼š</p>
<ol>
<li>å®ƒå¯ä»¥æŒ‡å®šè°ƒç”¨nextæ–¹æ³•æ—¶çš„è¿”å›å€¼ä»¥åŠè°ƒç”¨é¡ºåºã€‚</li>
<li>æ¯å½“æ‰§è¡Œå®Œyieldè¯­å¥ï¼Œå‡½æ•°å°±ä¼šåœæ­¢æ‰§è¡Œï¼Œç›´åˆ°å†æ¬¡è°ƒç”¨nextæ–¹æ³•æ‰ä¼šç»§ç»­æ‰§è¡Œ</li>
<li>yieldå…³é”®å­—åªèƒ½åœ¨ç”Ÿæˆå™¨å†…éƒ¨ä½¿ç”¨ï¼Œå…¶ä»–åœ°æ–¹ä¼šå¯¼è‡´è¯­æ³•é”™è¯¯</li>
</ol>
<h2 id="è¿è¡Œç”Ÿæˆå™¨å‡½æ•°"><a href="#è¿è¡Œç”Ÿæˆå™¨å‡½æ•°" class="headerlink" title="è¿è¡Œç”Ÿæˆå™¨å‡½æ•°"></a>è¿è¡Œç”Ÿæˆå™¨å‡½æ•°</h2><p>è¯´äº†è¿™ä¹ˆå¤šï¼Œæˆ‘ä»¬æ¥ä¸¾ä¸ªç®€å•çš„ä¾‹å­</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">gen</span>(<span class="params"></span>)</span>&#123; </span><br><span class="line">  <span class="keyword">yield</span> <span class="number">1</span>; </span><br><span class="line">  <span class="keyword">yield</span> <span class="number">2</span>; </span><br><span class="line">  <span class="keyword">yield</span> <span class="number">3</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸Šè¿°ä¸ºä¸€ä¸ªç”Ÿæˆå™¨å‡½æ•°ï¼Œå¦‚ä½•è¿è¡Œå®ƒå‘¢ï¼Ÿæˆ‘ä»¬çŸ¥é“ï¼Œç”Ÿæˆå™¨è¿˜æ˜¯ä¸€ä¸ªéå†å™¨/è¿­ä»£å™¨ç”Ÿæˆå‡½æ•°ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè¿”å›çš„Iteratorå¯¹è±¡ï¼Œå¯ä»¥ä¾æ¬¡éå†ç”Ÿæˆå™¨å‡½æ•°å†…éƒ¨çš„æ¯ä¸€ä¸ªçŠ¶æ€ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä½¿ç”¨next()æ–¹æ³•è®©å®ƒè¿è¡Œã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> generator = gen(); <span class="comment">// ç”Ÿæˆå™¨è¿”å›çš„æ˜¯ä¸€ä¸ªæŒ‡å‘å†…éƒ¨çŠ¶æ€çš„generatorå¯¹è±¡</span></span><br><span class="line"><span class="built_in">console</span>.log(generator.next()); <span class="comment">// &#123;value: 1, done: false&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(generator.next()); <span class="comment">// &#123;value: 2, done: false&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(generator.next()); <span class="comment">// &#123;value: 3, done: false&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(generator.next()); <span class="comment">// &#123;value: undefined, done: true&#125;</span></span><br></pre></td></tr></table></figure>
<p>é¦–å…ˆè¦çŸ¥é“çš„æ˜¯ï¼ŒGeneratorå‡½æ•°ï¼Œä¸ç®¡å†…éƒ¨æœ‰æ²¡æœ‰<code>yield</code>è¯­å¥ï¼Œè°ƒç”¨å‡½æ•°æ—¶éƒ½ä¸ä¼šæ‰§è¡Œä»»ä½•è¯­å¥ï¼Œä¹Ÿä¸è¿”å›å‡½æ•°æ‰§è¡Œç»“æœï¼Œè€Œæ˜¯è¿”å›ä¸€ä¸ªæŒ‡å‘å†…éƒ¨çŠ¶æ€çš„generatorå¯¹è±¡ï¼Œä¹Ÿå¯ä»¥çœ‹ä½œæ˜¯ä¸€ä¸ªIteratorå¯¹è±¡ã€‚åªæœ‰å½“è°ƒç”¨next(),å†…éƒ¨è¯­å¥æ‰ä¼šæ‰§è¡Œã€‚</p>
<p>åœ¨è¯¥å‡½æ•°å†…éƒ¨æœ‰3ä¸ª<code>yield</code>è¡¨è¾¾å¼ï¼Œå³è¯¥å‡½æ•°æœ‰ä¸‰ä¸ªçŠ¶æ€ï¼š1ã€2ã€3ã€‚è€ŒGeneratorå‡½æ•°åœ¨æ­¤åˆ†æ®µæ‰§è¡Œï¼Œè°ƒç”¨nextæ–¹æ³•å‡½æ•°å†…éƒ¨é€»è¾‘å¼€å§‹æ‰§è¡Œï¼Œé‡åˆ°<code>yield</code>è¡¨è¾¾å¼åœæ­¢ï¼Œè¿”å›Iteratorå¯¹è±¡ï¼Œå†æ¬¡è°ƒç”¨nextæ–¹æ³•ï¼Œä¼šä»ä¸Šä¸€æ¬¡åœæ­¢æ—¶çš„<code>yield</code>å¤„å¼€å§‹ï¼Œç›´åˆ°æœ€åã€‚æ‰€ä»¥æˆ‘ä»¬ä¹Ÿä¸éš¾ç†è§£<code>yield</code>è¯­å¥åªæ˜¯å‡½æ•°æš‚åœæ‰§è¡Œçš„ä¸€ä¸ªæ ‡è®°ã€‚</p>
<p>å†æ¥çœ‹ä¸ªä¾‹å­ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">gen</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">yield</span> <span class="string">'hello'</span>;</span><br><span class="line">  <span class="keyword">yield</span> <span class="string">'world'</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">'ending'</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> generator = gen();</span><br><span class="line"><span class="built_in">console</span>.log(generator.next()); <span class="comment">// &#123; value: 'hello', done: false &#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(generator.next()); <span class="comment">// &#123; value: 'world', done: false &#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(generator.next()); <span class="comment">// &#123; value: 'ending', done: true &#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(generator.next()); <span class="comment">// &#123; value: undefined, done: true &#125;</span></span><br></pre></td></tr></table></figure>
<p>ä¸Šè¿°ç”Ÿæˆå™¨å‡½æ•°genæœ‰ä¸‰ä¸ªçŠ¶æ€ï¼šhelloï¼Œworld å’Œ return è¯­å¥ã€‚</p>
<p>ç¬¬ä¸€æ¬¡è°ƒç”¨nextæ–¹æ³•ï¼Œç”Ÿæˆå™¨å‡½æ•°å¼€å§‹æ‰§è¡Œï¼Œé‡åˆ°ç¬¬ä¸€ä¸ªyieldè¡¨è¾¾å¼ï¼Œè¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒçš„valueå±æ€§å°±æ˜¯å½“å‰yieldè¡¨è¾¾å¼çš„å€¼helloï¼Œdoneå±æ€§çš„å€¼falseï¼Œè¡¨ç¤ºéå†è¿˜æ²¡æœ‰ç»“æŸã€‚</p>
<p>åŒç†ç¬¬äºŒæ¬¡è°ƒç”¨ä¹Ÿæ˜¯æŒ‰ä¸Šè¿°é€»è¾‘æ¨</p>
<p>ç¬¬ä¸‰æ¬¡è°ƒç”¨nextæ–¹æ³•ï¼Œé‡åˆ°äº†returnè¯­å¥ï¼ˆå¦‚æœæ²¡æœ‰returnè¯­å¥ï¼Œå°±æ‰§è¡Œåˆ°å‡½æ•°ç»“æŸï¼‰ã€‚æ­¤æ—¶nextæ–¹æ³•è¿”å›çš„å¯¹è±¡çš„valueå±æ€§ï¼Œå°±æ˜¯ç´§è·Ÿåœ¨returnè¯­å¥åé¢çš„è¡¨è¾¾å¼çš„å€¼ï¼Œåœ¨è¿™é‡Œreturnåçš„å€¼å³æ˜¯â€endingâ€ï¼ˆå¦‚æœæ²¡æœ‰returnè¯­å¥ï¼Œåˆ™valueå±æ€§çš„å€¼ä¸ºundefinedï¼‰ï¼Œdoneå±æ€§çš„å€¼trueï¼Œè¡¨ç¤ºéå†å·²ç»ç»“æŸã€‚</p>
<p>ç¬¬å››æ¬¡è°ƒç”¨ï¼Œæ­¤æ—¶ ç”Ÿæˆå™¨å‡½æ•°å·²ç»è¿è¡Œå®Œæ¯•ï¼Œæ•…nextæ–¹æ³•è¿”å›å¯¹è±¡çš„valueå±æ€§ä¸ºundefinedï¼Œdoneå±æ€§ä¸ºtrueã€‚ä»¥åæ— è®ºè°ƒç”¨å¤šå°‘æ¬¡nextæ–¹æ³•ï¼Œè¿”å›çš„éƒ½æ˜¯è¿™ä¸ªå€¼ã€‚</p>
<h2 id="nextä¼ é€’å‚æ•°"><a href="#nextä¼ é€’å‚æ•°" class="headerlink" title="nextä¼ é€’å‚æ•°"></a>nextä¼ é€’å‚æ•°</h2><p>ç”±ä¸Šè¿°æˆ‘ä»¬çŸ¥é“æ€»ç»“nextæ–¹æ³•çš„è¿è¡Œé€»è¾‘ï¼š</p>
<ol>
<li>é‡åˆ° <code>yield</code> è¯­å¥æš‚åœæ‰§è¡Œåé¢çš„æ“ä½œï¼Œå¹¶å°†åœ¨ <code>yield</code> åé¢é‚£ä¸ªè¡¨è¾¾å¼çš„å€¼ï¼Œä½œä¸ºè¿”å›å¯¹è±¡çš„ value å±æ€§å€¼</li>
<li>ä¸‹æ¬¡è°ƒç”¨ next æ–¹æ³•æ—¶ï¼Œå†ç»§ç»­å¾€ä¸‹æ‰§è¡Œï¼Œç›´åˆ°é‡åˆ°ä¸‹ä¸€ä¸ª <code>yield</code> è¯­å¥</li>
<li>å¦‚æœæ²¡æœ‰é‡åˆ°æ–°çš„ <code>yield</code> è¯­å¥ï¼Œå°±ä¸€ç›´è¿è¡Œå‡½æ•°ç»“æŸ åˆ° return è¯­å¥ä¸ºæ­¢ï¼Œå°† return çš„å€¼ä½œä¸ºè¿”å›çš„å¯¹è±¡ value çš„å±æ€§å€¼</li>
<li>å¦‚æœè¯¥å‡½æ•°æ²¡æœ‰ return è¯­å¥ï¼Œåˆ™è¿”å›çš„å¯¹è±¡çš„ value å±æ€§å€¼ä¸º undefined </li>
</ol>
<p>é‚£nextæ–¹æ³•å¯ä»¥å¸¦å‚æ•°å—ï¼Ÿç­”æ¡ˆå½“ç„¶æ˜¯å¯ä»¥çš„ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">gen</span>(<span class="params">a</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> b = <span class="keyword">yield</span> (a + <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">return</span> b * <span class="number">4</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> generator1 = gen(<span class="number">1</span>);</span><br><span class="line"><span class="built_in">console</span>.log(generator1.next()); <span class="comment">// &#123;value: 2, done: false&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(generator1.next()); <span class="comment">// &#123;value: NaN, done: true&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> generator2 = gen(<span class="number">1</span>);</span><br><span class="line"><span class="built_in">console</span>.log(generator2.next(<span class="number">2</span>)); <span class="comment">// &#123;value: 2, done: false&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(generator2.next(<span class="number">4</span>)); <span class="comment">// &#123;value: 16, done: true&#125;</span></span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢ä¸¤ä¸ªä¾‹å­ä¸­ï¼Œç”Ÿæˆå™¨å‡½æ•°genéƒ½æ¥æ”¶äº†ä¸€ä¸ªå‚æ•°a,éƒ½ä¼ å…¥äº† 1ã€‚</p>
<p>ç¬¬ä¸€ä¸ªä¾‹å­ä¸­ï¼šç¬¬ä¸€æ¬¡è°ƒç”¨nextæ–¹æ³•ï¼Œlet b = yield 1 + 1 = yield 2,å³è¿”å›<code>yield</code>çš„valueå€¼ä¸º2ï¼›åˆ°äº†ç¬¬äºŒæ¬¡è°ƒç”¨æ—¶ï¼Œè¯­å¥ return b * 2ï¼Œè¿”å›çš„å¯¹è±¡valueå€¼å±…ç„¶ä¸ºNaNã€‚ç”±æ­¤å¯æ¨æ–­æ­¤æ—¶çš„bå¹¶ä¸æ˜¯ä¸Šæ¬¡è®¡ç®—çš„ç»“æœ2ï¼Œè€Œæ˜¯undefinedï¼Œæ‰€ä»¥undefined * 4 = NaN</p>
<p>çœ‹åˆ°è¿™é‡Œï¼Œä¸æ‡‚ç”Ÿæˆå™¨çš„å°ä¼™ä¼´å¯èƒ½æœ‰ç‚¹æ‡µé€¼ï¼Œè¡¨é¢ä¸Šå˜é‡bå·²ç»ç”¨yieldè¯­å¥èµ‹å€¼äº†ï¼Œä½†å¹¶æ²¡æœ‰èµ‹å€¼æˆåŠŸã€‚</p>
<p>å†ç¬¬äºŒä¸ªä¾‹å­ï¼šç¬¬ä¸€æ¬¡è°ƒç”¨nextæ–¹æ³•ï¼Œlet b = yield (1 + 1),æ­¤æ—¶çš„nextæ–¹æ³•ä¼ å…¥äº†å‚æ•°ï¼Œå€¼ä¸º1ï¼Œè¿™ä¸ªå‚æ•°æœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿç­”ï¼šç¡®å®æ²¡ä»€ä¹ˆç”¨ï¼Œè¿™é‡Œåªæ˜¯ä¸ºäº†ç¤ºèŒƒå®ƒå¯¹ç»“æœæ— å½±å“ã€‚</p>
<blockquote>
<p>ç¬¬ä¸€ä¸ªnextæ–¹æ³•åªæ˜¯ç”¨æ¥å¯åŠ¨ç”Ÿæˆå™¨å‡½æ•°å†…éƒ¨çš„éå†å™¨ï¼Œä¼ å‚ä¹Ÿæ²¡æœ‰å¤šå¤§æ„ä¹‰ã€‚å³ä½¿ä¼ äº†å€¼ï¼Œå®ƒåªæ˜¯å°†è¿™ä¸ªä¼ å…¥çš„å€¼æŠ›å¼ƒè€Œå·²ã€‚ES6è¡¨æ˜ï¼Œgeneratorå‡½æ•°åœ¨è¿™ç§æƒ…å†µåªæ˜¯å¿½ç•¥äº†è¿™äº›æ²¡æœ‰è¢«ç”¨åˆ°çš„å€¼ã€‚</p>
</blockquote>
<p>æ‰€ä»¥let b = yield (1 + 1) = yield 2, è¿”å›valueå€¼ä»ç„¶ä¸º2ï¼›ç¬¬äºŒæ¬¡è°ƒç”¨nextæ–¹æ³•æ—¶ä¼ å…¥äº†å‚æ•°4ï¼Œæ­¤æ—¶4è¦†ç›–ä¸Šæ¬¡yieldè¯­å¥çš„è¿”å›å€¼2ï¼Œå³let b = 4;æ•…æ‰§è¡Œreturn b * 4è¯­å¥æ—¶ï¼Œå³return 4 * 4ï¼Œå³è¿”å›äº†16ã€‚</p>
<ul>
<li>ä¸Šè¿°ç»“æœå¯ä»¥è¯´æ˜ï¼š<ul>
<li><strong>yieldè¯­å¥æ²¡æœ‰è¿”å›å€¼ï¼Œæˆ–è€…æ€»æ˜¯è¿”å›undefinedï¼›</strong></li>
<li><strong>nextæ–¹æ³•å¦‚æœå¸¦ä¸Šä¸€ä¸ªå‚æ•°ï¼Œè¿™ä¸ªå‚æ•°å°±æ˜¯ä½œä¸ºä¸Šä¸€ä¸ªyieldè¯­å¥çš„è¿”å›å€¼ã€‚<br>æ³¨æ„ï¼šå› ä¸ºnextæ–¹æ³•è¡¨ç¤ºä¸Šä¸€ä¸ªyieldè¯­å¥çš„è¿”å›å€¼ï¼Œæ‰€ä»¥å¿…é¡»æœ‰ä¸Šä¸€ä¸ªyieldè¯­å¥çš„å­˜åœ¨ï¼Œé‚£ä¹ˆç¬¬ä¸€æ¬¡è°ƒç”¨nextæ–¹æ³•æ—¶å°±ä¸èƒ½ä¼ å‚æ•°ã€‚ç¬¬ä¸€ä¸ªnextåªæ˜¯ç”¨æ¥å¯åŠ¨Generatorå‡½æ•°å†…éƒ¨çš„éå†å™¨ï¼Œä¼ å‚ä¹Ÿæ²¡æœ‰å¤šå¤§æ„ä¹‰ã€‚</strong></li>
</ul>
</li>
</ul>
<p>å¯¹äºä¸Šè¿°ä¸¤ç‚¹ï¼Œæˆ‘ä»¬éœ€è¦ä»£ç å†æ¬¡åŠ æ·±ç†è§£ï¼š</p>
<p>yield åå¯ä»¥ä¸å¸¦ä»»ä½•è¡¨è¾¾å¼çš„æ—¶å€™ï¼Œè¿”å›çš„valueä¸ºundefinedã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> gen = (<span class="function"><span class="keyword">function</span>* (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">yield</span>;</span><br><span class="line">&#125;)();</span><br><span class="line"><span class="built_in">console</span>.log(gen.next()); <span class="comment">// &#123; value: undefined, done: false &#125;</span></span><br></pre></td></tr></table></figure>

<p>å†ä¸¾ä¸€ä¸ªä¾‹å­ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">gen</span>(<span class="params">x</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> y = <span class="number">2</span> * (<span class="keyword">yield</span>(x + <span class="number">2</span>))</span><br><span class="line">    <span class="keyword">let</span> z = <span class="keyword">yield</span>(y / <span class="number">4</span>)</span><br><span class="line">    <span class="keyword">return</span> x + y + z</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> generator = gen(<span class="number">2</span>);</span><br><span class="line"><span class="built_in">console</span>.log(generator.next()); <span class="comment">// &#123;value: 4, done: false&#125; è¿”å›yieldï¼ˆ2+2ï¼‰= 4</span></span><br><span class="line"><span class="built_in">console</span>.log(generator.next(<span class="number">7</span>)); <span class="comment">// &#123;value: 3.5, done: false&#125; è®¾ç½®yield(x+2) = 7,é‚£ä¹ˆy= 2*7=14,é‚£ä¹ˆyield(y/4) = 3.5</span></span><br><span class="line"><span class="built_in">console</span>.log(generator.next(<span class="number">3</span>)); <span class="comment">// &#123;value: 19, done: false&#125; è®¾ç½®z = yield(y/4) = 3 é‚£ä¹ˆ x+y+z = 2+14+3 = 19</span></span><br></pre></td></tr></table></figure>

<ol>
<li>ç¬¬ä¸€æ¬¡è°ƒç”¨nextæ–¹æ³•ï¼Œè¿”å›yieldï¼ˆ2+2ï¼‰= 4ï¼Œè¿”å›valueå€¼ä¸º4</li>
<li>ç¬¬äºŒæ¬¡è°ƒç”¨nextæ–¹æ³•ï¼Œnextå‚æ•°å€¼ä¸º7ï¼Œè¦†ç›–ä¸Šä¸€æ¬¡çš„yieldå€¼ï¼Œæ•…let y = 2 * 7 = 14ï¼Œåˆ™let z = yield(14 / 4) = 3.5</li>
<li>ç¬¬ä¸‰æ¬¡è°ƒç”¨nextæ–¹æ³•ï¼Œnextå‚æ•°å€¼ä¸º3ï¼Œè¦†ç›–ä¸Šä¸€æ¬¡çš„yieldå€¼ï¼Œæ•…z = 3ï¼Œx + y + z = 2 + 14 + 3 = 19</li>
</ol>
<p>è¿™é‡Œåˆæ¬¡çœ‹å¯èƒ½æœ‰ç‚¹ç»•ï¼Œå»ºè®®å¤šçœ‹å¤šè¯•å‡ æ¬¡å°±å®¹æ˜“ç†è§£äº†ã€‚</p>
<h2 id="return-ä¸-yieldåŒºåˆ«"><a href="#return-ä¸-yieldåŒºåˆ«" class="headerlink" title="return ä¸ yieldåŒºåˆ«"></a>return ä¸ yieldåŒºåˆ«</h2><p>ä»ä»¥ä¸Šçš„ä¾‹å­ä¹Ÿå¯ä»¥çœ‹å‡ºï¼Œå‡½æ•°ä¸ä»…æ˜¯ç¢°åˆ°yieldè¯­å¥æ‰ä¼šåœæ­¢æ‰§è¡Œï¼Œç¢°åˆ°returnè¯­å¥ä¹Ÿä¼šåœæ­¢æ‰§è¡Œã€‚æ™®é€šå‡½æ•°é‡åˆ°return ä¹Ÿä¼šåœæ­¢æ‰§è¡Œï¼ŒGeneratorå‡½æ•°ä¹Ÿæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œæ‰€ä»¥å¾ˆå¥½ç†è§£ã€‚é‚£ä¹ˆï¼Œä¸¤è€…çš„åŒºåˆ«æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿå…ˆæ¥çœ‹ä¸ªä¾‹å­ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">gen</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">'hello'</span>;</span><br><span class="line">    <span class="keyword">yield</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">yield</span> <span class="string">'world'</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> generator = gen();</span><br><span class="line"><span class="built_in">console</span>.log(generator.next()); <span class="comment">// &#123;value: "hello", done: true&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(generator.next()); <span class="comment">// &#123;value: undefined, done: true&#125;</span></span><br></pre></td></tr></table></figure>
<p>ä»ä¸Šé¢ä¾‹å­å¯ä»¥çœ‹å‡ºï¼Œå½“ç¢°åˆ°returnè¯­å¥æ—¶ï¼Œè¿”å›å¯¹è±¡çš„valueå€¼ä¸ºç´§è·Ÿreturnåé¢çš„å€¼ï¼Œdoneå±æ€§å€¼å°±ä¸ºtrueï¼Œä»£è¡¨éå†ç»“æŸï¼Œä¸ç®¡åé¢æ˜¯å¦è¿˜æœ‰yieldæˆ–è€…returnè¯­å¥ã€‚è¿™ç§åŒºåˆ«æœ¬è´¨ä¸Šæ˜¯å› ä¸ºyieldè¯­å¥å…·å¤‡ä½ç½®è®°å¿†åŠŸèƒ½è€Œreturnè¯­å¥åˆ™æ²¡æœ‰è¯¥åŠŸèƒ½ã€‚</p>
<h2 id="return-ä¸-next-å‚æ•°åŒºåˆ«"><a href="#return-ä¸-next-å‚æ•°åŒºåˆ«" class="headerlink" title="return ä¸ next å‚æ•°åŒºåˆ«"></a>return ä¸ next å‚æ•°åŒºåˆ«</h2><p>å¯ä»¥æ€»ç»“ä¸ºä¸‰ç‚¹ï¼š</p>
<ol>
<li>returnç»ˆç»“éå†ï¼Œä¹‹åçš„yieldè¯­å¥éƒ½å¤±æ•ˆï¼›nextè¿”å›æœ¬æ¬¡yieldè¯­å¥çš„è¿”å›å€¼ã€‚</li>
<li>returnæ²¡æœ‰å‚æ•°çš„æ—¶å€™ï¼Œè¿”å›{ value: undefined, done: true }ï¼›nextæ²¡æœ‰å‚æ•°çš„æ—¶å€™è¿”å›æœ¬æ¬¡yieldè¯­å¥çš„è¿”å›å€¼ã€‚</li>
<li>returnæœ‰å‚æ•°çš„æ—¶å€™ï¼Œè¦†ç›–æœ¬æ¬¡yieldè¯­å¥çš„è¿”å›å€¼ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè¿”å›{ value: å‚æ•°, done: true }ï¼›nextæœ‰å‚æ•°çš„æ—¶å€™ï¼Œè¦†ç›–ä¸Šæ¬¡yieldè¯­å¥çš„è¿”å›å€¼ï¼Œè¿”å›å€¼å¯èƒ½è·Ÿå‚æ•°æœ‰å…³ï¼ˆå‚æ•°å‚ä¸è®¡ç®—çš„è¯ï¼‰ï¼Œä¹Ÿå¯èƒ½è·Ÿå‚æ•°æ— å…³ï¼ˆå‚æ•°ä¸å‚ä¸è®¡ç®—ï¼‰ã€‚</li>
</ol>
<h2 id="return-value-æ–¹æ³•"><a href="#return-value-æ–¹æ³•" class="headerlink" title="return(value)æ–¹æ³•"></a>return(value)æ–¹æ³•</h2><p>åœ¨ç”Ÿæˆå™¨é‡Œä½¿ç”¨return(value)æ–¹æ³•ï¼Œéšæ—¶ç»ˆæ­¢ç”Ÿæˆå™¨ï¼Œå¦‚ä¸‹é¢ä»£ç æ‰€ç¤ºï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">gen</span>(<span class="params"></span>)</span>&#123; </span><br><span class="line">    <span class="keyword">yield</span> <span class="number">1</span>; </span><br><span class="line">    <span class="keyword">yield</span> <span class="number">2</span>; </span><br><span class="line">    <span class="keyword">yield</span> <span class="number">3</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> generator = gen();</span><br><span class="line"><span class="built_in">console</span>.log(generator.next());     <span class="comment">// &#123;value: 1, done: false&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(generator.return(<span class="number">10</span>)); <span class="comment">// &#123;value: 10, done: true&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(generator.next());     <span class="comment">// &#123;value: undefined, done: true&#125;</span></span><br></pre></td></tr></table></figure>
<p>ä»ä¸Šè¿°ä»£ç æˆ‘ä»¬çœ‹å‡ºï¼Œä½¿ç”¨return()æ–¹æ³•æˆ‘ä»¬æå‰ç»ˆæ­¢äº†ç”Ÿæˆå™¨ï¼Œè¿”å›returné‡Œçš„å€¼ï¼Œå†æ¬¡è°ƒç”¨next()æ–¹æ³•æ—¶ï¼Œdoneå±æ€§çš„å€¼ä¸ºtrue,éå†ç»“æŸï¼Œç”±æ­¤å¯è§returnæå‰ç»ˆæ­¢äº†ç”Ÿæˆå™¨ã€‚</p>
<h2 id="throw-exception-æ–¹æ³•"><a href="#throw-exception-æ–¹æ³•" class="headerlink" title="throw(exception)æ–¹æ³•"></a>throw(exception)æ–¹æ³•</h2><p>é™¤äº†ç”¨return(value)æ–¹æ³•å¯ä»¥ç»ˆæ­¢ç”Ÿæˆç”Ÿæˆå™¨ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥è°ƒç”¨ throw(exception) è¿›è¡Œæå‰ç»ˆæ­¢ç”Ÿæˆå™¨ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">gen</span>(<span class="params"></span>)</span>&#123; </span><br><span class="line">    <span class="keyword">yield</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">yield</span> <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">yield</span> <span class="number">3</span>;    </span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> generator = gen();</span><br><span class="line"><span class="built_in">console</span>.log(generator.next()); </span><br><span class="line"><span class="keyword">try</span>&#123;</span><br><span class="line">    generator.throw(<span class="string">"throw error msg"</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">catch</span>(err)&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(err); </span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">finally</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"å¿…æ‰§è¡Œçš„finallyè¯­å¥å—"</span>); </span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(generator.next());</span><br></pre></td></tr></table></figure>
<p>è¾“å‡ºç»“æœ;</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&#123;<span class="attr">value</span>: <span class="number">1</span>, <span class="attr">done</span>: <span class="literal">false</span>&#125;</span><br><span class="line"><span class="keyword">throw</span> error msg</span><br><span class="line">å¿…æ‰§è¡Œçš„<span class="keyword">finally</span>è¯­å¥å—</span><br><span class="line">&#123;<span class="attr">value</span>: <span class="literal">undefined</span>, <span class="attr">done</span>: <span class="literal">true</span>&#125;</span><br></pre></td></tr></table></figure>
<p>ç”±æ­¤å¯ä»¥çœ‹å‡ºï¼Œåœ¨ç”Ÿæˆå™¨å¤–éƒ¨è°ƒç”¨tryâ€¦catchâ€¦finally,throw()å¼‚å¸¸è¢«tryâ€¦catchæ•æ‰å¹¶è¿”å›ï¼Œå¹¶æ‰§è¡Œäº†finallyä»£ç å—ä¸­çš„ä»£ç ã€‚å½“å†æ¬¡è°ƒç”¨nextæ–¹æ³•ï¼Œdoneå±æ€§è¿”å›true,è¯´æ˜ç”Ÿæˆå™¨å·²è¢«ç»ˆæ­¢ã€‚</p>
<p>æˆ‘ä»¬ä¸ä»…å¯ä»¥åœ¨nextæ‰§è¡Œè¿‡ç¨‹ä¸­æ’å…¥throw()è¯­å¥ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥åœ¨ç”Ÿæˆå™¨å†…éƒ¨æ’å…¥tryâ€¦catchè¿›è¡Œé”™è¯¯å¤„ç†ã€‚</p>
<blockquote>
<p>throwæ–¹æ³•æŠ›å‡ºçš„é”™è¯¯è¦è¢«å†…éƒ¨æ•è·ï¼Œå‰ææ˜¯å¿…é¡»è‡³å°‘æ‰§è¡Œè¿‡ä¸€æ¬¡nextæ–¹æ³•ã€‚</p>
</blockquote>
<p>ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> *<span class="title">gen</span>(<span class="params"></span>)</span>&#123; </span><br><span class="line">    <span class="keyword">try</span> &#123; </span><br><span class="line">        <span class="keyword">yield</span> <span class="number">1</span>; </span><br><span class="line">    &#125; <span class="keyword">catch</span>(e) &#123; </span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"first Exception"</span>); </span><br><span class="line">    &#125; </span><br><span class="line">    <span class="keyword">try</span> &#123; </span><br><span class="line">        <span class="keyword">yield</span> <span class="number">2</span>; </span><br><span class="line">    &#125; <span class="keyword">catch</span>(e) &#123; </span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"second Exception"</span>); </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> generator = gen();</span><br><span class="line"><span class="built_in">console</span>.log(generator.next());</span><br><span class="line"><span class="built_in">console</span>.log(generator.throw(<span class="string">"exception string"</span>));</span><br><span class="line"><span class="built_in">console</span>.log(generator.throw(<span class="string">"exception string"</span>));</span><br></pre></td></tr></table></figure>
<p>è¾“å‡ºç»“æœï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&#123;<span class="attr">value</span>: <span class="number">1</span>, <span class="attr">done</span>: <span class="literal">false</span>&#125;</span><br><span class="line">first Exception</span><br><span class="line">&#123;<span class="attr">value</span>: <span class="number">2</span>, <span class="attr">done</span>: <span class="literal">false</span>&#125;</span><br><span class="line">second Exception</span><br><span class="line">&#123;<span class="attr">value</span>: <span class="literal">undefined</span>, <span class="attr">done</span>: <span class="literal">true</span>&#125;</span><br></pre></td></tr></table></figure>
<p>ä»ä»£ç è¾“å‡ºå¯ä»¥è¾“å‡ºï¼Œå½“æˆ‘ä»¬åœ¨generator.throw()æ–¹æ³•æ—¶ï¼Œè¢«ç”Ÿæˆå™¨å†…éƒ¨ä¸Šä¸ªæš‚åœç‚¹çš„å¼‚å¸¸å¤„ç†ä»£ç æ‰€æ•è·ï¼Œä¼šé™„å¸¦æ‰§è¡Œä¸‹ä¸€æ¡<code>yield</code>è¡¨è¾¾å¼ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¼šé™„å¸¦æ‰§è¡Œä¸€æ¬¡nextæ–¹æ³•ã€‚ç”±æ­¤å¯è§åœ¨ç”Ÿæˆå™¨å†…éƒ¨ä½¿ç”¨tryâ€¦catchå¯ä»¥æ•è·å¼‚å¸¸ï¼Œå¹¶ä¸ä¼šå½±å“åˆ°éå†å™¨çš„çŠ¶æ€ã€‚</p>
<h2 id="yield-è¡¨è¾¾å¼"><a href="#yield-è¡¨è¾¾å¼" class="headerlink" title="yield* è¡¨è¾¾å¼"></a>yield* è¡¨è¾¾å¼</h2><p>å¦‚æœæƒ³è¦åœ¨ Generator å‡½æ•°å†…éƒ¨ï¼Œè°ƒç”¨å¦ä¸€ä¸ª Generatorå‡½æ•°ã€‚éœ€è¦åœ¨å‰è€…çš„å‡½æ•°ä½“å†…éƒ¨ï¼Œè‡ªå·±æ‰‹åŠ¨å®Œæˆéå†ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">gen1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">yield</span> <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">yield</span> <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">gen2</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">yield</span> <span class="string">'a'</span>;</span><br><span class="line">  <span class="comment">// for...oféå† gen1()</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i <span class="keyword">of</span> gen1()) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(i);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">yield</span> <span class="string">'b'</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> v <span class="keyword">of</span> gen2())&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(v);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¾“å‡ºç»“æœï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">a</span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line">b</span><br></pre></td></tr></table></figure>

<p>å¦‚æœæœ‰å¤šä¸ª Generator å‡½æ•°åµŒå¥—ï¼Œå†™èµ·æ¥å°±éå¸¸éº»çƒ¦ã€‚<br>ES6 æä¾›äº†<code>yield*</code>è¡¨è¾¾å¼ï¼Œä½œä¸ºè§£å†³åŠæ³•ï¼Œç”¨æ¥åœ¨ä¸€ä¸ª Generator å‡½æ•°é‡Œé¢æ‰§è¡Œå¦ä¸€ä¸ª Generator å‡½æ•°ã€‚</p>
<p>æŠŠä¸Šé¢çš„gen2å‡½æ•°æ”¹å†™å¦‚ä¸‹,å¦‚ä¸‹ä¹Ÿèƒ½å¾—åˆ°ç›¸åŒçš„è¾“å‡ºç»“æœ</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">gen2</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">yield</span> <span class="string">'a'</span>;</span><br><span class="line">  <span class="keyword">yield</span>* gen1();</span><br><span class="line">  <span class="keyword">yield</span> <span class="string">'b'</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>yield*</code>å¯ä»¥å°†å¯è¿­ä»£çš„å¯¹è±¡iterableæ”¾åœ¨ä¸€ä¸ªç”Ÿæˆå™¨é‡Œï¼Œç”Ÿæˆå™¨å‡½æ•°è¿è¡Œåˆ°<code>yield*</code> ä½ç½®æ—¶ï¼Œå°†æ§åˆ¶æƒå§”æ‰˜ç»™è¿™ä¸ªè¿­ä»£å™¨ï¼Œç›´åˆ°æ‰§è¡Œå®Œæˆä¸ºæ­¢ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œæ•°ç»„ä¹Ÿæ˜¯å¯è¿­ä»£å¯¹è±¡ï¼Œå› æ­¤<code>yield*</code>ä¹Ÿå¯å§”æ‰˜ç»™æ•°ç»„ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> *<span class="title">gen1</span>(<span class="params"></span>)</span>&#123; </span><br><span class="line">    <span class="keyword">yield</span> <span class="number">2</span>; </span><br><span class="line">    <span class="keyword">yield</span> <span class="number">3</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> *<span class="title">gen2</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">yield</span> <span class="number">1</span>; </span><br><span class="line">    <span class="keyword">yield</span>* gen1(); </span><br><span class="line">    <span class="keyword">yield</span>* [<span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> generator = gen2();</span><br><span class="line"><span class="built_in">console</span>.log(generator.next()); <span class="comment">// &#123;value: 1, done: false&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(generator.next()); <span class="comment">// &#123;value: 2, done: false&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(generator.next()); <span class="comment">// &#123;value: 3, done: false&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(generator.next()); <span class="comment">// &#123;value: 4, done: false&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(generator.next()); <span class="comment">// &#123;value: 5, done: false&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(generator.next()); <span class="comment">// &#123;value: undefined, done: true&#125;</span></span><br></pre></td></tr></table></figure>

<h2 id="Generatorçš„åº”ç”¨åœºæ™¯"><a href="#Generatorçš„åº”ç”¨åœºæ™¯" class="headerlink" title="Generatorçš„åº”ç”¨åœºæ™¯"></a>Generatorçš„åº”ç”¨åœºæ™¯</h2><h3 id="å¼‚æ­¥æ“ä½œçš„åŒæ­¥åŒ–è¡¨è¾¾"><a href="#å¼‚æ­¥æ“ä½œçš„åŒæ­¥åŒ–è¡¨è¾¾" class="headerlink" title="å¼‚æ­¥æ“ä½œçš„åŒæ­¥åŒ–è¡¨è¾¾"></a>å¼‚æ­¥æ“ä½œçš„åŒæ­¥åŒ–è¡¨è¾¾</h3><p>Generatorå‡½æ•°çš„æš‚åœæ‰§è¡Œçš„æ•ˆæœï¼Œæ„å‘³ç€å¯ä»¥æŠŠå¼‚æ­¥æ“ä½œå†™åœ¨yieldè¡¨è¾¾å¼é‡Œé¢ï¼Œç­‰åˆ°è°ƒç”¨nextæ–¹æ³•æ—¶å†å¾€åæ‰§è¡Œã€‚è¿™å®é™…ä¸Šç­‰åŒäºä¸éœ€è¦å†™å›è°ƒå‡½æ•°äº†ï¼Œå› ä¸ºå¼‚æ­¥æ“ä½œçš„åç»­æ“ä½œå¯ä»¥æ”¾åœ¨yieldè¡¨è¾¾å¼ä¸‹é¢ï¼Œåæ­£è¦ç­‰åˆ°è°ƒç”¨nextæ–¹æ³•æ—¶å†æ‰§è¡Œã€‚æ‰€ä»¥ï¼ŒGeneratorå‡½æ•°çš„ä¸€ä¸ªé‡è¦å®é™…æ„ä¹‰å°±æ˜¯ç”¨æ¥å¤„ç†å¼‚æ­¥æ“ä½œï¼Œæ”¹å†™å›è°ƒå‡½æ•°ï¼Œé¿å…å›è°ƒåµŒå¥—ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">loadUI</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  showLoadingScreen();</span><br><span class="line">  <span class="keyword">yield</span> loadUIDataAsynchronously();</span><br><span class="line">  hideLoadingScreen();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> loader = loadUI();</span><br><span class="line"><span class="comment">// åŠ è½½UI</span></span><br><span class="line">loader.next();</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¸è½½UI</span></span><br><span class="line">loader.next();</span><br></pre></td></tr></table></figure>

<p>ä¸Šé¢ä»£ç ä¸­ï¼Œç¬¬ä¸€æ¬¡è°ƒç”¨nextæ–¹æ³•æ—¶ï¼Œåˆ™ä¼šæ˜¾ç¤ºLoadingç•Œé¢ï¼Œå¹¶ä¸”å¼‚æ­¥åŠ è½½æ•°æ®ã€‚ç­‰åˆ°æ•°æ®åŠ è½½å®Œæˆï¼Œå†ä¸€æ¬¡ä½¿ç”¨nextæ–¹æ³•ï¼Œåˆ™ä¼šéšè—Loadingç•Œé¢ã€‚å¯ä»¥çœ‹åˆ°ï¼Œè¿™ç§å†™æ³•çš„å¥½å¤„æ˜¯æ‰€æœ‰Loadingç•Œé¢çš„é€»è¾‘ï¼Œéƒ½è¢«å°è£…åœ¨ä¸€ä¸ªå‡½æ•°ï¼ŒæŒ‰éƒ¨å°±ç­éå¸¸æ¸…æ™°ã€‚</p>
<h3 id="å¼‚æ­¥ä»»åŠ¡çš„å°è£…"><a href="#å¼‚æ­¥ä»»åŠ¡çš„å°è£…" class="headerlink" title="å¼‚æ­¥ä»»åŠ¡çš„å°è£…"></a>å¼‚æ­¥ä»»åŠ¡çš„å°è£…</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> fetch = <span class="built_in">require</span>(<span class="string">'node-fetch'</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">gen</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> url = <span class="string">'https://api.github.com/users/github'</span>;</span><br><span class="line">  <span class="keyword">var</span> result = <span class="keyword">yield</span> fetch(url);</span><br><span class="line">  <span class="built_in">console</span>.log(result.bio);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> g = gen();</span><br><span class="line"><span class="keyword">var</span> result = g.next();</span><br><span class="line"></span><br><span class="line">result.value.then(<span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> data.json();</span><br><span class="line">&#125;).then(<span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</span><br><span class="line">  g.next(data);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>Generator å‡½æ•°å°è£…äº†ä¸€ä¸ªå¼‚æ­¥æ“ä½œï¼Œè¯¥æ“ä½œå…ˆè¯»å–ä¸€ä¸ªè¿œç¨‹æ¥å£ï¼Œç„¶åä» JSON æ ¼å¼çš„æ•°æ®è§£æä¿¡æ¯ã€‚ä¸è¿‡ä¹Ÿå¯ä»¥çœ‹åˆ°ï¼Œè™½ç„¶ Generator å‡½æ•°å°†å¼‚æ­¥æ“ä½œè¡¨ç¤ºå¾—å¾ˆç®€æ´ï¼Œä½†æ˜¯æµç¨‹ç®¡ç†å´ä¸æ–¹ä¾¿ï¼ˆå³ä½•æ—¶æ‰§è¡Œç¬¬ä¸€é˜¶æ®µã€ä½•æ—¶æ‰§è¡Œç¬¬äºŒé˜¶æ®µï¼‰ã€‚</p>
<h3 id="éƒ¨ç½²-Iterator-æ¥å£"><a href="#éƒ¨ç½²-Iterator-æ¥å£" class="headerlink" title="éƒ¨ç½² Iterator æ¥å£"></a>éƒ¨ç½² Iterator æ¥å£</h3><p>åˆ©ç”¨ Generator å‡½æ•°ï¼Œå¯ä»¥åœ¨ä»»æ„å¯¹è±¡ä¸Šéƒ¨ç½² Iterator æ¥å£ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">iterEntries</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> keys = <span class="built_in">Object</span>.keys(obj);</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i=<span class="number">0</span>; i &lt; keys.length; i++) &#123;</span><br><span class="line">    <span class="keyword">let</span> key = keys[i];</span><br><span class="line">    <span class="keyword">yield</span> [key, obj[key]];</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> myObj = &#123; <span class="attr">foo</span>: <span class="number">3</span>, <span class="attr">bar</span>: <span class="number">7</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> [key, value] <span class="keyword">of</span> iterEntries(myObj)) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(key, value);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸Šè¿°ä»£ç ä¸­ï¼ŒmyObjæ˜¯ä¸€ä¸ªæ™®é€šå¯¹è±¡ï¼Œé€šè¿‡iterEntrieså‡½æ•°ï¼Œå°±æœ‰äº† Iterator æ¥å£ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¯ä»¥åœ¨ä»»æ„å¯¹è±¡ä¸Šéƒ¨ç½²nextæ–¹æ³•ã€‚</p>
<h3 id="æŠ½å¥–ç¨‹åº"><a href="#æŠ½å¥–ç¨‹åº" class="headerlink" title="æŠ½å¥–ç¨‹åº"></a>æŠ½å¥–ç¨‹åº</h3><p>æ¯”å¦‚å½“å‰ç”¨æˆ·è¿˜å¯ä»¥æŠ½å¥–5æ¬¡ï¼Œç”¨æˆ·ç‚¹äº†5æ¬¡æŠ½å¥–åå°±ä¸èƒ½ç»§ç»­æŠ½å¥–äº†ï¼Œå¦‚åšä¸€ä¸ªå‰©ä½™æŠ½å¥–æ¬¡æ•°çš„é™åˆ¶ã€‚</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"start"</span>&gt;</span>æŠ½å¥–<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> draw = <span class="function"><span class="keyword">function</span>(<span class="params">count</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// å…·ä½“æŠ½å¥–é€»è¾‘</span></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`å‰©ä½™<span class="subst">$&#123;count&#125;</span>æ¬¡`</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> residue = <span class="function"><span class="keyword">function</span>* (<span class="params">count</span>) </span>&#123; </span><br><span class="line">    <span class="keyword">while</span>(count &gt; <span class="number">0</span>) &#123; <span class="comment">// æŠ½å¥–æ¬¡æ•°çš„é™åˆ¶</span></span><br><span class="line">        count--;</span><br><span class="line">        <span class="keyword">yield</span> draw(count); <span class="comment">//æ‰§è¡ŒæŠ½å¥–çš„é€»è¾‘</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> start = residue(<span class="number">5</span>); </span><br><span class="line"><span class="built_in">document</span>.getElementById(<span class="string">'start'</span>).addEventListener(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    start.next();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>ç„¶åæˆ‘ä»¬é€šè¿‡ç‚¹å‡»5æ¬¡æŠ½å¥–æŒ‰é’®,ä¾æ¬¡è¾“å‡ºå‰©ä½™å‡ æ¬¡ã€‚å½“å‰©ä½™0æ¬¡æ—¶ï¼Œå†ç‚¹å‡»æŒ‰é’®ä¸ä¼šæœ‰ä»»ä½•è¾“å‡º</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">å‰©ä½™4æ¬¡</span><br><span class="line">å‰©ä½™3æ¬¡</span><br><span class="line">å‰©ä½™2æ¬¡</span><br><span class="line">å‰©ä½™1æ¬¡</span><br><span class="line">å‰©ä½™0æ¬¡</span><br></pre></td></tr></table></figure>
<p>ä¸Šè¿°é€šè¿‡generatoræ¥æ§åˆ¶æŠ½å¥–çš„æ¬¡æ•°é™åˆ¶çš„å¥½å¤„æ˜¯ï¼šæŠ½å¥–æ¬¡æ•°æ— éœ€ä¿å­˜åœ¨å…¨å±€å˜é‡ä¸­ï¼Œè€Œä¸”æŠŠæŠ½å¥–å…·ä½“é€»è¾‘ç»™åˆ†ç¦»å¼€ã€‚</p>
<h2 id="Generatorå‡½æ•°çš„è¯­æ³•ç³–â€”asyncå‡½æ•°"><a href="#Generatorå‡½æ•°çš„è¯­æ³•ç³–â€”asyncå‡½æ•°" class="headerlink" title="Generatorå‡½æ•°çš„è¯­æ³•ç³–â€”asyncå‡½æ•°"></a>Generatorå‡½æ•°çš„è¯­æ³•ç³–â€”asyncå‡½æ•°</h2><p>ES2017 æ ‡å‡†å¼•å…¥äº† async å‡½æ•°ï¼Œä½¿å¾—å¼‚æ­¥æ“ä½œå˜å¾—æ›´åŠ æ–¹ä¾¿ï¼Œè€Œasync å‡½æ•°æ˜¯å°±æ˜¯ Generator å‡½æ•°çš„è¯­æ³•ç³–ã€‚</p>
<ol>
<li><code>async</code> å¯¹åº”çš„æ˜¯ <code>*</code></li>
<li><code>await</code> å¯¹åº”çš„æ˜¯ <code>yield</code></li>
</ol>
<p><code>async</code>å’Œ<code>await</code>ï¼Œæ¯”èµ·<code>*</code>å·å’Œ<code>yield</code>ï¼Œè¯­ä¹‰æ›´æ¸…æ¥šäº†ã€‚asyncè¡¨ç¤ºå‡½æ•°é‡Œæœ‰å¼‚æ­¥æ“ä½œï¼Œawaitè¡¨ç¤ºç´§è·Ÿåœ¨åé¢çš„è¡¨è¾¾å¼éœ€è¦ç­‰å¾…ç»“æœã€‚</p>
<p>æ¯”å¦‚æˆ‘ä»¬å‡è£…æ¨¡æ‹Ÿä¸€ä¸ªè¯·æ±‚ajaxæ–¹æ³•è¿”å›ç”¨æˆ·æ•°æ®å¹¶è¾“å‡ºæ˜¾ç¤ºçš„ä¾‹å­</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ajax</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">'ç”¨æˆ·æ•°æ®...'</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">fetchUser</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> user = <span class="keyword">yield</span> ajax();</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`è¾“å‡ºçš„useræ•°æ®:<span class="subst">$&#123;user&#125;</span>`</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å½“ç„¶çœŸå®é¡¹ç›®ä¸å¯èƒ½è¿™ä¹ˆå†™ï¼Œåœ¨æ­¤åªæ˜¯æ–¹ä¾¿æ‹¿æ•°æ®</span></span><br><span class="line"><span class="keyword">const</span> generator = fetchUser();</span><br><span class="line"><span class="keyword">let</span> obj = generator.next();</span><br><span class="line">generator.next(obj.value);</span><br></pre></td></tr></table></figure>
<p>å¦‚æœç”¨asyncå‡½æ•°ä»£æ›¿,ä»£ç å°±ä¼šä¼˜é›…å¾ˆå¤š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">fetchUser</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> user = <span class="keyword">await</span> ajax();</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`è¾“å‡ºçš„useræ•°æ®:<span class="subst">$&#123;user&#125;</span>`</span>);</span><br><span class="line">&#125;</span><br><span class="line">fetchUser();</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œå¯ä»¥çœ‹å‡ºå¹¶ä¸éœ€è¦è°ƒç”¨next()æ–¹æ³•ï¼Œå› ä¸ºasyncå‡½æ•°è‡ªå¸¦æ‰§è¡Œå™¨ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œ<br>async å‡½æ•°çš„å®ç°ï¼Œå°±æ˜¯å°† Generator å‡½æ•°å’Œè‡ªåŠ¨æ‰§è¡Œå™¨ï¼ŒåŒ…è£…åœ¨ä¸€ä¸ªå‡½æ•°é‡Œã€‚</p>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>Generator æ˜¯ä¸€ä¸ªå¯ä»¥æš‚åœå’Œç»§ç»­æ‰§è¡Œçš„å‡½æ•°ï¼Œä»–å¯ä»¥å®Œå…¨å®ç° Iterator çš„åŠŸèƒ½ï¼Œå¹¶ä¸”ç”±äºå¯ä»¥ä¿å­˜ä¸Šä¸‹æ–‡ï¼Œä»–éå¸¸é€‚åˆå®ç°ç®€å•çš„çŠ¶æ€æœºã€‚å¦å¤–é€šè¿‡ä¸€äº›æµç¨‹æ§åˆ¶ä»£ç çš„é…åˆï¼Œå¯ä»¥æ¯”è¾ƒå®¹æ˜“è¿›è¡Œå¼‚æ­¥æ“ä½œã€‚</p>
<p>Async/Await å°±æ˜¯generatorè¿›è¡Œå¼‚æ­¥æ“ä½œçš„è¯­æ³•ç³–ï¼Œè¯¥è¯­æ³•ç³–ç›¸æ¯”ä¸‹æœ‰æ›´å¥½çš„åº”ç”¨å’Œè¯­ä¹‰åŒ–ï¼Œå®ƒä»¬æ­é…promiseï¼Œå¯ä»¥é€šè¿‡ç¼–å†™å½¢ä¼¼åŒæ­¥çš„ä»£ç æ¥å¤„ç†å¼‚æ­¥æµç¨‹ï¼Œæé«˜ä»£ç çš„ç®€æ´æ€§å’Œå¯è¯»æ€§ã€‚</p>
]]></content>
      <categories>
        <category>ES6ç³»åˆ—</category>
      </categories>
      <tags>
        <tag>ES6</tag>
      </tags>
  </entry>
  <entry>
    <title>ES6ç³»åˆ—ä¹‹ä¸€æ–‡å½»åº•å¼„æ‡‚Iterator</title>
    <url>/2020/01/11/ES6%E7%B3%BB%E5%88%97%E4%B9%8B%E4%B8%80%E6%96%87%E5%BD%BB%E5%BA%95%E5%BC%84%E6%87%82Iterator/</url>
    <content><![CDATA[<p>æœ¬æ–‡ä¸»è¦æ¥æ·±å…¥å‰–æES6çš„Iteratorï¼ˆè¿­ä»£å™¨/éå†å™¨ï¼‰ï¼Œåœ¨äº†è§£å®ƒä¹‹å‰ï¼Œæˆ‘ä»¬é¦–å…ˆè¦çŸ¥é“ä¸ºä»€ä¹ˆéœ€è¦Iterator? å®ƒå‡ºç°çš„åŸå› æ˜¯ä»€ä¹ˆ?</p>
<a id="more"></a>
<h2 id="ä»å¾ªç¯è¯´èµ·"><a href="#ä»å¾ªç¯è¯´èµ·" class="headerlink" title="ä»å¾ªç¯è¯´èµ·"></a>ä»å¾ªç¯è¯´èµ·</h2><p>å¹³æ—¶å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šç”¨åˆ°å¾ªç¯ï¼Œæ‹¿æœ€åŸºæœ¬çš„æ¥è¯´ï¼Œæ¯”å¦‚å¾ªç¯ä¸€ä¸ªæ•°ç»„:</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// forå¾ªç¯</span></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>];</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(arr[i]); <span class="comment">// 1 2 3 4</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¹Ÿå¯ä»¥ç”¨forEachå¾ªç¯</span></span><br><span class="line">arr.forEach(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(item); <span class="comment">// 1 2 3 4</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¹Ÿå¯ä»¥ç”¨for inå¾ªç¯</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> i <span class="keyword">in</span> arr) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(arr[i]); <span class="comment">// 1 2 3 4</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¦‚æœæ˜¯å¾ªç¯è¾“å‡ºå­—ç¬¦ä¸²çš„æ¯ä¸€ä¸ªå­—ç¬¦</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// forå¾ªç¯</span></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">'abcde'</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; str.length; i++) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(str[i]); <span class="comment">// a b c d e</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// for inå¾ªç¯</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> k <span class="keyword">in</span> str)&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(str[k]); <span class="comment">// a b c d e</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// forEachä¸èƒ½éå†å­—ç¬¦ä¸²ï¼Œå¦‚æœç¡¬è¦ç”¨åˆ™åªèƒ½å…ˆæŠŠå­—ç¬¦ä¸²è½¬ä¸ºæ•°ç»„å†ç”¨æ•°ç»„æ–¹å¼å¾ªç¯</span></span><br></pre></td></tr></table></figure>


<p>å¦‚æœæ˜¯å¾ªç¯è¾“å‡ºä¸€ä¸ªmapå¯¹è±¡å‘¢, å¦¥å¦¥çš„å°±ä¸€ä¸ªforeachå¾ªç¯ï¼Œæ™®é€šçš„forå¾ªç¯å’Œforâ€¦inéƒ½ä¸è¡Œ</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line">map.set(<span class="string">'first'</span>, <span class="string">'ç¬¬ä¸€'</span>);</span><br><span class="line">map.set(<span class="string">'second'</span>, <span class="string">'ç¬¬äºŒ'</span>);</span><br><span class="line">map.set(<span class="string">'third'</span>, <span class="string">'ç¬¬ä¸‰'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// forEachå¾ªç¯</span></span><br><span class="line">map.forEach(<span class="function">(<span class="params">val,key</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(val, key);</span><br><span class="line">    <span class="comment">// ç¬¬ä¸€ first</span></span><br><span class="line">    <span class="comment">// ç¬¬äºŒ second</span></span><br><span class="line">    <span class="comment">// ç¬¬ä¸‰ third</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>å¯¹äºä¸Šè¿°å„é›†åˆæ•°æ®ï¼Œæˆ‘ä»¬å‘ç°æ²¡æœ‰ä¸€ä¸ªå¾ªç¯æ–¹æ³•æ˜¯å¯ä»¥ä¸€æ¬¡æ€§è§£å†³çš„ã€‚</p>
<p>è™½ç„¶forEachå¾ªç¯ä¸èƒ½å¾ªç¯å­—ç¬¦ä¸²ï¼Œä½†å­—ç¬¦ä¸²å¯ä»¥è½¬ä¸ºæ•°ç»„å†ä½¿ç”¨forEachå³å¯è¾“å‡ºï¼Œä½†è¿™æ“ä½œå¹¶ä¸èˆ’æœæ¯æ¬¡ä½¿ç”¨éƒ½è¦è½¬æ¢ã€‚è€Œä¸”forEachå¾ªç¯å­˜åœ¨ç¼ºç‚¹ï¼š<code>ä¸èƒ½ä½¿ç”¨breakï¼Œcontinueè¯­å¥è·³å‡ºå¾ªç¯ï¼Œæˆ–è€…ä½¿ç”¨returnä»å‡½æ•°ä½“è¿”å›</code>ã€‚</p>
<p>è€Œforå¾ªç¯åœ¨æœ‰äº›æƒ…å†µå†™ä»£ç ä¼šå¢åŠ å¤æ‚åº¦ï¼Œè€Œä¸”ä¸èƒ½å¾ªç¯å¯¹è±¡ã€‚</p>
<p>ç›¸æ¯”ä¸‹ï¼Œforâ€¦inçš„ç¼ºç‚¹æ˜¯ä¸ä»…éå†æ•°å­—é”®åï¼Œè¿˜ä¼šéå†æ‰‹åŠ¨æ·»åŠ çš„è‡ªå®šä¹‰é”®ï¼Œç”šè‡³åŒ…æ‹¬åŸå‹é“¾ä¸Šçš„é”®ã€‚forâ€¦inä¸»è¦è¿˜æ˜¯ä¸ºéå†å¯¹è±¡è€Œè®¾è®¡çš„ï¼Œå¹¶ä¸å¤ªé€‚ç”¨äºéå†æ•°ç»„ã€‚</p>
<p>å¦‚ä¸‹ä»£ç </p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Array</span>.prototype.protoValue = <span class="string">'hello'</span>;</span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>];</span><br><span class="line">arr.test = <span class="string">'test'</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> i <span class="keyword">in</span> arr) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(arr[i]); <span class="comment">// 1 2 3 4 test hello</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¯è¯´å›æ¥ï¼Œæœ‰æ²¡æœ‰ä¸€ç§æ›´å¥½çš„å¾ªç¯èƒ½ä¸€ç»Ÿä¸Šè¿°å¾ªç¯é—®é¢˜ï¼Ÿ ES6å°±æœ‰äº†ï¼Œç”¨forâ€¦ofå¾ªç¯</p>
<h2 id="forâ€¦ofå¾ªç¯å‡ºç°"><a href="#forâ€¦ofå¾ªç¯å‡ºç°" class="headerlink" title="forâ€¦ofå¾ªç¯å‡ºç°"></a>forâ€¦ofå¾ªç¯å‡ºç°</h2><p>å®ƒçš„å‡ºç°è§£å†³äº†ä»€ä¹ˆé—®é¢˜å‘¢ï¼Ÿé¦–å…ˆæ˜¯å½“ç„¶æ˜¯èƒ½è§£å†³äº†ä¸Šè¿°æˆ‘ä»¬çš„é—®é¢˜</p>
<p>å¯¹ä¸Šè¿°æ•°æ®è¿›è¡Œå¾ªç¯è¾“å‡º</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> v <span class="keyword">of</span> arr) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(v); <span class="comment">// 1 2 3 4</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> v <span class="keyword">of</span> str) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(v); <span class="comment">// a b c d e</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> v <span class="keyword">of</span> map) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(v);</span><br><span class="line">    <span class="comment">// (2) ["first", "ç¬¬ä¸€"]</span></span><br><span class="line">    <span class="comment">// (2) ["second", "ç¬¬äºŒ"]</span></span><br><span class="line">    <span class="comment">// (2) ["third", "ç¬¬ä¸‰"]</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ¥çœ‹çœ‹å®ƒçš„ä¼˜ç‚¹ï¼š</p>
<ol>
<li>ç®€æ´ç›´æ¥çš„éå†æ•°ç»„è¯­æ³•</li>
<li>å®ƒé¿å¼€äº† for-in å¾ªç¯çš„æ‰€æœ‰ç¼ºç‚¹</li>
<li>ä¸forEachå¾ªç¯ä¸åŒçš„æ˜¯ï¼Œå®ƒå¯ä»¥ä½¿ç”¨breakã€continue å’Œ return è¯­å¥</li>
</ol>
<p>é˜®ä¸€å³°è€å¸ˆçš„ã€ŠECMAScript 6 å…¥é—¨ã€‹æåˆ°ï¼š</p>
<blockquote>
<p>ES6ä¸­å¼•å…¥äº†forâ€¦ofå¾ªç¯ï¼Œä½œä¸ºéå†æ‰€æœ‰æ•°æ®ç»“æ„çš„ç»Ÿä¸€çš„æ–¹æ³•ã€‚</p>
</blockquote>
<blockquote>
<p>Iteratoræ˜¯ä¸€ç§æ¥å£ï¼Œä¸ºå„ç§ä¸åŒçš„æ•°æ®ç»“æ„æä¾›ç»Ÿä¸€çš„è®¿é—®æœºåˆ¶ã€‚ä»»ä½•æ•°æ®ç»“æ„åªè¦éƒ¨ç½² Iterator æ¥å£ï¼Œå°±å¯ä»¥å®Œæˆéå†æ“ä½œï¼ˆå³ä¾æ¬¡å¤„ç†è¯¥æ•°æ®ç»“æ„çš„æ‰€æœ‰æˆå‘˜ï¼‰ã€‚</p>
</blockquote>
<p>ä¸€ä¸ªæ•°æ®ç»“æ„åªè¦å…·æœ‰ iterator æ¥å£ï¼Œå°±å¯ä»¥ç”¨forâ€¦ofå¾ªç¯éå†å®ƒçš„æˆå‘˜ã€‚</p>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰çš„å¯¹è±¡éƒ½èƒ½ä½¿ç”¨forâ€¦ofå¾ªç¯ï¼Œåªæœ‰å®ç°äº†Iteratoræ¥å£çš„å¯¹è±¡ï¼Œæ‰èƒ½å¤Ÿforâ€¦ofæ¥è¿›è¡Œéå†å–å€¼ã€‚</p>
<p>é‚£ä¹ˆï¼ŒIteratoræ˜¯ä»€ä¹ˆå‘¢ï¼Ÿæˆ‘ä»¬æ¥ç€è¯´</p>
<h2 id="Iteratorè¿­ä»£å™¨"><a href="#Iteratorè¿­ä»£å™¨" class="headerlink" title="Iteratorè¿­ä»£å™¨"></a>Iteratorè¿­ä»£å™¨</h2><h3 id="æ¦‚å¿µ"><a href="#æ¦‚å¿µ" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h3><blockquote>
<p>å®ƒæ˜¯ä¸€ç§æ¥å£ï¼Œä¸ºå„ç§ä¸åŒçš„æ•°æ®ç»“æ„æä¾›ç»Ÿä¸€çš„è®¿é—®æœºåˆ¶ã€‚ä»»ä½•æ•°æ®ç»“æ„åªè¦éƒ¨ç½² Iterator æ¥å£ï¼Œå°±å¯ä»¥å®Œæˆéå†æ“ä½œï¼ˆå³ä¾æ¬¡å¤„ç†è¯¥æ•°æ®ç»“æ„çš„æ‰€æœ‰æˆå‘˜ï¼‰ã€‚</p>
</blockquote>
<h3 id="ä½œç”¨"><a href="#ä½œç”¨" class="headerlink" title="ä½œç”¨"></a>ä½œç”¨</h3><ol>
<li>ä¸ºå„ç§æ•°æ®ç»“æ„ï¼Œæä¾›ä¸€ä¸ªç»Ÿä¸€çš„ã€ç®€ä¾¿çš„è®¿é—®æ¥å£ï¼›</li>
<li>ä½¿å¾—æ•°æ®ç»“æ„çš„æˆå‘˜èƒ½å¤ŸæŒ‰æŸç§æ¬¡åºæ’åˆ—ï¼›</li>
<li>åˆ›é€ ä¸€ç§æ–°çš„éå†å‘½ä»¤forâ€¦ofå¾ªç¯ï¼ŒIterator æ¥å£ä¸»è¦ä¾›forâ€¦ofæ¶ˆè´¹ã€‚</li>
</ol>
<p>ç°åœ¨æ˜ç™½äº†ï¼ŒIteratorçš„äº§ç”Ÿä¸»è¦æ˜¯ä¸ºäº†ä½¿ç”¨forâ€¦ofæ–¹æ³•ã€‚ä½†å…·ä½“Iteratoræ¦‚å¿µè¿˜æ˜¯æœ‰äº›æŠ½è±¡ï¼Œå¦‚æœè¦ç›´æ¥å…·ä½“çš„æè¿°çš„è¯ï¼š</p>
<p>Iteratorå…¶å®å°±æ˜¯ä¸€ä¸ªå…·æœ‰ next()æ–¹æ³•çš„å¯¹è±¡ï¼Œå¹¶ä¸”æ¯æ¬¡è°ƒç”¨next()æ–¹æ³•éƒ½ä¼šè¿”å›ä¸€ä¸ªç»“æœå¯¹è±¡ï¼Œè¿™ä¸ªç»“æœå¯¹è±¡æœ‰ä¸¤ä¸ªå±æ€§, å¦‚ä¸‹</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    value: è¡¨ç¤ºå½“å‰çš„å€¼,</span><br><span class="line">    done: è¡¨ç¤ºéå†æ˜¯å¦ç»“æŸ</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œå¤šäº†ä¸€äº›æ¦‚å¿µï¼Œæˆ‘ä»¬æ¥æ¢³ç†ä¸€ä¸‹ï¼š</p>
<p>Iteratoræ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å¯¹è±¡ï¼š</p>
<ol>
<li>å®ƒå…·æœ‰next()æ–¹æ³•ï¼Œè°ƒç”¨è¯¥æ–¹æ³•å°±ä¼šè¿”å›ä¸€ä¸ªç»“æœå¯¹è±¡</li>
<li>ç»“æœå¯¹è±¡æœ‰ä¸¤ä¸ªå±æ€§å€¼ï¼š<code>value</code>å’Œ<code>done</code>ã€‚</li>
<li><code>value</code>è¡¨ç¤ºå…·ä½“çš„è¿”å›å€¼ï¼›doneæ˜¯å¸ƒå°”ç±»å‹ï¼Œè¡¨ç¤ºé›†åˆæ˜¯å¦å®Œæˆéå†ï¼Œæ²¡æœ‰åˆ™è¿”å›trueï¼Œå¦åˆ™è¿”å›false</li>
<li>å†…éƒ¨æœ‰ä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘æ•°æ®ç»“æ„çš„èµ·å§‹ä½ç½®ã€‚æ¯è°ƒç”¨ä¸€æ¬¡next()æ–¹æ³•ï¼ŒæŒ‡é’ˆéƒ½ä¼šå‘åç§»åŠ¨ä¸€ä¸ªä½ç½®ï¼Œç›´åˆ°æŒ‡å‘æœ€åä¸€ä¸ªä½ç½®ã€‚</li>
</ol>
<h3 id="æ¨¡æ‹ŸIterator"><a href="#æ¨¡æ‹ŸIterator" class="headerlink" title="æ¨¡æ‹ŸIterator"></a>æ¨¡æ‹ŸIterator</h3><p>æ ¹æ®ä¸Šè¿°æè¿°ï¼Œæˆ‘ä»¬æ¥æ¨¡æ‹Ÿä¸€ä¸ªè¿­ä»£å™¨ï¼Œä»£ç å¦‚ä¸‹</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createIterator</span>(<span class="params">items</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> i = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        next: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="keyword">var</span> done = (i &gt;= item.length);</span><br><span class="line">            <span class="keyword">var</span> value = !done ? items[i++] : <span class="literal">undefined</span>;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> &#123;</span><br><span class="line">                done: done,</span><br><span class="line">                value: value</span><br><span class="line">            &#125;;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// iterator å°±æ˜¯ä¸€ä¸ªè¿­ä»£å™¨å¯¹è±¡</span></span><br><span class="line"><span class="keyword">var</span> iterator = createIterator([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(iterator.next()); <span class="comment">// &#123; done: false, value: 1 &#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(iterator.next()); <span class="comment">// &#123; done: false, value: 2 &#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(iterator.next()); <span class="comment">// &#123; done: false, value: 3 &#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(iterator.next()); <span class="comment">// &#123; done: true, value: undefined &#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(iterator.next()); <span class="comment">// &#123; done: true, value: undefined &#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(iterator.next()); <span class="comment">// &#123; done: true, value: undefined &#125;</span></span><br></pre></td></tr></table></figure>

<p>è¿‡ç¨‹:</p>
<ol>
<li>åˆ›å»ºä¸€ä¸ªæŒ‡é’ˆå¯¹è±¡ï¼ŒæŒ‡å‘å½“å‰æ•°æ®ç»“æ„çš„èµ·å§‹ä½ç½®ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œéå†å™¨å¯¹è±¡æœ¬è´¨ä¸Šï¼Œå°±æ˜¯ä¸€ä¸ªæŒ‡é’ˆå¯¹è±¡ã€‚</li>
<li>ç¬¬ä¸€æ¬¡è°ƒç”¨æŒ‡é’ˆå¯¹è±¡çš„nextæ–¹æ³•ï¼Œnext æ–¹æ³•å†…éƒ¨é€šè¿‡é—­åŒ…æ¥ä¿å­˜æŒ‡é’ˆ<code>i</code> çš„å€¼ï¼Œæ¯æ¬¡è°ƒç”¨<code>i</code>éƒ½ä¼š<code>+1</code>ï¼ŒæŒ‡å‘ä¸‹ä¸€ä¸ªã€‚æ•…ç¬¬ä¸€æ¬¡æŒ‡é’ˆæŒ‡å‘æ•°æ®ç»“æ„çš„ç¬¬ä¸€ä¸ªæˆå‘˜ï¼Œè¾“å‡º1ã€‚</li>
<li>ç¬¬äºŒæ¬¡è°ƒç”¨æŒ‡é’ˆå¯¹è±¡çš„nextæ–¹æ³•ï¼ŒæŒ‡é’ˆå°±æŒ‡å‘æ•°æ®ç»“æ„çš„ç¬¬äºŒä¸ªæˆå‘˜ï¼Œè¾“å‡º2ã€‚</li>
<li>ç¬¬ä¸‰æ¬¡è°ƒç”¨æŒ‡é’ˆå¯¹è±¡çš„nextæ–¹æ³•ï¼Œæ•°ç»„é•¿åº¦ä¸º3ï¼Œæ­¤æ—¶æ•°æ®ç»“æ„çš„ç»“æŸä½ç½®ï¼Œè¾“å‡º3ã€‚</li>
<li>ç¬¬å››æ¬¡è°ƒç”¨æŒ‡é’ˆå¯¹è±¡çš„nextæ–¹æ³•ï¼Œæ­¤æ—¶å·²éå†å®Œæˆäº†ï¼Œè¾“å‡ºdoneä¸ºtrueè¡¨ç¤ºå®Œæˆï¼Œvalueä¸ºundefinedï¼Œæ­¤åç¬¬næ¬¡è°ƒç”¨éƒ½æ˜¯è¯¥ç»“æœã€‚</li>
</ol>
<p>çœ‹åˆ°è¿™é‡Œå¤§å®¶å¤§æ¦‚çŸ¥é“<code>Iterator</code>äº†ï¼Œä½†Iteratoræ¥å£ä¸»è¦ä¾›forâ€¦ofæ¶ˆè´¹ã€‚æˆ‘ä»¬è¯•ç€ç”¨forâ€¦ofå¾ªç¯ä¸Šé¢åˆ›å»ºIteratorå¯¹è±¡</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">var iterator &#x3D; makeIterator([1, 2, 3]);</span><br><span class="line"></span><br><span class="line">for (let value of iterator) &#123;</span><br><span class="line">    console.log(value); &#x2F;&#x2F; Uncaught TypeError: iterator is not iterable</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç»“æœæŠ¥é”™ï¼Œè¯´æ˜æˆ‘ä»¬ç”Ÿæˆçš„ iterator å¯¹è±¡å¹¶ä¸æ˜¯å¯éå†çš„ï¼Œè¿™æ ·çš„ç»“æ„è¿˜ä¸èƒ½å¤Ÿè¢«forâ€¦ofå¾ªç¯</p>
<p>é‚£ä»€ä¹ˆæ ·çš„ç»“æ„æ‰æ˜¯å¯éå†çš„å‘¢ï¼Ÿ</p>
<h2 id="å¯è¿­ä»£å¯¹è±¡Iterable"><a href="#å¯è¿­ä»£å¯¹è±¡Iterable" class="headerlink" title="å¯è¿­ä»£å¯¹è±¡Iterable"></a>å¯è¿­ä»£å¯¹è±¡Iterable</h2><h3 id="å¦‚ä½•å®ç°"><a href="#å¦‚ä½•å®ç°" class="headerlink" title="å¦‚ä½•å®ç°"></a>å¦‚ä½•å®ç°</h3><p>ES6è¿˜å¼•å…¥äº†ä¸€ä¸ªæ–°çš„Symbolå¯¹è±¡ï¼Œsymbolå€¼æ˜¯å”¯ä¸€çš„ã€‚</p>
<p>ä¸€ä¸ªæ•°æ®ç»“æ„åªè¦éƒ¨ç½²äº†Symbol.iteratorå±æ€§ï¼Œå°±è¢«è§†ä¸ºå…·æœ‰ iterator æ¥å£ï¼›è°ƒç”¨è¿™ä¸ªæ¥å£ï¼Œå°±ä¼šè¿”å›ä¸€ä¸ªéå†å™¨å¯¹è±¡ã€‚è¿™æ ·çš„æ•°æ®ç»“æ„æ‰èƒ½è¢«ç§°ä¸ºå¯è¿­ä»£å¯¹è±¡(Iterator)ï¼Œè¯¥å¯¹è±¡å¯è¢«forâ€¦oféå†ã€‚</p>
<p>ç…§ç€ä¸Šé¢çš„è§„å®šæ¥åˆ›å»ºä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"></span><br><span class="line">arr[<span class="built_in">Symbol</span>.iterator] = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> _this = <span class="keyword">this</span>;</span><br><span class="line">    <span class="keyword">var</span> i = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        next: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="keyword">var</span> done = (i &gt;= _this.length);</span><br><span class="line">            <span class="keyword">var</span> value = !done ? _this[i++] : <span class="literal">undefined</span>;</span><br><span class="line">            <span class="keyword">return</span> &#123;</span><br><span class="line">                done: done,</span><br><span class="line">                value: value</span><br><span class="line">            &#125;;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ­¤æ—¶å¯ä»¥for...oféå†</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> item <span class="keyword">of</span> arr)&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(item); <span class="comment">// 1 2 3 </span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç”±æ­¤ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥çŸ¥é“ forâ€¦of éå†çš„å…¶å®æ˜¯å¯¹è±¡çš„ Symbol.iterator å±æ€§ã€‚</p>
<h3 id="åŸç”Ÿå…·å¤‡Iteratoræ¥å£çš„æ•°æ®ç»“æ„"><a href="#åŸç”Ÿå…·å¤‡Iteratoræ¥å£çš„æ•°æ®ç»“æ„" class="headerlink" title="åŸç”Ÿå…·å¤‡Iteratoræ¥å£çš„æ•°æ®ç»“æ„"></a>åŸç”Ÿå…·å¤‡Iteratoræ¥å£çš„æ•°æ®ç»“æ„</h3><p>åœ¨ES6ä¸­ï¼Œæ‰€æœ‰çš„é›†åˆå¯¹è±¡ï¼ŒåŒ…æ‹¬æ•°ç»„ï¼Œç±»æ•°ç»„å¯¹è±¡ï¼ˆargumentså¯¹è±¡ã€DOM NodeList å¯¹è±¡ï¼‰ï¼ŒMapå’ŒSetï¼Œè¿˜æœ‰å­—ç¬¦ä¸²éƒ½æ˜¯å¯è¿­ä»£çš„ï¼Œéƒ½å¯ä»¥è¢«forâ€¦oféå†ï¼Œå› ä¸ºä»–ä»¬éƒ½æœ‰é»˜è®¤çš„è¿­ä»£å™¨ã€‚</p>
<p>ä¸‹é¢å°±æŒ‘å…¶ä¸­å‡ ä¸ªç±»å‹æ¥ä¸¾ä¾‹å­ï¼š</p>
<h4 id="æ•°ç»„"><a href="#æ•°ç»„" class="headerlink" title="æ•°ç»„"></a>æ•°ç»„</h4><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"> </span><br><span class="line"><span class="keyword">var</span> iteratorObj = arr[<span class="built_in">Symbol</span>.iterator]();</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(iteratorObj.next());</span><br><span class="line"><span class="built_in">console</span>.log(iteratorObj.next());</span><br><span class="line"><span class="built_in">console</span>.log(iteratorObj.next());</span><br><span class="line"><span class="built_in">console</span>.log(iteratorObj.next());</span><br></pre></td></tr></table></figure>
<p>è¾“å‡ºç»“æœï¼š<br><img src="https://images.weserv.nl/?url=https://user-gold-cdn.xitu.io/2020/1/8/16f8433c4b0b041a?w=294&h=282&f=png&s=23046" alt=""><br>ç”±ä¸Šè¿°å¯¹è¿­ä»£å™¨çš„æ¦‚å¿µè®¤è¯†ï¼Œè¾“å‡ºç»“æœä¹Ÿå®Œå…¨ç¬¦åˆæˆ‘ä»¬é¢„æœŸã€‚</p>
<h4 id="arguments"><a href="#arguments" class="headerlink" title="arguments"></a>arguments</h4><p>æˆ‘ä»¬çŸ¥é“æ™®é€šå¯¹è±¡æ˜¯é»˜è®¤æ²¡æœ‰éƒ¨ç½²è¿™ä¸ªæ¥å£çš„ï¼Œæ‰€ä»¥argumentsè¿™ä¸ªå±æ€§æ²¡æœ‰åœ¨åŸå‹ä¸Šï¼Œè€Œæ˜¯åœ¨å¯¹è±¡è‡ªèº«çš„å±æ€§ä¸Šã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">   <span class="keyword">var</span> obj = <span class="built_in">arguments</span>[<span class="built_in">Symbol</span>.iterator]();</span><br><span class="line">   <span class="built_in">console</span>.log(<span class="built_in">arguments</span>);</span><br><span class="line">   <span class="built_in">console</span>.log(obj.next());</span><br><span class="line">   <span class="built_in">console</span>.log(obj.next());</span><br><span class="line">   <span class="built_in">console</span>.log(obj.next());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">test(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>);</span><br></pre></td></tr></table></figure>
<p>è¾“å‡ºç»“æœï¼š</p>
<p><img src="https://images.weserv.nl/?url=https://user-gold-cdn.xitu.io/2020/1/8/16f8446fec7e2102?w=508&h=197&f=png&s=20591" alt=""></p>
<h4 id="NodeList"><a href="#NodeList" class="headerlink" title="NodeList"></a>NodeList</h4><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"test"</span>&gt;</span>1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"test"</span>&gt;</span>2<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"test"</span>&gt;</span>3<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> nodeList = <span class="built_in">document</span>.getElementsByClassName(<span class="string">'test'</span>)</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">const</span> node <span class="keyword">of</span> nodeList) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(node);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¾“å‡ºç»“æœï¼š</p>
<p><img src="https://images.weserv.nl/?url=https://user-gold-cdn.xitu.io/2020/1/8/16f84531078f206d?w=236&h=61&f=png&s=3489" alt=""></p>
<h4 id="map"><a href="#map" class="headerlink" title="map"></a>map</h4><p>è¿™æ¬¡ç›´æ¥ä»åŸå‹ä¸Šæ‰¾æ¥è¯æ˜</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Map</span>.prototype.hasOwnProperty(<span class="built_in">Symbol</span>.iterator)); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<p>è‡³äºå…¶ä»–ç±»å‹çš„å¯è¿­ä»£å¯¹è±¡å¤§å®¶å¯ä¸¾ä¸€åä¸‰ã€‚</p>
<h2 id="è°ƒç”¨-Iterator-æ¥å£çš„åœºåˆ"><a href="#è°ƒç”¨-Iterator-æ¥å£çš„åœºåˆ" class="headerlink" title="è°ƒç”¨ Iterator æ¥å£çš„åœºåˆ"></a>è°ƒç”¨ Iterator æ¥å£çš„åœºåˆ</h2><p>æœ‰ä¸€äº›åœºåˆä¼šé»˜è®¤è°ƒç”¨ Iterator æ¥å£ï¼ˆå³Symbol.iteratoræ–¹æ³•ï¼‰</p>
<h3 id="è§£æ„èµ‹å€¼"><a href="#è§£æ„èµ‹å€¼" class="headerlink" title="è§£æ„èµ‹å€¼"></a>è§£æ„èµ‹å€¼</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="keyword">set</span> = new Set().add('a').add('b').add('c');</span><br><span class="line"></span><br><span class="line">let [x, y] = <span class="keyword">set</span>;</span><br><span class="line">console.log(x, y); // a b</span><br></pre></td></tr></table></figure>

<h3 id="æ‰©å±•è¿ç®—ç¬¦"><a href="#æ‰©å±•è¿ç®—ç¬¦" class="headerlink" title="æ‰©å±•è¿ç®—ç¬¦"></a>æ‰©å±•è¿ç®—ç¬¦</h3><p>æ‰©å±•è¿ç®—ç¬¦ï¼ˆâ€¦ï¼‰ä¹Ÿä¼šè°ƒç”¨é»˜è®¤çš„ Iterator æ¥å£ï¼Œå¯ä»¥å°†å½“å‰è¿­ä»£å¯¹è±¡è½¬æ¢ä¸ºæ•°ç»„ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">'hello'</span>;</span><br><span class="line"><span class="built_in">console</span>.log([...str]); <span class="comment">// ["h", "e", "l", "l", "o"]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> arr = [<span class="string">'b'</span>, <span class="string">'c'</span>];</span><br><span class="line"><span class="built_in">console</span>.log([<span class="string">'a'</span>, ...arr, <span class="string">'d'</span>]); <span class="comment">// ["a", "b", "c", "d"]</span></span><br></pre></td></tr></table></figure>

<h3 id="yield"><a href="#yield" class="headerlink" title="yield*"></a>yield*</h3><p>yield*åé¢è·Ÿçš„æ˜¯ä¸€ä¸ªå¯éå†çš„ç»“æ„ï¼Œå®ƒä¼šè°ƒç”¨è¯¥ç»“æ„çš„éå†å™¨æ¥å£ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> generator = <span class="function"><span class="keyword">function</span>* (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">yield</span> <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">yield</span>* [<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>];</span><br><span class="line">  <span class="keyword">yield</span> <span class="number">5</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> iterator = generator();</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(iterator.next()); <span class="comment">// &#123; value: 1, done: false &#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(iterator.next()); <span class="comment">// &#123; value: 2, done: false &#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(iterator.next()); <span class="comment">// &#123; value: 3, done: false &#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(iterator.next()); <span class="comment">// &#123; value: 4, done: false &#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(iterator.next()); <span class="comment">// &#123; value: 5, done: false &#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(iterator.next()); <span class="comment">// &#123; value: undefined, done: true &#125;</span></span><br></pre></td></tr></table></figure>
<p>å…³äºyieldä¹‹åä¼šå†å†™ä¸€ç¯‡ä¸“é¢˜</p>
<h3 id="å…¶ä»–åœºåˆ"><a href="#å…¶ä»–åœºåˆ" class="headerlink" title="å…¶ä»–åœºåˆ"></a>å…¶ä»–åœºåˆ</h3><p>ä¾‹å¦‚ï¼šforâ€¦ofã€Set()ã€Map()ã€Array.from()ç­‰ã€‚æˆ‘ä»¬ä¸»è¦æ˜¯ä¸ºäº†è¯æ˜è°ƒç”¨ä¸Šé¢è¿™äº›å‡½æ•°æ—¶ç€å®æ˜¯ç”¨åˆ°äº†Iteratoræ¥å£ã€‚</p>
<p>æˆ‘ä»¬è´´å‡ºä¸Šé¢çš„å®ç°å¯è¿­ä»£å¯¹è±¡çš„ä»£ç ï¼Œè¿›è¡Œæ”¹åŠ¨ã€‚æƒ³ä¸€æƒ³ï¼Œå°½ç®¡æˆ‘ä»¬æ²¡æœ‰æ‰‹åŠ¨æ·»åŠ  Symbol.iteratorå±æ€§ï¼Œä½†å› ä¸º ES6 é»˜è®¤éƒ¨ç½²äº† Symbol.iteratorï¼Œæ•°ç»„è¿˜æ˜¯å¯ä»¥éå†æˆåŠŸï¼Œé‚£å½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥æ‰‹åŠ¨ä¿®æ”¹è¿™ä¸ªå±æ€§ï¼Œé‡æ–°éƒ¨ç½²ä¹Ÿå¯ä»¥ã€‚</p>
<p>å¦‚æœæˆ‘ä»¬æ‰‹åŠ¨ä¿®æ”¹ç”Ÿæ•ˆï¼Œå½±å“äº†è¾“å‡ºï¼Œè¯æ˜æŸæ–¹æ³•è°ƒç”¨éœ€è¦ç”¨åˆ°Iteratoræ¥å£</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"></span><br><span class="line">arr[<span class="built_in">Symbol</span>.iterator] = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> _this = <span class="keyword">this</span>;</span><br><span class="line">    <span class="keyword">var</span> i = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        next: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="keyword">var</span> done = (i &gt;= _this.length);</span><br><span class="line">            <span class="keyword">var</span> value = !done ? _this[i++] : <span class="literal">undefined</span>;</span><br><span class="line">            <span class="keyword">return</span> &#123;</span><br><span class="line">                done: done,</span><br><span class="line">                value: value + <span class="string">' æ‰‹åŠ¨æ·»åŠ çš„å±æ€§'</span> <span class="comment">// æ·»åŠ è‡ªå®šä¹‰å€¼</span></span><br><span class="line">            &#125;;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¾“å‡ºç»“æœæ˜¾ç¤ºæ‰‹åŠ¨ä¿®æ”¹ç”Ÿæ•ˆï¼Œè¯æ˜for...ofè°ƒç”¨äº†Iteratoræ¥å£</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> item <span class="keyword">of</span> arr)&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(item);</span><br><span class="line">    <span class="comment">// 1 æ‰‹åŠ¨æ·»åŠ çš„å±æ€§</span></span><br><span class="line">    <span class="comment">// 2 æ‰‹åŠ¨æ·»åŠ çš„å±æ€§</span></span><br><span class="line">    <span class="comment">// 3 æ‰‹åŠ¨æ·»åŠ çš„å±æ€§</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> <span class="keyword">set</span> = new Set(arr);</span><br><span class="line">console.log(<span class="keyword">set</span>); // Set(3) &#123;<span class="number">1</span> æ‰‹åŠ¨æ·»åŠ çš„å±æ€§<span class="string">", 2 æ‰‹åŠ¨æ·»åŠ çš„å±æ€§"</span>, <span class="number">3</span> æ‰‹åŠ¨æ·»åŠ çš„å±æ€§<span class="string">"&#125;</span></span><br></pre></td></tr></table></figure>
<p>ä¸Šè¿°å…¶ä»–æ–¹æ³•è¯æ˜ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œå°±ä¸ä¸€ä¸€åˆ—å‡ºäº†ã€‚</p>
<h2 id="è®¡ç®—ç”Ÿæˆçš„æ•°æ®ç»“æ„"><a href="#è®¡ç®—ç”Ÿæˆçš„æ•°æ®ç»“æ„" class="headerlink" title="è®¡ç®—ç”Ÿæˆçš„æ•°æ®ç»“æ„"></a>è®¡ç®—ç”Ÿæˆçš„æ•°æ®ç»“æ„</h2><p>æœ‰äº›æ•°æ®ç»“æ„æ˜¯åœ¨ç°æœ‰æ•°æ®ç»“æ„çš„åŸºç¡€ä¸Šï¼Œè®¡ç®—ç”Ÿæˆçš„ã€‚æ¯”å¦‚ï¼ŒES6 çš„æ•°ç»„ã€Setã€Map éƒ½éƒ¨ç½²äº†ä»¥ä¸‹ä¸‰ä¸ªæ–¹æ³•ï¼Œè°ƒç”¨åéƒ½è¿”å›éå†å™¨å¯¹è±¡ã€‚</p>
<ol>
<li>entries() è¿”å›ä¸€ä¸ªéå†å™¨å¯¹è±¡ï¼Œç”¨æ¥éå†[é”®å,é”®å€¼]ç»„æˆçš„æ•°ç»„ã€‚å¯¹äºæ•°ç»„ï¼Œé”®åå°±æ˜¯ç´¢å¼•å€¼ã€‚</li>
<li>keys() è¿”å›ä¸€ä¸ªéå†å™¨å¯¹è±¡ï¼Œç”¨æ¥éå†æ‰€æœ‰çš„é”®åã€‚</li>
<li>values() è¿”å›ä¸€ä¸ªéå†å™¨å¯¹è±¡ï¼Œç”¨æ¥éå†æ‰€æœ‰çš„é”®å€¼ã€‚</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="string">"first"</span>, <span class="string">"second"</span>, <span class="string">"third"</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> index <span class="keyword">of</span> arr.keys()) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(index);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 0</span></span><br><span class="line"><span class="comment">// 1</span></span><br><span class="line"><span class="comment">// 2</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> color <span class="keyword">of</span> arr.values()) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(color);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// first</span></span><br><span class="line"><span class="comment">// second</span></span><br><span class="line"><span class="comment">// third</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> item <span class="keyword">of</span> arr.entries()) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(item);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// [ 0, "first" ]</span></span><br><span class="line"><span class="comment">// [ 1, "second" ]</span></span><br><span class="line"><span class="comment">// [ 2, "third" ]</span></span><br></pre></td></tr></table></figure>


<h2 id="åˆ¤æ–­å¯¹è±¡æ˜¯å¦å¯è¿­ä»£"><a href="#åˆ¤æ–­å¯¹è±¡æ˜¯å¦å¯è¿­ä»£" class="headerlink" title="åˆ¤æ–­å¯¹è±¡æ˜¯å¦å¯è¿­ä»£"></a>åˆ¤æ–­å¯¹è±¡æ˜¯å¦å¯è¿­ä»£</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> isIterable = <span class="function"><span class="params">obj</span> =&gt;</span> obj != <span class="literal">null</span> &amp;&amp; <span class="keyword">typeof</span> obj[<span class="built_in">Symbol</span>.iterator] === <span class="string">'function'</span>;</span><br><span class="line"><span class="built_in">console</span>.log(isIterable(<span class="keyword">new</span> <span class="built_in">Set</span>())); <span class="comment">// true </span></span><br><span class="line"><span class="built_in">console</span>.log(isIterable(<span class="keyword">new</span> <span class="built_in">Map</span>())); <span class="comment">// true  </span></span><br><span class="line"><span class="built_in">console</span>.log(isIterable([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])); <span class="comment">// true </span></span><br><span class="line"><span class="built_in">console</span>.log(isIterable(<span class="string">"hello world"</span>)); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>


<h3 id="forâ€¦ofå¾ªç¯ä¸æ”¯æŒéå†æ™®é€šå¯¹è±¡"><a href="#forâ€¦ofå¾ªç¯ä¸æ”¯æŒéå†æ™®é€šå¯¹è±¡" class="headerlink" title="forâ€¦ofå¾ªç¯ä¸æ”¯æŒéå†æ™®é€šå¯¹è±¡"></a>forâ€¦ofå¾ªç¯ä¸æ”¯æŒéå†æ™®é€šå¯¹è±¡</h3><p>æ¢³ç†äº†åŠå¤©ï¼Œå›åˆ°æœ€åˆï¼ŒIteratorçš„äº§ç”Ÿä¸»è¦æ˜¯ä¸ºäº†ä½¿ç”¨forâ€¦ofæ–¹æ³•ã€‚è€Œå¯¹è±¡ä¸åƒæ•°ç»„çš„å€¼æ˜¯æœ‰åºçš„ï¼Œéå†çš„æ—¶å€™æ ¹æœ¬ä¸çŸ¥é“å¦‚ä½•ç¡®å®šä»–ä»¬çš„å…ˆåé¡ºåºï¼Œæ‰€ä»¥è¦æ³¨æ„çš„æ˜¯forâ€¦ofå¾ªç¯ä¸æ”¯æŒéå†å¯¹è±¡ã€‚</p>
<p>å¦‚æœéè¦éå†å¯¹è±¡ï¼ŒåŒç†å¯¹è±¡ä¹Ÿå¿…é¡»åŒ…å«[Symbol.iterator]çš„å±æ€§å¹¶å®ç°è¿­ä»£å™¨æ–¹æ³•ï¼Œå¯ä»¥é€šè¿‡æ‰‹åŠ¨åˆ©ç”¨Object.definePropertyæ–¹æ³•æ·»åŠ è¯¥å±æ€§ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123; <span class="attr">a</span>: <span class="number">2</span>, <span class="attr">b</span>: <span class="number">3</span> &#125;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i <span class="keyword">of</span> obj) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(i) <span class="comment">// Uncaught TypeError: obj is not iterable</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å…³äºIteratorå°±å†™åˆ°è¿™é‡Œäº†ï¼Œä¸‹ä¸€ç¯‡å†™ES6çš„Generatorç”Ÿæˆå™¨ã€‚</p>
]]></content>
      <categories>
        <category>ES6ç³»åˆ—</category>
      </categories>
      <tags>
        <tag>ES6</tag>
      </tags>
  </entry>
  <entry>
    <title>ES6ç³»åˆ—ä¹‹ç®­å¤´å‡½æ•°å…¨è§£æ</title>
    <url>/2020/01/07/ES6%E7%B3%BB%E5%88%97%E4%B9%8B%E7%AE%AD%E5%A4%B4%E5%87%BD%E6%95%B0%E5%85%A8%E8%A7%A3%E6%9E%90/</url>
    <content><![CDATA[<p>ES6ä¸­å…è®¸ä½¿ç”¨ç®­å¤´æ¥å®šä¹‰ç®­å¤´å‡½æ•°ï¼Œæ˜¯ES6ä¸­è¾ƒå—æ¬¢è¿ä¹Ÿè¾ƒå¸¸ä½¿ç”¨çš„æ–°å¢ç‰¹æ€§ã€‚æœ¬æ–‡å°†ä»ç®­å¤´å‡½æ•°çš„åŸºæœ¬è¯­æ³•ï¼Œä¸æ™®é€šå‡½æ•°å¯¹æ¯”ï¼Œç®­å¤´å‡½æ•°ä¸é€‚ç”¨åœºæ™¯ä¸‰ä¸ªæ–¹é¢è¿›è¡Œæ¢³ç†ã€‚</p>
<a id="more"></a>
<h2 id="åŸºæœ¬è¯­æ³•"><a href="#åŸºæœ¬è¯­æ³•" class="headerlink" title="åŸºæœ¬è¯­æ³•"></a>åŸºæœ¬è¯­æ³•</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ç®­å¤´å‡½æ•°</span></span><br><span class="line"><span class="keyword">let</span> func = <span class="function">(<span class="params">name</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// å‡½æ•°ä½“</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">`Hello <span class="subst">$&#123;name&#125;</span>`</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç­‰åŒäº</span></span><br><span class="line"><span class="keyword">let</span> func = <span class="function"><span class="keyword">function</span> (<span class="params">name</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// å‡½æ•°ä½“</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">`Hello <span class="subst">$&#123;name&#125;</span>`</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>ä»ä¸Šé¢å¯ä»¥çœ‹å‡ºï¼Œå®šä¹‰ç®­å¤´å‡½æ•°è¯­æ³•ä¸Šè¦æ¯”æ™®é€šå‡½æ•°ç®€æ´å¾—å¤šã€‚ç®­å¤´å‡½æ•°çœå»äº†<code>function</code>å…³é”®å­—ï¼Œé‡‡ç”¨ç®­å¤´<code>=&gt;</code>æ¥å®šä¹‰å‡½æ•°ã€‚å‡½æ•°çš„å‚æ•°æ”¾åœ¨<code>=&gt;</code>å‰é¢çš„æ‹¬å·ä¸­ï¼Œå‡½æ•°ä½“è·Ÿåœ¨<code>=&gt;</code>åçš„èŠ±æ‹¬å·ä¸­ï¼Œç®­å¤´å‡½æ•°åœ¨å‚æ•°å’Œç®­å¤´ä¹‹é—´ä¸èƒ½æ¢è¡Œã€‚</p>
<h3 id="ç®­å¤´å‡½æ•°çš„å‚æ•°"><a href="#ç®­å¤´å‡½æ•°çš„å‚æ•°" class="headerlink" title="ç®­å¤´å‡½æ•°çš„å‚æ•°"></a>ç®­å¤´å‡½æ•°çš„å‚æ•°</h3><ol>
<li>å¦‚æœç®­å¤´å‡½æ•°æ²¡æœ‰å‚æ•°ï¼Œç›´æ¥å†™ä¸€ä¸ªç©ºæ‹¬å·å³å¯ã€‚</li>
<li>å¦‚æœç®­å¤´å‡½æ•°çš„å‚æ•°åªæœ‰ä¸€ä¸ªï¼Œå¯ä»¥çœç•¥åŒ…è£¹å‚æ•°çš„æ‹¬å·ã€‚</li>
<li>å¦‚æœç®­å¤´å‡½æ•°æœ‰å¤šä¸ªå‚æ•°ï¼Œå°†å‚æ•°ä¾æ¬¡ç”¨é€—å·åˆ†éš”ï¼Œå‚æ•°å¿…é¡»è¢«åŒ…è£¹åœ¨æ‹¬å·ä¸­ã€‚</li>
</ol>
<h3 id="ç®­å¤´å‡½æ•°çš„å‡½æ•°ä½“"><a href="#ç®­å¤´å‡½æ•°çš„å‡½æ•°ä½“" class="headerlink" title="ç®­å¤´å‡½æ•°çš„å‡½æ•°ä½“"></a>ç®­å¤´å‡½æ•°çš„å‡½æ•°ä½“</h3><p>å¦‚æœç®­å¤´å‡½æ•°çš„å‡½æ•°ä½“åªæœ‰ä¸€å¥ä»£ç ï¼Œå³è¿”å›æŸä¸ªå˜é‡æˆ–è€…è¿”å›ä¸€ä¸ªç®€å•çš„JSè¡¨è¾¾å¼ï¼Œå¯ä»¥çœå»å‡½æ•°ä½“çš„å¤§æ‹¬å·{ }ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> func = <span class="function"><span class="params">val</span> =&gt;</span> val;</span><br><span class="line"><span class="comment">// ç­‰åŒäº</span></span><br><span class="line"><span class="keyword">let</span> func = <span class="function"><span class="keyword">function</span> (<span class="params">val</span>) </span>&#123; <span class="keyword">return</span> val &#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> sum = <span class="function">(<span class="params">num1, num2</span>) =&gt;</span> num1 + num2;</span><br><span class="line"><span class="comment">// ç­‰åŒäº</span></span><br><span class="line"><span class="keyword">let</span> sum = <span class="function"><span class="keyword">function</span>(<span class="params">num1, num2</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> num1 + num2;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> mulFunction = <span class="function">(<span class="params">num1, num2 ,num3</span>) =&gt;</span> num1 * num2 * num3;</span><br><span class="line"><span class="comment">// ç­‰åŒäº</span></span><br><span class="line"><span class="keyword">let</span> mulFunction = <span class="function"><span class="keyword">function</span>(<span class="params">num1, num2 ,num3</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> num1 * num2 * num3;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="ç®­å¤´å‡½æ•°è¿”å›ä¸€ä¸ªå¯¹è±¡"><a href="#ç®­å¤´å‡½æ•°è¿”å›ä¸€ä¸ªå¯¹è±¡" class="headerlink" title="ç®­å¤´å‡½æ•°è¿”å›ä¸€ä¸ªå¯¹è±¡"></a>ç®­å¤´å‡½æ•°è¿”å›ä¸€ä¸ªå¯¹è±¡</h3><p>å¦‚æœç®­å¤´å‡½æ•°çš„å‡½æ•°ä½“åªæœ‰ä¸€å¥ä»£ç ä¸”è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼ˆå¯¹è±¡å­—é¢é‡ï¼‰æ—¶ï¼Œç›´æ¥å†™ä¸€ä¸ªè¡¨è¾¾å¼æ˜¯ä¸è¡Œçš„ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> func = <span class="function"><span class="params">()</span> =&gt;</span> &#123; <span class="attr">foo</span>: <span class="number">1</span> &#125;; </span><br><span class="line"><span class="built_in">console</span>.log(func()); <span class="comment">// æ‰§è¡Œåè¿”å›undefined</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å¦‚æœæ˜¯è¿™æ ·è¿˜ä¼šç›´æ¥æŠ¥é”™</span></span><br><span class="line"><span class="keyword">let</span> func = <span class="function"><span class="params">()</span> =&gt;</span> &#123; <span class="attr">foo</span>: <span class="number">1</span>, <span class="attr">bar</span>: <span class="number">2</span> &#125;;</span><br></pre></td></tr></table></figure>
<p>åŸå› æ˜¯èŠ±æ‹¬å·è¢«è§£é‡Šä¸ºå‡½æ•°ä½“çš„å¤§æ‹¬å·ï¼Œè§£å†³åŠæ³•ï¼š<strong>ç”¨åœ†æ‹¬å·æŠŠå¯¹è±¡å­—é¢é‡åŒ…èµ·æ¥</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> func = <span class="function"><span class="params">()</span> =&gt;</span> (&#123; <span class="attr">foo</span>: <span class="number">1</span> &#125;);</span><br><span class="line"><span class="built_in">console</span>.log(func()); <span class="comment">// &#123;foo: 1&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸è¿‡ä¸Šé¢é‚£æ ·è§£å†³çš„ç¼ºç‚¹æ˜¯å¯è¯»æ€§å˜å·®äº†ï¼Œæ‰€ä»¥æ›´æ¨èç›´æ¥å½“æˆå¤šæ¡è¯­å¥çš„å½¢å¼æ¥å†™ï¼Œå¯è¯»æ€§é«˜  </span></span><br><span class="line"><span class="keyword">let</span> func = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        foo: <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="ç®€åŒ–å›è°ƒå‡½æ•°"><a href="#ç®€åŒ–å›è°ƒå‡½æ•°" class="headerlink" title="ç®€åŒ–å›è°ƒå‡½æ•°"></a>ç®€åŒ–å›è°ƒå‡½æ•°</h3><p>è¿™æ˜¯ç®­å¤´å‡½æ•°æ¯”è¾ƒå¸¸è§çš„ç”¨æ³•</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ™®é€šå‡½æ•°å†™æ³•</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>].map(<span class="function"><span class="keyword">function</span> (<span class="params">x</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> x * x;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> result = [<span class="number">5</span>, <span class="number">4</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">2</span>].sort(<span class="function"><span class="keyword">function</span> (<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> a - b;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç®­å¤´å‡½æ•°å†™æ³•</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>].map(<span class="function"><span class="params">x</span> =&gt;</span> x * x);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> result = [<span class="number">5</span>, <span class="number">4</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">2</span>].sort(<span class="function">(<span class="params">a, b</span>) =&gt;</span> a - b);</span><br></pre></td></tr></table></figure>
<h2 id="è·Ÿæ™®é€šå‡½æ•°çš„åŒºåˆ«"><a href="#è·Ÿæ™®é€šå‡½æ•°çš„åŒºåˆ«" class="headerlink" title="è·Ÿæ™®é€šå‡½æ•°çš„åŒºåˆ«"></a>è·Ÿæ™®é€šå‡½æ•°çš„åŒºåˆ«</h2><h3 id="æ²¡æœ‰thisç»‘å®š"><a href="#æ²¡æœ‰thisç»‘å®š" class="headerlink" title="æ²¡æœ‰thisç»‘å®š"></a>æ²¡æœ‰thisç»‘å®š</h3><p>ç®­å¤´å‡½æ•°æ²¡æœ‰è‡ªå·±çš„thisï¼Œå®ƒä¼šæ•è·è‡ªå·±åœ¨<em>å®šä¹‰æ—¶</em>ï¼‰æ‰€å¤„çš„å¤–å±‚æ‰§è¡Œç¯å¢ƒçš„thisï¼Œå¹¶ç»§æ‰¿è¿™ä¸ªthiså€¼ã€‚æ‰€ä»¥ï¼Œç®­å¤´å‡½æ•°ä¸­thisçš„æŒ‡å‘åœ¨å®ƒè¢«å®šä¹‰çš„æ—¶å€™å°±å·²ç»ç¡®å®šäº†ï¼Œä¹‹åæ°¸è¿œä¸ä¼šæ”¹å˜ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123;</span><br><span class="line">	a: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="built_in">console</span>.log(<span class="keyword">this</span>) &#125;    </span><br><span class="line">&#125;</span><br><span class="line">obj.a();  <span class="comment">// æ‰“å°ç»“æœï¼šobjå¯¹è±¡</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> obj = &#123;</span><br><span class="line">	a:<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>);</span><br><span class="line">    &#125;    </span><br><span class="line">&#125;</span><br><span class="line">obj.a();  <span class="comment">// æ‰“å°ç»“æœï¼š Windowå¯¹è±¡</span></span><br></pre></td></tr></table></figure>
<p>ä¸Šè¿°ä»£ç ä¸­ï¼Œç®­å¤´å‡½æ•°ä¸å¤–å±‚çš„thisä¿æŒä¸€è‡´ï¼Œæœ€å¤–å±‚çš„thiså°±æ˜¯Windowå¯¹è±¡ã€‚</p>
<h3 id="æ²¡æœ‰arguments"><a href="#æ²¡æœ‰arguments" class="headerlink" title="æ²¡æœ‰arguments"></a>æ²¡æœ‰arguments</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">func1</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">arguments</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> func2 = <span class="function">(<span class="params">a, b</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">arguments</span>);</span><br><span class="line">&#125;</span><br><span class="line">func1(<span class="number">1</span>, <span class="number">2</span>); <span class="comment">// Arguments(2)Â [1, 2, callee: Æ’, Symbol(Symbol.iterator): Æ’]</span></span><br><span class="line">func2(<span class="number">1</span>, <span class="number">2</span>); <span class="comment">// Uncaught ReferenceError: arguments is not defined</span></span><br></pre></td></tr></table></figure>
<p>å¦‚æœéè¦æ‰“å°å‡½æ•°å‚æ•°ï¼Œå¯ä»¥åœ¨ç®­å¤´å‡½æ•°ä¸­ä½¿ç”¨restå‚æ•°ä»£æ›¿argumentså¯¹è±¡</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> func2 = <span class="function">(<span class="params">...rest</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(rest); <span class="comment">// (2)Â [1, 2]</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="ä¸èƒ½é€šè¿‡-new-å…³é”®å­—è°ƒç”¨"><a href="#ä¸èƒ½é€šè¿‡-new-å…³é”®å­—è°ƒç”¨" class="headerlink" title="ä¸èƒ½é€šè¿‡ new å…³é”®å­—è°ƒç”¨"></a>ä¸èƒ½é€šè¿‡ new å…³é”®å­—è°ƒç”¨</h3><p>åœ¨æ„é€ å‡½æ•°ä¸­ï¼ŒthisæŒ‡å‘æ–°åˆ›å»ºçš„å¯¹è±¡å®ä¾‹</p>
<p>è€Œç®­å¤´å‡½æ•°æ²¡æœ‰ [[Construct]]æ–¹æ³•ï¼Œç®­å¤´å‡½æ•°ä¸å¯ä»¥å½“ä½œæ„é€ å‡½æ•°ï¼Œå¦‚æœè¿™æ ·åšä¼šæŠ›å‡ºå¼‚å¸¸</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> Person = <span class="function">(<span class="params">name</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Uncaught TypeError: Person is not a constructor</span></span><br><span class="line"><span class="keyword">var</span> person = <span class="keyword">new</span> Person(<span class="string">'jacky'</span>);</span><br></pre></td></tr></table></figure>
<p>ç®­å¤´å‡½æ•°åœ¨åˆ›å»ºæ—¶thiså¯¹è±¡å°±ç»‘å®šäº†ï¼Œæ•…ä¸ä¼šæŒ‡å‘å¯¹è±¡å®ä¾‹ã€‚</p>
<h3 id="æ²¡æœ‰-new-target"><a href="#æ²¡æœ‰-new-target" class="headerlink" title="æ²¡æœ‰ new.target"></a>æ²¡æœ‰ new.target</h3><p>new.targetæ˜¯ES6æ–°å¼•å…¥çš„å±æ€§ï¼Œæ™®é€šå‡½æ•°å¦‚æœé€šè¿‡newè°ƒç”¨ï¼Œnew.targetä¼šè¿”å›è¯¥å‡½æ•°çš„å¼•ç”¨ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Cat</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">new</span>.target); </span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> cat = <span class="keyword">new</span> Cat(); <span class="comment">// Æ’ Cat() &#123; console.log(new.target); &#125;</span></span><br></pre></td></tr></table></figure>
<p>æ­¤å±æ€§ä¸»è¦ï¼šç”¨äºç¡®å®šæ„é€ å‡½æ•°æ˜¯å¦ä¸ºnewè°ƒç”¨çš„ã€‚ </p>
<p>ç®­å¤´å‡½æ•°çš„thisæŒ‡å‘å…¨å±€å¯¹è±¡ï¼Œåœ¨ç®­å¤´å‡½æ•°ä¸­ä½¿ç”¨ç®­å¤´å‡½æ•°ä¼šæŠ¥é”™ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ™®é€šå‡½æ•°</span></span><br><span class="line"><span class="keyword">let</span> a = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">new</span>.target);</span><br><span class="line">&#125;</span><br><span class="line">a(); <span class="comment">// undefined</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç®­å¤´å‡½æ•°</span></span><br><span class="line"><span class="keyword">let</span> b = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">new</span>.target); <span class="comment">// æŠ¥é”™ï¼šUncaught SyntaxError: new.target expression is not allowed here</span></span><br><span class="line">&#125;;</span><br><span class="line">b();</span><br></pre></td></tr></table></figure>

<h3 id="æ²¡æœ‰åŸå‹"><a href="#æ²¡æœ‰åŸå‹" class="headerlink" title="æ²¡æœ‰åŸå‹"></a>æ²¡æœ‰åŸå‹</h3><p>ç”±äºä¸èƒ½é€šè¿‡ new å…³é”®å­—è°ƒç”¨ï¼Œä¸èƒ½ä½œä¸ºæ„é€ å‡½æ•°ï¼Œæ‰€ä»¥ç®­å¤´å‡½æ•°ä¸å­˜åœ¨ prototype è¿™ä¸ªå±æ€§ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> func = <span class="function"><span class="params">()</span> =&gt;</span> &#123;&#125;;</span><br><span class="line"><span class="built_in">console</span>.log(func.prototype) <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure>

<h3 id="æ²¡æœ‰-super"><a href="#æ²¡æœ‰-super" class="headerlink" title="æ²¡æœ‰ super"></a>æ²¡æœ‰ super</h3><p>ç®­å¤´å‡½æ•°æ²¡æœ‰åŸå‹ï¼Œæ•…ä¹Ÿä¸èƒ½é€šè¿‡ super æ¥è®¿é—®åŸå‹çš„å±æ€§ï¼Œæ‰€ä»¥ç®­å¤´å‡½æ•°ä¹Ÿæ˜¯æ²¡æœ‰ super çš„ã€‚åŒthisã€argumentsã€new.target ä¸€æ ·ï¼Œè¿™äº›å€¼ç”±å¤–å›´æœ€è¿‘ä¸€å±‚éç®­å¤´å‡½æ•°å†³å®šã€‚</p>
<h3 id="call-apply-bindæ–¹æ³•æ— æ³•æ”¹å˜ç®­å¤´å‡½æ•°ä¸­thisçš„æŒ‡å‘"><a href="#call-apply-bindæ–¹æ³•æ— æ³•æ”¹å˜ç®­å¤´å‡½æ•°ä¸­thisçš„æŒ‡å‘" class="headerlink" title="call/apply/bindæ–¹æ³•æ— æ³•æ”¹å˜ç®­å¤´å‡½æ•°ä¸­thisçš„æŒ‡å‘"></a>call/apply/bindæ–¹æ³•æ— æ³•æ”¹å˜ç®­å¤´å‡½æ•°ä¸­thisçš„æŒ‡å‘</h3><p>call()ã€apply()ã€bind()æ–¹æ³•çš„å…±åŒç‰¹ç‚¹æ˜¯å¯ä»¥æ”¹å˜thisçš„æŒ‡å‘ï¼Œç”¨æ¥åŠ¨æ€ä¿®æ”¹å‡½æ•°æ‰§è¡Œæ—¶thisçš„æŒ‡å‘ã€‚ä½†ç”±äºç®­å¤´å‡½æ•°çš„thiså®šä¹‰æ—¶å°±å·²ç»ç¡®å®šäº†ä¸”ä¸ä¼šæ”¹å˜ã€‚æ‰€ä»¥è¿™ä¸‰ä¸ªæ–¹æ³•æ°¸è¿œä¹Ÿæ”¹å˜ä¸äº†ç®­å¤´å‡½æ•°thisçš„æŒ‡å‘ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> name = <span class="string">'global name'</span>;</span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    name: <span class="string">'jacky'</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ç®­å¤´å‡½æ•°å®šä¹‰åœ¨å…¨å±€ä½œç”¨åŸŸ</span></span><br><span class="line"><span class="keyword">let</span> func = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">func();     <span class="comment">// global name</span></span><br><span class="line"><span class="comment">// thisçš„æŒ‡å‘ä¸ä¼šæ”¹å˜ï¼Œæ°¸è¿œæŒ‡å‘Windowå¯¹è±¡,æ”¾åˆ°åˆ°windowä¸‹çš„å…¨å±€å˜é‡</span></span><br><span class="line">func.call(obj);     <span class="comment">// global name</span></span><br><span class="line">func.apply(obj);    <span class="comment">// global name</span></span><br><span class="line">func.bind(obj)();   <span class="comment">// global name</span></span><br></pre></td></tr></table></figure>

<h3 id="ç®­å¤´å‡½æ•°çš„è§£æé¡ºåºç›¸å¯¹é å‰"><a href="#ç®­å¤´å‡½æ•°çš„è§£æé¡ºåºç›¸å¯¹é å‰" class="headerlink" title="ç®­å¤´å‡½æ•°çš„è§£æé¡ºåºç›¸å¯¹é å‰"></a>ç®­å¤´å‡½æ•°çš„è§£æé¡ºåºç›¸å¯¹é å‰</h3><p>è™½ç„¶ç®­å¤´å‡½æ•°ä¸­çš„ç®­å¤´ä¸æ˜¯è¿ç®—ç¬¦ï¼Œä½†ç®­å¤´å‡½æ•°å…·æœ‰ä¸å¸¸è§„å‡½æ•°ä¸åŒçš„ç‰¹æ®Šè¿ç®—ç¬¦ä¼˜å…ˆçº§è§£æè§„åˆ™ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> callback;</span><br><span class="line"></span><br><span class="line">callback = callback || <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;; <span class="comment">// ok</span></span><br><span class="line"></span><br><span class="line">callback = callback || <span class="function"><span class="params">()</span> =&gt;</span> &#123;&#125;;      </span><br><span class="line"><span class="comment">// SyntaxError:éæ³•ç®­å¤´å‡½æ•°å±æ€§</span></span><br><span class="line"></span><br><span class="line">callback = callback || <span class="function">(<span class="params">(</span>) =&gt;</span> &#123;&#125;);    <span class="comment">// ok</span></span><br></pre></td></tr></table></figure>

<h3 id="ç®­å¤´å‡½æ•°ä¸æ”¯æŒé‡åå‚æ•°"><a href="#ç®­å¤´å‡½æ•°ä¸æ”¯æŒé‡åå‚æ•°" class="headerlink" title="ç®­å¤´å‡½æ•°ä¸æ”¯æŒé‡åå‚æ•°"></a>ç®­å¤´å‡½æ•°ä¸æ”¯æŒé‡åå‚æ•°</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">a, a</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(a, <span class="built_in">arguments</span>); <span class="comment">// 2 Arguments(2)Â [1, 2, callee: Æ’, Symbol(Symbol.iterator): Æ’]</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> boo = <span class="function">(<span class="params">a, a</span>) =&gt;</span> &#123; <span class="comment">// ç›´æ¥æŠ¥é”™ï¼šUncaught SyntaxError: Duplicate parameter name not allowed in this context</span></span><br><span class="line">    <span class="built_in">console</span>.log(a);</span><br><span class="line">&#125;;</span><br><span class="line">foo(<span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line">boo(<span class="number">1</span>, <span class="number">2</span>);</span><br></pre></td></tr></table></figure>
<h3 id="1ä½¿ç”¨-yield-å…³é”®å­—"><a href="#1ä½¿ç”¨-yield-å…³é”®å­—" class="headerlink" title="1ä½¿ç”¨ yield å…³é”®å­—"></a>1ä½¿ç”¨ yield å…³é”®å­—</h3><p>yield å…³é”®å­—é€šå¸¸ä¸èƒ½åœ¨ç®­å¤´å‡½æ•°ä¸­ä½¿ç”¨ï¼ˆé™¤éæ˜¯åµŒå¥—åœ¨å…è®¸ä½¿ç”¨çš„å‡½æ•°å†…ï¼‰ã€‚å› æ­¤ï¼Œç®­å¤´å‡½æ•°ä¸èƒ½ç”¨ä½œç”Ÿæˆå™¨ï¼ˆ Generator ï¼‰ã€‚</p>
<h2 id="ç®­å¤´å‡½æ•°ä¸é€‚ç”¨çš„åœºæ™¯"><a href="#ç®­å¤´å‡½æ•°ä¸é€‚ç”¨çš„åœºæ™¯" class="headerlink" title="ç®­å¤´å‡½æ•°ä¸é€‚ç”¨çš„åœºæ™¯"></a>ç®­å¤´å‡½æ•°ä¸é€‚ç”¨çš„åœºæ™¯</h2><p><strong>1.ä¸åº”è¢«ç”¨åœ¨å®šä¹‰å¯¹è±¡çš„æ–¹æ³•ä¸Š</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  x: <span class="number">10</span>,</span><br><span class="line">  b: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log( <span class="keyword">this</span>.x, <span class="keyword">this</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  c: <span class="function"><span class="params">()</span> =&gt;</span> <span class="built_in">console</span>.log(<span class="keyword">this</span>.x, <span class="keyword">this</span>)</span><br><span class="line">&#125;</span><br><span class="line">obj.b(); <span class="comment">// 10  &#123;x: 10, b: Æ’, c: Æ’&#125;</span></span><br><span class="line"></span><br><span class="line">obj.c(); <span class="comment">// undefined Window</span></span><br></pre></td></tr></table></figure>
<p>å› ä¸ºå®ƒå†…éƒ¨thisçš„æŒ‡å‘åŸå› ï¼Œå½“ä½¿ç”¨obj.c()çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¸Œæœ›cæ–¹æ³•é‡Œé¢çš„thisæŒ‡å‘objï¼Œä½†æ˜¯å®ƒå´æŒ‡å‘äº†objæ‰€åœ¨ä¸Šä¸‹æ–‡ä¸­çš„thisï¼ˆå³windowï¼‰ï¼Œè¿èƒŒäº†æˆ‘ä»¬çš„éœ€æ±‚ï¼Œæ‰€ä»¥ç®­å¤´å‡½æ•°ä¸é€‚åˆä½œä¸ºå¯¹è±¡çš„æ–¹æ³•ã€‚</p>
<p><strong>2.å…·æœ‰åŠ¨æ€ä¸Šä¸‹æ–‡çš„å›è°ƒå‡½æ•°ï¼Œä¹Ÿä¸åº”ä½¿ç”¨ç®­å¤´å‡½æ•°</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> btn = <span class="built_in">document</span>.getElementById(<span class="string">'btn'</span>);</span><br><span class="line">btn.addEventListener(<span class="string">'click'</span>, () =&gt; &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>);</span><br><span class="line">&#125;);</span><br><span class="line">ä¸ºbtnçš„ç›‘å¬å‡½æ•°æ˜¯ä¸€ä¸ªç®­å¤´å‡½æ•°ï¼Œå¯¼è‡´é‡Œé¢çš„<span class="keyword">this</span>å°±æ˜¯å…¨å±€å¯¹è±¡,è€Œä¸ç¬¦åˆæˆ‘ä»¬æƒ³æ“ä½œæŒ‰é’®æœ¬èº«çš„éœ€æ±‚ã€‚å¦‚æœæ”¹æˆæ™®é€šå‡½æ•°ï¼Œ<span class="keyword">this</span>å°±ä¼šåŠ¨æ€æŒ‡å‘è¢«ç‚¹å‡»çš„æŒ‰é’®å¯¹è±¡</span><br></pre></td></tr></table></figure>

<p>é™¤äº†å‰é¢ä¸¤ç‚¹ï¼Œå‰©ä¸‹çš„è·Ÿä¸Šé¢è®²çš„ä¸æ™®é€šå‡½æ•°çš„åŒºåˆ«é‡å¤äº†ï¼Œæ•…åªä½œæ€»ç»“ä¸è´´ä»£ç äº†:</p>
<ol>
<li>ä¸åº”è¢«ç”¨åœ¨å®šä¹‰å¯¹è±¡çš„æ–¹æ³•ä¸Š</li>
<li>å…·æœ‰åŠ¨æ€ä¸Šä¸‹æ–‡çš„å›è°ƒå‡½æ•°ï¼Œä¹Ÿä¸åº”ä½¿ç”¨ç®­å¤´å‡½æ•°</li>
<li>ä¸èƒ½åº”ç”¨åœ¨æ„é€ å‡½æ•°ä¸­</li>
<li>é¿å…åœ¨ prototype ä¸Šä½¿ç”¨</li>
<li>é¿å…åœ¨éœ€è¦ arguments ä¸Šä½¿ç”¨</li>
</ol>
]]></content>
      <categories>
        <category>ES6ç³»åˆ—</category>
      </categories>
      <tags>
        <tag>ES6</tag>
      </tags>
  </entry>
  <entry>
    <title>ES6ç³»åˆ—ä¹‹æ¨¡æ¿å­—ç¬¦ä¸²</title>
    <url>/2020/01/05/ES6%E7%B3%BB%E5%88%97%E4%B9%8B%E6%A8%A1%E6%9D%BF%E5%AD%97%E7%AC%A6%E4%B8%B2/</url>
    <content><![CDATA[<p>æ¨¡æ¿å­—ç¬¦ä¸²æ˜¯ES6ä¸­éå¸¸é‡è¦çš„ä¸€ä¸ªæ–°ç‰¹æ€§ï¼Œè¿™ä¸ªç‰¹æ€§ä½¿å¾—å¤„ç†ç›¸å…³ä¸šåŠ¡å˜å¾—æ›´åŠ å®¹æ˜“ã€‚</p>
<a id="more"></a>
<h2 id="åŸºç¡€ç”¨æ³•"><a href="#åŸºç¡€ç”¨æ³•" class="headerlink" title="åŸºç¡€ç”¨æ³•"></a>åŸºç¡€ç”¨æ³•</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="string">`hello world`</span>;</span><br><span class="line"><span class="built_in">console</span>.log(a); <span class="comment">// hello world</span></span><br></pre></td></tr></table></figure>
<p>æ³¨æ„è¿™é‡Œä¸æ˜¯åŒå¼•å·ï¼Œè€Œæ˜¯åæ’‡å·`</p>
<p>åœ¨æ¨¡æ¿å­—ç¬¦ä¸²ä¸­ï¼Œè¿˜å¯ä»¥æ‹¼æ¥htmlå…ƒç´ ï¼ŒåŒæ—¶ç©ºæ ¼ã€ç¼©è¿›ã€æ¢è¡Œéƒ½ä¼šè¢«ä¿ç•™ï¼Œå¹¶ä¸”å¦‚æœæ¨¡æ¿å­—ç¬¦ä¸²ä¸­çš„å˜é‡æ²¡æœ‰å£°æ˜ï¼Œå°†æŠ¥é”™ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> str = <span class="string">`</span></span><br><span class="line"><span class="string">    &lt;div&gt;</span></span><br><span class="line"><span class="string">        &lt;ul&gt;</span></span><br><span class="line"><span class="string">            &lt;li&gt;11&lt;/li&gt;</span></span><br><span class="line"><span class="string">            &lt;li&gt;22&lt;/li&gt;</span></span><br><span class="line"><span class="string">        &lt;/ul&gt;</span></span><br><span class="line"><span class="string">    &lt;/div&gt;</span></span><br><span class="line"><span class="string">`</span>;</span><br></pre></td></tr></table></figure>
<p><img src="https://images.weserv.nl/?url=https://user-gold-cdn.xitu.io/2020/1/5/16f75f81fdc039fd?w=283&h=118&f=png&s=3077" alt=""></p>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>&lt;div&gt;</code>æ ‡ç­¾å‰é¢ä¼šæœ‰ä¸€ä¸ªæ¢è¡Œã€‚å¦‚æœä½ ä¸æƒ³è¦è¿™ä¸ªæ¢è¡Œï¼Œå¯ä»¥ä½¿ç”¨trimæ–¹æ³•æ¶ˆé™¤å®ƒã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> str = <span class="string">`</span></span><br><span class="line"><span class="string">    &lt;div&gt;</span></span><br><span class="line"><span class="string">        &lt;ul&gt;</span></span><br><span class="line"><span class="string">            &lt;li&gt;11&lt;/li&gt;</span></span><br><span class="line"><span class="string">            &lt;li&gt;22&lt;/li&gt;</span></span><br><span class="line"><span class="string">        &lt;/ul&gt;</span></span><br><span class="line"><span class="string">    &lt;/div&gt;</span></span><br><span class="line"><span class="string">`</span>.trim();</span><br><span class="line"><span class="built_in">console</span>.log(str);</span><br></pre></td></tr></table></figure>
<p><img src="https://images.weserv.nl/?url=https://user-gold-cdn.xitu.io/2020/1/5/16f75fa6f941fbc2?w=285&h=115&f=png&s=3098" alt=""></p>
<p>åœ¨æ¨¡ç‰ˆå­—ç¬¦ä¸²å†…ä½¿ç”¨åå¼•å·`æ—¶ï¼Œéœ€è¦åœ¨å®ƒå‰é¢åŠ è½¬ä¹‰ç¬¦\</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="string">`hello \\n`</span>;</span><br><span class="line"><span class="built_in">console</span>.log(a);</span><br></pre></td></tr></table></figure>

<h2 id="åµŒå…¥å˜é‡"><a href="#åµŒå…¥å˜é‡" class="headerlink" title="åµŒå…¥å˜é‡"></a>åµŒå…¥å˜é‡</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> name = <span class="string">'jacky'</span>;</span><br><span class="line"><span class="keyword">let</span> str = <span class="string">'æˆ‘å«'</span> + name + <span class="string">'ï¼Œå¤§å®¶å¥½'</span>;</span><br><span class="line"><span class="built_in">console</span>.log(str); <span class="comment">// æˆ‘å«jackyï¼Œå¤§å®¶å¥½</span></span><br></pre></td></tr></table></figure>
<p>å½“æœ‰å˜é‡å‚ä¸æ‹¼æ¥æ—¶ï¼ŒES5ä¸‹å¿…é¡»ç”¨+å·è¿™æ ·çš„å½¢å¼è¿›è¡Œæ‹¼æ¥ï¼Œè¿™æ ·å¾ˆéº»çƒ¦è€Œä¸”å¾ˆå®¹æ˜“å‡ºé”™ã€‚<br>ES6æ–°å¢äº†å­—ç¬¦ä¸²æ¨¡ç‰ˆï¼Œå¯ä»¥å¾ˆå¥½çš„è§£å†³è¿™ä¸ªé—®é¢˜ã€‚è¿™æ—¶å†å¼•ç”¨strå˜é‡å°±éœ€è¦ç”¨${name}è¿™ç§å½¢å¼äº†ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> name = <span class="string">'jacky'</span>;</span><br><span class="line"><span class="keyword">let</span> str = <span class="string">'æˆ‘å«$&#123;name&#125;ï¼Œå¤§å®¶å¥½'</span>;</span><br><span class="line"><span class="built_in">console</span>.log(str); <span class="comment">// æˆ‘å«jackyï¼Œå¤§å®¶å¥½</span></span><br></pre></td></tr></table></figure>
<p>å¦‚æœå¤§æ‹¬å·å†…éƒ¨æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå°†ä¼šåŸæ ·è¾“å‡ºï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> world = <span class="string">'666'</span>;</span><br><span class="line"><span class="keyword">let</span> a = <span class="string">`hello <span class="subst">$&#123;<span class="string">'world'</span>&#125;</span>`</span>;</span><br><span class="line"><span class="built_in">console</span>.log(a); <span class="comment">// hello world</span></span><br></pre></td></tr></table></figure>

<h2 id="å¯¹è¿ç®—çš„æ”¯æŒ"><a href="#å¯¹è¿ç®—çš„æ”¯æŒ" class="headerlink" title="å¯¹è¿ç®—çš„æ”¯æŒ"></a>å¯¹è¿ç®—çš„æ”¯æŒ</h2><p>åœ¨${}é‡Œé¢ï¼Œå¯ä»¥å†™ä»»æ„çš„JSè¡¨è¾¾å¼ï¼Œæ¯”å¦‚æˆ‘ä»¬ç”¨å®ƒè¿›è¡Œè¿ç®—</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">let</span> b = <span class="number">2</span>;</span><br><span class="line"><span class="keyword">let</span> c = <span class="string">`<span class="subst">$&#123;a+b&#125;</span>`</span>;</span><br><span class="line"><span class="built_in">console</span>.log(c); <span class="comment">//3</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> obj = &#123; <span class="attr">x</span>: <span class="number">1</span>, <span class="attr">y</span>: <span class="number">2</span> &#125;;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;obj.x + obj.y&#125;</span>`</span>); <span class="comment">// 3</span></span><br></pre></td></tr></table></figure>
<h2 id="æ¨¡æ¿å­—ç¬¦ä¸²è°ƒç”¨å‡½æ•°"><a href="#æ¨¡æ¿å­—ç¬¦ä¸²è°ƒç”¨å‡½æ•°" class="headerlink" title="æ¨¡æ¿å­—ç¬¦ä¸²è°ƒç”¨å‡½æ•°"></a>æ¨¡æ¿å­—ç¬¦ä¸²è°ƒç”¨å‡½æ•°</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"Hello World"</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">`foo <span class="subst">$&#123;fn()&#125;</span> bar`</span>); <span class="comment">// foo Hello World bar</span></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>ES6ç³»åˆ—</category>
      </categories>
      <tags>
        <tag>ES6</tag>
      </tags>
  </entry>
  <entry>
    <title>ES6ç³»åˆ—ä¹‹å˜é‡çš„è§£æ„èµ‹å€¼</title>
    <url>/2020/01/04/ES6%E7%B3%BB%E5%88%97%E4%B9%8B%E5%8F%98%E9%87%8F%E7%9A%84%E8%A7%A3%E6%9E%84%E8%B5%8B%E5%80%BC/</url>
    <content><![CDATA[<p>è§£æ„èµ‹å€¼åœ¨å¼€å‘ä¸­å¾ˆå¸¸ç”¨ï¼Œåœ¨æ­¤æ€»ç»“å®ƒçš„ç”¨æ³•â€¦</p>
<a id="more"></a>
<h2 id="ä»€ä¹ˆæ˜¯è§£æ„ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯è§£æ„ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯è§£æ„ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯è§£æ„ï¼Ÿ</h2><p>ES6å…è®¸æŒ‰ç…§ä¸€å®šæ¨¡å¼ï¼Œä»æ•°ç»„å’Œå¯¹è±¡ä¸­æå–å€¼ï¼Œå¯¹å˜é‡è¿›è¡Œèµ‹å€¼ï¼Œè¿™è¢«ç§°ä¸ºè§£æ„ã€‚å®ƒåœ¨è¯­æ³•ä¸Šæ¯”ES5æ‰€æä¾›çš„æ›´åŠ ç®€æ´ã€ç´§å‡‘ã€æ¸…æ™°ã€‚å®ƒä¸ä»…èƒ½å‡å°‘ä½ çš„ä»£ç é‡ï¼Œè¿˜èƒ½ä»æ ¹æœ¬ä¸Šæ”¹å˜ä½ çš„ç¼–ç æ–¹å¼ã€‚</p>
<h2 id="æ•°ç»„è§£æ„"><a href="#æ•°ç»„è§£æ„" class="headerlink" title="æ•°ç»„è§£æ„"></a>æ•°ç»„è§£æ„</h2><p>ä»¥å‰ï¼Œä¸ºå˜é‡èµ‹å€¼ï¼Œæˆ‘ä»¬åªèƒ½ç›´æ¥æŒ‡å®šå€¼ï¼Œæ¯”å¦‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">let</span> b = <span class="number">2</span>; </span><br><span class="line"><span class="keyword">let</span> c = <span class="number">3</span>;</span><br></pre></td></tr></table></figure>
<p>ç°åœ¨å¯ä»¥ç”¨æ•°ç»„è§£æ„çš„æ–¹å¼æ¥è¿›è¡Œèµ‹å€¼</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> [a, b, c] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="built_in">console</span>.log(a, b, c); <span class="comment">// 1, 2, 3</span></span><br></pre></td></tr></table></figure>
<p>è¿™æ˜¯æ•°ç»„è§£æ„æœ€åŸºæœ¬ç±»å‹çš„ç”¨æ³•ï¼Œè¿˜å¯ä»¥è§£æ„å¯¹è±¡æ•°ç»„</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å¯¹è±¡æ•°ç»„è§£æ„</span></span><br><span class="line"><span class="keyword">let</span> [a, b, c] = [&#123;<span class="attr">name</span>: <span class="string">'jacky'</span>&#125;, &#123;<span class="attr">name</span>: <span class="string">'monkey'</span>&#125;, &#123;<span class="attr">name</span>: <span class="string">'houge'</span>&#125;];</span><br><span class="line"><span class="built_in">console</span>.log(a, b, c); <span class="comment">// &#123;name: 'jacky'&#125;, &#123;name: 'monkey'&#125;, &#123;name: 'houge'&#125;</span></span><br></pre></td></tr></table></figure>

<h2 id="æ•°ç»„æ¨¡å¼å’Œèµ‹å€¼æ¨¡å¼ç»Ÿä¸€"><a href="#æ•°ç»„æ¨¡å¼å’Œèµ‹å€¼æ¨¡å¼ç»Ÿä¸€" class="headerlink" title="æ•°ç»„æ¨¡å¼å’Œèµ‹å€¼æ¨¡å¼ç»Ÿä¸€"></a>æ•°ç»„æ¨¡å¼å’Œèµ‹å€¼æ¨¡å¼ç»Ÿä¸€</h2><p>è¿™æ¡å¯ä»¥ç†è§£ä¸ºç­‰å·å·¦è¾¹å’Œç­‰å·å³è¾¹çš„å½¢å¼è¦ç»Ÿä¸€ï¼Œå¦‚æœä¸ç»Ÿä¸€è§£æ„å°†å¤±è´¥ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> [a, [b, c], d] = [<span class="number">1</span>, [<span class="number">2</span>, <span class="number">3</span>], <span class="number">4</span>];</span><br><span class="line"><span class="built_in">console</span>.log(a, b, c, d); <span class="comment">// 1 2 3 4</span></span><br><span class="line"></span><br><span class="line"> <span class="comment">// æå–é™¤ç¬¬äºŒã€ä¸‰ä¸ªå¤–çš„æ‰€æœ‰æ•°å€¼</span></span><br><span class="line"><span class="keyword">let</span> [a, , , d] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>];</span><br><span class="line"><span class="built_in">console</span>.log(a, d); <span class="comment">// 1 4</span></span><br><span class="line">    </span><br><span class="line"><span class="keyword">let</span> [a, ...b] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>];</span><br><span class="line"><span class="built_in">console</span>.log(a, b); <span class="comment">// 1 [2, 3, 4]</span></span><br><span class="line">        </span><br><span class="line"><span class="keyword">let</span> [a, , , ...d] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line"><span class="built_in">console</span>.log(a, d); <span class="comment">// 1 [4, 5]</span></span><br></pre></td></tr></table></figure>
<p>å¦‚æœè§£æ„ä¸æˆåŠŸï¼Œå˜é‡çš„å€¼å°±ç­‰äº<code>undefined</code></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> [a, b, c] = [<span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="built_in">console</span>.log(a, b, c); <span class="comment">// 2 3 undefined</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> [c] = [];</span><br><span class="line"><span class="built_in">console</span>.log(c); <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure>
<p>ä¸Šè¿°æ˜¯å®Œå…¨è§£æ„çš„æƒ…å†µï¼Œè¿˜æœ‰ä¸€ç§æ˜¯ä¸å®Œå…¨è§£æ„ï¼Œå³ç­‰å·å·¦è¾¹çš„æ¨¡å¼ï¼ŒåªåŒ¹é…ä¸€éƒ¨åˆ†çš„ç­‰å·å³è¾¹çš„æ•°ç»„ï¼Œè§£æ„ä¾ç„¶å¯ä»¥æˆåŠŸã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> [x, y] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]; </span><br><span class="line"><span class="built_in">console</span>.log(x, y); <span class="comment">// 1 2</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> [a, [b], d] = [<span class="number">1</span>, [<span class="number">2</span>, <span class="number">3</span>], <span class="number">4</span>];</span><br><span class="line"><span class="built_in">console</span>.log(a, b, d); <span class="comment">// 1 2 4</span></span><br></pre></td></tr></table></figure>

<h2 id="è§£æ„çš„é»˜è®¤å€¼"><a href="#è§£æ„çš„é»˜è®¤å€¼" class="headerlink" title="è§£æ„çš„é»˜è®¤å€¼"></a>è§£æ„çš„é»˜è®¤å€¼</h2><p>è§£æ„èµ‹å€¼å…è®¸æŒ‡å®šé»˜è®¤å€¼ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> [a, b=<span class="number">2</span>] = [<span class="number">1</span>];</span><br><span class="line"><span class="built_in">console</span>.log(a, b); <span class="comment">// 1 2</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> [a=<span class="number">1</span>, b=<span class="number">2</span>, c, d=<span class="number">13</span>] = [<span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>];</span><br><span class="line"><span class="built_in">console</span>.log(a, b, c, d); <span class="comment">// 10 11 12 13</span></span><br></pre></td></tr></table></figure>

<h2 id="å¯¹è±¡çš„è§£æ„èµ‹å€¼"><a href="#å¯¹è±¡çš„è§£æ„èµ‹å€¼" class="headerlink" title="å¯¹è±¡çš„è§£æ„èµ‹å€¼"></a>å¯¹è±¡çš„è§£æ„èµ‹å€¼</h2><p>å¯¹è±¡çš„è§£æ„ä¸æ•°ç»„æœ‰ä¸€ä¸ªé‡è¦çš„ä¸åŒã€‚æ•°ç»„çš„å…ƒç´ æ˜¯æŒ‰æ¬¡åºæ’åˆ—çš„ï¼Œå˜é‡çš„å–å€¼ç”±å®ƒçš„ä½ç½®å†³å®šï¼›è€Œå¯¹è±¡çš„å±æ€§æ²¡æœ‰æ¬¡åºï¼Œå˜é‡å¿…é¡»ä¸å±æ€§åŒåï¼Œæ‰èƒ½å–åˆ°æ­£ç¡®çš„å€¼ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// å¯¹è±¡è§£æ„èµ‹å€¼çš„å†…éƒ¨æœºåˆ¶ï¼Œæ˜¯å…ˆæ‰¾åˆ°åŒåå±æ€§ï¼Œç„¶åå†èµ‹ç»™å¯¹åº”çš„å˜é‡ã€‚çœŸæ­£è¢«èµ‹å€¼çš„æ˜¯åè€…ï¼Œè€Œéå‰è€…ã€‚</span></span><br><span class="line"><span class="keyword">let</span> obj = &#123; <span class="attr">a</span>: <span class="string">"aaa"</span>, <span class="attr">b</span>: <span class="string">"bbb"</span> &#125;;</span><br><span class="line"><span class="keyword">let</span> &#123; <span class="attr">a</span>: x, <span class="attr">b</span>: y &#125; = obj; </span><br><span class="line"><span class="built_in">console</span>.log(x, y); <span class="comment">// aaa bbb</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> &#123; a, b &#125; = &#123; <span class="attr">a</span>: <span class="string">'aaa'</span>, <span class="attr">b</span>: <span class="string">'bbb'</span> &#125;;</span><br><span class="line"><span class="built_in">console</span>.log(a, b); <span class="comment">// aaa bbb</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸æŒ‰ç…§é¡ºåº</span></span><br><span class="line"><span class="keyword">let</span> &#123; b, a &#125; = &#123; <span class="attr">a</span>: <span class="string">'test1'</span>, <span class="attr">b</span>: <span class="string">'test2'</span> &#125;</span><br><span class="line"><span class="built_in">console</span>.log(a, b) <span class="comment">// test1 test2</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// åµŒå¥—è§£æ„</span></span><br><span class="line"><span class="keyword">let</span> &#123; <span class="attr">obj</span>: &#123; name &#125;&#125; = &#123; <span class="attr">obj</span>: &#123; <span class="attr">name</span>: <span class="string">'jacky'</span>, <span class="attr">age</span>: <span class="string">'22'</span> &#125; &#125;</span><br><span class="line"><span class="built_in">console</span>.log(name) <span class="comment">// jacky</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç¨å¾®å¤æ‚çš„åµŒå¥—</span></span><br><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">    p: [</span><br><span class="line">        <span class="string">'Hello'</span>,</span><br><span class="line">        &#123; <span class="attr">y</span>: <span class="string">'World'</span> &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> &#123; <span class="attr">p</span>: [x, &#123; y &#125;] &#125; = obj;</span><br><span class="line"><span class="built_in">console</span>.log(x, y); <span class="comment">// Hello World</span></span><br></pre></td></tr></table></figure>
<p>å¦‚æœå˜é‡åä¸å±æ€§åä¸ä¸€è‡´ï¼Œå¿…é¡»å†™æˆä¸‹é¢è¿™æ ·ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> &#123; <span class="attr">foo</span>: rename &#125; = &#123; <span class="attr">foo</span>: <span class="string">"aaa"</span>,<span class="attr">bar</span>: <span class="string">"bbb"</span> &#125;;</span><br><span class="line"><span class="built_in">console</span>.log(rename); <span class="comment">// aaa</span></span><br><span class="line"><span class="built_in">console</span>.log(foo); <span class="comment">// Uncaught ReferenceError: foo is not defined</span></span><br></pre></td></tr></table></figure>
<p>å¦‚æœåœ¨è§£æ„ä¹‹å‰å°±å®šä¹‰äº†å˜é‡ï¼Œè¿™æ—¶å€™å†è§£æ„ä¼šå‡ºç°é—®é¢˜ã€‚ä¸‹é¢æ˜¯é”™è¯¯çš„ä»£ç ï¼Œç¼–è¯‘ä¼šæŠ¥é”™ï¼ˆå› ä¸ºjså¼•æ“ä¼šå°†{a}ç†è§£æˆä¸€ä¸ªä»£ç å—ï¼Œä»è€Œå‘ç”Ÿè¯­æ³•é”™è¯¯ã€‚åªæœ‰ä¸å°†å¤§æ‹¬å·å†™åœ¨è¡Œé¦–ï¼Œé¿å…jså°†å…¶è§£é‡Šæˆä»£ç å—ï¼Œæ‰èƒ½è§£å†³è¿™ä¸ªé—®é¢˜ï¼‰</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> a;</span><br><span class="line"><span class="keyword">let</span> obj = &#123; <span class="attr">a</span>: <span class="string">"aaa"</span> &#125;;</span><br><span class="line">&#123;a&#125; = obj; <span class="comment">// Uncaught SyntaxError: Unexpected token '='</span></span><br></pre></td></tr></table></figure>
<p>è¦è§£å†³æŠ¥é”™ï¼Œä½¿ç¨‹åºæ­£å¸¸ï¼Œè¿™æ—¶å€™åªè¦åœ¨è§£æ„çš„è¯­å¥å¤–è¾¹åŠ ä¸€ä¸ªåœ†æ‹¬å·å°±å¯ä»¥äº†</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> a;</span><br><span class="line"><span class="keyword">let</span> obj = &#123; <span class="attr">a</span>: <span class="string">"aaa"</span> &#125;;</span><br><span class="line">( &#123;a&#125; = obj );</span><br><span class="line"><span class="built_in">console</span>.log(a); <span class="comment">// aaa</span></span><br></pre></td></tr></table></figure>
<h2 id="å‡½æ•°å‚æ•°"><a href="#å‡½æ•°å‚æ•°" class="headerlink" title="å‡½æ•°å‚æ•°"></a>å‡½æ•°å‚æ•°</h2><p>å‡½æ•°çš„å‚æ•°ä¹Ÿå¯ä»¥ä½¿ç”¨è§£æ„èµ‹å€¼ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">[x, y]</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> x + y;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">add([<span class="number">1</span>, <span class="number">2</span>]); <span class="comment">// 3</span></span><br></pre></td></tr></table></figure>
<p>å‡½æ•°å‚æ•°çš„è§£æ„ä¹Ÿå¯ä»¥ä½¿ç”¨é»˜è®¤å€¼ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params">x, y = <span class="number">7</span></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> x + y;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(fn(<span class="number">3</span>)); <span class="comment">// 10</span></span><br></pre></td></tr></table></figure>

<h2 id="å­—ç¬¦ä¸²è§£æ„"><a href="#å­—ç¬¦ä¸²è§£æ„" class="headerlink" title="å­—ç¬¦ä¸²è§£æ„"></a>å­—ç¬¦ä¸²è§£æ„</h2><p>å­—ç¬¦ä¸²è¢«è½¬æ¢æˆäº†ä¸€ä¸ªç±»ä¼¼æ•°ç»„çš„å¯¹è±¡ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> [a, b, c, d, e, f] = <span class="string">"hello"</span>;</span><br><span class="line"><span class="built_in">console</span>.log(a); <span class="comment">//h</span></span><br><span class="line"><span class="built_in">console</span>.log(b); <span class="comment">//e</span></span><br><span class="line"><span class="built_in">console</span>.log(c); <span class="comment">//l</span></span><br><span class="line"><span class="built_in">console</span>.log(d); <span class="comment">//l</span></span><br><span class="line"><span class="built_in">console</span>.log(e); <span class="comment">//o</span></span><br><span class="line"><span class="built_in">console</span>.log(f); <span class="comment">//undefined</span></span><br></pre></td></tr></table></figure>

<h2 id="æ•°å€¼å’Œå¸ƒå°”å€¼çš„è§£æ„èµ‹å€¼"><a href="#æ•°å€¼å’Œå¸ƒå°”å€¼çš„è§£æ„èµ‹å€¼" class="headerlink" title="æ•°å€¼å’Œå¸ƒå°”å€¼çš„è§£æ„èµ‹å€¼"></a>æ•°å€¼å’Œå¸ƒå°”å€¼çš„è§£æ„èµ‹å€¼</h2><p>è§£æ„èµ‹å€¼æ—¶ï¼Œå¦‚æœç­‰å·å³è¾¹æ˜¯æ•°å€¼å’Œå¸ƒå°”å€¼ï¼Œåˆ™ä¼šå…ˆè½¬ä¸ºå¯¹è±¡ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> &#123;<span class="attr">toString</span>: s&#125; = <span class="number">0</span>;</span><br><span class="line"><span class="built_in">console</span>.log(s === <span class="built_in">Number</span>.prototype.toString); <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> &#123;<span class="attr">toString</span>: s&#125; = <span class="literal">true</span>;</span><br><span class="line"><span class="built_in">console</span>.log(s === <span class="built_in">Boolean</span>.prototype.toString); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<p>è§£æ„èµ‹å€¼çš„è§„åˆ™æ˜¯ï¼Œåªè¦ç­‰å·å³è¾¹çš„å€¼ä¸æ˜¯å¯¹è±¡æˆ–æ•°ç»„ï¼Œå°±å…ˆå°†å…¶è½¬ä¸ºå¯¹è±¡ã€‚ç”±äº<code>undefined</code>å’Œ<code>null</code>æ— æ³•è½¬ä¸ºå¯¹è±¡ï¼Œæ‰€ä»¥å¯¹å®ƒä»¬è¿›è¡Œè§£æ„èµ‹å€¼ï¼Œéƒ½ä¼šæŠ¥é”™ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> &#123; <span class="attr">prop</span>: x &#125; = <span class="literal">undefined</span>; <span class="comment">// TypeError</span></span><br><span class="line"><span class="keyword">let</span> &#123; <span class="attr">prop</span>: y &#125; = <span class="literal">null</span>; <span class="comment">// TypeError</span></span><br></pre></td></tr></table></figure>

<h2 id="è§£æ„èµ‹å€¼çš„åº”ç”¨"><a href="#è§£æ„èµ‹å€¼çš„åº”ç”¨" class="headerlink" title="è§£æ„èµ‹å€¼çš„åº”ç”¨"></a>è§£æ„èµ‹å€¼çš„åº”ç”¨</h2><h3 id="äº¤æ¢å˜é‡çš„å€¼"><a href="#äº¤æ¢å˜é‡çš„å€¼" class="headerlink" title="äº¤æ¢å˜é‡çš„å€¼"></a>äº¤æ¢å˜é‡çš„å€¼</h3><p>é€šå¸¸äº¤æ¢ä¸¤ä¸ªå˜é‡çš„æ–¹æ³•éœ€è¦ä¸€ä¸ªé¢å¤–çš„ä¸´æ—¶å˜é‡,å¦‚ä¸‹</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">let</span> b = <span class="number">2</span>;</span><br><span class="line"><span class="keyword">let</span> temp;</span><br><span class="line"></span><br><span class="line">temp = a;</span><br><span class="line">a = b;</span><br><span class="line">b = temp;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(a, b); <span class="comment">// 2 1</span></span><br></pre></td></tr></table></figure>
<p>ç”¨ES6è§£æ„èµ‹å€¼çš„è¯ï¼Œä¼šå˜å¾—å¾ˆç®€æ´</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">let</span> b = <span class="number">2</span>;</span><br><span class="line">[a, b] = [b ,a];</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(a, b); <span class="comment">// 2 1</span></span><br></pre></td></tr></table></figure>

<h3 id="ä»å‡½æ•°è¿”å›å¤šä¸ªå€¼"><a href="#ä»å‡½æ•°è¿”å›å¤šä¸ªå€¼" class="headerlink" title="ä»å‡½æ•°è¿”å›å¤šä¸ªå€¼"></a>ä»å‡½æ•°è¿”å›å¤šä¸ªå€¼</h3><p>å‡½æ•°åªèƒ½è¿”å›ä¸€ä¸ªå€¼ï¼Œå¦‚æœè¦è¿”å›å¤šä¸ªå€¼ï¼Œåªèƒ½å°†å®ƒä»¬æ”¾åœ¨æ•°ç»„æˆ–å¯¹è±¡é‡Œè¿”å›ã€‚æœ‰äº†è§£æ„èµ‹å€¼ï¼Œå–å‡ºè¿™äº›å€¼å°±éå¸¸æ–¹ä¾¿ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// è¿”å›ä¸€ä¸ªæ•°ç»„</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">example</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> [a, b, c] = example();</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿”å›ä¸€ä¸ªå¯¹è±¡</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">example</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    foo: <span class="number">1</span>,</span><br><span class="line">    bar: <span class="number">2</span></span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> &#123; foo, bar &#125; = example();</span><br></pre></td></tr></table></figure>

<h3 id="è®¿é—®æ•°ç»„ä¸­å…ƒç´ "><a href="#è®¿é—®æ•°ç»„ä¸­å…ƒç´ " class="headerlink" title="è®¿é—®æ•°ç»„ä¸­å…ƒç´ "></a>è®¿é—®æ•°ç»„ä¸­å…ƒç´ </h3><p>æœ‰ç§åœºæ™¯ï¼Œæ¯”å¦‚æœ‰ä¸€ä¸ªæ•°ç»„ï¼ˆå¯èƒ½ä¸ºç©ºï¼‰ã€‚å¹¶ä¸”å¸Œæœ›è®¿é—®æ•°ç»„çš„ç¬¬ä¸€ä¸ªã€ç¬¬äºŒä¸ªæˆ–ç¬¬nä¸ªé¡¹ï¼Œä½†å¦‚æœè¯¥é¡¹ä¸å­˜åœ¨ï¼Œåˆ™ä½¿ç”¨æŒ‡å®šé»˜è®¤å€¼ã€‚<br>é€šå¸¸ä¼šä½¿ç”¨æ•°ç»„çš„<code>length</code>å±æ€§æ¥åˆ¤æ–­</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> list = [];</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> firstItem = <span class="string">'hello'</span>;</span><br><span class="line"><span class="keyword">if</span> (list.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    firstItem = list[<span class="number">0</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(firstItem); <span class="comment">// hello</span></span><br></pre></td></tr></table></figure>
<p>å¦‚æœç”¨ES6è§£æ„èµ‹å€¼æ¥å®ç°ä¸Šè¿°é€»è¾‘</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> list = [];</span><br><span class="line"><span class="keyword">const</span> [firstItem = <span class="string">'hello'</span>] = list;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(firstItem); <span class="comment">// 'hello'</span></span><br></pre></td></tr></table></figure>

<h3 id="æå–-JSON-æ•°æ®"><a href="#æå–-JSON-æ•°æ®" class="headerlink" title="æå– JSON æ•°æ®"></a>æå– JSON æ•°æ®</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> jsonData = &#123;</span><br><span class="line">  id: <span class="number">42</span>,</span><br><span class="line">  status: <span class="string">"OK"</span>,</span><br><span class="line">  data: [<span class="number">867</span>, <span class="number">5309</span>]</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> &#123; id, status, <span class="attr">data</span>: number &#125; = jsonData;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(id, status, number);</span><br><span class="line"><span class="comment">// 42, "OK", [867, 5309]</span></span><br></pre></td></tr></table></figure>

<h3 id="éå†-Map-ç»“æ„"><a href="#éå†-Map-ç»“æ„" class="headerlink" title="éå† Map ç»“æ„"></a>éå† Map ç»“æ„</h3><p>ä»»ä½•éƒ¨ç½²äº† Iterator æ¥å£çš„å¯¹è±¡ï¼Œéƒ½å¯ä»¥ç”¨<code>for...of</code>å¾ªç¯éå†ã€‚Map ç»“æ„åŸç”Ÿæ”¯æŒ Iterator æ¥å£ï¼Œé…åˆå˜é‡çš„è§£æ„èµ‹å€¼ï¼Œè·å–é”®åå’Œé”®å€¼å°±éå¸¸æ–¹ä¾¿ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line">map.set(<span class="string">'first'</span>, <span class="string">'hello'</span>);</span><br><span class="line">map.set(<span class="string">'second'</span>, <span class="string">'world'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> [key, value] <span class="keyword">of</span> map) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(key + <span class="string">" is "</span> + value);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// first is hello</span></span><br><span class="line"><span class="comment">// second is world</span></span><br></pre></td></tr></table></figure>
<p>å¦‚æœåªæƒ³è·å–é”®åï¼Œæˆ–è€…åªæƒ³è·å–é”®å€¼ï¼Œå¯ä»¥å†™æˆä¸‹é¢è¿™æ ·ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// è·å–é”®å</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> [key] <span class="keyword">of</span> map) &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–é”®å€¼</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> [,value] <span class="keyword">of</span> map) &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>æ–‡ç« éƒ¨åˆ†å†…å®¹å‚è€ƒï¼šé˜®ä¸€å³°è€å¸ˆçš„ã€ŠECMAScript 6 å…¥é—¨ã€‹ä¸€ä¹¦</li>
</ul>
]]></content>
      <categories>
        <category>ES6ç³»åˆ—</category>
      </categories>
      <tags>
        <tag>ES6</tag>
      </tags>
  </entry>
  <entry>
    <title>ES6ç³»åˆ—ä¹‹letå’Œconstä¸varçš„åŒºåˆ«</title>
    <url>/2019/12/28/ES6%E7%B3%BB%E5%88%97%E4%B9%8Blet%E5%92%8Cconst%E4%B8%8Evar%E7%9A%84%E5%8C%BA%E5%88%AB/</url>
    <content><![CDATA[<p>ES6è§„èŒƒæ–°å¢äº†letã€constä¸¤ç§å˜é‡å£°æ˜æ–¹å¼ï¼Œé¡¹ç›®ä¸­ä¹Ÿç»å¸¸è¦ç”¨åˆ°ï¼Œä»Šå¤©å€Ÿç€æ¸©ä¹ ES6è¯­æ³•ï¼Œæ¥æ€»ç»“let ã€constã€varçš„åŒºåˆ«ã€‚</p>
<a id="more"></a>

<h2 id="å˜é‡æå‡"><a href="#å˜é‡æå‡" class="headerlink" title="å˜é‡æå‡"></a>å˜é‡æå‡</h2><p>æ¥çœ‹ä¸‹é¢ä¸‰æ®µä»£ç </p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(a); <span class="comment">// undefined</span></span><br><span class="line"><span class="keyword">var</span> a = <span class="number">2</span>;</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(b); <span class="comment">// Uncaught ReferenceError: b is not defined</span></span><br><span class="line"><span class="keyword">let</span> b = <span class="number">2</span>;</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(c); <span class="comment">// Uncaught ReferenceError: c is not defined</span></span><br><span class="line"><span class="keyword">const</span> c = <span class="number">2</span>;</span><br></pre></td></tr></table></figure>

<p>ç”¨varå£°æ˜çš„å˜é‡ï¼Œä¼šåœ¨å…¶ä½œç”¨åŸŸä¸­å‘ç”Ÿå˜é‡æå‡ï¼Œjsé»˜è®¤ç»™å˜é‡ä¸€ä¸ªundefinedå€¼ã€‚</p>
<p>ä½†æ˜¯ï¼Œåœ¨ES6ä¸­ä½¿ç”¨let/constå£°æ˜çš„å˜é‡ï¼Œä¸å­˜åœ¨å˜é‡æå‡è¿‡ç¨‹ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨ä½¿ç”¨let/constå£°æ˜çš„å˜é‡ï¼Œå£°æ˜å‰è®¿é—®å®ƒï¼Œéƒ½ä¼šæŠ¥é”™ã€‚</p>
<h2 id="æš‚æ—¶æ€§æ­»åŒº"><a href="#æš‚æ—¶æ€§æ­»åŒº" class="headerlink" title="æš‚æ—¶æ€§æ­»åŒº"></a>æš‚æ—¶æ€§æ­»åŒº</h2><blockquote>
<p>ä»£ç å—å†…ï¼Œä½¿ç”¨letå‘½ä»¤å£°æ˜å˜é‡ä¹‹å‰ï¼Œè¯¥å˜é‡éƒ½æ˜¯ä¸å¯ç”¨çš„ã€‚è¿™åœ¨è¯­æ³•ä¸Šï¼Œç§°ä¸ºâ€œæš‚æ—¶æ€§æ­»åŒºâ€ï¼ˆtemporal dead zoneï¼Œç®€ç§° TDZï¼‰ã€‚</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="string">'global'</span>;</span><br><span class="line"><span class="keyword">if</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">    a = <span class="string">'block'</span>;    <span class="comment">// Uncaught ReferenceError: a is not defined</span></span><br><span class="line">    <span class="keyword">let</span> a;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸Šè¿°ä»£ç ä¸­ï¼Œifä»£ç å—é‡Œï¼Œåœ¨letå£°æ˜å˜é‡aä¹‹å‰ï¼Œéƒ½æ˜¯açš„â€æš‚æ—¶æ€§æ­»åŒºâ€,åœ¨è¯¥èŒƒå›´å†…è®¿é—®aéƒ½ä¼šæŠ¥é”™ã€‚<br>ç”±æ­¤å¯è§ï¼Œå—çº§ä½œç”¨åŸŸå†…å­˜åœ¨letå£°æ˜çš„è¯ï¼Œå®ƒæ‰€å£°æ˜çš„å˜é‡å°±ç»‘å®šåœ¨è¿™ä¸ªå—çº§ä½œç”¨åŸŸï¼Œä¸å†å—å¤–éƒ¨å½±å“ã€‚</p>
<h2 id="é‡å¤å£°æ˜"><a href="#é‡å¤å£°æ˜" class="headerlink" title="é‡å¤å£°æ˜"></a>é‡å¤å£°æ˜</h2><p>let å’Œ const å‘½ä»¤å£°æ˜çš„å˜é‡ä¸å…è®¸é‡å¤å£°æ˜ï¼›è€Œä½¿ç”¨varå£°æ˜å˜é‡ï¼Œå¯ä»¥å¤šæ¬¡é‡å¤å£°æ˜ä¸€ä¸ªåŒåå˜é‡ï¼Œä½†æœ€ç»ˆå˜é‡çš„å€¼ä¸ºæœ€åä¸€æ¬¡å£°æ˜èµ‹å€¼çš„ç»“æœã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">var</span> a = <span class="string">'abc'</span>;</span><br><span class="line"><span class="keyword">var</span> a = <span class="string">'last value'</span>;</span><br><span class="line"><span class="built_in">console</span>.log(a);  <span class="comment">// last value</span></span><br></pre></td></tr></table></figure>

<p>letä¸conståœ¨ç›¸åŒä½œç”¨åŸŸå£°æ˜é‡å¤çš„å˜é‡ä¼šæŠ¥é”™</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">let</span> a = <span class="number">20</span>; <span class="comment">// Uncaught SyntaxError: Identifier 'a' has already been declared</span></span><br></pre></td></tr></table></figure>
<p>varå’ŒletåŒæ—¶å£°æ˜åŒä¸€ä¸ªå˜é‡ï¼Œä¹Ÿæ˜¯æŠ¥åŒæ ·çš„é”™è¯¯</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> b = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">var</span> b = <span class="number">20</span>; <span class="comment">// Uncaught SyntaxError: Identifier 'b' has already been declared</span></span><br></pre></td></tr></table></figure>
<p>æˆ–å…ˆvarï¼Œå†let</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> c = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">let</span> c = <span class="number">20</span>; <span class="comment">// Uncaught SyntaxError: Identifier 'c' has already been declared</span></span><br></pre></td></tr></table></figure>

<h2 id="ä½œç”¨åŸŸ"><a href="#ä½œç”¨åŸŸ" class="headerlink" title="ä½œç”¨åŸŸ"></a>ä½œç”¨åŸŸ</h2><p>è¿™é‡Œå°±æ¶‰åŠåˆ°ä¸€ä¸ªæœ€ç»å…¸çš„é—®é¢˜ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123; </span><br><span class="line">    setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; </span><br><span class="line">        <span class="built_in">console</span>.log(i); <span class="comment">// 5 5 5 5 5 </span></span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™ä¸ªé—®é¢˜çš„è§£å†³å¯ä»¥ä½¿ç”¨é—­åŒ…ç­‰ï¼ŒES6çš„letä¸ºè¿™ä¸ªé—®é¢˜æä¾›äº†æ–°çš„è§£å†³æ–¹æ³•ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123; </span><br><span class="line">    setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; </span><br><span class="line">        <span class="built_in">console</span>.log(i); <span class="comment">// 0 1 2 3 4</span></span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨letå£°æ˜çš„å˜é‡ä»…åœ¨å—çº§ä½œç”¨åŸŸå†…æœ‰æ•ˆã€‚ iåœ¨å¾ªç¯ä½“å†…çš„å±€éƒ¨ä½œç”¨åŸŸï¼Œä¸å—å¤–ç•Œå½±å“ã€‚</p>
<p>åœ¨ES6ä¹‹å‰ï¼Œéƒ½æ˜¯ç”¨varæ¥å£°æ˜å˜é‡ï¼Œè€Œä¸”JSåªæœ‰å‡½æ•°ä½œç”¨åŸŸå’Œå…¨å±€ä½œç”¨åŸŸï¼Œæ²¡æœ‰å—çº§ä½œç”¨åŸŸï¼Œæ‰€ä»¥èŠ±æ‹¬å·{}é™å®šä¸äº†varå£°æ˜å˜é‡çš„è®¿é—®èŒƒå›´ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&#123; </span><br><span class="line">  <span class="keyword">var</span> a = <span class="number">10</span>;</span><br><span class="line">&#125; </span><br><span class="line"><span class="built_in">console</span>.log(a);  <span class="comment">// 10</span></span><br><span class="line"></span><br><span class="line">&#123; </span><br><span class="line">  <span class="keyword">let</span> b = <span class="number">9</span>;     <span class="comment">// es6çš„let: bå˜é‡åªåœ¨èŠ±æ‹¬å·å†…æœ‰æ•ˆ</span></span><br><span class="line">&#125; </span><br><span class="line"><span class="built_in">console</span>.log(b);  <span class="comment">// Uncaught ReferenceError: b is not defined</span></span><br></pre></td></tr></table></figure>

<h2 id="letã€constå£°æ˜çš„å…¨å±€å˜é‡ä¸ä¼šä½œä¸ºwindowå¯¹è±¡çš„ä¸€ä¸ªå±æ€§"><a href="#letã€constå£°æ˜çš„å…¨å±€å˜é‡ä¸ä¼šä½œä¸ºwindowå¯¹è±¡çš„ä¸€ä¸ªå±æ€§" class="headerlink" title="letã€constå£°æ˜çš„å…¨å±€å˜é‡ä¸ä¼šä½œä¸ºwindowå¯¹è±¡çš„ä¸€ä¸ªå±æ€§"></a>letã€constå£°æ˜çš„å…¨å±€å˜é‡ä¸ä¼šä½œä¸ºwindowå¯¹è±¡çš„ä¸€ä¸ªå±æ€§</h2><p>ä½¿ç”¨varå£°æ˜çš„å…¨å±€å˜é‡ï¼Œä¼šè¢«JSè‡ªåŠ¨æ·»åŠ åœ¨å…¨å±€å¯¹è±¡windowä¸Šï¼Œä½†letå’Œconstä¸ä¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="number">10</span>;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">window</span>.a); <span class="comment">// undefined</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> b = <span class="number">20</span>;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">window</span>.b); <span class="comment">// 20</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> c = <span class="number">30</span>;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">window</span>.c); <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure>



<h2 id="constå£°æ˜å¸¸é‡"><a href="#constå£°æ˜å¸¸é‡" class="headerlink" title="constå£°æ˜å¸¸é‡"></a>constå£°æ˜å¸¸é‡</h2><p>ç”±äºconstç”¨æ¥å£°æ˜å¸¸é‡ï¼Œä¸€æ—¦å£°æ˜ï¼Œå°±å¿…é¡»ç«‹å³åˆå§‹åŒ–ï¼Œè€Œä¸”å£°æ˜ä¹‹åå€¼ä¸èƒ½æ”¹å˜ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> a = <span class="number">10</span>;</span><br><span class="line">a = <span class="number">20</span>; <span class="comment">// Uncaught TypeError: Assignment to constant variable.</span></span><br></pre></td></tr></table></figure>

<p>å¸¸é‡çš„å€¼ä¸å˜ï¼Œå®é™…ä¸Šæ˜¯æŒ‡å¸¸é‡æŒ‡å‘çš„é‚£ä¸ªå†…å­˜åœ°å€ä¸­æ‰€ä¿å­˜çš„æ•°æ®ä¸å¯æ›´æ”¹ã€‚</p>
<p>å¯¹äºåŸºæœ¬æ•°æ®ç±»å‹ï¼ˆæ•°å€¼ï¼Œå­—ç¬¦ä¸²ã€å¸ƒå°”å€¼ï¼‰ï¼Œä»–ä»¬æœ¬èº«å…·ä½“çš„å€¼å°±ä¿å­˜åœ¨å¸¸é‡æ‰€æŒ‡å‘å¯¹åº”çš„æ ˆå†…å­˜åœ°å€ä¸­ï¼Œæ‰€ä»¥ä¿®æ”¹å€¼å°±ç­‰äºä¿®æ”¹æ ˆå†…å­˜åœ°å€ï¼Œè¿™æ˜¾ç„¶ä¸å…è®¸ä¼šæŠ¥é”™ã€‚</p>
<p>ä½†æ˜¯ï¼Œå¦‚æœä¸€ä¸ªå¸¸é‡çš„å€¼æ˜¯ä¸€ä¸ªå¼•ç”¨ç±»å‹å€¼ï¼Œé‚£ä¹ˆå¸¸é‡æ‰€æŒ‡å‘çš„å†…å­˜åœ°å€ï¼ˆå †å†…å­˜ï¼‰ä¸­å®é™…ä¿å­˜çš„æ˜¯æŒ‡å‘è¯¥å¼•ç”¨ç±»å‹å€¼çš„ä¸€ä¸ªæŒ‡é’ˆï¼ˆä¹Ÿå°±æ˜¯å¼•ç”¨ç±»å‹å€¼åœ¨å†…å­˜ä¸­çš„åœ°å€ï¼‰ã€‚æ‰€ä»¥conståªèƒ½ä¿è¯è¯¥å¼•ç”¨ç±»å‹åœ°å€ä¸å˜ï¼Œä½†è¯¥åœ°å€ä¸­çš„å…·ä½“æ•°æ®æ˜¯å¯ä»¥å˜åŒ–çš„ã€‚</p>
<p>å¦‚ä¸‹ä»£ç ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123;&#125;;</span><br><span class="line">obj.a = <span class="number">3</span>;</span><br><span class="line"><span class="built_in">console</span>.log(obj); <span class="comment">// &#123;a: 3&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å½“objæŒ‡å‘äº†å¦ä¸€ä¸ªå¯¹è±¡ï¼Œå³objä¸­ä¿å­˜çš„åœ°å€å‘ç”Ÿäº†å˜åŒ–ï¼Œå³ä¼šæŠ¥é”™</span></span><br><span class="line">obj = &#123;&#125;;  <span class="comment">// Uncaught TypeError: Assignment to constant variable.</span></span><br></pre></td></tr></table></figure>

<h2 id="å¦‚ä½•æ­£ç¡®ä½¿ç”¨"><a href="#å¦‚ä½•æ­£ç¡®ä½¿ç”¨" class="headerlink" title="å¦‚ä½•æ­£ç¡®ä½¿ç”¨"></a>å¦‚ä½•æ­£ç¡®ä½¿ç”¨</h2><p>åœ¨å¼€å‘çš„æ—¶å€™ï¼Œå£°æ˜å˜é‡æˆ‘ä»¬åº”è¯¥å°‘ä½¿ç”¨varï¼Œé¿å…äº§ç”Ÿä¸å¿…è¦çš„å…¨å±€å˜é‡ã€‚å½“éœ€è¦æ”¹å˜å˜é‡çš„å€¼æ—¶å£°æ˜ç”¨letï¼Œå¯¹äºéœ€è¦å†™ä¿æŠ¤çš„å˜é‡æˆ–å®šä¹‰å¸¸é‡ä½¿ç”¨constã€‚</p>
]]></content>
      <categories>
        <category>ES6ç³»åˆ—</category>
      </categories>
      <tags>
        <tag>ES6</tag>
      </tags>
  </entry>
  <entry>
    <title>swiperçˆ¶çº§å…ƒç´ å¤„äºéšè—çŠ¶æ€æ»šåŠ¨æ•ˆæœå¤±æ•ˆé—®é¢˜</title>
    <url>/2019/12/25/swiper%E7%88%B6%E7%BA%A7%E5%85%83%E7%B4%A0%E5%A4%84%E4%BA%8E%E9%9A%90%E8%97%8F%E7%8A%B6%E6%80%81%E6%BB%9A%E5%8A%A8%E6%95%88%E6%9E%9C%E5%A4%B1%E6%95%88%E9%97%AE%E9%A2%98/</url>
    <content><![CDATA[<p>åœ¨ä½¿ç”¨vue-awesome-swiperçš„æ—¶å€™ï¼Œå®ç°è¿™æ ·ä¸€ä¸ªåŠŸèƒ½, ç‚¹å‡»é¡µé¢çš„bannerå›¾ï¼ˆBanner.vueï¼‰ï¼Œè¿›å…¥ä¸€ä¸ªå›¾ç‰‡ç”»å»Šï¼ˆGallary.vueï¼‰ï¼Œå¯ä»¥æŸ¥çœ‹æ›´å¤šç›¸å…³çš„ç…§ç‰‡ï¼Œä½†å‘ç°è½®æ’­å›¾æ»šåŠ¨æ•ˆæœå¤±æ•ˆ,æœ¬æ–‡å°†è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p>
<a id="more"></a>
<p><img src="https://user-gold-cdn.xitu.io/2019/12/25/16f3aa7f03be6109?w=432&h=764&f=gif&s=1825248" alt=""></p>
<p>åŸå› æ˜¯ï¼šä¸€å¼€å§‹Gallay.vueçš„æ‰€æœ‰ç”¨swiperæ§åˆ¶çš„å›¾ç‰‡å¤„äºéšè—çŠ¶æ€ï¼Œç›´åˆ°ç‚¹å‡»æ‰è¿›å…¥å›¾ç‰‡ç”»å»Šæ˜¾ç¤ºå›¾ç‰‡ã€‚swiperå…¶çˆ¶çº§å…ƒç´ å¤„äºéšè—çŠ¶æ€(display:none), ä¼šå¯¼è‡´swiperåˆå§‹åŒ–å¤±è´¥, é¡µé¢ä¸­çš„æ»šåŠ¨æ•ˆæœå°±ä¼šæœ‰é—®é¢˜ã€‚</p>
<p>Gallary.vueçš„ç»“æ„</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container"</span>  @<span class="attr">click</span>=<span class="string">"handleGallaryClick"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"wrapper"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">swiper</span> <span class="attr">:options</span>=<span class="string">"swiperOption"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">swiper-slide</span> <span class="attr">v-for</span>=<span class="string">"(item, index) of imgs"</span> <span class="attr">:key</span>=<span class="string">"index"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">"swiper-img"</span> <span class="attr">:src</span>=<span class="string">"item"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">swiper-slide</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"swiper-pagination"</span> <span class="attr">slot</span>=<span class="string">"pagination"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">swiper</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>ä¸€å¼€å§‹Gallaryç»„ä»¶éƒ½æ˜¯é€šè¿‡çˆ¶ç»„ä»¶Bannerçš„v-showå€¼è®¾ç½®å¤„äºéšè—çŠ¶æ€</p>
<p>è§£å†³åŠæ³•ï¼š<br>é€šè¿‡swiperçš„é…ç½®é¡¹ï¼š</p>
<blockquote>
<p>observer<br>å¯åŠ¨åŠ¨æ€æ£€æŸ¥å™¨(OB/è§‚ä¼—/è§‚çœ‹è€…)ï¼Œå½“æ”¹å˜swiperçš„æ ·å¼ï¼ˆä¾‹å¦‚éšè—/æ˜¾ç¤ºï¼‰æˆ–è€…ä¿®æ”¹swiperçš„å­å…ƒç´ æ—¶</p>
</blockquote>
<blockquote>
<p>observeParents<br>å°†observeåº”ç”¨äºSwiperçš„çˆ¶å…ƒç´ ã€‚å½“Swiperçš„çˆ¶å…ƒç´ å˜åŒ–æ—¶ï¼Œä¾‹å¦‚window.resizeï¼ŒSwiperæ›´æ–°ã€‚</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">data () &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">        swiperOption: &#123;</span><br><span class="line">            pagination : &#123;</span><br><span class="line">                el: &#39;.swiper-pagination&#39;,</span><br><span class="line">                type: &#39;fraction&#39;</span><br><span class="line">            &#125;,</span><br><span class="line">            observeParents: true, &#x2F;&#x2F;ä¿®æ”¹swiperçš„çˆ¶å…ƒç´ æ—¶ï¼Œè‡ªåŠ¨åˆå§‹åŒ–swiper</span><br><span class="line">            observer: true   &#x2F;&#x2F;ä¿®æ”¹swiperè‡ªå·±æˆ–å­å…ƒç´ æ—¶ï¼Œè‡ªåŠ¨åˆå§‹åŒ–swiper</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p><img src="https://user-gold-cdn.xitu.io/2019/12/25/16f3ab29259088a7?w=431&h=759&f=gif&s=974520" alt=""></p>
]]></content>
      <categories>
        <category>Vue</category>
      </categories>
      <tags>
        <tag>Vue</tag>
      </tags>
  </entry>
  <entry>
    <title>è‡ªå®šä¹‰checkboxæ ·å¼</title>
    <url>/2019/12/14/%E8%87%AA%E5%AE%9A%E4%B9%89checkbox%E6%A0%B7%E5%BC%8F/</url>
    <content><![CDATA[<p>ç”±äºåŸç”Ÿçš„checkboxæ ·å¼æ¯”è¾ƒéš¾çœ‹ï¼Œæ‰€ä»¥æˆ‘ä»¬ç»å¸¸éœ€è¦æ”¹å†™å®ƒçš„æ ·å¼ï¼Œç¾åŒ–å¤é€‰æ¡†ï¼Œæ‰€ä»¥ä»Šå¤©æ€»ç»“ä¸‹è‡ªå®šä¹‰checkboxæ ·å¼çš„æ–¹æ³•</p>
<a id="more"></a>
<p>htmlæ–‡ä»¶</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">"checkbox-inline"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">class</span>=<span class="string">"checkbox"</span> <span class="attr">name</span>=<span class="string">"hobby"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"hobby"</span>&gt;</span>ç¾½æ¯›çƒ<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"checkmark"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">"checkbox-inline"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">class</span>=<span class="string">"checkbox"</span> <span class="attr">name</span>=<span class="string">"hobby"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"hobby"</span>&gt;</span>è·‘æ­¥<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"checkmark"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>css</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.checkbox-inline</span>&#123;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.checkbox</span>&#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.checkmark</span>&#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">2px</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">15px</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">15px</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#fff</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.hobby</span>&#123;</span><br><span class="line">    <span class="attribute">padding-left</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.checkbox-inline</span> <span class="selector-tag">input</span><span class="selector-pseudo">:checked</span> ~ <span class="selector-class">.checkmark</span> &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#492c94</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.checkbox-inline</span> <span class="selector-tag">input</span><span class="selector-pseudo">:checked</span> ~ <span class="selector-class">.checkmark</span><span class="selector-pseudo">:after</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.checkbox-inline</span> <span class="selector-class">.checkmark</span><span class="selector-pseudo">:after</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: none;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">""</span>;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">4px</span>;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">4px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">border</span>: solid white;</span><br><span class="line">    <span class="attribute">border-width</span>: <span class="number">0</span> <span class="number">2px</span> <span class="number">2px</span> <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">-webkit-transform</span>: <span class="built_in">rotate</span>(<span class="number">45deg</span>);</span><br><span class="line">    <span class="attribute">-ms-transform</span>: <span class="built_in">rotate</span>(<span class="number">45deg</span>);</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">45deg</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ•ˆæœå›¾ï¼ˆæœªé€‰ä¸­ä¸é€‰ä¸­å¯¹æ¯”ï¼‰ï¼š</p>
<p><img src="/images/custom-checkbox.png" alt="image.png"></p>
<p>é‡‡å–çš„åšæ³•æ˜¯</p>
<ol>
<li>å…ˆå°†åŸç”Ÿçš„checkboxæ ·å¼éšè—ï¼Œè®¾ç½®å®½é«˜ä¸º0ï¼Œä½¿å…¶éšè—ä¸å ä½ã€‚</li>
<li>åœ¨labelæ ‡ç­¾é‡Œé¢æ·»åŠ é¢å¤–çš„spanæ ‡ç­¾ï¼Œç”¨æ¥åšè‡ªå®šä¹‰æ ·å¼</li>
<li>æ·»åŠ ä¼ªå…ƒç´ ï¼Œåˆ©ç”¨css3çš„transformå±æ€§åšçŸ©å½¢æ—‹è½¬ï¼Œåšå‡ºæ‰“å‹¾çš„æ ·å¼ï¼Œå¹¶å°†å…¶éšè—ã€‚</li>
<li>å½“checkboxè¢«é€‰ä¸­æ—¶ï¼Œåˆ©ç”¨css3çš„é€‰æ‹©å™¨:checkedï¼ŒåŒ¹é…æ¯ä¸ªå·²è¢«é€‰ä¸­çš„ checkbox å…ƒç´ ï¼›å†ä½¿ç”¨å…„å¼Ÿé€‰æ‹©ç¬¦~ï¼ŒåŒ¹é…åˆ°åŒå±‚çº§checkmarkç±»ï¼Œå°±å¯ä»¥æ˜¾ç¤ºå’Œè§¦å‘è‡ªå®šä¹‰checkboxé€‰ä¸­çŠ¶æ€çš„æ ·å¼äº†</li>
</ol>
<p>è¿™é‡Œè¿˜æ¶‰åŠåˆ°ä¸€ä¸ªçŸ¥è¯†ç‚¹ï¼Œä¼ªå…ƒç´ å±äºä¸»å…ƒç´ çš„ä¸€éƒ¨åˆ†ï¼Œå› æ­¤ç‚¹å‡»ä¼ªå…ƒç´ è§¦å‘çš„æ˜¯ä¸»å…ƒç´ çš„clickäº‹ä»¶ã€‚</p>
]]></content>
      <categories>
        <category>CSSç³»åˆ—</category>
      </categories>
      <tags>
        <tag>CSS</tag>
      </tags>
  </entry>
  <entry>
    <title>vue-awesome-swiperä¿®æ”¹è½®æ’­å›¾paginationçš„é¢œè‰²</title>
    <url>/2019/12/12/vue-awesome-swiper%E4%BF%AE%E6%94%B9%E8%BD%AE%E6%92%AD%E5%9B%BEpagination%E7%9A%84%E9%A2%9C%E8%89%B2/</url>
    <content><![CDATA[<p>åœ¨ä½¿ç”¨vue-awsome-swiperè½®æ’­å›¾çš„æ—¶å€™ï¼Œpaginationå¤„äºå½“å‰é€‰ä¸­çŠ¶æ€é»˜è®¤æ˜¯è“è‰²ï¼Œä½†é€šè¿‡ä¿®æ”¹è¿™ä¸ªç±»å¹¶æ— æ³•æ”¹å˜å…¶èƒŒæ™¯é¢œè‰²â€¦</p>
<a id="more"></a>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"wrapper"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">swiper</span> <span class="attr">:options</span>=<span class="string">"swiperOption"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">swiper-slide</span> <span class="attr">v-for</span>=<span class="string">"(item, index) of swiperList"</span> <span class="attr">:key</span>=<span class="string">"index"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">"swiper-img"</span> <span class="attr">:src</span>=<span class="string">"item.imgUrl"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">swiper-slide</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"swiper-pagination"</span> <span class="attr">slot</span>=<span class="string">"pagination"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">swiper</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="https://user-gold-cdn.xitu.io/2019/12/22/16f2bbbf5fbc739b?w=433&h=140&f=png&s=141401" alt=""></p>
<p>åŸå› æ˜¯ä¸ºstyleè®¾ç½®äº†scopedä»¥åï¼Œswiperåˆ†é¡µæ ·å¼å°±å¤±æ•ˆäº†ã€‚åˆ†é¡µæ˜¯åœ¨mountedé‡Œåˆ›å»ºçš„ï¼Œæ­¤æ—¶åˆ›å»ºçš„DOMï¼Œvueä¸ä¼šå¸®swiperçš„paginationåŠ ä¸Šscopedè‡ªå®šä¹‰å±æ€§ã€‚</p>
<p>è§£å†³åŠæ³•ï¼š</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.wrapper</span> &gt;&gt;&gt; <span class="selector-class">.swiper-pagination-bullet-active</span></span><br><span class="line">    <span class="selector-tag">background</span>: <span class="selector-id">#ff0</span></span><br></pre></td></tr></table></figure>
<pre><code>.wrapper &gt;&gt;&gt; .swiper-pagination-bullet-active
è¡¨ç¤ºçš„æ˜¯åœ¨wrapperä¸‹æ‰€æœ‰å‡ºç°.swiper-pagination-bullet-active</code></pre><p>æ•ˆæœå¦‚ä¸‹ï¼š<br><img src="https://user-gold-cdn.xitu.io/2019/12/22/16f2bc67d4dbfa0f?w=426&h=136&f=png&s=151132" alt=""></p>
]]></content>
      <categories>
        <category>Vue</category>
      </categories>
      <tags>
        <tag>Vue</tag>
      </tags>
  </entry>
  <entry>
    <title>Vueå®ç°æ˜Ÿçº§è¯„ä»·æ•ˆæœ</title>
    <url>/2019/12/09/Vue%E5%AE%9E%E7%8E%B0%E6%98%9F%E7%BA%A7%E8%AF%84%E4%BB%B7%E6%95%88%E6%9E%9C/</url>
    <content><![CDATA[<p>åœ¨åšåº—å®¶è¯„ä»·çš„æ—¶å€™ï¼Œå¸¸å¸¸ä¼šæœ‰æ˜Ÿçº§è¯„ä»·çš„æ•ˆæœï¼Œä»Šå¤©æ¥è¯•è¯•çœ‹æ€ä¹ˆå®ç°å®ƒâ€¦</p>
<a id="more"></a>
<p>æˆ‘ä»¬æŠŠæ˜Ÿçº§è¯„ä»·å•ç‹¬åšæˆä¸€ä¸ªStarç»„ä»¶ï¼ŒæŠ½ç¦»å‡ºæ¥ï¼Œå…¶ä¸­çˆ¶ç»„ä»¶ä¸­å¼•å…¥(ä¼ å…¥çš„æ˜¯è¯„åˆ†çš„å€¼)</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"score"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Star</span> <span class="attr">:score</span>=<span class="string">"poiInfo.wm_poi_score"</span>&gt;</span><span class="tag">&lt;/<span class="name">Star</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>åˆå§‹Star.vue</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">      &lt;div class&#x3D;&quot;star&quot;&gt;</span><br><span class="line">          &lt;span class&#x3D;&quot;star-item&quot;&gt;&lt;&#x2F;span&gt;</span><br><span class="line">      &lt;&#x2F;div&gt;</span><br><span class="line">      &lt;span&gt;&#123;&#123; score &#125;&#125;&lt;&#x2F;span&gt;</span><br><span class="line">  &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">    name: &#39;Star&#39;,</span><br><span class="line">    props: &#123;</span><br><span class="line">        score: Number</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>
<p>é¦–å…ˆæˆ‘ä»¬æŠŠè¦åšæ˜Ÿçº§å›¾ç‰‡ç”¨ç±»åä¸ºstar-itemçš„spanæ ‡ç­¾å¾ªç¯å‡ºæ¥ï¼Œæ˜Ÿçº§å›¾ç‰‡æœ‰ä¸‰å¼ ï¼Œå…¨æ˜Ÿï¼ŒåŠæ˜Ÿï¼Œç©ºæ˜Ÿ<br><img src="https://images.weserv.nl/?url=https://user-gold-cdn.xitu.io/2019/12/29/16f51be56d1a5ea8?w=20&h=19&f=png&s=1215" alt=""><br><img src="https://images.weserv.nl/?url=https://user-gold-cdn.xitu.io/2019/12/29/16f51bdf50383e0f?w=20&h=19&f=png&s=1349" alt=""><br><img src="https://images.weserv.nl/?url=https://user-gold-cdn.xitu.io/2019/12/29/16f51be27b49b42d?w=20&h=19&f=png&s=1220" alt=""></p>
<p>ä¸‹é¢åªç½—åˆ—å…³é”®çš„csséƒ¨åˆ†, é€šè¿‡å¢åŠ ç±»åŒºåˆ†å›¾ç‰‡</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.star-item</span><span class="selector-class">.on</span> &#123;</span><br><span class="line">    <span class="attribute">background-image</span>: <span class="built_in">url</span>(./img/star24_on@<span class="number">2</span>x.png);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.star-item</span><span class="selector-class">.half</span> &#123;</span><br><span class="line">    <span class="attribute">background-image</span>: <span class="built_in">url</span>(./img/star24_half@<span class="number">2</span>x.png);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.star-item</span><span class="selector-class">.off</span> &#123;</span><br><span class="line">    <span class="attribute">background-image</span>: <span class="built_in">url</span>(./img/star24_off@<span class="number">2</span>x.png);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ¥ä¸‹æ¥ä¿®æ”¹Star.vueçš„ä»£ç </p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"star"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">span</span> </span></span><br><span class="line"><span class="tag">    <span class="attr">class</span>=<span class="string">"star-item"</span> </span></span><br><span class="line"><span class="tag">    <span class="attr">v-for</span>=<span class="string">"(itemClass, index) in itemClasses"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:key</span>=<span class="string">"index"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:class</span>=<span class="string">"itemClass"</span></span></span><br><span class="line"><span class="tag">  &gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>itemClasseså€¼æ˜¯é€šè¿‡è®¡ç®—å±æ€§è·å–çš„ï¼Œæ€è·¯ï¼š</p>
<ol>
<li>é€šè¿‡computedè¿”å›ä¸€ä¸ªé•¿åº¦ä¸º5çš„æ•°ç»„ï¼ˆæ˜¾ç¤º5é¢—æ˜Ÿï¼‰</li>
<li>æ•°ç»„çš„å€¼æ˜¯ä¸Šè¿°csså–çš„ä¸åŒæ˜Ÿå¯¹åº”çš„ç±»åï¼Œå†é€šè¿‡ç»‘å®šæ¯ä¸€ä¸ªå¾ªç¯æ·»åŠ çš„classï¼Œä»è€Œéå†æ˜Ÿçº§ã€‚</li>
</ol>
<p>æ¯”å¦‚ä¸¾ä¾‹è¯„åˆ†ï¼š</p>
<ul>
<li>4.7åˆ†å¯¹åº”çš„æ•°ç»„ä¸º[â€˜onâ€™, â€˜onâ€™, â€˜onâ€™, â€˜onâ€™, â€˜halfâ€™]</li>
<li>3.4åˆ†å¯¹åº”çš„æ•°ç»„ä¸º[â€˜onâ€™, â€˜onâ€™, â€˜onâ€™, â€˜halfâ€™, â€˜halfâ€™]</li>
</ul>
<p>JSéƒ¨åˆ†çš„ä»£ç ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ˜Ÿæ˜Ÿé•¿åº¦ </span></span><br><span class="line"><span class="keyword">const</span> LENGTH = <span class="number">5</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ˜Ÿæ˜Ÿçš„çŠ¶æ€</span></span><br><span class="line"><span class="keyword">const</span> CLS_ON = <span class="string">'on'</span></span><br><span class="line"><span class="keyword">const</span> CLS_HALF = <span class="string">'half'</span></span><br><span class="line"><span class="keyword">const</span> CLS_OFF = <span class="string">'off'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    name: <span class="string">'Star'</span>,</span><br><span class="line">    props: &#123;</span><br><span class="line">        score: <span class="built_in">Number</span></span><br><span class="line">    &#125;,</span><br><span class="line">    computed: &#123;</span><br><span class="line">        itemClasses () &#123;</span><br><span class="line">            <span class="keyword">let</span> result = []</span><br><span class="line"></span><br><span class="line">            <span class="keyword">let</span> score = <span class="built_in">Math</span>.floor(<span class="keyword">this</span>.score * <span class="number">2</span>) / <span class="number">2</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">// åŠæ˜Ÿ (é€šè¿‡è·Ÿ1å–ä½™åˆ¤æ–­æ˜¯å¦ä¸ºå°æ•°)</span></span><br><span class="line">            <span class="keyword">let</span> hasDecimal = score % <span class="number">1</span> !== <span class="number">0</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">// å…¨æ˜Ÿ ï¼ˆå‘ä¸‹å–æ•´ï¼Œè·å–å…¨æ˜Ÿéƒ¨åˆ†ï¼‰</span></span><br><span class="line">            <span class="keyword">let</span> integer = <span class="built_in">Math</span>.floor(score)</span><br><span class="line"></span><br><span class="line">            <span class="comment">// éå†å…¨æ˜Ÿ</span></span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; integer; i++)&#123;</span><br><span class="line">                result.push(CLS_ON)</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// å¤„ç†åŠæ˜Ÿ</span></span><br><span class="line">            <span class="keyword">if</span>(hasDecimal)&#123;</span><br><span class="line">                result.push(CLS_HALF)</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// è¡¥é½</span></span><br><span class="line">            <span class="keyword">while</span>(result.length &lt; LENGTH)&#123; <span class="comment">// åˆ°è¿™é‡Œè¿˜ä¸å¤Ÿäº”é¢—æ˜Ÿï¼Œåˆ™å‡‘ç©ºæ˜Ÿ</span></span><br><span class="line">                result.push(CLS_OFF)</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> result</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>itemClassesæœ€ç»ˆæ˜¯è¿”å›äº†ä¸€ä¸ªé•¿åº¦ä¸º5çš„æ•°ç»„ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">let score &#x3D; Math.floor(this.score * 2) &#x2F; 2</span><br></pre></td></tr></table></figure>
<p>åŠæ˜Ÿçš„åˆ’åˆ†ï¼šåªæœ‰å½“å°æ•°ç¬¬ä¸€ä½å¤§äºæˆ–ç­‰äº5æ‰å¯ä»¥ç®—ä¸ºåŠæ˜Ÿï¼Œå¦åˆ™æ˜¯ç©ºæ˜Ÿã€‚è¯¥è®¡ç®—æ˜¯ä¸ºäº†å°æ•°éƒ¨åˆ†&gt;=0.5çš„è®¡ç®—ç»“æœå¸¦æœ‰å°æ•°ï¼Œä»è€Œå†åé¢è·Ÿ1å–ä½™åˆ¤æ–­æ˜¯å¦ä¸ºåŠæ˜Ÿã€‚ä¸€å¼€å§‹æœ‰ç‚¹è’™ï¼Œå¤šè¯•å‡ ä¸ªæ•°æƒ³æƒ³å°±æ‡‚äº†ã€‚</p>
<blockquote>
<p>æ¯”å¦‚4.3åˆ†æ²¡æœ‰åŠæ˜Ÿï¼Œ4.5æœ‰åŠæ˜Ÿå‡ºç°</p>
</blockquote>
<p>ç»“æœï¼š<br>æ¯”å¦‚ä¼ å…¥çš„å€¼ä¸º4.7ï¼Œåˆ™æ˜¾ç¤º</p>
<p><img src="https://images.weserv.nl/?url=https://user-gold-cdn.xitu.io/2019/12/29/16f51d7db002aa38?w=161&h=28&f=png&s=5690" alt=""></p>
]]></content>
      <categories>
        <category>Vue</category>
      </categories>
      <tags>
        <tag>Vue</tag>
      </tags>
  </entry>
  <entry>
    <title>é¡µé¢å†…å®¹æ˜¯å¦è¶…å‡ºå¯è§†é«˜åº¦ï¼Œfooterå§‹ç»ˆä¿æŒåº•éƒ¨æ˜¾ç¤º</title>
    <url>/2019/12/07/CSS%E7%B3%BB%E5%88%97%E4%B9%8B%E9%A1%B5%E9%9D%A2%E5%86%85%E5%AE%B9%E6%98%AF%E5%90%A6%E8%B6%85%E5%87%BA%E5%8F%AF%E8%A7%86%E9%AB%98%E5%BA%A6%EF%BC%8Cfooter%E5%A7%8B%E7%BB%88%E4%BF%9D%E6%8C%81%E5%BA%95%E9%83%A8%E6%98%BE%E7%A4%BA/</url>
    <content><![CDATA[<p>è®°å½•ä¸€ä¸ªé¡¹ç›®ä¸­ç»å¸¸ä¼šç”¨åˆ°çš„æŠ€å·§ï¼ŒfooteråŒºï¼ˆæ¯”å¦‚ç‰ˆæƒä¿¡æ¯ï¼‰è¦å§‹ç»ˆå±…äºé¡µé¢åº•éƒ¨ã€‚å¦‚æœç”¨fixedå®šä½æ˜¾ç„¶ä¸å¯å–ï¼Œå› ä¸ºè¦ä¿è¯é¡µé¢é«˜åº¦å¤§äºå±å¹•é«˜åº¦æ—¶ï¼ŒfooteråŒºè¦è·Ÿéšç€é¡µé¢æ»šåŠ¨ä¿æŒåœ¨åº•éƒ¨</p>
<a id="more"></a>
<p>å¦‚ä¸‹å›¾ï¼š</p>
<p><img src="https://images.weserv.nl/?url=https://user-gold-cdn.xitu.io/2019/12/7/16ee0e36c5c55fea?w=1737&h=899&f=png&s=23364" alt=""></p>
<p><img src="https://images.weserv.nl/?url=https://user-gold-cdn.xitu.io/2019/12/7/16ee0e3a25e302bd?w=1577&h=903&f=png&s=27932" alt=""></p>
<ul>
<li>tipï¼šä»¥ä¸‹ä¸¤ä¸ªæ–¹æ³•ä»…é€‚ç”¨äºfooteråŒºé«˜åº¦å›ºå®šçš„æƒ…å†µ</li>
</ul>
<h2 id="æ–¹æ³•ä¸€"><a href="#æ–¹æ³•ä¸€" class="headerlink" title="æ–¹æ³•ä¸€"></a>æ–¹æ³•ä¸€</h2><p>é¡µé¢ç»“æ„ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;div class&#x3D;&quot;wrapper&quot;&gt;</span><br><span class="line">    &lt;div class&#x3D;&quot;main-container&quot;&gt;</span><br><span class="line">        &lt;div class&#x3D;&quot;box&quot;&gt;è¿™æ˜¯ä¸»è¦å†…å®¹&lt;&#x2F;div&gt;</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line">    &lt;footer&gt;è¿™æ˜¯åº•éƒ¨&lt;&#x2F;footer&gt;</span><br><span class="line">&lt;&#x2F;div&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>å…³é”®çš„css<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">html</span>,<span class="selector-tag">body</span>&#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.wrapper</span>&#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.main-container</span>&#123;</span><br><span class="line">    <span class="attribute">min-height</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">    <span class="attribute">padding-bottom</span>: <span class="number">40px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">footer</span>&#123;</span><br><span class="line">    <span class="attribute">margin-top</span>: -<span class="number">40px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<p>å¦‚ä¸Šä»£ç ï¼Œä¸»è¦å†…å®¹åŒºå’ŒfooteråŒºå¿…é¡»ä¸ºå¹¶åˆ—å…³ç³»ã€‚è®¾ç½®main-containerä¸ºborder-boxï¼Œå³å…ƒç´ çš„å†…è¾¹è·å’Œè¾¹æ¡†éƒ½åœ¨å·²è®¾å®šçš„é«˜åº¦å†…ç»˜åˆ¶ï¼Œæˆ‘ä»¬è®¾ç½®äº†min-heightä¸º100%ï¼Œå³æœ€å°é«˜åº¦æ˜¯é“ºæ»¡æ•´å±å¹•ã€‚padding-bottomåœ¨border-boxç›’å­ä¸­ï¼Œç•™å‡ºé«˜åº¦40pxçš„ç©ºç™½å—ã€‚footerçš„margin-topä¸º-40pxï¼ˆå¦‚æœfooteræœ‰è®¾ç½®é«˜åº¦ï¼Œpadding-bottomçš„å€¼åº”ä»¥footeré«˜åº¦ä¸ºå‡†ï¼‰ï¼Œå³å‘ä¸Šæ‹‰åˆ°ç©ºç™½å—å†…ï¼Œmain-containeræœ€å°é«˜åº¦ä¸ºæ•´ä¸ªå±å¹•ï¼Œæ•…é¡µé¢å†…å®¹ä¸è¶³ä¹Ÿå¯ä»¥æ˜¾ç¤ºåœ¨åº•éƒ¨ã€‚</p>
<h2 id="æ–¹æ³•äºŒ"><a href="#æ–¹æ³•äºŒ" class="headerlink" title="æ–¹æ³•äºŒ"></a>æ–¹æ³•äºŒ</h2><p>é¡µé¢ç»“æ„</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;div class&#x3D;&quot;wrapper&quot;&gt;</span><br><span class="line">    &lt;div class&#x3D;&quot;main-container&quot;&gt;</span><br><span class="line">        &lt;div class&#x3D;&quot;box&quot;&gt;è¿™æ˜¯ä¸»è¦å†…å®¹&lt;&#x2F;div&gt;</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line">    &lt;footer&gt;è¿™æ˜¯åº•éƒ¨&lt;&#x2F;footer&gt;</span><br><span class="line">&lt;&#x2F;div&gt;</span><br></pre></td></tr></table></figure>

<p>å…³é”®çš„css</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">html,body&#123;</span><br><span class="line">    height: 100%;</span><br><span class="line">&#125;</span><br><span class="line">.wrapper&#123;</span><br><span class="line">    min-height: 100%;</span><br><span class="line">    position: relative;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.main-container&#123;</span><br><span class="line">    padding-bottom: 40px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">footer&#123;</span><br><span class="line">    position: absolute;</span><br><span class="line">    bottom: 0;</span><br><span class="line">    height: 40px;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¦‚ä¸Šä»£ç æ—¶ç”¨ç»å¯¹å®šä½ï¼Œç›¸å¯¹äºwrapperå±…äºåº•éƒ¨ï¼Œè·Ÿç¬¬ä¸€ä¸ªæ–¹æ³•æœ‰å¼‚æ›²åŒå·¥ä¹‹å¦™ã€‚</p>
]]></content>
      <categories>
        <category>CSSç³»åˆ—</category>
      </categories>
      <tags>
        <tag>CSS</tag>
      </tags>
  </entry>
  <entry>
    <title>æ·±å…¥ç†è§£JavaScriptä¹‹æ‰§è¡Œä¸Šä¸‹æ–‡å’Œå˜é‡å¯¹è±¡</title>
    <url>/2019/11/28/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3JavaScript%E4%B9%8B%E6%89%A7%E8%A1%8C%E4%B8%8A%E4%B8%8B%E6%96%87%E5%92%8C%E5%8F%98%E9%87%8F%E5%AF%B9%E8%B1%A1/</url>
    <content><![CDATA[<p>ç»§ç»­æ¥ç€ä¸Šç¯‡æ–‡ç« ï¼Œä»Šå¤©å†ç»†è¯´æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­çš„å˜é‡å¯¹è±¡â€¦</p>
<a id="more"></a>
<p>ä¸Šç¯‡æˆ‘ä»¬è¯´åˆ°å‡½æ•°ä¸Šä¸‹æ–‡çš„ç»“æ„å¯è¡¨ç¤ºä¸º</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> ExecutionContextObj = &#123;</span><br><span class="line">    VO: <span class="built_in">window</span>,     <span class="comment">// å˜é‡å¯¹è±¡</span></span><br><span class="line">    ScopeChain: &#123;&#125;, <span class="comment">// ä½œç”¨åŸŸé“¾</span></span><br><span class="line">    <span class="keyword">this</span>: <span class="built_in">window</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>å³æ¯ä¸ªå‡½æ•°ä¸Šä¸‹æ–‡ï¼Œéƒ½è¦æœ‰è¿™ä¸‰ä¸ªé‡è¦å±æ€§ï¼š</p>
<ul>
<li>å˜é‡å¯¹è±¡(Variable object, VO)</li>
<li>ä½œç”¨åŸŸé“¾(Scope chain)</li>
<li>this</li>
</ul>
<h2 id="å˜é‡å¯¹è±¡"><a href="#å˜é‡å¯¹è±¡" class="headerlink" title="å˜é‡å¯¹è±¡"></a>å˜é‡å¯¹è±¡</h2><h3 id="ä»€ä¹ˆæ˜¯å˜é‡å¯¹è±¡"><a href="#ä»€ä¹ˆæ˜¯å˜é‡å¯¹è±¡" class="headerlink" title="ä»€ä¹ˆæ˜¯å˜é‡å¯¹è±¡"></a>ä»€ä¹ˆæ˜¯å˜é‡å¯¹è±¡</h3><p>å˜é‡å¯¹è±¡æ˜¯ä¸æ‰§è¡Œä¸Šä¸‹æ–‡çš„ç›¸å…³çš„æ•°æ®ä½œç”¨åŸŸï¼Œå­˜å‚¨äº†åœ¨ä¸Šä¸‹æ–‡ä¸­å®šä¹‰çš„å˜é‡å’Œå‡½æ•°å£°æ˜ã€‚å› ä¸ºä¸åŒæ‰§è¡Œä¸Šä¸‹æ–‡çš„å˜é‡å¯¹è±¡ç•¥æœ‰ä¸åŒï¼Œæ‰€ä»¥å˜é‡å¯¹è±¡ä¸€èˆ¬åˆ†ä¸ºå…¨å±€ä¸Šä¸‹æ–‡ä¸‹çš„å˜é‡å¯¹è±¡å’Œå‡½æ•°ä¸Šä¸‹æ–‡ä¸‹çš„å˜é‡å¯¹è±¡ã€‚</p>
<h3 id="å˜é‡å¯¹è±¡-VO-çš„åˆ›å»ºè¿‡ç¨‹"><a href="#å˜é‡å¯¹è±¡-VO-çš„åˆ›å»ºè¿‡ç¨‹" class="headerlink" title="å˜é‡å¯¹è±¡(VO)çš„åˆ›å»ºè¿‡ç¨‹"></a>å˜é‡å¯¹è±¡(VO)çš„åˆ›å»ºè¿‡ç¨‹</h3><p>å˜é‡å¯¹è±¡çš„åˆ›å»ºï¼Œå±äºæ‰§è¡Œä¸Šä¸‹æ–‡ä¸­çš„åˆ›å»ºé˜¶æ®µï¼Œä¾æ¬¡ç»è¿‡ä»¥ä¸‹ä¸‰ä¸ªè¿‡ç¨‹ï¼š</p>
<p>åˆ›å»ºæ‰§è¡Œä¸Šä¸‹æ–‡æœ‰ä¸¤ä¸ªé˜¶æ®µï¼šä¸€ä¸ªæ˜¯åˆ›å»ºé˜¶æ®µï¼Œä¸€ä¸ªæ˜¯æ‰§è¡Œé˜¶æ®µã€‚å˜é‡å¯¹è±¡çš„åˆ›å»ºï¼Œå±äºæ‰§è¡Œä¸Šä¸‹æ–‡ä¸­çš„åˆ›å»ºé˜¶æ®µï¼Œä¼šä¾æ¬¡ç»è¿‡ä¸‰ä¸ªè¿‡ç¨‹ï¼š</p>
<h4 id="1-ä¸ºå‡½æ•°çš„å½¢å‚èµ‹å€¼ï¼ˆå‡½æ•°ä¸Šä¸‹æ–‡ï¼‰"><a href="#1-ä¸ºå‡½æ•°çš„å½¢å‚èµ‹å€¼ï¼ˆå‡½æ•°ä¸Šä¸‹æ–‡ï¼‰" class="headerlink" title="1.ä¸ºå‡½æ•°çš„å½¢å‚èµ‹å€¼ï¼ˆå‡½æ•°ä¸Šä¸‹æ–‡ï¼‰"></a>1.ä¸ºå‡½æ•°çš„å½¢å‚èµ‹å€¼ï¼ˆå‡½æ•°ä¸Šä¸‹æ–‡ï¼‰</h4><p>åœ¨è¿›å…¥å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡æ—¶ï¼Œä¼šé¦–å…ˆæ£€æŸ¥å®å‚ä¸ªæ•°ï¼Œæ¥ç€å¯¹å®å‚å¯¹è±¡å’Œå½¢å‚è¿›è¡Œèµ‹å€¼ã€‚å¦‚æœæ²¡æœ‰å®å‚ï¼Œå±æ€§å€¼è®¾ä¸ºundefinedï¼›å½“ä¼ å…¥çš„å®å‚æ•°é‡å°äºå½¢å‚æ•°é‡ï¼Œåˆ™ä¼šå°†æ²¡æœ‰è¢«èµ‹å€¼çš„å½¢å‚èµ‹å€¼ä¸º undefinedã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params">a, b, c</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(a, b, c); <span class="comment">// 1 2 undefined</span></span><br><span class="line">&#125;</span><br><span class="line">fn(<span class="number">1</span>, <span class="number">2</span>);</span><br></pre></td></tr></table></figure>

<p>æ­¤æ—¶å˜é‡å¯¹è±¡çš„ç»“æ„ä¸º:</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">VO = &#123;</span><br><span class="line">    a: <span class="number">1</span>,</span><br><span class="line">    b: <span class="number">2</span>,</span><br><span class="line">    c: <span class="literal">undefined</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2-å‡½æ•°å£°æ˜"><a href="#2-å‡½æ•°å£°æ˜" class="headerlink" title="2.å‡½æ•°å£°æ˜"></a>2.å‡½æ•°å£°æ˜</h4><p>é‡åˆ°åŒåçš„å‡½æ•°æ—¶ï¼Œåé¢å‡½æ•°ä¼šè¦†ç›–å‰é¢çš„å‡½æ•°ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'å…ˆå£°æ˜çš„'</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'åå£°æ˜çš„'</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(fn); <span class="comment">//Æ’ fn() &#123; console.log('åå£°æ˜çš„'); &#125;</span></span><br></pre></td></tr></table></figure>

<h4 id="3-å˜é‡å£°æ˜"><a href="#3-å˜é‡å£°æ˜" class="headerlink" title="3.å˜é‡å£°æ˜"></a>3.å˜é‡å£°æ˜</h4><p>æ£€æŸ¥å½“å‰ç¯å¢ƒä¸­é€šè¿‡å˜é‡å£°æ˜(var)å¹¶èµ‹å€¼ä¸ºundefinedï¼ˆå˜é‡æå‡äº§ç”Ÿçš„åŸå› ï¼‰</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(fn); <span class="comment">// Æ’ fn() &#123; console.log('åå£°æ˜çš„');&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(b); <span class="comment">// undefined</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'å…ˆå£°æ˜çš„'</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'åå£°æ˜çš„'</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> b = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">var</span> fn = <span class="number">20</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(b); <span class="comment">// 10</span></span><br></pre></td></tr></table></figure>

<p>ç”±ä¸Šé¢æˆ‘ä»¬çœ‹å‡ºï¼Œå½“å˜é‡åç§°ä¸å‡½æ•°åç§°åŒåæ—¶ï¼Œä¼šå¿½ç•¥æ­¤å˜é‡å£°æ˜ï¼Œå³åŒåæ—¶ï¼Œå‡½æ•°å£°æ˜ä¼˜å…ˆ</p>
<p>jsè™½ç„¶å•çº¿ç¨‹çš„è¯­è¨€ï¼Œæ‰§è¡Œé¡ºåºä¸ºé¡ºåºæ‰§è¡Œï¼Œä½†JSå¼•æ“å¹¶ä¸æ˜¯ä¸€è¡Œä¸€è¡Œåœ°åˆ†æå’Œæ‰§è¡Œç¨‹åºï¼Œè€Œæ˜¯ä¸€æ®µä¸€æ®µåœ°åˆ†ææ‰§è¡Œã€‚</p>
<p>è®©æˆ‘ä»¬ä»JSå¼•æ“çš„è§’åº¦ç†ä¸€ç†ä¸Šè¿°ä¸‰ä¸ªè¿‡ç¨‹ï¼š<strong>å‡½æ•°æå‡å’Œå˜é‡æå‡ï¼Œæ˜¯å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡åšçš„å‡†å¤‡å·¥ä½œï¼›å½“æ‰§è¡Œå‡½æ•°æ—¶ï¼Œåˆä¼šåˆ›å»ºä¸€ä¸ªæ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œåšçš„æ˜¯è¿™ä¸ªå‡½æ•°å†…éƒ¨çš„å‡†å¤‡å·¥ä½œï¼›è¿™å°±æ˜¯JSå¼•æ“åˆ†æä»£ç çš„â€é¢„ç¼–è¯‘é˜¶æ®µâ€ï¼Œåšå®Œè¯¥å·¥ä½œæ‰è¿›å…¥æ‰§è¡Œé˜¶æ®µã€‚</strong></p>
<h3 id="å…¨å±€ä¸Šä¸‹æ–‡çš„å˜é‡å¯¹è±¡"><a href="#å…¨å±€ä¸Šä¸‹æ–‡çš„å˜é‡å¯¹è±¡" class="headerlink" title="å…¨å±€ä¸Šä¸‹æ–‡çš„å˜é‡å¯¹è±¡"></a>å…¨å±€ä¸Šä¸‹æ–‡çš„å˜é‡å¯¹è±¡</h3><p>åœ¨å®¢æˆ·ç«¯ JavaScript ä¸­ï¼Œå…¨å±€å¯¹è±¡å°±æ˜¯ Window å¯¹è±¡;</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">2</span>; <span class="comment">// åœ¨å…¨å±€ä¸Šä¸‹æ–‡ä½¿ç”¨varå®šä¹‰å˜é‡aï¼Œä½œä¸ºå…¨å±€å˜é‡çš„å®¿ä¸»</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">this</span>); <span class="comment">// windowå¯¹è±¡</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">this</span>.a); <span class="comment">// 2</span></span><br></pre></td></tr></table></figure>
<p>å¯¹äºå…¨å±€ä¸Šä¸‹æ–‡ä¸­æ¥è¯´ï¼Œå˜é‡å¯¹è±¡å°±æ˜¯å…¨å±€å¯¹è±¡ï¼Œ</p>
<h3 id="å˜é‡å¯¹è±¡å˜ä¸ºæ´»åŠ¨å¯¹è±¡"><a href="#å˜é‡å¯¹è±¡å˜ä¸ºæ´»åŠ¨å¯¹è±¡" class="headerlink" title="å˜é‡å¯¹è±¡å˜ä¸ºæ´»åŠ¨å¯¹è±¡"></a>å˜é‡å¯¹è±¡å˜ä¸ºæ´»åŠ¨å¯¹è±¡</h3><p>æ‰§è¡Œä¸Šä¸‹æ–‡çš„ç¬¬äºŒä¸ªé˜¶æ®µä¸ºæ‰§è¡Œé˜¶æ®µï¼Œæ­¤æ—¶ä¼šè¿›è¡Œå˜é‡èµ‹å€¼ï¼Œæ‰§è¡Œå…¶ä»–ä»£ç ç­‰å·¥ä½œï¼Œæ­¤æ—¶ï¼Œå˜é‡å¯¹è±¡å˜ä¸ºæ´»åŠ¨å¯¹è±¡(Active object, AO)ã€‚</p>
<blockquote>
<p>æ´»åŠ¨å¯¹è±¡å’Œå˜é‡å¯¹è±¡å…¶å®æ˜¯åŒä¸ªä¸œè¥¿ï¼Œåªæ˜¯è§„èŒƒæ¦‚å¿µä¸Šçš„å·®å¼‚ã€‚åªæœ‰åˆ°å½“è¿›å…¥ä¸€ä¸ªæ‰§è¡Œä¸Šä¸‹æ–‡ä¸­ï¼Œè¿™ä¸ªæ‰§è¡Œä¸Šä¸‹æ–‡çš„å˜é‡å¯¹è±¡æ‰ä¼šè¢«æ¿€æ´»ï¼Œæ‰€ä»¥æ‰å«æ´»åŠ¨å¯¹è±¡ã€‚è€Œåªæœ‰è¢«æ¿€æ´»çš„å˜é‡å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯æ´»åŠ¨å¯¹è±¡ä¸Šçš„å„ç§å±æ€§æ‰èƒ½è¢«è®¿é—®ã€‚</p>
</blockquote>
<p>æ‰€ä»¥æ˜ç¡®ï¼Œæ´»åŠ¨å¯¹è±¡æ˜¯åœ¨è¿›å…¥å‡½æ•°ä¸Šä¸‹æ–‡æ—¶åˆ»è¢«åˆ›å»ºçš„ï¼Œå®ƒé€šè¿‡å‡½æ•°çš„ arguments å±æ€§åˆå§‹åŒ–ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(fn); <span class="comment">// Æ’ fn() &#123; console.log('åå£°æ˜çš„');&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(b); <span class="comment">// undefined</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'å…ˆå£°æ˜çš„'</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'åå£°æ˜çš„'</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> b = <span class="number">10</span>;</span><br><span class="line"><span class="built_in">console</span>.log(b); <span class="comment">// 10</span></span><br><span class="line"><span class="keyword">var</span> fn = <span class="number">20</span>;        </span><br><span class="line"><span class="built_in">console</span>.log(fn);<span class="comment">//20</span></span><br></pre></td></tr></table></figure>
<p>ä¸Šè¿°ä»£ç ï¼ŒçœŸæ­£å¼€å§‹æ‰§è¡Œæ˜¯ä»ç¬¬ä¸€è¡Œconsole.log(fn)ã€‚åœ¨æ­¤ä¹‹å‰ï¼Œå˜é‡å¯¹è±¡VOæ˜¯è¿™æ ·çš„ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// åˆ›å»ºè¿‡ç¨‹</span></span><br><span class="line">EC= &#123;</span><br><span class="line">  VOï¼š&#123;&#125;, <span class="comment">// åˆ›å»ºå˜é‡å¯¹è±¡</span></span><br><span class="line">  scopeChain: [&#123;VO&#125;], <span class="comment">// ä½œç”¨åŸŸé“¾</span></span><br><span class="line">  <span class="keyword">this</span>: <span class="built_in">window</span> <span class="comment">// thisç»‘å®š</span></span><br><span class="line">&#125;</span><br><span class="line">VO = &#123;</span><br><span class="line">  <span class="comment">// argument: &#123;&#125;, // å½“å‰ä¸ºå…¨å±€ä¸Šä¸‹æ–‡ï¼Œä¸å­˜åœ¨arguments</span></span><br><span class="line">  fn: reference to <span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>)</span>&#123;&#125;, <span class="comment">// å‡½æ•°fnçš„å¼•ç”¨åœ°å€</span></span><br><span class="line">  b: undefiend  <span class="comment">// å˜é‡æå‡</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ ¹æ®å˜é‡å¯¹è±¡åˆ›å»ºçš„ä¸‰ä¸ªè¿‡ç¨‹ï¼Œ</p>
<ol>
<li>é¦–å…ˆæ˜¯argumentså¯¹è±¡çš„åˆ›å»ºï¼ˆå…¨å±€ä¸Šä¸‹æ–‡æ²¡æœ‰åˆ™å¿½ç•¥ï¼‰</li>
<li>å…¶æ¬¡ï¼Œæ˜¯æ£€æŸ¥å‡½æ•°çš„å£°æ˜ã€‚æ­¤æ—¶ï¼Œå‡½æ•°fnå£°æ˜äº†ä¸¤æ¬¡ï¼Œåˆ™åä¸€æ¬¡çš„å£°æ˜ä¼šè¦†ç›–ä¸Šä¸€æ¬¡çš„å£°æ˜ã€‚</li>
<li>æœ€åï¼Œæ˜¯æ£€æŸ¥å˜é‡çš„å£°æ˜ï¼Œå…ˆå£°æ˜äº†å˜é‡bï¼Œå°†å®ƒèµ‹å€¼ä¸º undefinedï¼›æ¥ç€é‡åˆ°fnçš„å˜é‡å£°æ˜ï¼Œç”±äºfnå·²ç»è¢«å£°æ˜ä¸ºä¸€ä¸ªå‡½æ•°ï¼Œæ•…å¿½ç•¥è¯¥å˜é‡å£°æ˜ã€‚ </li>
</ol>
<p>åˆ°æ­¤ï¼Œå˜é‡å¯¹è±¡çš„åˆ›å»ºé˜¶æ®µå®Œæˆï¼Œæ¥ä¸‹æ¥è¿›è¡Œæ‰§è¡Œé˜¶æ®µï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">1.æ‰§è¡Œconsole.log(fn);æ­¤æ—¶fnä¸ºå£°æ˜çš„ç¬¬äºŒä¸ªå‡½æ•°ï¼Œæ•…è¾“å‡ºç»“æœï¼š&quot;åå£°æ˜çš„&quot;ã€‚</span><br><span class="line">2.æ‰§è¡Œconsole.log(b)ï¼Œæ­¤æ—¶bå·²è¢«èµ‹å€¼ä¸ºundefinedï¼Œæ•…è¾“å‡ºç»“æœï¼š&quot;undefined&quot;ã€‚</span><br><span class="line">3.æ‰§è¡Œèµ‹å€¼æ“ä½œï¼š b &#x3D; 10;</span><br><span class="line">4.æ‰§è¡Œconsole.log(b) ï¼Œæ•…è¾“å‡ºbä¸º10ã€‚</span><br><span class="line">5.æ‰§è¡Œèµ‹å€¼æ“ä½œï¼š fn &#x3D; 20;</span><br><span class="line">6.æ‰§è¡Œconsole.log(fn) ï¼Œæ•…è¾“å‡ºfnä¸º20ã€‚</span><br></pre></td></tr></table></figure>

<p>æ‰§è¡Œåˆ°æœ€åä¸€æ­¥æ—¶ï¼Œæ‰§è¡Œä¸Šä¸‹æ–‡å¦‚ä¸‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ‰§è¡Œé˜¶æ®µ</span></span><br><span class="line">EC = &#123;</span><br><span class="line">  VO = &#123;&#125;;</span><br><span class="line">  scopeChain: &#123;&#125;;</span><br><span class="line">  <span class="keyword">this</span>: <span class="built_in">window</span>;</span><br><span class="line">&#125;</span><br><span class="line"> <span class="comment">// VO ---- AO</span></span><br><span class="line">AO = &#123;</span><br><span class="line">  argument: &#123;&#125;;</span><br><span class="line">  fn: <span class="number">20</span>;</span><br><span class="line">  b: <span class="number">10</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä»¥ä¸Šï¼Œå°±æ˜¯å˜é‡å¯¹è±¡åœ¨ä»£ç æ‰§è¡Œå‰åŠæ‰§è¡Œåçš„å˜åŒ–ã€‚</p>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><ol>
<li><p>å…¨å±€ä¸Šä¸‹æ–‡çš„å˜é‡å¯¹è±¡åˆå§‹åŒ–æ˜¯å…¨å±€å¯¹è±¡</p>
</li>
<li><p>å‡½æ•°ä¸Šä¸‹æ–‡çš„å˜é‡å¯¹è±¡åˆå§‹åŒ–åªåŒ…æ‹¬ arguments å¯¹è±¡</p>
</li>
<li><p>åœ¨è¿›å…¥æ‰§è¡Œä¸Šä¸‹æ–‡æ—¶ä¼šç»™å˜é‡å¯¹è±¡æ·»åŠ å½¢å‚ã€å‡½æ•°å£°æ˜ã€å˜é‡å£°æ˜ç­‰åˆå§‹çš„å±æ€§å€¼</p>
</li>
<li><p>åœ¨ä»£ç æ‰§è¡Œé˜¶æ®µï¼Œä¼šå†æ¬¡ä¿®æ”¹å˜é‡å¯¹è±¡çš„å±æ€§å€¼</p>
</li>
</ol>
]]></content>
      <categories>
        <category>æ·±å…¥ç†è§£JavaScript</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title>æ·±å…¥ç†è§£JavaScriptä¹‹æ‰§è¡Œä¸Šä¸‹æ–‡å’Œæ‰§è¡Œæ ˆ</title>
    <url>/2019/11/27/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3JavaScript%E4%B9%8B%E6%89%A7%E8%A1%8C%E4%B8%8A%E4%B8%8B%E6%96%87%E5%92%8C%E6%89%A7%E8%A1%8C%E6%A0%88/</url>
    <content><![CDATA[<p>éƒ½è¯´æƒ³æˆä¸ºå‡ºè‰²çš„JavaScript å¼€å‘è€…ï¼Œå°±è¦æ·±å…¥å­¦ä¹  JavaScript ç¨‹åºå†…éƒ¨çš„æ‰§è¡Œæœºåˆ¶ï¼Œæœ€è¿‘å­¦äº†ä¸€éJSçš„æ‰§è¡Œä¸Šä¸‹æ–‡å’Œæ‰§è¡Œæ ˆï¼Œä»¥æ­¤ä½œæ€»ç»“ã€‚</p>
<a id="more"></a>
<p>é¦–å…ˆå…ˆæ¥äº†è§£å‡ ä¸ªä¸“ä¸šæ¦‚å¿µ</p>
<ul>
<li><p>ECï¼šå‡½æ•°æ‰§è¡Œç¯å¢ƒï¼ˆæˆ–æ‰§è¡Œä¸Šä¸‹æ–‡ï¼‰ï¼ŒExecution Context</p>
</li>
<li><p>ECSï¼šæ‰§è¡Œç¯å¢ƒæ ˆï¼ŒExecution Context Stack</p>
</li>
<li><p>VOï¼šå˜é‡å¯¹è±¡ï¼ŒVariable Object</p>
</li>
<li><p>AOï¼šæ´»åŠ¨å¯¹è±¡ï¼ŒActive Object</p>
</li>
<li><p>scope chainï¼šä½œç”¨åŸŸé“¾</p>
</li>
</ul>
<h2 id="ä»€ä¹ˆæ˜¯æ‰§è¡Œä¸Šä¸‹æ–‡"><a href="#ä»€ä¹ˆæ˜¯æ‰§è¡Œä¸Šä¸‹æ–‡" class="headerlink" title="ä»€ä¹ˆæ˜¯æ‰§è¡Œä¸Šä¸‹æ–‡"></a>ä»€ä¹ˆæ˜¯æ‰§è¡Œä¸Šä¸‹æ–‡</h2><p>æ¯æ¬¡å½“æ§åˆ¶å™¨è½¬åˆ°ECMAScriptå¯æ‰§è¡Œä»£ç çš„æ—¶å€™ï¼Œå®ƒéƒ½æ˜¯åœ¨æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­è¿è¡Œï¼Œå³æ˜¯æŒ‡å½“å‰æ‰§è¡Œç¯å¢ƒä¸­çš„å˜é‡ã€å‡½æ•°å£°æ˜ï¼Œå‚æ•°ï¼Œä½œç”¨åŸŸé“¾ï¼Œthisç­‰ä¿¡æ¯ã€‚</p>
<h3 id="ç»„æˆä»£ç ç¤ºä¾‹"><a href="#ç»„æˆä»£ç ç¤ºä¾‹" class="headerlink" title="ç»„æˆä»£ç ç¤ºä¾‹"></a>ç»„æˆä»£ç ç¤ºä¾‹</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> ExecutionContextObj = &#123;</span><br><span class="line">    VO: <span class="built_in">window</span>,     <span class="comment">// å˜é‡å¯¹è±¡</span></span><br><span class="line">    ScopeChain: &#123;&#125;, <span class="comment">// ä½œç”¨åŸŸé“¾</span></span><br><span class="line">    <span class="keyword">this</span>: <span class="built_in">window</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="æ‰§è¡Œä¸Šä¸‹æ–‡çš„ç±»å‹"><a href="#æ‰§è¡Œä¸Šä¸‹æ–‡çš„ç±»å‹" class="headerlink" title="æ‰§è¡Œä¸Šä¸‹æ–‡çš„ç±»å‹"></a>æ‰§è¡Œä¸Šä¸‹æ–‡çš„ç±»å‹</h2><p>JavaScript ä¸­æœ‰ä¸‰ç§æ‰§è¡Œä¸Šä¸‹æ–‡ç±»å‹ã€‚</p>
<ol>
<li><p><strong>å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡</strong>â€”â€”  è¿™æ˜¯é»˜è®¤ä¸Šä¸‹æ–‡ï¼Œæµè§ˆå™¨ä¸­çš„å…¨å±€å¯¹è±¡å°±æ˜¯windowå¯¹è±¡ï¼Œä»»ä½•ä¸åœ¨å‡½æ•°å†…éƒ¨çš„ä»£ç éƒ½åœ¨å…¨å±€ä¸Šä¸‹æ–‡ä¸­ï¼ŒthisæŒ‡å‘è¿™ä¸ªå…¨å±€å¯¹è±¡ã€‚</p>
</li>
<li><p><strong>å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡</strong> â€”â€” å½“<strong>å‡½æ•°è¢«è°ƒç”¨æ—¶åˆ›å»º</strong>,ä¼šä¸ºè¯¥å‡½æ•°åˆ›å»ºä¸€ä¸ªæ–°çš„æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œå¯ä»¥æœ‰ä»»æ„ä¸ªã€‚ </p>
</li>
<li><p><strong>Eval å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡</strong> â€”â€”<br>æ‰§è¡Œ evalå‡½æ•°å†…éƒ¨çš„ä»£ç ä¹Ÿæœ‰å±äºå®ƒçš„ä¸Šä¸‹æ–‡ï¼Œç”±äºå¼€å‘ä¸­æ˜¯å°½é‡é¿å…æˆ–ä¸ç”¨evalå‡½æ•°ï¼Œæ•…æ­¤ä¸ä½œè®¨è®ºã€‚</p>
</li>
</ol>
<h2 id="æ‰§è¡Œæ ˆ"><a href="#æ‰§è¡Œæ ˆ" class="headerlink" title="æ‰§è¡Œæ ˆ"></a>æ‰§è¡Œæ ˆ</h2><p>æ‰§è¡Œæ ˆï¼Œä¹Ÿå«è°ƒç”¨æ ˆï¼Œè¢«ç”¨æ¥å­˜å‚¨ä»£ç è¿è¡Œæ—¶åˆ›å»ºçš„æ‰€æœ‰æ‰§è¡Œä¸Šä¸‹æ–‡ã€‚</p>
<blockquote>
<p>æ ˆï¼šä¸€ç§æ•°æ®ç»“æ„ï¼Œéµå¾ªåè¿›å…ˆå‡ºçš„åŸåˆ™</p>
</blockquote>
<p>å½“ JavaScript å¼•æ“ç¬¬ä¸€æ¬¡é‡åˆ°è„šæœ¬æ—¶ï¼Œå®ƒä¼šåˆ›å»ºä¸€ä¸ªå…¨å±€çš„æ‰§è¡Œä¸Šä¸‹æ–‡å¹¶ä¸”å‹å…¥å½“å‰æ‰§è¡Œæ ˆã€‚æ¯å½“å¼•æ“é‡åˆ°ä¸€ä¸ªå‡½æ•°è°ƒç”¨ï¼Œå®ƒä¼šä¸ºè¯¥å‡½æ•°åˆ›å»ºä¸€ä¸ªæ–°çš„æ‰§è¡Œä¸Šä¸‹æ–‡å¹¶å‹å…¥æ ˆçš„é¡¶éƒ¨ã€‚</p>
<p>å¼•æ“ä¼šæ‰§è¡Œé‚£äº›æ‰§è¡Œä¸Šä¸‹æ–‡ä½äºæ ˆé¡¶çš„å‡½æ•°ã€‚å½“è¯¥å‡½æ•°æ‰§è¡Œç»“æŸæ—¶ï¼Œæ‰§è¡Œä¸Šä¸‹æ–‡ä»æ ˆä¸­å¼¹å‡ºï¼Œæ§åˆ¶æµç¨‹åˆ°è¾¾å½“å‰æ ˆä¸­çš„ä¸‹ä¸€ä¸ªä¸Šä¸‹æ–‡ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'fn1è¢«è°ƒç”¨äº† -- åˆ›å»ºäº†fn1çš„å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œå‹å…¥æ ˆ'</span>);</span><br><span class="line">  fn2(); </span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'fn2æ‰§è¡Œå®Œæˆï¼Œfn2çš„æ‰§è¡Œä¸Šä¸‹æ–‡ä¼šä»æ ˆä¸­å¼¹å‡º'</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn2</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'fn2è¢«è°ƒç”¨äº† -- åˆ›å»ºäº†fn2çš„å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œå‹å…¥æ ˆ'</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fn1();</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'fn1æ‰§è¡Œå®Œæˆï¼Œfn2çš„æ‰§è¡Œä¸Šä¸‹æ–‡ä¼šä»æ ˆä¸­å¼¹å‡º'</span>);</span><br></pre></td></tr></table></figure>
<p>è¿è¡Œç»“æœï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">fn1è¢«è°ƒç”¨äº† -- åˆ›å»ºäº†fn1çš„å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œå‹å…¥æ ˆ</span><br><span class="line">fn2è¢«è°ƒç”¨äº† -- åˆ›å»ºäº†fn2çš„å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œå‹å…¥æ ˆ</span><br><span class="line">fn2æ‰§è¡Œå®Œæˆï¼Œfn2çš„æ‰§è¡Œä¸Šä¸‹æ–‡ä¼šä»æ ˆä¸­å¼¹å‡º</span><br><span class="line">fn1æ‰§è¡Œå®Œæˆï¼Œfn2çš„æ‰§è¡Œä¸Šä¸‹æ–‡ä¼šä»æ ˆä¸­å¼¹å‡º</span><br></pre></td></tr></table></figure>
<p>ä¸Šè¿°ä»£ç çš„æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆï¼š<br><img src="https://images.weserv.nl/?url=https://user-gold-cdn.xitu.io/2019/11/27/16ead7c041a4b415?w=1276&h=316&f=png&s=30716" alt=""></p>
<p>å½“ä¸Šè¿°ä»£ç åœ¨æµè§ˆå™¨åŠ è½½æ—¶ï¼ŒJavaScriptå¼•æ“åˆ›å»ºäº†ä¸€ä¸ªå…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡å¹¶æŠŠå®ƒå‹å…¥æ ˆä¸­ï¼Œå½“å‡½æ•°fn1()è¢«è°ƒç”¨æ—¶ï¼ŒJavaScriptä¸ºè¯¥å‡½æ•°åˆ›å»ºäº†ä¸€ä¸ªå‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œå¹¶æŠŠå®ƒå‹å…¥å½“å‰æ‰§è¡Œæ ˆçš„é¡¶éƒ¨ã€‚</p>
<p>å½“fn1()å‡½æ•°å†…éƒ¨è°ƒç”¨fn2()å‡½æ•°æ—¶ï¼ŒJavaScriptå¼•æ“åŒæ ·åˆ›å»ºäº†fn2()çš„å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡å¹¶å‹å…¥æ ˆçš„é¡¶éƒ¨ã€‚ç„¶åæ‰§è¡Œäº†fn2()å‡½æ•°åï¼Œfn2()å‡½æ•°ä¼šä»å½“å‰æ ˆï¼ˆåè¿›å…ˆå‡ºç»“æ„ï¼‰å¼¹å‡ºï¼Œå¹¶ä¸”æŒ‰ç¨‹åºæ‰§è¡Œé¡ºåºç»§ç»­æ‰§è¡Œfn1()å‡½æ•°ï¼Œå³æ­¤åˆ»å¤„äºfn1çš„å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ã€‚</p>
<p>å½“ fn1()å‡½æ•°æ‰§è¡Œå®Œæ¯•ï¼Œå®ƒçš„æ‰§è¡Œä¸Šä¸‹æ–‡ä»æ ˆå¼¹å‡ºï¼Œæ§åˆ¶æµç¨‹åˆ°è¾¾å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ã€‚ä¸€æ—¦æ‰€æœ‰ä»£ç æ‰§è¡Œå®Œæ¯•ï¼ŒJavaScript å¼•æ“ä»å½“å‰æ ˆä¸­ç§»é™¤å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ã€‚</p>
<h2 id="æ‰§è¡Œä¸Šä¸‹æ–‡çš„åˆ›å»º"><a href="#æ‰§è¡Œä¸Šä¸‹æ–‡çš„åˆ›å»º" class="headerlink" title="æ‰§è¡Œä¸Šä¸‹æ–‡çš„åˆ›å»º"></a>æ‰§è¡Œä¸Šä¸‹æ–‡çš„åˆ›å»º</h2><p>å·²ç»çŸ¥é“JavaScript æ€æ ·ç®¡ç†æ‰§è¡Œä¸Šä¸‹æ–‡äº†ï¼Œç°åœ¨æ¥äº†è§£JavaScriptå¼•æ“æ˜¯æ€ä¹ˆåˆ›å»ºæ‰§è¡Œä¸Šä¸‹æ–‡çš„ã€‚</p>
<p>åˆ›å»ºæ‰§è¡Œä¸Šä¸‹æ–‡æœ‰ä¸¤ä¸ªé˜¶æ®µï¼š</p>
<ol>
<li>åˆ›å»ºé˜¶æ®µ</li>
<li>æ‰§è¡Œé˜¶æ®µã€‚</li>
</ol>
<p>åœ¨ JavaScript ä»£ç æ‰§è¡Œå‰ï¼Œæ‰§è¡Œä¸Šä¸‹æ–‡å°†ç»å†åˆ›å»ºé˜¶æ®µã€‚åœ¨åˆ›å»ºé˜¶æ®µä¼šå‘ç”Ÿä¸‰ä»¶äº‹ï¼š</p>
<ol>
<li>thisç»‘å®š</li>
<li>åˆ›å»º(LexicalEnvironment)è¯æ³•ç¯å¢ƒç»„ä»¶</li>
<li>åˆ›å»º(VariableEnvironment)å˜é‡ç¯å¢ƒç»„ä»¶</li>
</ol>
<p>æ‰§è¡Œä¸Šä¸‹æ–‡åœ¨æ¦‚å¿µå¯è¡¨ç¤ºä¸ºï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ExecutionContext &#x3D; &#123;</span><br><span class="line">  ThisBinding &#x3D; &lt;this value&gt;,</span><br><span class="line">  LexicalEnvironment &#x3D; &#123; ... &#125;,</span><br><span class="line">  VariableEnvironment &#x3D; &#123; ... &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="1-åˆ›å»ºé˜¶æ®µ"><a href="#1-åˆ›å»ºé˜¶æ®µ" class="headerlink" title="1. åˆ›å»ºé˜¶æ®µ"></a>1. åˆ›å»ºé˜¶æ®µ</h3><h4 id="this-ç»‘å®š"><a href="#this-ç»‘å®š" class="headerlink" title="this ç»‘å®š"></a>this ç»‘å®š</h4><p>åœ¨å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­ï¼Œthis çš„å€¼æŒ‡å‘å…¨å±€å¯¹è±¡ã€‚(åœ¨æµè§ˆå™¨ä¸­ï¼Œthiså¼•ç”¨windowå¯¹è±¡)</p>
<p>åœ¨å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­ï¼Œthisçš„æŒ‡å‘å–å†³äºå‡½æ•°æ˜¯å¦‚ä½•è¢«è°ƒç”¨çš„,åœ¨æœ¬ç¯‡æš‚ä¸å¯¹thisæŒ‡å‘åšè¯¦ç»†è®¨è®ºã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">    fn: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> win = obj.fn;</span><br><span class="line"></span><br><span class="line">obj.fn(); <span class="comment">//thisæŒ‡å‘obj</span></span><br><span class="line">win(); <span class="comment">// thisæŒ‡å‘window</span></span><br></pre></td></tr></table></figure>

<h4 id="è¯æ³•ç¯å¢ƒï¼ˆLexical-Environmentï¼‰"><a href="#è¯æ³•ç¯å¢ƒï¼ˆLexical-Environmentï¼‰" class="headerlink" title="è¯æ³•ç¯å¢ƒï¼ˆLexical Environmentï¼‰"></a>è¯æ³•ç¯å¢ƒï¼ˆLexical Environmentï¼‰</h4><p>ES6å®˜æ–¹æ–‡æ¡£æŠŠè¯æ³•ç¯å¢ƒå®šä¹‰ä¸ºï¼š</p>
<blockquote>
<p>è¯æ³•ç¯å¢ƒæ˜¯ç”¨æ¥å®šä¹‰ åŸºäºè¯æ³•åµŒå¥—ç»“æ„çš„ECMAScriptä»£ç å†…çš„æ ‡è¯†ç¬¦ä¸å˜é‡å€¼å’Œå‡½æ•°å€¼ä¹‹é—´çš„å…³è”å…³ç³» çš„ä¸€ç§è§„èŒƒç±»å‹ã€‚ä¸€ä¸ªè¯æ³•ç¯å¢ƒç”±ç¯å¢ƒè®°å½•ï¼ˆEnvironment Recordï¼‰å’Œä¸€ä¸ªå¯èƒ½ä¸ºnullçš„å¯¹å¤–éƒ¨è¯æ³•ç¯å¢ƒçš„å¼•ç”¨ï¼ˆouterï¼‰ç»„æˆã€‚ä¸€èˆ¬æ¥è¯´ï¼Œè¯æ³•ç¯å¢ƒéƒ½ä¸ç‰¹å®šçš„ECMAScriptä»£ç è¯­æ³•ç»“æ„ç›¸å…³è”ï¼Œä¾‹å¦‚å‡½æ•°ã€ä»£ç å—ã€TryCatchä¸­çš„Catchä»å¥ï¼Œå¹¶ä¸”æ¯æ¬¡æ‰§è¡Œè¿™ç±»ä»£ç æ—¶éƒ½ä¼šåˆ›å»ºæ–°çš„è¯æ³•ç¯å¢ƒã€‚</p>
</blockquote>
<p>å¯ä»¥ç†è§£ä¸ºè¯æ³•ç¯å¢ƒæ˜¯ä¸€ç§åŒ…å«æ ‡è¯†ç¬¦(å˜é‡/å‡½æ•°çš„åç§°)å’Œå˜é‡(å‡½æ•°/åŸå§‹å€¼/æ•°ç»„å¯¹è±¡ç­‰)æ˜ å°„çš„æ•°æ®ç»“æ„</p>
<h5 id="è¯æ³•ç¯å¢ƒæœ‰ä¸¤ä¸ªç»„æˆéƒ¨åˆ†"><a href="#è¯æ³•ç¯å¢ƒæœ‰ä¸¤ä¸ªç»„æˆéƒ¨åˆ†" class="headerlink" title="è¯æ³•ç¯å¢ƒæœ‰ä¸¤ä¸ªç»„æˆéƒ¨åˆ†"></a>è¯æ³•ç¯å¢ƒæœ‰ä¸¤ä¸ªç»„æˆéƒ¨åˆ†</h5><ol>
<li><p>å£°æ˜å¼ç¯å¢ƒè®°å½•å™¨ï¼šå­˜å‚¨å˜é‡å’Œå‡½æ•°å£°æ˜çš„å®é™…ä½ç½®</p>
</li>
<li><p>å¯¹è±¡ç¯å¢ƒè®°å½•å™¨ï¼šå¯ä»¥è®¿é—®å…¶å¤–éƒ¨è¯æ³•ç¯å¢ƒ(ä½œç”¨åŸŸ)</p>
</li>
</ol>
<h5 id="è¯æ³•ç¯å¢ƒæœ‰ä¸¤ç§ç±»å‹"><a href="#è¯æ³•ç¯å¢ƒæœ‰ä¸¤ç§ç±»å‹" class="headerlink" title="è¯æ³•ç¯å¢ƒæœ‰ä¸¤ç§ç±»å‹"></a>è¯æ³•ç¯å¢ƒæœ‰ä¸¤ç§ç±»å‹</h5><ol>
<li><p>å…¨å±€ç¯å¢ƒï¼šæ˜¯ä¸€ä¸ªæ²¡æœ‰å¤–éƒ¨ç¯å¢ƒçš„è¯æ³•ç¯å¢ƒï¼Œå…¶å¤–éƒ¨ç¯å¢ƒå¼•ç”¨ä¸º nullã€‚æ‹¥æœ‰ä¸€ä¸ªå…¨å±€å¯¹è±¡ï¼ˆwindow å¯¹è±¡ï¼‰åŠå…¶å…³è”çš„æ–¹æ³•å’Œå±æ€§ï¼ˆä¾‹å¦‚æ•°ç»„æ–¹æ³•ï¼‰ä»¥åŠä»»ä½•ç”¨æˆ·è‡ªå®šä¹‰çš„å…¨å±€å˜é‡ï¼Œthis çš„å€¼æŒ‡å‘è¿™ä¸ªå…¨å±€å¯¹è±¡ã€‚</p>
</li>
<li><p>å‡½æ•°ç¯å¢ƒï¼šç”¨æˆ·åœ¨å‡½æ•°ä¸­å®šä¹‰çš„å˜é‡è¢«å­˜å‚¨åœ¨ç¯å¢ƒè®°å½•ä¸­ï¼ŒåŒ…å«äº†arguments å¯¹è±¡ã€‚å¯¹å¤–éƒ¨ç¯å¢ƒçš„å¼•ç”¨å¯ä»¥æ˜¯å…¨å±€ç¯å¢ƒï¼Œä¹Ÿå¯ä»¥æ˜¯åŒ…å«å†…éƒ¨å‡½æ•°çš„å¤–éƒ¨å‡½æ•°ç¯å¢ƒã€‚</p>
</li>
</ol>
<h4 id="å˜é‡ç¯å¢ƒ-VariableEnvironment"><a href="#å˜é‡ç¯å¢ƒ-VariableEnvironment" class="headerlink" title="å˜é‡ç¯å¢ƒ (VariableEnvironment)"></a>å˜é‡ç¯å¢ƒ (VariableEnvironment)</h4><p>å˜é‡ç¯å¢ƒä¹Ÿæ˜¯ä¸€ä¸ªè¯æ³•ç¯å¢ƒï¼Œå› æ­¤å®ƒå…·æœ‰ä¸Šé¢å®šä¹‰çš„è¯æ³•ç¯å¢ƒçš„æ‰€æœ‰å±æ€§ã€‚</p>
<p>åœ¨ES6ä¸­ï¼Œè¯æ³•ç¯å¢ƒç»„ä»¶å’Œå˜é‡ç¯å¢ƒç»„ä»¶ä¹‹é—´çš„ä¸€ä¸ªåŒºåˆ«æ˜¯å‰è€…ç”¨äºå­˜å‚¨å‡½æ•°å£°æ˜å’Œå˜é‡letå’Œconstç»‘å®šï¼Œè€Œåè€…ä»…ç”¨äºå­˜å‚¨å˜é‡varç»‘å®šã€‚</p>
<h3 id="2-æ‰§è¡Œé˜¶æ®µ"><a href="#2-æ‰§è¡Œé˜¶æ®µ" class="headerlink" title="2.æ‰§è¡Œé˜¶æ®µ"></a>2.æ‰§è¡Œé˜¶æ®µ</h3><p>åœ¨æ­¤é˜¶æ®µï¼Œå®Œæˆå¯¹æ‰€æœ‰è¿™äº›å˜é‡çš„åˆ†é…ï¼Œæœ€åæ‰§è¡Œä»£ç ã€‚ï¼ˆåœ¨æ‰§è¡Œé˜¶æ®µï¼Œå¦‚æœ JavaScript å¼•æ“ä¸èƒ½åœ¨æºç ä¸­å£°æ˜çš„å®é™…ä½ç½®æ‰¾åˆ° let å˜é‡çš„å€¼ï¼Œå®ƒä¼šè¢«èµ‹å€¼ä¸º undefinedï¼‰</p>
]]></content>
      <categories>
        <category>æ·±å…¥ç†è§£JavaScript</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title>æ·±å…¥ç†è§£JavaScriptä¹‹å®ç°ç»§æ‰¿çš„7ç§æ–¹å¼</title>
    <url>/2019/11/23/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3JavaScript%E4%B9%8B%E5%AE%9E%E7%8E%B0%E7%BB%A7%E6%89%BF%E7%9A%847%E7%A7%8D%E6%96%B9%E5%BC%8F/</url>
    <content><![CDATA[<p>æœ‰å¿…è¦ææ¸…æ¥šJSå®ç°ç»§æ‰¿çš„æ–¹å¼â€¦</p>
<a id="more"></a>
<h2 id="åŸå‹é“¾ç»§æ‰¿"><a href="#åŸå‹é“¾ç»§æ‰¿" class="headerlink" title="åŸå‹é“¾ç»§æ‰¿"></a>åŸå‹é“¾ç»§æ‰¿</h2><p>æ ¸å¿ƒï¼š<strong>å°†çˆ¶ç±»çš„å®ä¾‹ä½œä¸ºå­ç±»çš„åŸå‹</strong></p>
<p>é¦–å…ˆï¼Œè¦çŸ¥é“æ„é€ å‡½æ•°ã€åŸå‹å’Œå®ä¾‹ä¹‹é—´çš„å…³ç³»ï¼šæ„é€ å‡½æ•°éƒ½æœ‰ä¸€ä¸ªåŸå‹å¯¹è±¡ï¼ŒåŸå‹å¯¹è±¡éƒ½åŒ…å«ä¸€ä¸ªæŒ‡å‘æ„é€ å‡½æ•°çš„æŒ‡é’ˆï¼Œè€Œå®ä¾‹éƒ½åŒ…å«ä¸€ä¸ªåŸå‹å¯¹è±¡çš„æŒ‡é’ˆã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Father</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = <span class="string">'çˆ¶ç±»çš„åå­—'</span>;</span><br><span class="line">&#125;   </span><br><span class="line">Father.prototype.getFatherName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'çˆ¶ç±»çš„æ–¹æ³•'</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Son</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = <span class="string">'å­ç±»çš„åå­—'</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å¦‚æœæ­¤æ—¶æœ‰Sonçš„åŸå‹å¯¹è±¡æœ‰æ–¹æ³•æˆ–å±æ€§ï¼Œä¸‹é¢Son.prototype = new Father()ï¼Œç”±äºåŸå‹é‡å®šå‘ï¼ŒåŸå‹ä¸Šçš„æ–¹æ³•å’Œå±æ€§ä¼šä¸¢å¤±</span></span><br><span class="line">Son.prototype.getAge = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'å­ç±»çš„å¹´é¾„'</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Son.prototype = <span class="keyword">new</span> Father(); <span class="comment">// æ ¸å¿ƒ:åˆ›å»ºçˆ¶ç±»çš„å®ä¾‹ï¼Œå¹¶å°†è¯¥å®ä¾‹èµ‹å€¼ç»™å­ç±»çš„prototype</span></span><br><span class="line"></span><br><span class="line">Son.prototype.getSonName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'å­ç±»çš„æ–¹æ³•'</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> son = <span class="keyword">new</span> Son();</span><br><span class="line">son.getFatherName(); <span class="comment">// çˆ¶ç±»çš„æ–¹æ³•</span></span><br><span class="line">Son.prototype.__proto__.getFatherName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; <span class="comment">// ç¼ºç‚¹ï¼šå¦‚æœæœ‰å¤šä¸ªå®ä¾‹å¯¹å…¶çˆ¶ç±»åŸå‹ï¼Œåˆ™ä¼šäº’ç›¸å½±å“</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'å­ç±»æ”¹å˜çˆ¶ç±»çš„æ–¹æ³•'</span>);</span><br><span class="line">&#125;</span><br><span class="line">son.getFatherName(); <span class="comment">// å­ç±»æ”¹å˜çˆ¶ç±»çš„æ–¹æ³•</span></span><br></pre></td></tr></table></figure>
<p>ç¼ºç‚¹ï¼š</p>
<ol>
<li><p>çˆ¶ç±»ä½¿ç”¨thiså£°æ˜çš„å±æ€§(ç§æœ‰å±æ€§å’Œå…¬æœ‰å±æ€§)è¢«æ‰€æœ‰å®ä¾‹å…±äº«,åœ¨å¤šä¸ªå®ä¾‹ä¹‹é—´å¯¹å¼•ç”¨ç±»å‹æ•°æ®æ“ä½œä¼šäº’ç›¸å½±å“ã€‚</p>
</li>
<li><p>åˆ›å»ºå­ç±»å®ä¾‹æ—¶ï¼Œæ— æ³•å‘çˆ¶ç±»æ„é€ å‡½æ•°ä¼ å‚ã€‚</p>
</li>
</ol>
<h2 id="å€Ÿç”¨æ„é€ å‡½æ•°ç»§æ‰¿-call"><a href="#å€Ÿç”¨æ„é€ å‡½æ•°ç»§æ‰¿-call" class="headerlink" title="å€Ÿç”¨æ„é€ å‡½æ•°ç»§æ‰¿(call)"></a>å€Ÿç”¨æ„é€ å‡½æ•°ç»§æ‰¿(call)</h2><p>æ ¸å¿ƒï¼š<strong>ä½¿ç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°æ¥å¢å¼ºå­ç±»å®ä¾‹</strong>ï¼Œå³å¤åˆ¶çˆ¶ç±»çš„å®ä¾‹å±æ€§ç»™å­ç±»</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Father</span>(<span class="params">name, age</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">    <span class="keyword">this</span>.age = age;</span><br><span class="line">&#125;  </span><br><span class="line">Father.prototype.getFatherName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'çˆ¶ç±»çš„æ–¹æ³•'</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Son</span>(<span class="params">name, age, job</span>)</span>&#123;</span><br><span class="line">    Father.call(<span class="keyword">this</span>,name, age); <span class="comment">// ç»§æ‰¿è‡ªFather</span></span><br><span class="line">    <span class="keyword">this</span>.job = job;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> son = <span class="keyword">new</span> Son(<span class="string">'jacky'</span>, <span class="number">22</span>, <span class="string">'å‰ç«¯å¼€å‘'</span>);</span><br><span class="line"><span class="comment">//son.getFatherName(); // Uncaught TypeError: son.getFatherName is not a function</span></span><br></pre></td></tr></table></figure>
<p>ä¼˜ç‚¹ï¼š</p>
<ol>
<li>å¯ä»¥å‘çˆ¶ç±»ä¼ é€’å‚æ•°,è€Œä¸”è§£å†³äº†åŸå‹é“¾ç»§æ‰¿ä¸­ï¼šçˆ¶ç±»å±æ€§ä½¿ç”¨thiså£°æ˜çš„å±æ€§ä¼šåœ¨æ‰€æœ‰å®ä¾‹å…±äº«çš„é—®é¢˜ã€‚</li>
</ol>
<p>ç¼ºç‚¹ï¼š</p>
<ol>
<li>åªèƒ½ç»§æ‰¿çˆ¶ç±»é€šè¿‡thiså£°æ˜çš„å±æ€§/æ–¹æ³•ï¼Œä¸èƒ½ç»§æ‰¿çˆ¶ç±»prototypeä¸Šçš„å±æ€§/æ–¹æ³•ã€‚</li>
<li>æ¯æ¬¡å­ç±»å®ä¾‹åŒ–éƒ½è¦æ‰§è¡Œçˆ¶ç±»å‡½æ•°ï¼Œé‡æ–°å£°æ˜çˆ¶ç±»thisé‡Œæ‰€å®šä¹‰çš„æ–¹æ³•ï¼Œå› æ­¤çˆ¶ç±»æ–¹æ³•æ— æ³•å¤ç”¨ã€‚</li>
</ol>
<h2 id="ç»„åˆç»§æ‰¿"><a href="#ç»„åˆç»§æ‰¿" class="headerlink" title="ç»„åˆç»§æ‰¿"></a>ç»„åˆç»§æ‰¿</h2><p>æ ¸å¿ƒï¼š<strong>ç»„åˆä¸Šè¿°ä¸¤ç§æ–¹æ³•ï¼Œç”¨åŸå‹é“¾å®ç°å¯¹åŸå‹å±æ€§å’Œæ–¹æ³•çš„ç»§æ‰¿ï¼Œç”¨å€Ÿç”¨æ„é€ å‡½æ•°æŠ€æœ¯æ¥å®ç°å®ä¾‹å±æ€§çš„ç»§æ‰¿</strong>ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Father</span>(<span class="params">name, age</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">    <span class="keyword">this</span>.age = age;</span><br><span class="line">    <span class="keyword">this</span>.sex = <span class="string">'man'</span>;</span><br><span class="line">&#125;</span><br><span class="line">Father.prototype.getFatherName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'çˆ¶ç±»çš„æ–¹æ³•'</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Son</span>(<span class="params">name, age, job</span>)</span>&#123;</span><br><span class="line">    Father.call(<span class="keyword">this</span>,name,age); <span class="comment">// ç¬¬äºŒæ¬¡è°ƒç”¨:åˆ›å»ºå­ç±»å‹å®ä¾‹çš„æ—¶å€™</span></span><br><span class="line">    <span class="keyword">this</span>.job = job;</span><br><span class="line">&#125;</span><br><span class="line">Son.prototype = <span class="keyword">new</span> Father(); <span class="comment">// ç¬¬ä¸€æ¬¡è°ƒç”¨:è®¾ç½®å­ç±»å‹å®ä¾‹çš„åŸå‹çš„æ—¶å€™</span></span><br><span class="line">Son.prototype.constructor = Son; <span class="comment">// prototypeæ„é€ å™¨æŒ‡å›è‡ªå·± </span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> son = <span class="keyword">new</span> Son(<span class="string">'jacky'</span>, <span class="number">22</span>, <span class="string">'å‰ç«¯å¼€å‘'</span>);</span><br><span class="line">son.getFatherName();</span><br><span class="line"><span class="built_in">console</span>.log(son)</span><br></pre></td></tr></table></figure>

<p><img src="https://images.weserv.nl/?url=https://user-gold-cdn.xitu.io/2019/11/20/16e89812367319c7?w=517&h=227&f=png&s=19707" alt=""></p>
<p>ä¼˜ç‚¹ï¼š</p>
<ol>
<li>å¯ä»¥ç»§æ‰¿çˆ¶ç±»åŸå‹ä¸Šçš„å±æ€§ï¼Œå¯ä»¥ä¼ å‚ï¼Œå¯å¤ç”¨ã€‚</li>
<li>æ¯ä¸ªæ–°å­ç±»å¯¹è±¡å®ä¾‹å¼•å…¥çš„æ„é€ å‡½æ•°å±æ€§æ˜¯ç§æœ‰çš„ã€‚</li>
</ol>
<p>ç¼ºç‚¹ï¼š</p>
<ol>
<li>ä¸¤æ¬¡è°ƒç”¨çˆ¶ç±»å‡½æ•°(new fatherFn()å’ŒfatherFn.call(this))ï¼Œé€ æˆä¸€å®šçš„æ€§èƒ½æŸè€—ã€‚</li>
<li>åœ¨ä½¿ç”¨å­ç±»åˆ›å»ºå®ä¾‹å¯¹è±¡æ—¶ï¼Œå…¶åŸå‹ä¸­ä¼šå­˜åœ¨ä¸¤ä»½ç›¸åŒå±æ€§/æ–¹æ³•çš„é—®é¢˜ã€‚</li>
</ol>
<p>æ‹“å±•ï¼š</p>
<h3 id="constructorçš„ä½œç”¨"><a href="#constructorçš„ä½œç”¨" class="headerlink" title="constructorçš„ä½œç”¨"></a>constructorçš„ä½œç”¨</h3><p><strong>è¿”å›åˆ›å»ºå®ä¾‹å¯¹è±¡çš„Objectæ„é€ å‡½æ•°çš„å¼•ç”¨</strong>ã€‚</p>
<blockquote>
<p>å½“æˆ‘ä»¬åªæœ‰å®ä¾‹å¯¹è±¡æ²¡æœ‰æ„é€ å‡½æ•°çš„å¼•ç”¨æ—¶ï¼š<br>æŸäº›åœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬å¯¹å®ä¾‹å¯¹è±¡ç»è¿‡å¤šè½®å¯¼å…¥å¯¼å‡ºï¼Œæˆ‘ä»¬ä¸çŸ¥é“å®ä¾‹æ˜¯ä»å“ªä¸ªå‡½æ•°ä¸­æ„é€ å‡ºæ¥æˆ–è€…è¿½è¸ªå®ä¾‹çš„æ„é€ å‡½æ•°ï¼Œè¾ƒä¸ºè‰°éš¾ã€‚(å®ƒä¸»è¦é˜²æ­¢ä¸€ç§æƒ…å†µä¸‹å‡ºé”™ï¼Œå°±æ˜¯ä½ æ˜¾å¼åœ°å»ä½¿ç”¨æ„é€ å‡½æ•°ã€‚æ¯”å¦‚ï¼Œæˆ‘å¹¶ä¸çŸ¥é“instanceæ˜¯ç”±å“ªä¸ªå‡½æ•°å®ä¾‹åŒ–å‡ºæ¥çš„ï¼Œä½†æ˜¯æˆ‘æƒ³cloneä¸€ä¸ªï¼Œè¿™æ—¶å°±å¯ä»¥è¿™æ ·â€”â€”&gt;instance.constructor)<br>è¿™ä¸ªæ—¶å€™å°±å¯ä»¥é€šè¿‡å®ä¾‹å¯¹è±¡çš„constructorå±æ€§æ¥å¾—åˆ°æ„é€ å‡½æ•°çš„å¼•ç”¨</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> instance = <span class="keyword">new</span> sonFn() <span class="comment">// å®ä¾‹åŒ–å­ç±»</span></span><br><span class="line"><span class="keyword">export</span> instance;</span><br><span class="line"><span class="comment">// å¤šè½®å¯¼å…¥+å¯¼å‡ºï¼Œå¯¼è‡´sonFnè¿½è¸ªéå¸¸éº»çƒ¦ï¼Œæˆ–è€…ä¸æƒ³åœ¨æ–‡ä»¶ä¸­å†å¼•å…¥sonFn</span></span><br><span class="line"><span class="keyword">let</span>  fn = instance.constructor</span><br></pre></td></tr></table></figure>

<p>å› æ­¤æ¯æ¬¡<strong>é‡å†™</strong>å‡½æ•°çš„prototypeéƒ½åº”è¯¥ä¿®æ­£ä¸€ä¸‹constructorçš„æŒ‡å‘ï¼Œä»¥ä¿æŒè¯»å–constructoræŒ‡å‘çš„ä¸€è‡´æ€§</p>
<h2 id="åŸå‹å¼ç»§æ‰¿ï¼ˆObject-create-ï¼‰"><a href="#åŸå‹å¼ç»§æ‰¿ï¼ˆObject-create-ï¼‰" class="headerlink" title="åŸå‹å¼ç»§æ‰¿ï¼ˆObject.create()ï¼‰"></a>åŸå‹å¼ç»§æ‰¿ï¼ˆObject.create()ï¼‰</h2><p>æ ¸å¿ƒï¼šåˆ©ç”¨ä¸€ä¸ªç©ºå¯¹è±¡ä½œä¸ºä¸­ä»‹ï¼Œå°†æŸä¸ªå¯¹è±¡ç›´æ¥èµ‹å€¼ç»™ç©ºå¯¹è±¡æ„é€ å‡½æ•°çš„åŸå‹ï¼Œç„¶åè¿”å›è¿™ä¸ªå‡½æ•°çš„è°ƒç”¨ï¼Œè¿™ä¸ªå‡½æ•°å°±å˜æˆäº†ä¸ªå¯ä»¥éšæ„å¢æ·»å±æ€§çš„å®ä¾‹æˆ–å¯¹è±¡ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* Object.create() çš„å®ç°åŸç† */</span></span><br><span class="line"><span class="comment">// cloneObject()å¯¹ä¼ å…¥å…¶ä¸­çš„å¯¹è±¡æ‰§è¡Œäº†ä¸€æ¬¡æµ…æ‹·è´ï¼Œå°†æ„é€ å‡½æ•°Fçš„åŸå‹ç›´æ¥æŒ‡å‘ä¼ å…¥çš„å¯¹è±¡ã€‚</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">cloneObject</span>(<span class="params">obj</span>)</span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">F</span>(<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line">  F.prototype = obj; <span class="comment">// å°†ä¼ è¿›æ¥objå¯¹è±¡ä½œä¸ºç©ºå‡½æ•°çš„prototype</span></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> F(); <span class="comment">// æ­¤å¯¹è±¡çš„åŸå‹ä¸ºè¢«ç»§æ‰¿çš„å¯¹è±¡, é€šè¿‡åŸå‹é“¾æŸ¥æ‰¾å¯ä»¥æ‹¿åˆ°è¢«ç»§æ‰¿å¯¹è±¡çš„å±æ€§</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> father = &#123;</span><br><span class="line">    name: <span class="string">'jacky'</span>,</span><br><span class="line">    age: <span class="number">22</span>,</span><br><span class="line">    courses: [<span class="string">'å‰ç«¯'</span>]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// var son1 = Object.create(father); // æ•ˆæœä¸€æ ·</span></span><br><span class="line"><span class="keyword">var</span> son1 = cloneObject(father);</span><br><span class="line">son1.courses.push(<span class="string">'åç«¯'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> son2 = cloneObject(father);</span><br><span class="line">son2.courses.push(<span class="string">'å…¨æ ˆ'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(father.courses); <span class="comment">//  ["å‰ç«¯", "åç«¯", "å…¨æ ˆ"]</span></span><br></pre></td></tr></table></figure>
<p>ä¼˜ç‚¹ï¼š</p>
<p>ä»å·²æœ‰å¯¹è±¡è¡ç”Ÿæ–°å¯¹è±¡ï¼Œä¸éœ€è¦åˆ›å»ºè‡ªå®šä¹‰ç±»å‹</p>
<p>ç¼ºç‚¹ï¼š</p>
<p>ä¸åŸå‹é“¾ç»§æ‰¿ä¸€æ ·ã€‚å¤šä¸ªå®ä¾‹å…±äº«è¢«ç»§æ‰¿å¯¹è±¡çš„å±æ€§ï¼Œå­˜åœ¨ç¯¡æ”¹çš„å¯èƒ½ï¼›ä¹Ÿæ— æ³•ä¼ å‚ã€‚</p>
<h2 id="å¯„ç”Ÿå¼ç»§æ‰¿"><a href="#å¯„ç”Ÿå¼ç»§æ‰¿" class="headerlink" title="å¯„ç”Ÿå¼ç»§æ‰¿"></a>å¯„ç”Ÿå¼ç»§æ‰¿</h2><p>æ ¸å¿ƒï¼š<strong>åœ¨åŸå‹å¼ç»§æ‰¿çš„åŸºç¡€ä¸Šï¼Œåˆ›å»ºä¸€ä¸ªä»…ç”¨äºå°è£…ç»§æ‰¿è¿‡ç¨‹çš„å‡½æ•°ï¼Œè¯¥å‡½æ•°åœ¨å†…éƒ¨ä»¥æŸç§å½¢å¼æ¥åšå¢å¼ºå¯¹è±¡(å¢åŠ äº†ä¸€äº›æ–°çš„æ–¹æ³•å’Œå±æ€§)ï¼Œæœ€åè¿”å›å¯¹è±¡ã€‚</strong></p>
<p>ä½¿ç”¨åœºæ™¯ï¼šä¸“é—¨ä¸ºå¯¹è±¡æ¥åšæŸç§å›ºå®šæ–¹å¼çš„å¢å¼ºã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createAnother</span>(<span class="params">obj</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> clone = <span class="built_in">Object</span>.create(obj);</span><br><span class="line">    clone.skill = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;  <span class="comment">// ä»¥æŸç§æ–¹å¼æ¥å¢å¼ºè¿™ä¸ªå¯¹è±¡</span></span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'run'</span>);</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">return</span> clone;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> animal = &#123;</span><br><span class="line">    eat: <span class="string">'food'</span>,</span><br><span class="line">    drink: <span class="string">'water'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> dog = createAnother(animal);</span><br><span class="line">dog.skill();</span><br></pre></td></tr></table></figure>

<p>ä¼˜ç‚¹ï¼šæ²¡æœ‰åˆ›å»ºè‡ªå®šä¹‰ç±»å‹ï¼Œå› ä¸ºåªæ˜¯å¥—äº†ä¸ªå£³å­å¢åŠ ç‰¹å®šå±æ€§/æ–¹æ³•è¿”å›å¯¹è±¡ï¼Œä»¥è¾¾åˆ°å¢å¼ºå¯¹è±¡çš„ç›®çš„</p>
<p>ç¼ºç‚¹ï¼š</p>
<p>åŒåŸå‹å¼ç»§æ‰¿ï¼šåŸå‹é“¾ç»§æ‰¿å¤šä¸ªå®ä¾‹çš„å¼•ç”¨ç±»å‹å±æ€§æŒ‡å‘ç›¸åŒï¼Œå­˜åœ¨ç¯¡æ”¹çš„å¯èƒ½ï¼Œä¹Ÿæ— æ³•ä¼ é€’å‚æ•°</p>
<h2 id="å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿"><a href="#å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿" class="headerlink" title="å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿"></a>å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿</h2><p>æ ¸å¿ƒï¼šç»“åˆå€Ÿç”¨æ„é€ å‡½æ•°ä¼ é€’å‚æ•°å’Œå¯„ç”Ÿæ¨¡å¼å®ç°ç»§æ‰¿</p>
<ol>
<li>é€šè¿‡å€Ÿç”¨æ„é€ å‡½æ•°(call)æ¥ç»§æ‰¿çˆ¶ç±»thiså£°æ˜çš„å±æ€§/æ–¹æ³•</li>
<li>é€šè¿‡åŸå‹é“¾æ¥ç»§æ‰¿æ–¹æ³•</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Father</span>(<span class="params">name, age</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">    <span class="keyword">this</span>.age = age;</span><br><span class="line">&#125;</span><br><span class="line">Father.prototype.getFatherName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'çˆ¶ç±»çš„æ–¹æ³•'</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Son</span>(<span class="params">name, age, job</span>)</span>&#123;</span><br><span class="line">    Father.call(<span class="keyword">this</span>,name,age); <span class="comment">// å€Ÿç”¨æ„é€ ç»§æ‰¿: ç»§æ‰¿çˆ¶ç±»é€šè¿‡thiså£°æ˜å±æ€§å’Œæ–¹æ³•è‡³å­ç±»å®ä¾‹çš„å±æ€§ä¸Š</span></span><br><span class="line">    <span class="keyword">this</span>.job = job;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯„ç”Ÿå¼ç»§æ‰¿ï¼šå°è£…äº†son.prototypeå¯¹è±¡åŸå‹å¼ç»§æ‰¿father.prototypeçš„è¿‡ç¨‹ï¼Œå¹¶ä¸”å¢å¼ºäº†ä¼ å…¥çš„å¯¹è±¡ã€‚</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">inheritPrototype</span>(<span class="params">son,father</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> clone = <span class="built_in">Object</span>.create(father.prototype); <span class="comment">// åŸå‹å¼ç»§æ‰¿ï¼šæµ…æ‹·è´father.prototypeå¯¹è±¡</span></span><br><span class="line">    clone.constructor = son;  <span class="comment">// å¢å¼ºå¯¹è±¡ï¼Œå¼¥è¡¥å› é‡å†™åŸå‹è€Œå¤±å»çš„é»˜è®¤çš„constructor å±æ€§</span></span><br><span class="line">    son.prototype = clone; <span class="comment">// æŒ‡å®šå¯¹è±¡ï¼Œå°†æ–°åˆ›å»ºçš„å¯¹è±¡èµ‹å€¼ç»™å­ç±»çš„åŸå‹</span></span><br><span class="line">&#125;</span><br><span class="line">inheritPrototype(Son,Father); <span class="comment">// å°†çˆ¶ç±»åŸå‹æŒ‡å‘å­ç±»</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ–°å¢å­ç±»åŸå‹å±æ€§</span></span><br><span class="line">Son.prototype.getSonName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'å­ç±»çš„æ–¹æ³•'</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> son = <span class="keyword">new</span> Son(<span class="string">'jacky'</span>,<span class="number">22</span>,<span class="string">'å‰ç«¯å¼€å‘'</span>);</span><br><span class="line"><span class="built_in">console</span>.log(son);</span><br></pre></td></tr></table></figure>

<p><img src="https://images.weserv.nl/?url=https://user-gold-cdn.xitu.io/2019/11/23/16e97782ff645ca0?w=361&h=182&f=png&s=24333" alt=""></p>
<ul>
<li>å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿ç›¸å¯¹äºç»„åˆç»§æ‰¿æœ‰å¦‚ä¸‹ä¼˜ç‚¹ï¼š</li>
</ul>
<ol>
<li>åªè°ƒç”¨ä¸€æ¬¡çˆ¶ç±»Fatheræ„é€ å‡½æ•°ã€‚ä¸å¿…ä¸ºäº†æŒ‡å®šå­ç±»çš„åŸå‹è€Œè°ƒç”¨æ„é€ å‡½æ•°ï¼Œè€Œæ˜¯é—´æ¥çš„è®© Son.prototype è®¿é—®åˆ° Father.prototypeã€‚</li>
<li>é¿å…åœ¨å­ç±»prototypeä¸Šåˆ›å»ºä¸å¿…è¦å¤šä½™çš„å±æ€§ã€‚<br>ä½¿ç”¨åŸå‹å¼ç»§æ‰¿çˆ¶ç±»çš„prototypeï¼Œä¿æŒäº†åŸå‹é“¾ä¸Šä¸‹æ–‡ä¸å˜, instanceof å’ŒisPrototypeOf()ä¹Ÿèƒ½æ­£å¸¸ä½¿ç”¨ã€‚</li>
<li>å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿æ˜¯æœ€æˆç†Ÿçš„ç»§æ‰¿æ–¹æ³•, ä¹Ÿæ˜¯ç°åœ¨æœ€å¸¸ç”¨çš„ç»§æ‰¿æ–¹æ³•ï¼Œä¼—å¤šJSåº“é‡‡ç”¨çš„ç»§æ‰¿æ–¹æ¡ˆä¹Ÿæ˜¯å®ƒã€‚</li>
</ol>
<p>ç¼ºç‚¹ï¼š</p>
<p>ç¡¬è¦è¯´çš„è¯ï¼Œå°±æ˜¯ç»™å­ç±»åŸå‹æ·»åŠ å±æ€§å’Œæ–¹æ³•çš„æ—¶å€™ï¼Œä¸€å®šè¦æ”¾åœ¨inheritPrototype()æ–¹æ³•ä¹‹å</p>
<h2 id="ES6-extendsç»§æ‰¿ï¼ˆæœ€ä¼˜æ–¹å¼ï¼‰"><a href="#ES6-extendsç»§æ‰¿ï¼ˆæœ€ä¼˜æ–¹å¼ï¼‰" class="headerlink" title="ES6 extendsç»§æ‰¿ï¼ˆæœ€ä¼˜æ–¹å¼ï¼‰"></a>ES6 extendsç»§æ‰¿ï¼ˆæœ€ä¼˜æ–¹å¼ï¼‰</h2><p>æ ¸å¿ƒï¼š ç±»ä¹‹é—´é€šè¿‡extendså…³é”®å­—å®ç°ç»§æ‰¿ï¼Œæ¸…æ™°æ–¹ä¾¿ã€‚ class ä»…ä»…æ˜¯ä¸€ä¸ªè¯­æ³•ç³–ï¼Œå®ƒçš„æ ¸å¿ƒæ€æƒ³ä»ç„¶æ˜¯å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Father</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(name, age) &#123;</span><br><span class="line">	<span class="keyword">this</span>.name = name;</span><br><span class="line">	<span class="keyword">this</span>.age = age;</span><br><span class="line">  &#125;</span><br><span class="line">  skill() &#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">'çˆ¶ç±»çš„æŠ€èƒ½'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Son</span> <span class="keyword">extends</span> <span class="title">Father</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(name, age, job)&#123;</span><br><span class="line">	<span class="keyword">super</span>(name, age); <span class="comment">// è°ƒç”¨çˆ¶ç±»çš„constructor,åªæœ‰è°ƒç”¨superä¹‹åï¼Œæ‰å¯ä»¥ä½¿ç”¨thiså…³é”®å­—</span></span><br><span class="line">	<span class="keyword">this</span>.job = job;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  getInfo() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name, <span class="keyword">this</span>.age, <span class="keyword">this</span>.job);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> son = <span class="keyword">new</span> Son(<span class="string">'jacky'</span>,<span class="number">22</span>,<span class="string">'å‰ç«¯å¼€å‘'</span>);</span><br><span class="line">son.skill(); <span class="comment">// çˆ¶ç±»çš„æŠ€èƒ½</span></span><br><span class="line">son.getInfo(); <span class="comment">// jacky 22 å‰ç«¯å¼€å‘</span></span><br></pre></td></tr></table></figure>

<ul>
<li>å¦‚æœå­ç±»æ²¡æœ‰å®šä¹‰constructoræ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•ä¼šè¢«é»˜è®¤æ·»åŠ ï¼Œä»£ç å¦‚ä¸‹ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸ç®¡æœ‰æ²¡æœ‰æ˜¾å¼å®šä¹‰ï¼Œä»»ä½•ä¸€ä¸ªå­ç±»éƒ½æœ‰constructoræ–¹æ³•ã€‚</li>
</ul>
<blockquote>
<p>å­ç±»å¿…é¡»åœ¨constructoræ–¹æ³•ä¸­è°ƒç”¨superæ–¹æ³•ï¼Œå¦åˆ™æ–°å»ºå®ä¾‹æ—¶ä¼šæŠ¥é”™ã€‚è¿™æ˜¯å› ä¸ºå­ç±»è‡ªå·±çš„thiså¯¹è±¡ï¼Œå¿…é¡»å…ˆé€šè¿‡çˆ¶ç±»çš„æ„é€ å‡½æ•°å®Œæˆå¡‘é€ ï¼Œå¾—åˆ°ä¸çˆ¶ç±»åŒæ ·çš„å®ä¾‹å±æ€§å’Œæ–¹æ³•ï¼Œç„¶åå†å¯¹å…¶è¿›è¡ŒåŠ å·¥ï¼ŒåŠ ä¸Šå­ç±»è‡ªå·±çš„å®ä¾‹å±æ€§å’Œæ–¹æ³•ã€‚å¦‚æœä¸è°ƒç”¨superæ–¹æ³•ï¼Œå­ç±»å°±å¾—ä¸åˆ°thiså¯¹è±¡ã€‚</p>
</blockquote>
<h2 id="ES5ç»§æ‰¿ä¸ES6ç»§æ‰¿çš„åŒºåˆ«"><a href="#ES5ç»§æ‰¿ä¸ES6ç»§æ‰¿çš„åŒºåˆ«" class="headerlink" title="ES5ç»§æ‰¿ä¸ES6ç»§æ‰¿çš„åŒºåˆ«"></a>ES5ç»§æ‰¿ä¸ES6ç»§æ‰¿çš„åŒºåˆ«</h2><ol>
<li>ES5çš„ç»§æ‰¿å®è´¨ä¸Šæ˜¯å…ˆåˆ›å»ºå­ç±»çš„å®ä¾‹å¯¹è±¡ï¼Œå†å°†çˆ¶ç±»çš„æ–¹æ³•æ·»åŠ åˆ°thisä¸Š( Father.call(this) )ã€‚</li>
<li>ES6çš„ç»§æ‰¿æ˜¯å…ˆåˆ›å»ºçˆ¶ç±»çš„å®ä¾‹å¯¹è±¡thisï¼Œå†ç”¨å­ç±»çš„æ„é€ å‡½æ•°ä¿®æ”¹thisã€‚</li>
<li>å› ä¸ºå­ç±»æ²¡æœ‰è‡ªå·±çš„thiså¯¹è±¡ï¼Œæ‰€ä»¥å¿…é¡»å…ˆè°ƒç”¨çˆ¶ç±»çš„super()æ–¹æ³•ã€‚</li>
</ol>
]]></content>
      <categories>
        <category>æ·±å…¥ç†è§£JavaScript</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title>å®ç°swiperè‡ªå®šä¹‰åˆ†é¡µå™¨</title>
    <url>/2019/11/16/%E5%AE%9E%E7%8E%B0swiper%E8%87%AA%E5%AE%9A%E4%B9%89%E5%88%86%E9%A1%B5%E5%99%A8/</url>
    <content><![CDATA[<p><strong>é—®é¢˜:ä¸æƒ³ä½¿ç”¨swiper(ç”¨çš„æ˜¯4.5.1ç‰ˆæœ¬)çš„è‡ªå¸¦çš„åœ†é’®å¼çš„åˆ†é¡µå™¨ï¼Œéœ€è¦è‡ªå®šä¹‰æ ·å¼åŒæ—¶åˆ†é¡µå™¨éœ€è¦æ‘†åœ¨å›¾ç‰‡å¤–é¢</strong></p>
<a id="more"></a>

<p>è§£å†³åŠæ³•:åˆ©ç”¨swiperæä¾›çš„renderCustom()æ–¹æ³•</p>
<p>htmlæ–‡ä»¶</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"swiper-box"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"swiper-container"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"swiper-wrapper"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"swiper-slide"</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"./img/IMG_20191109_141728.jpg"</span> <span class="attr">alt</span>=<span class="string">""</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"swiper-slide"</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"./img/IMG_20191109_154050.jpg"</span> <span class="attr">alt</span>=<span class="string">""</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--åˆ†é¡µå™¨è¦æ”¾å›¾ç‰‡å¤–æ˜¾ç¤ºçš„è¯ï¼Œéœ€è¦ç§»å‡ºæ¥--&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--&lt;div class="swiper-pagination"&gt;&lt;/div&gt;--&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"swiper-pagination"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>jsæ–‡ä»¶</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> mySwiper = <span class="keyword">new</span> Swiper (<span class="string">'.swiper-container'</span>, &#123;</span><br><span class="line">        autoplay: &#123;</span><br><span class="line">            delay: <span class="number">3000</span>,</span><br><span class="line">            disableOnInteraction: <span class="literal">false</span></span><br><span class="line">        &#125;,</span><br><span class="line">        pagination: &#123;</span><br><span class="line">            el: <span class="string">'.swiper-pagination'</span>,</span><br><span class="line">            type: <span class="string">'custom'</span>,</span><br><span class="line">            renderCustom: <span class="function"><span class="keyword">function</span> (<span class="params">swiper, current, total</span>) </span>&#123;</span><br><span class="line">                <span class="keyword">var</span> customPaginationHtml = <span class="string">""</span>;</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; total; i++) &#123;</span><br><span class="line">                    <span class="comment">// åˆ¤æ–­å“ªä¸ªåˆ†é¡µå™¨æ­¤åˆ»åº”è¯¥è¢«æ¿€æ´»</span></span><br><span class="line">                    <span class="keyword">if</span>(i == (current - <span class="number">1</span>)) &#123;</span><br><span class="line">                        customPaginationHtml += <span class="string">'&lt;span class="swiper-pagination-customs swiper-pagination-customs-active"&gt;&lt;/span&gt;'</span>;</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        customPaginationHtml += <span class="string">'&lt;span class="swiper-pagination-customs"&gt;&lt;/span&gt;'</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">return</span> customPaginationHtml;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure>
<p>cssæ–‡ä»¶</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.swiper-box</span>&#123;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span> auto;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.swiper-container</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">74vw</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">34vw</span>;</span><br><span class="line">    <span class="attribute">margin-top</span>: <span class="number">4vw</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.swiper-container</span> <span class="selector-class">.swiper-slide</span> <span class="selector-tag">img</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.swiper-pagination</span>&#123;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">74vw</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.swiper-pagination-bullet</span>&#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">4vw</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* åŒ…è£¹è‡ªå®šä¹‰åˆ†é¡µå™¨çš„divçš„ä½ç½®çš„æ ·å¼ */</span></span><br><span class="line"><span class="selector-class">.swiper-pagination-custom</span> &#123;</span><br><span class="line">    <span class="attribute">bottom</span>: -<span class="number">5vw</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.swiper-pagination-customs</span> &#123;</span><br><span class="line">    <span class="attribute">background-image</span>: <span class="built_in">url</span>(../img/point-grey.png); <span class="comment">/* æœªè½®æ’­åˆ°çš„å›¾ç‰‡åˆ†é¡µæ ·å¼ */</span></span><br><span class="line">    <span class="attribute">display</span>: inline-block;</span><br><span class="line">    <span class="attribute">background-repeat</span>: no-repeat;</span><br><span class="line">    <span class="attribute">background-size</span>: contain;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">1.4vw</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">1.4vw</span>;</span><br><span class="line">    <span class="attribute">margin-left</span>: <span class="number">2vw</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*è‡ªå®šä¹‰åˆ†é¡µå™¨æ¿€æ´»æ—¶çš„æ ·å¼è¡¨ç°*/</span></span><br><span class="line"><span class="selector-class">.swiper-pagination-customs-active</span> &#123;</span><br><span class="line">    <span class="attribute">background-image</span>: <span class="built_in">url</span>(../img/point-green.png);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ•ˆæœå¦‚ä¸‹ï¼š<img src="/images/swiper-pagination.png" alt=" "></p>
]]></content>
      <categories>
        <category>å¼€å‘æ‚è®°</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title>ç§»åŠ¨ç«¯åŸç”ŸJSä¹‹å¼€å¯å’Œç¦æ­¢é¡µé¢æ»šåŠ¨</title>
    <url>/2019/11/10/%E7%A7%BB%E5%8A%A8%E7%AB%AF%E5%8E%9F%E7%94%9FJS%E4%B9%8B%E5%BC%80%E5%90%AF%E5%92%8C%E7%A6%81%E6%AD%A2%E9%A1%B5%E9%9D%A2%E6%BB%9A%E5%8A%A8/</url>
    <content><![CDATA[<p>åœ¨åšç§»åŠ¨ç«¯é¡µé¢é€šå¸¸æœ‰æ“ä½œéœ€è¦ç¦æ­¢é¡µé¢çš„æ»šåŠ¨ï¼Œæ¥çœ‹çœ‹åŸç”Ÿjsæ€ä¹ˆæ“ä½œ</p>
<a id="more"></a>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">handler</span>(<span class="params">ev</span>)</span>&#123;</span><br><span class="line">    ev.preventDefault();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ç¦æ­¢é¡µé¢æ»šåŠ¨</span></span><br><span class="line"><span class="built_in">document</span>.body.addEventListener(<span class="string">'touchmove'</span>, handler, &#123; <span class="attr">passive</span>: <span class="literal">false</span> &#125;);</span><br></pre></td></tr></table></figure>
<ul>
<li>passiveï¼šfalseã€‚ è®¾ç½®è¯¥å±æ€§çš„ç›®çš„ä¸»è¦æ˜¯ä¸ºäº†åœ¨é˜»æ­¢äº‹ä»¶é»˜è®¤è¡Œä¸ºå¯¼è‡´çš„å¡é¡¿ã€‚ç­‰å¾…ç›‘å¬å™¨çš„æ‰§è¡Œæ˜¯è€—æ—¶çš„ï¼Œæœ‰äº›ç”šè‡³è€—æ—¶å¾ˆæ˜æ˜¾ï¼Œè¿™æ ·å°±ä¼šå¯¼è‡´é¡µé¢å¡é¡¿ã€‚å³ä¾¿ç›‘å¬å™¨æ˜¯ä¸ªç©ºå‡½æ•°ï¼Œä¹Ÿä¼šäº§ç”Ÿä¸€å®šçš„å¡é¡¿ï¼Œæ¯•ç«Ÿç©ºå‡½æ•°çš„æ‰§è¡Œä¹Ÿä¼šè€—æ—¶ã€‚åŠ ä¸Š{ passive: false }èƒ½é˜²æ­¢é¡µé¢å¡é¡¿ã€‚<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å¼€å¯é¡µé¢æ»šåŠ¨</span></span><br><span class="line"><span class="built_in">document</span>.body.removeEventListener(<span class="string">'touchmove'</span>, handler, &#123; <span class="attr">passive</span>: <span class="literal">false</span> &#125;);</span><br></pre></td></tr></table></figure></li>
<li>æ³¨æ„ç‚¹ï¼Œä¸èƒ½è¿™æ ·å†™<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å¼€å¯é¡µé¢æ»šåŠ¨</span></span><br><span class="line"><span class="built_in">document</span>.body.addEventListener(<span class="string">'touchmove'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">ev</span>)</span>&#123;</span><br><span class="line">    ev.preventDefault();</span><br><span class="line">&#125;, &#123; <span class="attr">passive</span>: <span class="literal">false</span> &#125;);</span><br></pre></td></tr></table></figure></li>
<li>æ·»åŠ å’Œç§»é™¤çš„å‡½æ•°å¯¹è±¡åº”è¯¥æ˜¯åŒä¸€ä¸ª,å¦åˆ™ç§»é™¤ä¸èµ·ä½œç”¨,å³listenerä¸èƒ½ç›´æ¥ç”¨åŒ¿åå‡½æ•°</li>
</ul>
]]></content>
      <categories>
        <category>å¼€å‘æ‚è®°</category>
      </categories>
      <tags>
        <tag>ç§»åŠ¨ç«¯</tag>
      </tags>
  </entry>
  <entry>
    <title>sessionStorageã€localStorageç”¨æ³•æ€»ç»“</title>
    <url>/2019/11/03/sessionStorage%E3%80%81localStorage%E7%94%A8%E6%B3%95%E6%80%BB%E7%BB%93/</url>
    <content><![CDATA[<p>åœ¨å·¥ä½œä¸­ä½¿ç”¨sessionStorageå­˜å‚¨æ•°æ®æ—¶ï¼Œå‘ç°sessionStorageæ— æ³•ç›´æ¥å­˜å‚¨æ•°ç»„å’Œå¯¹è±¡ï¼Œå¦‚å­˜å…¥å¯¹è±¡åˆ™æ˜¾ç¤ºä¸ºâ€[object Object]â€ï¼Œå¯¹æ­¤ä½œä¸‹è®°å½•ï¼Œé‡æ–°æ¸©ä¹ sessionStorageå’ŒlocalStorage</p>
<a id="more"></a>

<p>html5 ä¸­çš„ web Storage åŒ…æ‹¬äº†ä¸¤ç§å­˜å‚¨æ–¹å¼ï¼šsessionStorage å’Œ localStorage</p>
<h2 id="å…±åŒç‚¹"><a href="#å…±åŒç‚¹" class="headerlink" title="å…±åŒç‚¹"></a>å…±åŒç‚¹</h2><p>å­˜å‚¨å¤§å°ä¸º5MBï¼Œéƒ½ä¿å­˜åœ¨å®¢æˆ·ç«¯ï¼Œä¸ä¸æœåŠ¡å™¨è¿›è¡Œäº¤äº’é€šä¿¡ï¼Œæœ‰ç›¸åŒçš„Web API</p>
<h2 id="sessionStorageã€localStorageåŒºåˆ«"><a href="#sessionStorageã€localStorageåŒºåˆ«" class="headerlink" title="sessionStorageã€localStorageåŒºåˆ«"></a>sessionStorageã€localStorageåŒºåˆ«</h2><p>localStorage å­˜å‚¨æŒä¹…æ•°æ®ï¼Œæµè§ˆå™¨å…³é—­åæ•°æ®ä¸ä¸¢å¤±é™¤éä¸»åŠ¨åˆ é™¤æ•°æ®ï¼›</p>
<p>sessionStorage æ•°æ®åœ¨å½“å‰æµè§ˆå™¨çª—å£å…³é—­åè‡ªåŠ¨åˆ é™¤ã€‚</p>
<p>å› æ­¤<strong>sessionStorage å’Œ localStorage çš„ä¸»è¦åŒºåˆ«åœ¨äºä»–ä»¬å­˜å‚¨æ•°æ®çš„ç”Ÿå‘½å‘¨æœŸ</strong>ï¼ŒsessionStorage å­˜å‚¨çš„æ•°æ®çš„ç”Ÿå‘½å‘¨æœŸæ˜¯ä¸€ä¸ªä¼šè¯ï¼Œè€Œ localStorageå­˜å‚¨çš„æ•°æ®çš„ç”Ÿå‘½å‘¨æœŸæ˜¯æ°¸ä¹…ï¼Œé™¤éä¸»åŠ¨åˆ é™¤æ•°æ®ï¼Œå¦åˆ™æ°¸è¿œä¸ä¼šè¿‡æœŸ</p>
<h2 id="Web-Storage-API"><a href="#Web-Storage-API" class="headerlink" title="Web Storage API"></a>Web Storage API</h2><p>localStorage å’Œ sessionStorage æœ‰ç€ç»Ÿä¸€çš„APIæ¥å£ï¼Œä¸‹é¢ä»¥sessionStorageä¸ºä¾‹ä»‹ç»ä¸€ä¸‹ API æ¥å£ä½¿ç”¨æ–¹æ³•</p>
<h3 id="æ·»åŠ é”®å€¼å¯¹"><a href="#æ·»åŠ é”®å€¼å¯¹" class="headerlink" title="æ·»åŠ é”®å€¼å¯¹"></a>æ·»åŠ é”®å€¼å¯¹</h3><p><strong>setItem(key,value)ï¼šä¸ºæŒ‡å®škeyå€¼è®¾ç½®ä¸€ä¸ªå¯¹åº”çš„valueå€¼</strong></p>
<p>é™¤äº†ä½¿ç”¨setItemæ–¹æ³•ï¼Œè¿˜å¯ä»¥ä½¿ç”¨sessionStorage.key = valueæˆ–è€…sessionStorage[â€˜keyâ€™] = valueè¿™ä¸¤ç§å½¢å¼ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æŠŠnameå€¼å­˜å‚¨åˆ°nameçš„é”®ä¸Š</span></span><br><span class="line">sessionStorage.setItem(<span class="string">'name'</span>, <span class="string">'jacky'</span>); <span class="comment">// æ³•1 </span></span><br><span class="line"><span class="comment">// sessionStorage.name = 'jacky'; // æ³•2 </span></span><br><span class="line"><span class="comment">// sessionStorage['name'] = 'jacky'; // æ³•3</span></span><br></pre></td></tr></table></figure>
<p><strong>æ·»åŠ æ•°ç»„å’Œå¯¹è±¡</strong></p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯keyå’Œvalueå€¼å¿…é¡»æ˜¯<strong>å­—ç¬¦ä¸²å½¢å¼</strong>çš„ï¼Œå¦‚æœä¸æ˜¯å­—ç¬¦ä¸²ï¼Œä¼šè°ƒç”¨å®ƒä»¬ç›¸åº”çš„toString()æ–¹æ³•æ¥è½¬æ¢æˆå­—ç¬¦ä¸²å†å­˜å‚¨ã€‚</p>
<p>æ‰€ä»¥è¦å­˜å‚¨æ•°ç»„æˆ–å¯¹è±¡æ—¶ï¼Œåº”å…ˆè½¬æ¢æˆå­—ç¬¦ä¸²æ ¼å¼ï¼ˆå¦‚JSONæ ¼å¼ï¼‰å†è¿›è¡Œå­˜å‚¨ï¼Œä½¿ç”¨<strong>JSON.stringify(obj)æ–¹æ³•</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    name: <span class="string">'jacky'</span>, </span><br><span class="line">    age: <span class="number">22</span></span><br><span class="line">&#125;;</span><br><span class="line">sessionStorage[<span class="string">'person'</span>] = <span class="built_in">JSON</span>.stringify(obj);</span><br><span class="line"><span class="comment">//sessionStorage['person'] = obj; ä¸èƒ½è¿™æ ·å­˜å‚¨ï¼Œè¿™æ ·å­˜è¿›å»ç»“æœæ˜¯"[object Object]"</span></span><br></pre></td></tr></table></figure>

<p>å­˜è¿›å»ä¹‹ååˆ™ä¸ºå­—ç¬¦ä¸²æ ¼å¼</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="string">"&#123;"</span>name<span class="string">":"</span>jacky<span class="string">","</span>age<span class="string">":22&#125;"</span></span><br></pre></td></tr></table></figure>

<p>éœ€è¦æ‹¿å‡ºæ¥ä½¿ç”¨çš„æ—¶å€™åˆ™ä½¿ç”¨<strong>JSON.parse()æ–¹æ³•</strong>å°†JSONå­—ç¬¦ä¸²è½¬æ¢ä¸ºå¯¹è±¡</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> person = <span class="built_in">JSON</span>.parse(sessionStorage[<span class="string">'person'</span>])</span><br></pre></td></tr></table></figure>
<p>åŒç†ï¼Œæ•°ç»„ä¹Ÿæ˜¯è¿™ä¸ªç”¨è¿™ä¸ªæ–¹æ³•è¿›è¡Œå­˜å‚¨ã€‚</p>
<h3 id="getItemï¼ˆkeyï¼‰ï¼šæ ¹æ®æŒ‡å®šçš„keyå€¼è·å–å¯¹åº”çš„valueå€¼"><a href="#getItemï¼ˆkeyï¼‰ï¼šæ ¹æ®æŒ‡å®šçš„keyå€¼è·å–å¯¹åº”çš„valueå€¼" class="headerlink" title="getItemï¼ˆkeyï¼‰ï¼šæ ¹æ®æŒ‡å®šçš„keyå€¼è·å–å¯¹åº”çš„valueå€¼"></a>getItemï¼ˆkeyï¼‰ï¼šæ ¹æ®æŒ‡å®šçš„keyå€¼è·å–å¯¹åº”çš„valueå€¼</h3><p>å’ŒsetItemä¸€æ ·ï¼ŒgetItemä¹Ÿæœ‰ä¸¤ç§ç­‰æ•ˆå½¢å¼,value = sessionStorage.keyå’Œvalue = sessionStorage[â€˜keyâ€™]ã€‚è·å–åˆ°çš„ value å€¼æ˜¯å­—ç¬¦ä¸²ç±»å‹ï¼Œå¦‚æœéœ€è¦å…¶ä»–ç±»å‹ï¼Œéœ€è¦è‡ªå·±åšç±»å‹è½¬æ¢ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// è·å–å­˜å‚¨åˆ° name çš„é”®ä¸Šçš„å€¼</span></span><br><span class="line"><span class="keyword">var</span> name = sessionStorage.getItem(<span class="string">'name'</span>);</span><br><span class="line"><span class="comment">// var name = sessionStorage.name;</span></span><br><span class="line"><span class="comment">// var name = sessionStorage['name'];</span></span><br><span class="line"><span class="string">``</span><span class="string">`    </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">### removeItemï¼ˆkeyï¼‰ï¼šåˆ é™¤æŒ‡å®šçš„keyå€¼å¯¹åº”çš„valueå€¼</span></span><br><span class="line"><span class="string">æ³¨æ„localStorage æ²¡æœ‰æ•°æ®è¿‡æœŸçš„æ¦‚å¿µï¼Œæ‰€æœ‰æ•°æ®å¦‚æœå¤±æ•ˆäº†ï¼Œéœ€è¦å¼€å‘è€…æ‰‹åŠ¨åˆ é™¤ã€‚</span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>javascript</span><br><span class="line">    <span class="keyword">var</span> name = sessionStorage.getItem(<span class="string">'name'</span>); <span class="comment">// "jacky"</span></span><br><span class="line">    sessionStorage.removeItem(<span class="string">'name'</span>);</span><br><span class="line">    name = sessionStorage.getItem(<span class="string">'name'</span>); <span class="comment">// null</span></span><br></pre></td></tr></table></figure>

<h3 id="clear-ï¼šåˆ é™¤æ‰€æœ‰å­˜å‚¨çš„å†…å®¹"><a href="#clear-ï¼šåˆ é™¤æ‰€æœ‰å­˜å‚¨çš„å†…å®¹" class="headerlink" title="clear()ï¼šåˆ é™¤æ‰€æœ‰å­˜å‚¨çš„å†…å®¹"></a>clear()ï¼šåˆ é™¤æ‰€æœ‰å­˜å‚¨çš„å†…å®¹</h3><p>å®ƒå’ŒremoveItemä¸åŒçš„åœ°æ–¹æ˜¯removeItemåˆ é™¤çš„æ˜¯æŸä¸€é¡¹ï¼Œè€Œclearæ˜¯åˆ é™¤æ‰€æœ‰ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ¸…é™¤ localStorage</span></span><br><span class="line">sessionStorage.clear();</span><br><span class="line"><span class="keyword">var</span> len = sessionStorage.length; <span class="comment">// 0</span></span><br><span class="line"><span class="comment">//lengthå±æ€§ç”¨äºè·å– sessionStorage ä¸­é”®å€¼å¯¹çš„æ•°é‡ã€‚</span></span><br></pre></td></tr></table></figure>

<h3 id="key-index-ï¼šåœ¨æŒ‡å®šçš„æ•°å­—ä½ç½®è·å–è¯¥ä½ç½®çš„åå­—"><a href="#key-index-ï¼šåœ¨æŒ‡å®šçš„æ•°å­—ä½ç½®è·å–è¯¥ä½ç½®çš„åå­—" class="headerlink" title="key(index)ï¼šåœ¨æŒ‡å®šçš„æ•°å­—ä½ç½®è·å–è¯¥ä½ç½®çš„åå­—"></a>key(index)ï¼šåœ¨æŒ‡å®šçš„æ•°å­—ä½ç½®è·å–è¯¥ä½ç½®çš„åå­—</h3><p>éœ€è¦æ³¨æ„çš„æ˜¯èµ‹å€¼æ—©çš„é”®å€¼å¯¹åº”çš„ç´¢å¼•å€¼å¤§ï¼Œèµ‹å€¼å®Œçš„é”®å€¼å¯¹åº”çš„ç´¢å¼•å°,keyæ–¹æ³•å¯ç”¨äºéå† sessionStorage å­˜å‚¨çš„é”®å€¼ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">sessionStorage.setItem(<span class="string">'name'</span>,<span class="string">'jacky'</span>);</span><br><span class="line"><span class="keyword">var</span> key = sessionStorage.key(<span class="number">0</span>); <span class="comment">// 'name'</span></span><br><span class="line">sessionStorage.setItem(<span class="string">'age'</span>, <span class="number">10</span>);</span><br><span class="line">key = sessionStorage.key(<span class="number">0</span>); <span class="comment">// 'age'</span></span><br><span class="line">key = sessionStorage.key(<span class="number">1</span>); <span class="comment">// 'name'</span></span><br></pre></td></tr></table></figure>

<h2 id="ä¸¤è€…åº”ç”¨åœºæ™¯"><a href="#ä¸¤è€…åº”ç”¨åœºæ™¯" class="headerlink" title="ä¸¤è€…åº”ç”¨åœºæ™¯"></a>ä¸¤è€…åº”ç”¨åœºæ™¯</h2><h3 id="sessionStorageåº”ç”¨åœºæ™¯"><a href="#sessionStorageåº”ç”¨åœºæ™¯" class="headerlink" title="sessionStorageåº”ç”¨åœºæ™¯"></a>sessionStorageåº”ç”¨åœºæ™¯</h3><p>è¿›è¡Œé¡µé¢ä¼ å€¼</p>
<h3 id="localStorageåº”ç”¨åœºæ™¯"><a href="#localStorageåº”ç”¨åœºæ™¯" class="headerlink" title="localStorageåº”ç”¨åœºæ™¯"></a>localStorageåº”ç”¨åœºæ™¯</h3><ol>
<li>é€‚åˆé•¿æœŸä¿å­˜åœ¨æœ¬åœ°çš„æ•°æ®</li>
<li>å¯ä»¥ç”¨äºå­˜å‚¨è¯¥æµè§ˆå™¨å¯¹è¯¥é¡µé¢çš„è®¿é—®æ¬¡æ•°</li>
</ol>
]]></content>
      <categories>
        <category>æ—¥å¸¸æ€»ç»“</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title>æ·±å…¥ç†è§£JavaScriptä¹‹è·å–æ•°ç»„ä¸­çš„æœ€å¤§å€¼æ–¹æ³•ï¼ˆthis,applyï¼‰</title>
    <url>/2019/10/26/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3JavaScript%E4%B9%8B%E8%8E%B7%E5%8F%96%E6%95%B0%E7%BB%84%E4%B8%AD%E7%9A%84%E6%9C%80%E5%A4%A7%E5%80%BC%E6%96%B9%E6%B3%95%EF%BC%88this-apply%EF%BC%89/</url>
    <content><![CDATA[<p>1.æ’åºæ³• 2.å‡è®¾æ³• 3.åŸºäºMath.maxä¸apply 4.ES6å±•å¼€è¿ç®—ç¬¦</p>
<a id="more"></a>
<h2 id="æ’åºæ³•"><a href="#æ’åºæ³•" class="headerlink" title="æ’åºæ³•"></a>æ’åºæ³•</h2><p>æ€è·¯ï¼šç»™æ•°ç»„å…ˆæ’åº(ç”±å¤§åˆ°å°æ’åº),ç¬¬ä¸€é¡¹å°±æ˜¯æœ€å¤§å€¼</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">9</span>, <span class="number">20</span>, <span class="number">40</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="keyword">let</span> max1 = arr.sort(<span class="function"><span class="keyword">function</span>(<span class="params">a,b</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> b-a;</span><br><span class="line">&#125;)[<span class="number">0</span>];</span><br><span class="line"><span class="built_in">console</span>.log(max1);</span><br></pre></td></tr></table></figure>
<h2 id="å‡è®¾æ³•"><a href="#å‡è®¾æ³•" class="headerlink" title="å‡è®¾æ³•"></a>å‡è®¾æ³•</h2><p>æ€è·¯ï¼šå‡è®¾ç¬¬ä¸€ä¸ªå€¼æ˜¯æœ€å¤§å€¼,ä¾æ¬¡éå†æ•°ç»„ä¸­åé¢çš„æ¯ä¸€é¡¹,å’Œå‡è®¾çš„å€¼è¿›è¡Œæ¯”è¾ƒ,å¦‚æœæ¯”å‡è®¾çš„å€¼è¦å¤§,æŠŠå½“å‰é¡¹èµ‹å€¼ç»™MAXâ€¦</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">9</span>, <span class="number">20</span>, <span class="number">40</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="keyword">let</span> max2 = arr[<span class="number">0</span>];</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">1</span>; i &lt;= arr.length; i++)&#123;</span><br><span class="line">    <span class="keyword">let</span> item = arr[i];</span><br><span class="line">    item &gt; max2 ? max2 = item : <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(max2);</span><br></pre></td></tr></table></figure>
<h2 id="åŸºäºMath-maxä¸apply"><a href="#åŸºäºMath-maxä¸apply" class="headerlink" title="åŸºäºMath.maxä¸apply"></a>åŸºäºMath.maxä¸apply</h2><p>æ€è·¯ï¼šåŸºäºåŸºäºMath.maxå®Œæˆå’Œapplyç‰¹æ€§</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">5</span> ,<span class="number">6</span>, <span class="number">7</span>, <span class="number">9</span>, <span class="number">20</span>, <span class="number">40</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Math</span>.max.apply(<span class="literal">null</span>, arr));</span><br></pre></td></tr></table></figure>
<p>è¿™ä¸ªæ˜¯è¦é‡ç‚¹ç†è§£çš„ä¸€ä¸ªæ–¹æ¡ˆï¼Œcall,apply,bindå¸¸å¸¸ä¼šè¢«æ”¾ä¸€èµ·æ¯”è¾ƒ<br>é¦–å…ˆï¼Œcallï¼Œapplyï¼Œbindè¿™ä¸‰ä¸ªæ–¹æ³•å…¶å®éƒ½æ˜¯ç»§æ‰¿è‡ªFunction.prototypeä¸­çš„ï¼Œå±äºå®ä¾‹æ–¹æ³•ã€‚<br>ä¸‰ä¸ªæ–¹æ³•çš„ä½œç”¨ï¼Œéƒ½æ˜¯<strong>æ”¹å˜thisçš„æŒ‡å‘</strong>ï¼Œåªæ˜¯ç”¨æ³•ç¨å¾®æœ‰äº›åŒºåˆ«</p>
<h3 id="this"><a href="#this" class="headerlink" title="this"></a>this</h3><p>ä»€ä¹ˆæ˜¯this</p>
<p><strong>this æ—¢ä¸æŒ‡å‘å‡½æ•°è‡ªèº«ï¼Œä¹Ÿä¸æŒ‡å‡½æ•°çš„è¯æ³•ä½œç”¨åŸŸ</strong>ã€‚å®ƒåœ¨å‡½æ•°å®šä¹‰çš„æ—¶å€™æ˜¯ç¡®å®šä¸äº†çš„,åœ¨å‡½æ•°è¢«è°ƒç”¨æ—¶æ‰å‘ç”Ÿçš„ç»‘å®šï¼Œä¹Ÿå°±æ˜¯è¯´<code>thiså…·ä½“æŒ‡å‘ä»€ä¹ˆï¼Œå–å†³äºä½ æ˜¯æ€ä¹ˆè°ƒç”¨çš„å‡½æ•°</code>ã€‚</p>
<p>æ€ä¹ˆåˆ¤æ–­this</p>
<blockquote>
<p>1.ç»™å½“å‰å…ƒç´ çš„æŸä¸ªäº‹ä»¶ç»‘å®šæ–¹æ³•, å½“äº‹ä»¶è§¦å‘æ–¹æ³•æ‰§è¡Œçš„æ—¶å€™ï¼Œæ–¹æ³•ä¸­çš„THISæ˜¯å½“å‰æ“ä½œçš„å…ƒç´ å¯¹è±¡<br>2.æ™®é€šå‡½æ•°æ‰§è¡Œï¼Œå‡½æ•°ä¸­çš„THISå–å†³äºæ‰§è¡Œçš„ä¸»ä½“ï¼Œè°æ‰§è¡Œçš„ï¼ŒTHISå°±æ˜¯è°ï¼ˆæ‰§è¡Œä¸»ä½“ï¼šæ–¹æ³•æ‰§è¡Œï¼Œçœ‹æ–¹æ³•åå‰é¢æ˜¯å¦æœ‰â€œç‚¹â€ï¼Œæœ‰çš„è¯ï¼Œç‚¹å‰é¢æ˜¯è°thiså°±æ˜¯è°ï¼Œæ²¡æœ‰thisæ˜¯windowï¼‰<br>ä¸‹é¢çœ‹ä¸ªä¾‹å­ï¼š</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">myFunction</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span> === <span class="built_in">window</span>);</span><br><span class="line">&#125;    </span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    myFunction()&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span> === obj);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">myFunction(); <span class="comment">// true</span></span><br><span class="line">obj.myFunction(); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<p>å¯¹thisæœ‰äº†å¤§è‡´äº†è§£åï¼Œå†æ¥çœ‹callæ–¹æ³•</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">window</span>.name = <span class="string">'windowName'</span>;</span><br><span class="line"><span class="keyword">let</span> fn = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">    name:<span class="string">'objName'</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> obj1 = &#123;</span><br><span class="line">    name:<span class="string">'obj1Name'</span></span><br><span class="line">&#125;</span><br><span class="line">fn(); <span class="comment">//windowName</span></span><br><span class="line">fn.call(obj); <span class="comment">// objNameï¼šè™½ç„¶æ˜¯fnè°ƒç”¨ï¼Œä½†callæ”¹å˜äº†thisæŒ‡å‘ï¼Œthisçš„æŒ‡å‘æ˜¯obj,æ•…obj.nameçš„å€¼ä¸ºobjName</span></span><br><span class="line">fn.call(obj1); <span class="comment">// obj1Name</span></span><br></pre></td></tr></table></figure>
<p>callæ–¹æ³•æ‰§è¡Œçš„æ—¶å€™ï¼Œå†…éƒ¨å¤„ç†äº†ä¸€äº›äº‹æƒ…ã€‚é¦–å…ˆæŠŠè¦æ“ä½œå‡½æ•°ä¸­çš„thiså…³é”®å­—å˜ä¸ºcallæ–¹æ³•ç¬¬ä¸€ä¸ªä¼ é€’çš„å®å‚å€¼,æŠŠcallæ–¹æ³•ç¬¬äºŒä¸ªåŠç¬¬äºŒä¸ªä»¥åçš„å®å‚è·å–åˆ°ï¼ŒæŠŠè¦æ“ä½œçš„å‡½æ•°æ‰§è¡Œï¼Œå¹¶ä¸”æŠŠç¬¬äºŒä¸ªä»¥åçš„ä¼ é€’è¿›æ¥çš„å®å‚ä¼ ç»™å‡½æ•°</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">   <span class="built_in">console</span>.log(a + b);</span><br><span class="line">&#125;</span><br><span class="line">fn.call(<span class="literal">null</span>, <span class="number">1</span>, <span class="number">2</span>); <span class="comment">//3</span></span><br></pre></td></tr></table></figure>
<p>CALLä¸­çš„ç»†èŠ‚</p>
<blockquote>
<p>1.éä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œå¦‚æœå‚æ•°ä¸ä¼ ï¼Œæˆ–è€…ç¬¬ä¸€ä¸ªä¼ é€’çš„æ˜¯null/undefinedï¼Œthiséƒ½æŒ‡å‘window<br>2.åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è°ï¼Œthiså°±æŒ‡å‘è°ï¼ˆåŒ…æ‹¬null/undefinedï¼‰ï¼Œä¸ä¼ thisæ˜¯undefined<br>åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œå¦‚æœç”¨applyï¼Œåˆ™æ˜¯</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">   <span class="built_in">console</span>.log(a + b);</span><br><span class="line">&#125;</span><br><span class="line">fn.apply(<span class="literal">null</span>, [<span class="number">1</span>, <span class="number">2</span>]); <span class="comment">//3</span></span><br></pre></td></tr></table></figure>
<p>applyï¼šå’ŒcallåŸºæœ¬ä¸Šä¸€æ¨¡ä¸€æ ·ï¼Œå”¯ä¸€åŒºåˆ«åœ¨äº<strong>ä¼ å‚æ–¹å¼</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">fn.call(obj,<span class="number">10</span>,<span class="number">20</span>)</span><br><span class="line">fn.apply(obj,[<span class="number">10</span>,<span class="number">20</span>]) <span class="comment">//APPLYæŠŠéœ€è¦ä¼ é€’ç»™FNçš„å‚æ•°æ”¾åˆ°ä¸€ä¸ªæ•°ç»„ï¼ˆæˆ–è€…ç±»æ•°ç»„ï¼‰ä¸­ä¼ é€’è¿›å»ï¼Œè™½ç„¶å†™çš„æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œä½†æ˜¯ä¹Ÿç›¸å½“äºç»™FNä¸€ä¸ªä¸ªçš„ä¼ é€’</span></span><br></pre></td></tr></table></figure>
<p>bindï¼šè¯­æ³•å’Œcallä¸€æ¨¡ä¸€æ ·ï¼Œå”¯ä¸€çš„åŒºåˆ«åœ¨äºç«‹å³æ‰§è¡Œè¿˜æ˜¯ç­‰å¾…æ‰§è¡Œ</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">fn.call(obj,<span class="number">10</span>,<span class="number">20</span>) æ”¹å˜FNä¸­çš„THIS,å¹¶ä¸”æŠŠFNç«‹å³æ‰§è¡Œ</span><br><span class="line">fn.bind(obj,<span class="number">10</span>,<span class="number">20</span>) æ”¹å˜FNä¸­çš„THIS,æ­¤æ—¶çš„FNå¹¶æ²¡æœ‰æ‰§è¡Œï¼ˆä¸å…¼å®¹IE6~<span class="number">8</span>ï¼‰</span><br></pre></td></tr></table></figure>
<p>bindè°ƒç”¨ä¹‹åæ˜¯è¿”å›åŸå‡½æ•°ï¼Œéœ€è¦å†è°ƒç”¨ä¸€æ¬¡æ‰è¡Œ</p>
<hr>
<p>å›åˆ°åŸé¢˜ï¼Œæ±‚æ•°ç»„æœ€å¤§å€¼<br>Math.max(arr)è¿™æ ·è‚¯å®šæ˜¯æŠ¥é”™çš„</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Math</span>.max(ary)); <span class="comment">// =&gt; NaN </span></span><br><span class="line"><span class="comment">// =&gt; Math.maxæ˜¯è·å–ä¸€å †æ•°ä¸­çš„æœ€å¤§å€¼,éœ€è¦æˆ‘ä»¬æŠŠæ¯”è¾ƒçš„æ•°,ä¸€ä¸ªä¸ªçš„ä¼ é€’ç»™è¿™ä¸ªæ–¹æ³• //=&gt;Math.max(12,13,14...) =&gt;Math.max([12,13,14...])è¿™æ ·åªæ˜¯ä¼ é€’ä¸€ä¸ªå€¼</span></span><br><span class="line"><span class="built_in">Math</span>.max.apply(<span class="literal">null</span>,arr);</span><br><span class="line"><span class="comment">// =&gt; åˆ©ç”¨äº†applyçš„ä¸€ä¸ªç‰¹å¾ï¼šè™½ç„¶æ”¾çš„æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œä½†æ˜¯æ‰§è¡Œæ–¹æ³•çš„æ—¶å€™ï¼Œä¹Ÿæ˜¯æŠŠæ•°ç»„ä¸­çš„æ¯ä¸€é¡¹ä¸€ä¸ªä¸ªçš„ä¼ é€’ç»™å‡½æ•°</span></span><br></pre></td></tr></table></figure>

<h2 id="ES6å±•å¼€è¿ç®—ç¬¦"><a href="#ES6å±•å¼€è¿ç®—ç¬¦" class="headerlink" title="ES6å±•å¼€è¿ç®—ç¬¦"></a>ES6å±•å¼€è¿ç®—ç¬¦</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Math</span>.max(...arr));</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>æ·±å…¥ç†è§£JavaScript</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title>æ·±å…¥ç†è§£JavaScriptä¹‹ç”±ä¸€é“é¢˜æ¥æ€è€ƒé—­åŒ…</title>
    <url>/2019/10/24/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3JavaScript%E4%B9%8B%E7%94%B1%E4%B8%80%E9%81%93%E9%A2%98%E6%9D%A5%E6%80%9D%E8%80%83%E9%97%AD%E5%8C%85/</url>
    <content><![CDATA[<p>ä»ä¸€é“å¾ˆç»å…¸çš„é—­åŒ…é—®é¢˜è¯´èµ·â€¦</p>
<a id="more"></a>
<h2 id="æ¦‚å¿µ"><a href="#æ¦‚å¿µ" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h2><blockquote>
<p>é—­åŒ…å°±æ˜¯æŒ‡æœ‰æƒè®¿é—®å¦ä¸€ä¸ªå‡½æ•°ä½œç”¨åŸŸä¸­çš„å˜é‡çš„å‡½æ•°</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=<span class="string">"en"</span>&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta charset=<span class="string">"UTF-8"</span>&gt;</span><br><span class="line">&lt;title&gt;ç‚¹å‡»liæ ‡ç­¾å¼¹å‡ºå¯¹åº”æ•°å­—&lt;<span class="regexp">/title&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;ul&gt;</span><br><span class="line">    &lt;li&gt;<span class="number">0</span>&lt;<span class="regexp">/li&gt;</span></span><br><span class="line"><span class="regexp">    &lt;li&gt;1&lt;/</span>li&gt;</span><br><span class="line">    &lt;li&gt;<span class="number">2</span>&lt;<span class="regexp">/li&gt;</span></span><br><span class="line"><span class="regexp">    &lt;li&gt;3&lt;/</span>li&gt;</span><br><span class="line">&lt;<span class="regexp">/ul&gt;</span></span><br><span class="line"><span class="regexp">&lt;script&gt;</span></span><br><span class="line"><span class="regexp">    var list = document.getElementsByTagName('li');</span></span><br><span class="line"><span class="regexp">    for(var i = 0;i &lt; list.length;i++)&#123;</span></span><br><span class="line"><span class="regexp">     list[i].onclick = function()&#123;</span></span><br><span class="line"><span class="regexp">         alert(i);</span></span><br><span class="line"><span class="regexp">     &#125;</span></span><br><span class="line"><span class="regexp">&lt;/</span>script&gt;</span><br><span class="line">&lt;<span class="regexp">/body&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>html&gt;</span><br></pre></td></tr></table></figure>

<p>å¦‚ä¸Šé¢˜ï¼Œæœ€ä¸ºå¸¸è§çš„ä¸€ä¸ªä¾‹å­ï¼Œè¿™é‡Œè§£é‡Šç”±è¿™é“é¢˜å¼•å‡ºçš„jsçŸ¥è¯†ç‚¹ï¼Œå¦‚ä¸Šæˆ‘ä»¬çŸ¥é“åœ¨æµè§ˆå™¨è¿è¡Œæ— è®ºç‚¹å‡»å“ªä¸ªliæ ‡ç­¾éƒ½æ˜¯å¼¹å‡º3,é¦–å…ˆæ¥ç†è§£ä¸ºä»€ä¹ˆä¼šå¼¹å‡º3ã€‚</p>
<p>ç¨‹åºé€šè¿‡forå¾ªç¯ç»™æ¯ä¸ªliæ ‡ç­¾ç»‘å®šäº†äº‹ä»¶ï¼Œç„¶åé€šè¿‡ç‚¹å‡»liæ ‡ç­¾è§¦å‘æ–¹æ³•ï¼Œå³æ‰§è¡Œalert(i)ã€‚jsä¸­æœ‰ä¸ªä½œç”¨åŸŸé“¾æŸ¥æ‰¾æœºåˆ¶ï¼Œé¦–å…ˆä¼šåœ¨onclickè¿”å›çš„å‡½æ•°ä½œç”¨åŸŸæŸ¥æ‰¾iå˜é‡çš„å€¼ï¼Œæ‰¾ä¸åˆ°åˆ™å¾€ä¸Šä¸€å±‚æ‰¾iï¼Œä¸Šä¸€å±‚å³æ˜¯windowå…¨å±€ä½œç”¨åŸŸï¼Œå³æ‰¾åˆ°å…¨å±€å˜é‡iï¼Œå³forå¾ªç¯å®šä¹‰çš„iã€‚</p>
<p>æ³¨æ„forå¾ªç¯çš„iå¹¶ä¸æ˜¯ç§æœ‰å˜é‡ï¼Œè€Œæ˜¯å…¨å±€å˜é‡ã€‚</p>
<blockquote>
<p>jsä¸­æ‰€æœ‰çš„äº‹ä»¶ç»‘å®šéƒ½æ˜¯å¼‚æ­¥ç¼–ç¨‹ï¼ˆå½“å‰è¿™ä»¶äº‹ä»¶æ²¡æœ‰å½»åº•å®Œæˆï¼Œä¸å†ç­‰å¾…ï¼Œç»§ç»­æ‰§è¡Œä¸‹é¢çš„ä»»åŠ¡ï¼‰</p>
</blockquote>
<p>å½“ç»‘å®šonclickäº‹ä»¶åï¼Œä¸éœ€è¦ç­‰å¾…æ‰§è¡Œï¼Œç»§ç»­æ‰§è¡Œä¸‹ä¸€ä¸ªå¾ªç¯ä»»åŠ¡ï¼Œæ‰€ä»¥å½“æˆ‘ä»¬ç‚¹å‡»æ‰§è¡Œæ–¹æ³•çš„æ—¶å€™ï¼Œå¾ªç¯æ—©å·²ç»“æŸ,å³æ˜¯æœ€åi=3ã€‚æ•…ç¨‹åºæ‰§è¡Œåå…¨å±€å˜é‡iè¢«å¾ªç¯æ‰§è¡Œåèµ‹å€¼ä¸ºæœ€ç»ˆçš„3ï¼Œæ‰€ä»¥å½“ç‚¹å‡»çš„æ—¶å€™ï¼Œå¤–å±‚å¾ªç¯å·²ç»ç»“æŸï¼Œé¡µé¢åŠ è½½å®Œæˆé¢„ç¤ºç€jsä»£ç éƒ½å·²ç»æ‰§è¡Œå®Œæˆï¼Œå³æ‰§è¡Œalert(i)æ—¶ï¼Œç”±äºiä¸æ˜¯ç§æœ‰å˜é‡ï¼Œä¾¿ä¼šæ‰¾åˆ°ä¸Šä¸€çº§windowä½œç”¨åŸŸå…¨å±€çš„iï¼Œæ‰€ä»¥æ— è®ºç‚¹å‡»å“ªä¸ªliæ ‡ç­¾éƒ½æ˜¯å¼¹å‡º3</p>
<h2 id="ä¸ºä»€ä¹ˆè¦ç”¨é—­åŒ…"><a href="#ä¸ºä»€ä¹ˆè¦ç”¨é—­åŒ…" class="headerlink" title="ä¸ºä»€ä¹ˆè¦ç”¨é—­åŒ…"></a>ä¸ºä»€ä¹ˆè¦ç”¨é—­åŒ…</h2><p>é‚£ä¹ˆï¼Œè§£å†³è¿™ä¸ªé—®é¢˜çš„ç¼˜ç”±ï¼Œåœ¨äºiæ¯æ¬¡åœ¨é¡µé¢åŠ è½½å®Œå°±èµ‹å€¼ä¸º3ï¼Œalert(i)çš„æ—¶å€™æ€»æ˜¯æ‰¾åˆ°å…¨å±€å˜é‡iã€‚åœ¨ES5ä¼ ç»Ÿè¯­æ³•ä¸­ï¼Œèƒ½å½¢æˆä½œç”¨åŸŸçš„åªæœ‰å…¨å±€å’Œå‡½æ•°ï¼Œç°åœ¨æ¯æ¬¡iæ‰¾çš„éƒ½æ˜¯å…¨å±€ï¼Œé‚£ä¹ˆè¦ä¿ä½içš„å€¼åªèƒ½åœ¨å…¨å±€å’Œonclickè¿”å›å‡½æ•°çš„ä½œç”¨åŸŸä¸­é—´å†åŠ ä¸€ä¸ªå°çš„ç§æœ‰ä½œç”¨åŸŸï¼Œå³æ˜¯å¤§çš„ä½œç”¨åŸŸå¤–å†åŠ ä¸€ä¸ªå°çš„ä½œç”¨åŸŸï¼Œè¿™æ ·iå¾€ä¸Šä¸€å±‚ä½œç”¨åŸŸæŸ¥æ‰¾æ—¶ï¼Œå°±ä¼šè·å–å°ä½œç”¨åŸŸçš„içš„å€¼ï¼Œè€Œä¸ä¼šå»è·å–å…¨å±€å˜é‡çš„iå€¼ã€‚</p>
<p>è¿™ä¸ªæ€è·¯è§£å†³é—®é¢˜å°±éœ€è¦å¼•å…¥é—­åŒ…ï¼Œåœ¨è¿™ä¸ªç†è§£ä¸Šé—­åŒ…æ˜¯æŒ‡å‡½æ•°å˜é‡å¯ä»¥ä¿å­˜åœ¨å‡½æ•°ä½œç”¨åŸŸå†…ï¼Œå› æ­¤çœ‹èµ·æ¥æ˜¯å‡½æ•°å°†å˜é‡â€œåŒ…è£¹â€äº†èµ·æ¥ã€‚äºæ˜¯ï¼Œä»£ç æ”¹æˆï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>;i &lt; list.length;i++)&#123;</span><br><span class="line">    list[i].onclick = (<span class="function"><span class="keyword">function</span>(<span class="params">n</span>)</span>&#123;<span class="comment">//å½¢å‚n</span></span><br><span class="line">        <span class="comment">//=&gt;è®©è‡ªæ‰§è¡Œå‡½æ•°æ‰§è¡Œ,æŠŠæ‰§è¡Œçš„è¿”å›å€¼(return)èµ‹å€¼ç»™onclick</span></span><br><span class="line">        <span class="comment">//ï¼ˆæ­¤å¤„onclickç»‘å®šçš„æ˜¯è¿”å›çš„å°å‡½æ•°ï¼Œç‚¹å‡»çš„æ—¶å€™æ‰§è¡Œçš„æ˜¯å°å‡½æ•°ï¼‰,</span></span><br><span class="line">        <span class="comment">// è‡ªæ‰§è¡Œå‡½æ•°åœ¨ç»™äº‹ä»¶èµ‹å€¼çš„æ—¶å€™å°±å·²ç»æ‰§è¡Œäº†</span></span><br><span class="line">        <span class="comment">// è‡ªæ‰§è¡Œå‡½æ•°å½¢æˆä¸€ä¸ªç§æœ‰ä½œç”¨åŸŸ</span></span><br><span class="line">        <span class="keyword">var</span> i = n;</span><br><span class="line">        <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            alert(i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)(i);<span class="comment">//ä¼ å…¥å®å‚i</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¾ªç¯ä¸‰æ¬¡ï¼Œå½¢æˆä¸‰ä¸ªä¸é”€æ¯çš„ç§æœ‰ä½œç”¨åŸŸï¼ˆè‡ªæ‰§è¡Œå‡½æ•°æ‰§è¡Œï¼‰ï¼Œè€Œæ¯ä¸€ä¸ªä¸é”€æ¯çš„æ ˆå†…å­˜ä¸­éƒ½å­˜å‚¨äº†ä¸€ä¸ªç§æœ‰å˜é‡iï¼Œè€Œè¿™ä¸ªå€¼åˆ†åˆ«æ˜¯æ¯ä¸€æ¬¡æ‰§è¡Œä¼ é€’è¿›æ¥çš„å…¨å±€içš„å€¼ï¼ˆä¹Ÿå°±æ˜¯ï¼šç¬¬ä¸€ä¸ªä¸é”€æ¯çš„ä½œç”¨åŸŸå­˜å‚¨çš„æ˜¯0ï¼Œç¬¬äºŒä¸ªæ˜¯1ï¼Œç¬¬ä¸‰ä¸ªæ˜¯2ï¼Œç¬¬å››ä¸ªæ˜¯3ï¼‰ï¼›å½“ç‚¹å‡»çš„æ—¶å€™ï¼Œæ‰§è¡Œè¿”å›çš„å°å‡½æ•°ï¼Œé‡åˆ°å˜é‡iï¼Œå‘å®ƒè‡ªå·±çš„ä¸Šçº§ä½œç”¨åŸŸæŸ¥æ‰¾ã€‚è¿™æ ·å°±è¾¾åˆ°äº†æˆ‘ä»¬éœ€è¦çš„æ•ˆæœï¼Œè¿™ç§é—­åŒ…å®ç°ï¼Œä¹Ÿå¯ä»¥æœ‰å¦ä¸€ç§å†™æ³•ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*åŸç†åŒæ³•äºŒéƒ½æ˜¯å½¢æˆä¸‰ä¸ªä¸é”€æ¯çš„ç§æœ‰ä½œç”¨åŸŸ,åˆ†åˆ«å­˜å‚¨éœ€è¦çš„ç´¢å¼•å€¼*/</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>;i &lt; list.length;i++)&#123;</span><br><span class="line">    (<span class="function"><span class="keyword">function</span>(<span class="params">n</span>)</span>&#123;</span><br><span class="line">        list[n].onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            alert(n);</span><br><span class="line">        &#125; </span><br><span class="line">    &#125;)(i)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¯¹äºåˆå§‹çš„ä»£ç ï¼Œå¦‚æœè¯´ä¸ºä»€ä¹ˆä¸èƒ½å®ç°ï¼Œé‚£åŸå› å°±å¯å½’çº³ä¸ºï¼š</p>
<blockquote>
</blockquote>
<ol>
<li>æ‰§è¡Œæ–¹æ³•,å½¢æˆä¸€ä¸ªç§æœ‰çš„æ ˆå†…å­˜,é‡åˆ°å˜é‡i,iä¸æ˜¯ç§æœ‰å˜é‡,å‘ä¸Šä¸€çº§ä½œç”¨åŸŸæŸ¥æ‰¾ï¼ˆä¸Šçº§ä½œç”¨åŸŸwindowï¼‰</li>
<li>æ‰€æœ‰çš„äº‹ä»¶ç»‘å®šéƒ½æ˜¯å¼‚æ­¥ç¼–ç¨‹,ç»‘å®šäº‹ä»¶å,ä¸éœ€è¦ç­‰å¾…æ‰§è¡Œ,ç»§ç»­æ‰§è¡Œä¸‹ä¸€ä¸ªå¾ªç¯ä»»åŠ¡,æ‰€ä»¥å½“æˆ‘ä»¬ç‚¹å‡»æ‰§è¡Œæ–¹æ³•çš„æ—¶å€™,å¾ªç¯æ—©å·²ç»“æŸï¼ˆè®©å…¨å±€çš„iç­‰äºå¾ªç¯æœ€åçš„ç»“æœ3ï¼‰</li>
</ol>
<h2 id="ES6è¯­æ³•çš„è§£å†³æ–¹å¼"><a href="#ES6è¯­æ³•çš„è§£å†³æ–¹å¼" class="headerlink" title="ES6è¯­æ³•çš„è§£å†³æ–¹å¼"></a>ES6è¯­æ³•çš„è§£å†³æ–¹å¼</h2><p>åœ¨ES6ä¸­ï¼Œè§£å†³è¿™ç§é—®é¢˜åªéœ€è¦ä¸€ä¸ªletå˜é‡ï¼ŒES6ä¸­æ‰æœ‰å—çº§ä½œç”¨åŸŸï¼ˆç±»ä¼¼äºç§æœ‰ä½œç”¨åŸŸï¼‰çš„æ¦‚å¿µ</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>;i &lt; list.length;i++)&#123;</span><br><span class="line">    list[i].onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        alert(i);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="é—­åŒ…å¯¹å†…å­˜çš„å½±å“"><a href="#é—­åŒ…å¯¹å†…å­˜çš„å½±å“" class="headerlink" title="é—­åŒ…å¯¹å†…å­˜çš„å½±å“"></a>é—­åŒ…å¯¹å†…å­˜çš„å½±å“</h2><p>ä»ä¸Šé¢å¯çŸ¥ï¼Œæ¯æ¬¡foréƒ½ä¼šå½¢æˆä¸€ä¸ªç§æœ‰ä½œç”¨åŸŸï¼Œæ¯ä¸ªéƒ½é‡Œé¢ä¿å­˜çš„å˜é‡içš„å€¼ï¼Œç¨‹åºè¿è¡Œåè¿™äº›ä½œç”¨åŸŸå¹¶ä¸ä¼šè¢«é”€æ¯ï¼Œæ‰€ä»¥ç”±äºé—­åŒ…ä¼šæºå¸¦åŒ…å«å®ƒçš„å‡½æ•°çš„ä½œç”¨åŸŸï¼Œæ‰€ä»¥ä¼šæ¯”å…¶ä»–å‡½æ•°å ç”¨æ›´å¤šå†…å®¹ï¼Œè¿‡åº¦ä½¿ç”¨é—­åŒ…ä¼šå¯¼è‡´å†…å­˜å ç”¨è¿‡å¤šã€‚</p>
<p>åœ¨çœŸå®é¡¹ç›®ä¸­ä¸ºäº†ä¿è¯JSçš„æ€§èƒ½ï¼ˆå †æ ˆå†…å­˜çš„æ€§èƒ½ä¼˜åŒ–ï¼‰ï¼Œåº”è¯¥å°½å¯èƒ½çš„å‡å°‘é—­åŒ…çš„ä½¿ç”¨ï¼ˆä¸é”€æ¯çš„å †æ ˆå†…å­˜æ˜¯è€—æ€§èƒ½çš„ï¼‰</p>
<h2 id="å †å†…å­˜å’Œæ ˆå†…å­˜çš„é‡Šæ”¾"><a href="#å †å†…å­˜å’Œæ ˆå†…å­˜çš„é‡Šæ”¾" class="headerlink" title="å †å†…å­˜å’Œæ ˆå†…å­˜çš„é‡Šæ”¾"></a>å †å†…å­˜å’Œæ ˆå†…å­˜çš„é‡Šæ”¾</h2><p>è¿™é‡Œåˆè¦æåˆ°ä¸€ä¸ªçŸ¥è¯†ç‚¹ï¼Œjsä¸­å­˜å‚¨æ–¹å¼çš„åˆ†ç±»ï¼š</p>
<blockquote>
<p>JSä¸­çš„å†…å­˜åˆ†ä¸ºå †å†…å­˜å’Œæ ˆå†…å­˜<br>å †å†…å­˜ï¼šå­˜å‚¨å¼•ç”¨æ•°æ®ç±»å‹å€¼ï¼ˆå¯¹è±¡ï¼šé”®å€¼å¯¹  å‡½æ•°ï¼šä»£ç å­—ç¬¦ä¸²ï¼‰<br>æ ˆå†…å­˜ï¼šæä¾›JSä»£ç æ‰§è¡Œçš„ç¯å¢ƒå’Œå­˜å‚¨åŸºæœ¬ç±»å‹å€¼</p>
</blockquote>
<p>ç²—æš´ç†è§£varå®šä¹‰çš„å˜é‡å­˜åœ¨æ ˆå†…å­˜ä¸­ï¼Œå¦‚forå¾ªç¯ä¸­çš„iæ˜¯å­˜åœ¨æ ˆå†…å­˜ä¸­çš„ï¼›è€Œå‡½æ•°ï¼Œå®ƒæ˜¯å­˜åœ¨å †å†…å­˜ä¸­</p>
<p><strong>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå½“å‡½æ•°æ‰§è¡Œå®Œæˆï¼Œæ‰€å½¢æˆçš„ç§æœ‰ä½œç”¨åŸŸï¼ˆæ ˆå†…å­˜ï¼‰éƒ½ä¼šè‡ªåŠ¨é‡Šæ”¾æ‰ï¼ˆåœ¨æ ˆå†…å­˜ä¸­å­˜å‚¨çš„å€¼ä¹Ÿéƒ½ä¼šé‡Šæ”¾æ‰ï¼‰</strong>ï¼Œé‚£ä¸ºä»€ä¹ˆé—­åŒ…çš„æ ˆå†…å­˜ä¸ä¼šè¢«è‡ªåŠ¨é‡Šæ”¾æ‰ï¼Œåœ¨jsä¸­ä¹Ÿæœ‰ç‰¹æ®Šä¸è¢«é”€æ¯çš„æƒ…å†µï¼š</p>
<blockquote>
<p>1.å‡½æ•°æ‰§è¡Œå®Œæˆï¼Œå½“å‰å½¢æˆçš„æ ˆå†…å­˜ä¸­ï¼ŒæŸäº›å†…å®¹è¢«æ ˆå†…å­˜ä»¥å¤–çš„å˜é‡å ç”¨äº†ï¼Œæ­¤æ—¶æ ˆå†…å­˜ä¸èƒ½é‡Šæ”¾ï¼ˆä¸€æ—¦é‡Šæ”¾å¤–é¢æ‰¾ä¸åˆ°åŸæœ‰çš„å†…å®¹äº†ï¼‰<br>2.å…¨å±€æ ˆå†…å­˜åªæœ‰åœ¨é¡µé¢å…³é—­çš„æ—¶å€™æ‰ä¼šè¢«é‡Šæ”¾æ‰</p>
</blockquote>
<p>é—­åŒ…åˆ™æ˜¯å±äºç¬¬ä¸€ç§æƒ…å†µï¼Œonclickå‡½æ•°å½¢æˆçš„æ ˆå†…å­˜ï¼Œè¢«å°å‡½æ•°ã€alert(i)ï¼Œiæ‰¾åˆ°onclickä½œç”¨åŸŸè·å–iå€¼ã€‘å ç”¨äº†onclickå‡½æ•°çš„æ ˆå†…å­˜ï¼ˆå˜é‡iæ˜¯å­˜åœ¨æ ˆå†…å­˜ä¸­ï¼‰ï¼Œæ•…æ ˆå†…å­˜ä¸èƒ½è¢«é‡Šæ”¾ï¼Œæ‰€ä»¥æ‰ä¼šè¯´é—­åŒ…è¿‡åº¦ä½¿ç”¨å®¹æ˜“å¯¼è‡´å†…å­˜è¢«å ç”¨è¿‡å¤šï¼Œå› ä¸ºä¸ä¼šè‡ªåŠ¨é‡Šæ”¾å†…å­˜ã€‚</p>
<p><strong>å †å†…å­˜çš„é‡Šæ”¾</strong></p>
<blockquote>
<p>å †å†…å­˜è®©æ‰€æœ‰å¼•ç”¨å †å†…å­˜ç©ºé—´åœ°å€çš„å˜é‡èµ‹å€¼ä¸ºnullå³å¯ï¼ˆæ²¡æœ‰å˜é‡å ç”¨è¿™ä¸ªå †å†…å­˜äº†ï¼Œæµè§ˆå™¨ä¼šåœ¨ç©ºé—²çš„æ—¶å€™æŠŠå®ƒé‡Šæ”¾æ‰ï¼‰</p>
</blockquote>
]]></content>
      <categories>
        <category>æ·±å…¥ç†è§£JavaScript</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title>æ·±å…¥ç†è§£JavaScriptä¹‹å˜é‡æå‡</title>
    <url>/2019/10/23/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3JavaScript%E4%B9%8B%E5%8F%98%E9%87%8F%E6%8F%90%E5%8D%87/</url>
    <content><![CDATA[<p>åŸç†ï¼šJSå¼•æ“çš„å·¥ä½œæ–¹å¼æ˜¯å…ˆè§£æä»£ç ï¼Œè·å–æ‰€æœ‰è¢«å£°æ˜çš„å˜é‡ï¼›ç„¶ååœ¨è¿è¡Œã€‚JSä»£ç è‡ªä¸Šè€Œä¸‹æ‰§è¡Œä¹‹å‰ï¼Œæµè§ˆå™¨é¦–å…ˆä¼šæŠŠæ‰€æœ‰å¸¦â€VARâ€/â€œFUNCTIONâ€å…³é”®è¯çš„è¿›è¡Œæå‰â€å£°æ˜â€æˆ–è€…â€å®šä¹‰â€ï¼Œè¿™ç§é¢„å…ˆå¤„ç†æœºåˆ¶ç§°ä¹‹ä¸º â€œå˜é‡æå‡â€ã€‚</p>
<a id="more"></a>

<h2 id="å˜é‡æå‡"><a href="#å˜é‡æå‡" class="headerlink" title="å˜é‡æå‡"></a>å˜é‡æå‡</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(a, b);<span class="comment">//undefined undefined</span></span><br><span class="line"><span class="keyword">var</span> a = <span class="number">12</span>,</span><br><span class="line">    b = <span class="number">12</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(a, b);<span class="comment">//=&gt;undefined 12</span></span><br><span class="line">    <span class="keyword">var</span> a = b = <span class="number">13</span>;</span><br><span class="line">    <span class="built_in">console</span>.log(a, b);<span class="comment">//=&gt;13 13</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fn();</span><br><span class="line"><span class="built_in">console</span>.log(a, b);<span class="comment">//=&gt;12 13</span></span><br></pre></td></tr></table></figure>

<ul>
<li>undefined undefinedï¼šé¦–å…ˆè¾“å‡ºè¿™ä¸ªç»“æœæ˜¯å› ä¸ºå˜é‡æå‡ï¼Œå³å‰ä¸‰è¡Œå˜æˆ<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> a;</span><br><span class="line"><span class="keyword">var</span> b;</span><br><span class="line"><span class="built_in">console</span>.log(a,b);<span class="comment">//undefined undefined</span></span><br><span class="line">a = <span class="number">12</span>;</span><br><span class="line">b = <span class="number">12</span>;</span><br></pre></td></tr></table></figure></li>
<li>undefined 12ï¼šæ¥ä¸‹æ¥æ‰§è¡Œå‡½æ•°fnï¼ˆfnä¸€å¼€å§‹ä¹Ÿè¢«æ‰§è¡Œäº†å˜é‡æå‡,åªä¸è¿‡å‡½æ•°ä¸­å­˜å‚¨çš„éƒ½æ˜¯å­—ç¬¦ä¸²è€Œå·²ï¼‰ï¼Œå¯¹fnå†…éƒ¨è¿›è¡Œåˆ†æï¼Œå³å†…éƒ¨ä»£ç å˜æˆï¼š</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> a;</span><br><span class="line"><span class="built_in">console</span>.log(a,b);<span class="comment">//undefined 12</span></span><br><span class="line">a = <span class="number">13</span>;</span><br><span class="line">b = <span class="number">13</span>; <span class="comment">//ä¸åŠ varçš„æœ¬è´¨æ˜¯WINçš„å±æ€§ï¼Œå³ç›¸å½“äºwindow.b = 13; </span></span><br><span class="line"><span class="built_in">console</span>.log(a,b);<span class="comment">//13 13</span></span><br></pre></td></tr></table></figure>
<p>ä¸€å¼€å§‹båœ¨fnå†…éƒ¨æ‰¾ä¸åˆ°ï¼Œä¾¿ä¼šå¼€å§‹å¾€ä¸Šä¸€å±‚æ‰¾ï¼Œæ‰¾åˆ°äº†å…¨å±€çš„bï¼Œäºæ˜¯bè¾“å‡º12ã€‚</p>
<p>å½“ç»è¿‡var a = b = 13; åï¼Œbè¢«èµ‹å€¼ä¸º13ï¼Œäºæ˜¯è¾“å‡ºå…ˆä»å‡½æ•°å†…éƒ¨æ‰¾bï¼Œæ‰¾åˆ°äº†b=13ï¼Œç¬¬äºŒæ¬¡è¾“å‡ºbä¸º13ã€‚ï¼ˆï¼åŒæ—¶ï¼Œæœ€å…ˆå®šä¹‰çš„å…¨å±€å˜é‡b = 12ä¹Ÿè¢«èµ‹å€¼ä¸º13ï¼Œæ•…æœ€åçš„bä¹Ÿç­‰äº13ï¼‰</p>
<blockquote>
<p>ç§æœ‰ä½œç”¨åŸŸä¸­å¸¦varå’Œä¸å¸¦varçš„åŒºåˆ«ï¼š</p>
<ol>
<li>å¸¦varçš„åœ¨ç§æœ‰ä½œç”¨äºå˜é‡æå‡é˜¶æ®µï¼Œéƒ½å£°æ˜ä¸ºç§æœ‰å˜é‡ï¼Œå’Œå¤–ç•Œæ²¡æœ‰ä»»ä½•çš„å…³ç³»</li>
<li>ä¸å¸¦varä¸æ˜¯ç§æœ‰å˜é‡ï¼Œä¼šå‘å®ƒçš„ä¸Šçº§ä½œç”¨äºæŸ¥æ‰¾ï¼Œä¸€ç›´æ‰¾åˆ°windowä¸ºæ­¢ï¼ˆè¿™ç§æŸ¥æ‰¾æœºåˆ¶å«åšï¼šâ€œä½œç”¨åŸŸé“¾â€ï¼‰ï¼Œä¹Ÿå°±æ˜¯åœ¨ç§æœ‰ä½œç”¨åŸŸä¸­æ“ä½œçš„è¿™ä¸ªéç§æœ‰å˜é‡ï¼Œæ˜¯ä¸€ç›´æ“ä½œåˆ«äººçš„</li>
</ol>
</blockquote>
<h2 id="åªå¯¹ç­‰å·å·¦è¾¹è¿›è¡Œå˜é‡æå‡"><a href="#åªå¯¹ç­‰å·å·¦è¾¹è¿›è¡Œå˜é‡æå‡" class="headerlink" title="åªå¯¹ç­‰å·å·¦è¾¹è¿›è¡Œå˜é‡æå‡"></a>åªå¯¹ç­‰å·å·¦è¾¹è¿›è¡Œå˜é‡æå‡</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">sum();</span><br><span class="line">fn();<span class="comment">// Uncaught TypeError: fn is not a function </span></span><br><span class="line"></span><br><span class="line"><span class="comment">//=&gt;åŒ¿åå‡½æ•°ä¹‹å‡½æ•°è¡¨è¾¾å¼</span></span><br><span class="line"><span class="keyword">var</span> fn = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'fn'</span>);</span><br><span class="line">&#125;<span class="comment">//=&gt;ä»£ç æ‰§è¡Œåˆ°æ­¤å¤„ä¼šæŠŠå‡½æ•°å€¼èµ‹å€¼ç»™fn</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//=&gt;æ™®é€šçš„å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'sum'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="æ¡ä»¶åˆ¤æ–­ä¸‹çš„å˜é‡æå‡"><a href="#æ¡ä»¶åˆ¤æ–­ä¸‹çš„å˜é‡æå‡" class="headerlink" title="æ¡ä»¶åˆ¤æ–­ä¸‹çš„å˜é‡æå‡"></a>æ¡ä»¶åˆ¤æ–­ä¸‹çš„å˜é‡æå‡</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * åœ¨å½“å‰ä½œç”¨åŸŸä¸‹ï¼Œä¸ç®¡æ¡ä»¶æ˜¯å¦æˆç«‹éƒ½è¦è¿›è¡Œå˜é‡æå‡</span></span><br><span class="line"><span class="comment"> *   =&gt;å¸¦VARçš„è¿˜æ˜¯åªå£°æ˜</span></span><br><span class="line"><span class="comment"> *   =&gt;å¸¦FUNCTIONçš„åœ¨è€ç‰ˆæœ¬æµè§ˆå™¨æ¸²æŸ“æœºåˆ¶ä¸‹ï¼Œå£°æ˜å’Œå®šä¹‰éƒ½å¤„ç†ï¼Œä½†æ˜¯ä¸ºäº†è¿åˆES6ä¸­çš„å—çº§ä½œç”¨ </span></span><br><span class="line"><span class="comment"> *     åŸŸï¼Œæ–°ç‰ˆæµè§ˆå™¨å¯¹äºå‡½æ•°ï¼ˆåœ¨æ¡ä»¶åˆ¤æ–­ä¸­çš„å‡½æ•°ï¼‰ï¼Œ</span></span><br><span class="line"><span class="comment"> *     ä¸ç®¡æ¡ä»¶æ˜¯å¦æˆç«‹ï¼Œéƒ½åªæ˜¯å…ˆå£°æ˜ï¼Œæ²¡æœ‰å®šä¹‰ï¼Œç±»ä¼¼äºvar</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="built_in">console</span>.log(a);<span class="comment">//undefined</span></span><br><span class="line"><span class="keyword">if</span>(<span class="number">1</span> === <span class="number">2</span>)&#123;</span><br><span class="line">   <span class="keyword">var</span> a = <span class="number">3</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(a);<span class="comment">//undefined</span></span><br></pre></td></tr></table></figure>

<h2 id="é‡åé—®é¢˜çš„å¤„ç†"><a href="#é‡åé—®é¢˜çš„å¤„ç†" class="headerlink" title="é‡åé—®é¢˜çš„å¤„ç†"></a>é‡åé—®é¢˜çš„å¤„ç†</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">fn();<span class="comment">//=&gt;4</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>) </span>&#123;<span class="built_in">console</span>.log(<span class="number">1</span>);&#125;</span><br><span class="line">fn();<span class="comment">//=&gt;4</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>) </span>&#123;<span class="built_in">console</span>.log(<span class="number">2</span>);&#125;</span><br><span class="line">fn();<span class="comment">//=&gt;4</span></span><br><span class="line"><span class="keyword">var</span> fn=<span class="number">100</span>;<span class="comment">//=&gt;å¸¦VARçš„åœ¨æå‡é˜¶æ®µåªæŠŠå£°æ˜å¤„ç†äº†,èµ‹å€¼æ“ä½œæ²¡æœ‰å¤„ç†,æ‰€ä»¥åœ¨ä»£ç æ‰§è¡Œçš„æ—¶å€™éœ€è¦å®Œæˆèµ‹å€¼ FN=100</span></span><br><span class="line">fn();<span class="comment">//=&gt;100() Uncaught TypeError: fn is not a function</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>) </span>&#123;<span class="built_in">console</span>.log(<span class="number">3</span>);&#125;</span><br><span class="line">fn();</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>) </span>&#123;<span class="built_in">console</span>.log(<span class="number">4</span>);&#125;</span><br><span class="line">fn();</span><br></pre></td></tr></table></figure>
<p>å¸¦VARå’ŒFUNCTIONå…³é”®å­—å£°æ˜ç›¸åŒçš„åå­—ï¼Œè¿™ç§ä¹Ÿç®—æ˜¯é‡åäº†ï¼ˆå…¶å®æ˜¯ä¸€ä¸ªFNï¼Œåªæ˜¯å­˜å‚¨å€¼çš„ç±»å‹ä¸ä¸€æ ·ï¼‰<br>å…³äºé‡åçš„å¤„ç†ï¼šå¦‚æœåå­—é‡å¤äº†ï¼Œä¸ä¼šé‡æ–°çš„å£°æ˜ï¼Œä½†æ˜¯ä¼šé‡æ–°çš„å®šä¹‰ï¼ˆé‡æ–°èµ‹å€¼ï¼‰[ä¸ç®¡æ˜¯å˜é‡æå‡è¿˜æ˜¯ä»£ç æ‰§è¡Œé˜¶æ®µçš†æ˜¯å¦‚æ­¤]</p>
]]></content>
      <categories>
        <category>æ·±å…¥ç†è§£JavaScript</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title>jqueryè®¾è®¡çš„å·§å¦™</title>
    <url>/2019/09/07/jquery%E8%AE%BE%E8%AE%A1%E7%9A%84%E5%B7%A7%E5%A6%99/</url>
    <content><![CDATA[<p>æœ€è¿‘å¼€å§‹é˜…è¯»jqueryçš„æºç ï¼Œé¦–å…ˆå…ˆæç‚¼å‡ºjqueryçš„æ ¸å¿ƒç»“æ„ã€‚</p>
<a id="more"></a>
<h2 id="è‡ªæ‰§è¡Œå‡½æ•°"><a href="#è‡ªæ‰§è¡Œå‡½æ•°" class="headerlink" title="è‡ªæ‰§è¡Œå‡½æ•°"></a>è‡ªæ‰§è¡Œå‡½æ•°</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params">window,undefined</span>)</span>&#123;</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">&#125;)(<span class="built_in">window</span>);</span><br></pre></td></tr></table></figure>
<h3 id="ä¸ºä»€ä¹ˆä¼ å…¥window"><a href="#ä¸ºä»€ä¹ˆä¼ å…¥window" class="headerlink" title="ä¸ºä»€ä¹ˆä¼ å…¥window?"></a>ä¸ºä»€ä¹ˆä¼ å…¥window?</h3><p><strong>1.ä»£ç å‹ç¼©</strong></p>
<p>é¦–å…ˆä»ä»£ç å‹ç¼©æ··æ·†çš„è§’åº¦è€ƒè™‘ï¼Œç”¨çº¿ä¸Šå·¥å…·æ¥å‹ç¼©æ··æ·†ä¸‹é¢è¿™æ®µç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> name=<span class="string">"hello"</span>;</span><br><span class="line">  <span class="built_in">window</span>.description=<span class="string">"hi "</span>+name;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å‹å®Œæ··å®Œåç˜¦äº†ä¸€ç‚¹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">say</span>(<span class="params"></span>)</span>&#123;<span class="keyword">var</span> a=<span class="string">"hello"</span>;<span class="built_in">window</span>.description=<span class="string">"hi "</span>+a&#125;</span><br></pre></td></tr></table></figure>
<p>ç”¨aä»£æ›¿äº†nameï¼Œä½†æ˜¯windowæ—¢ä¸æ˜¯å£°æ˜çš„å±€éƒ¨å˜é‡ä¹Ÿä¸æ˜¯å‚æ•°ï¼Œæ˜¯ä¸ä¼šè¢«å‹ç¼©æ··æ·†çš„ã€‚<br>æ‰€ä»¥å°†windowä½œä¸ºå‚æ•°ä¼ å…¥å¯è§£å†³è¿™ä¸ªé—®é¢˜ã€‚å°†windowä½œä¸ºå‚æ•°ä¼ å…¥ï¼Œå¯ä»¥åœ¨å‹ç¼©ä»£ç æ—¶è¿›è¡Œä¼˜åŒ–ï¼Œå³å‚æ•°åå¯ä»¥å‹ç¼©å˜çŸ­ã€‚ä¹Ÿå¯ä»¥åœ¨å‡½æ•°å†…å¦èµ·ä¸ªç®€çŸ­çš„å˜é‡åä»£æ›¿ã€‚  </p>
<p><strong>2.ä½œç”¨åŸŸ</strong></p>
<p>è®¿é—®å½“å‰ä½œç”¨åŸŸä¸‹çš„å˜é‡æ¯”è®¿é—®å…¨å±€å˜é‡è¦å¿«<br>å¦‚æœä¸ä¼ å…¥ï¼Œæ¯ä¸ªè¯­å¥éƒ½è¦å»æ‰¾ä¸€æ¬¡windowã€‚å¦‚æœå°†windowä½œä¸ºå‚æ•°ä¼ é€’è¿‡å»ï¼Œä¸è¦æ¯ä¸ªè¯­å¥éƒ½å»æ‰¾windowï¼Œæé«˜äº†æ•ˆç‡ã€‚</p>
<h3 id="ä¸ºä»€ä¹ˆè¦ä¼ å…¥undefinedï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆè¦ä¼ å…¥undefinedï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆè¦ä¼ å…¥undefinedï¼Ÿ"></a>ä¸ºä»€ä¹ˆè¦ä¼ å…¥undefinedï¼Ÿ</h3><p>undefinedå¹¶ä¸æ˜¯ä½œä¸ºJavaScriptçš„ä¿ç•™å…³é”®å­—ï¼›undefinedåœ¨IE8åŠä»¥ä¸‹ä¸­æ˜¯å¯ä»¥å¯¹å…¶é‡æ–°èµ‹å€¼çš„</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">var undefined&#x3D;&quot;new value&quot;;</span><br><span class="line">alert(undefined);&#x2F;&#x2F;alert â€œnew value&quot;</span><br></pre></td></tr></table></figure>
<p>æ‰§è¡ŒåŒ¿åå‡½æ•°çš„æ—¶å€™ï¼Œåªä¼ é€’ä¸€ä¸ªå‚æ•°windowï¼Œè€Œä¸ä¼ é€’undefinedï¼Œé‚£ä¹ˆå‡½æ•°ä½“ä¸­çš„undefinedå±€éƒ¨å˜é‡çš„å€¼ï¼Œåˆšå¥½å°±æ˜¯undefined</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="literal">undefined</span> = <span class="number">8</span>;  </span><br><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"> window </span>) </span>&#123;   </span><br><span class="line">    alert(<span class="built_in">window</span>.undefined); <span class="comment">// 8  </span></span><br><span class="line">    alert(<span class="literal">undefined</span>); <span class="comment">// 8  </span></span><br><span class="line">&#125;)(<span class="built_in">window</span>);</span><br></pre></td></tr></table></figure>
<p>åŠ äº†undefinedå</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="literal">undefined</span> = <span class="number">8</span>;  </span><br><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"> window, undefined </span>) </span>&#123;   </span><br><span class="line">    alert(<span class="built_in">window</span>.undefined);  <span class="comment">// 8  </span></span><br><span class="line">    alert(<span class="literal">undefined</span>); <span class="comment">// æ­¤å¤„undefinedå‚æ•°ä¸ºå±€éƒ¨çš„åç§°ä¸ºundefinedå˜é‡ï¼Œå€¼ä¸ºundefined  </span></span><br><span class="line">&#125;)(<span class="built_in">window</span>);</span><br></pre></td></tr></table></figure>
<p>åœ¨ è‡ªè°ƒç”¨åŒ¿åå‡½æ•° çš„ä½œç”¨åŸŸå†…ï¼Œç¡®ä¿undefinedæ˜¯çœŸçš„æœªå®šä¹‰ã€‚å› ä¸ºundefinedèƒ½å¤Ÿè¢«é‡å†™ï¼Œèµ‹äºˆæ–°çš„å€¼.</p>
<h2 id="new-jQuery-fn-init-selector-context"><a href="#new-jQuery-fn-init-selector-context" class="headerlink" title="new jQuery.fn.init( selector, context );"></a>new jQuery.fn.init( selector, context );</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">jQuery = <span class="function"><span class="keyword">function</span>(<span class="params"> selector, context </span>) </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="keyword">new</span> jQuery.fn.init( selector, context );</span><br><span class="line">    <span class="comment">//=&gt;åˆ›å»ºäº†initè¿™ä¸ªç±»çš„å®ä¾‹ï¼Œä¹Ÿç›¸å½“äºåˆ›å»ºäº†jQueryè¿™ä¸ªç±»çš„å®ä¾‹ï¼ˆå› ä¸ºåœ¨åé¢çš„æ—¶å€™ï¼Œè®©init.prototype=jQuery.prototypeï¼‰&#125;;</span></span><br><span class="line">jQuery.fn = jQuery.prototype = &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¦ç†è§£è¿™æ®µä»£ç ï¼Œé¦–å…ˆè¦ç†è§£jqueryçš„ä¸¤ç§è°ƒç”¨</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">$(<span class="string">'body'</span>).css(<span class="string">'background'</span>,<span class="string">'red'</span>);</span><br><span class="line">$.parseJSON(<span class="string">'&#123;&#125;'</span>);</span><br></pre></td></tr></table></figure>
<p>$(â€˜bodyâ€™)åº”è¯¥æ˜¯ä¸€ä¸ªå®ä¾‹å¯¹è±¡ï¼Œcssæ˜¯æ¯ä¸ªå®ä¾‹å…±äº«çš„æ–¹æ³•ï¼Œæ˜¯åŸå‹ä¸Šçš„æ–¹æ³•ã€‚<br>è€Œ$åˆ™æ˜¯ä¸€ä¸ªç±»ï¼ŒparseJSONåˆ™æ˜¯ç±»çš„é™æ€æ–¹æ³•ã€‚  </p>
<h3 id="å¦‚ä½•ä¸ç”¨newå…³é”®å­—å¾—åˆ°jQueryå¯¹è±¡ï¼Ÿ"><a href="#å¦‚ä½•ä¸ç”¨newå…³é”®å­—å¾—åˆ°jQueryå¯¹è±¡ï¼Ÿ" class="headerlink" title="å¦‚ä½•ä¸ç”¨newå…³é”®å­—å¾—åˆ°jQueryå¯¹è±¡ï¼Ÿ"></a>å¦‚ä½•ä¸ç”¨newå…³é”®å­—å¾—åˆ°jQueryå¯¹è±¡ï¼Ÿ</h3><p>ä¸€èˆ¬è·å–å®ä¾‹å¯¹è±¡è°ƒå–å®ä¾‹æ–¹æ³•çš„ä¾‹å­ï¼Œå¦‚æœæ²¡æœ‰ä½¿ç”¨newåˆ™ä¼šæŠ¥é”™</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> demo=<span class="keyword">new</span> Demo(<span class="string">"jacky"</span>);</span><br><span class="line">demo.change();</span><br></pre></td></tr></table></figure>
<p>ä½†æ˜¯è·å–jQueryå¯¹è±¡ï¼ˆä»¥ä¸‹ç®€ç§°JQå¯¹è±¡ï¼‰ç”¨newå’Œä¸ç”¨newéƒ½å¯ä»¥ï¼Œè¿”å›çš„æ˜¯ä¸€æ ·çš„ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">console</span>.log($(<span class="string">'*'</span>).length);<span class="comment">//14</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">new</span> $(<span class="string">'*'</span>).length);<span class="comment">//14</span></span><br></pre></td></tr></table></figure>
<p>ä¸ºäº†åšåˆ°è¿™ç‚¹ï¼Œæˆ‘ä»¬å¾ˆå®¹æ˜“æƒ³åˆ°éœ€è¦<strong>åœ¨æ„é€ å‡½æ•°å†…éƒ¨è¿”å›å¯¹è±¡</strong>ã€‚</p>
<p>æ„é€ å‡½æ•°æœ‰returnå€¼æ€ä¹ˆåŠï¼Ÿ<br><strong>æ„é€ å‡½æ•°é‡Œæ²¡æœ‰æ˜¾å¼è°ƒç”¨returnæ—¶ï¼Œé»˜è®¤æ˜¯è¿”å›thiså¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯æ–°åˆ›å»ºçš„å®ä¾‹å¯¹è±¡ã€‚</strong></p>
<p>å½“æ„é€ å‡½æ•°é‡Œè°ƒç”¨returnæ—¶ï¼Œåˆ†ä¸¤ç§æƒ…å†µï¼š</p>
<blockquote>
<p>1.returnçš„æ˜¯äº”ç§ç®€å•æ•°æ®ç±»å‹ï¼šStringï¼ŒNumberï¼ŒBooleanï¼ŒNullï¼ŒUndefinedã€‚ è¿™ç§æƒ…å†µä¸‹ï¼Œå¿½è§†returnå€¼ï¼Œä¾ç„¶è¿”å›thiså¯¹è±¡ã€‚<br>2.returnçš„æ˜¯Object è¿™ç§æƒ…å†µä¸‹ï¼Œä¸å†è¿”å›thiså¯¹è±¡ï¼Œè€Œæ˜¯è¿”å›returnè¯­å¥çš„è¿”å›å€¼ã€‚</p>
</blockquote>
<p>æ‰€ä»¥æˆ‘ä»¬åº”è¯¥åœ¨jQueryæ„é€ å‡½æ•°å†…éƒ¨å»è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™æ ·å°±å¯ä»¥ä¸ç”¨newçš„æ–¹å¼å»åˆ›å»ºJQå¯¹è±¡äº†ï¼Œå…¶å®è¿™æ—¶å€™ï¼Œæ„é€ å‡½æ•°å°±ç›¸å½“äºä¸€ä¸ªå·¥å‚å‡½æ•°äº†ã€‚</p>
<p>è¯¥è¿”å›ä»€ä¹ˆæ ·çš„å¯¹è±¡ï¼Ÿå¯¹äºè¿™ä¸ªå¯¹è±¡æœ‰ä½•è¦æ±‚ï¼Ÿ<br>è¿™ä¸ªå¯¹è±¡å¿…é¡»å¯ä»¥è°ƒç”¨jQuery.prototypeä¸Šçš„æ–¹æ³•</p>
<p>æˆ‘ä»¬ä½¿ç”¨æˆ–è‡ªå·±å†™jQueryæ’ä»¶çš„æ—¶å€™ä¼šç»å¸¸é‡åˆ°$.fnè¿™ä¸ªå¯¹è±¡ï¼Œå¾ˆå¤šæ’ä»¶éƒ½æ˜¯é€šè¿‡æ‰©å±•è¿™ä¸ªå¯¹è±¡æ¥å®ç°çš„ã€‚<br>$.fnå…¶å®å¯¹åº”ç€jQuery.prototypeï¼Œ$å’Œfnåˆ†åˆ«æ˜¯jQueryå’Œprototypeçš„ç®€å†™æ–¹å¼ï¼Œåªè¦æˆ‘ä»¬æŠŠæ–¹æ³•æ‰©å±•åˆ°è¿™ä¸ªåŸå‹å¯¹è±¡èº«ä¸Šï¼Œé€šè¿‡$()è·å–çš„JQå¯¹è±¡éƒ½æ˜¯å¯ä»¥è®¿é—®åˆ°æ–¹æ³•çš„ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">$.fn.greeting=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;alert(<span class="string">'hi'</span>)&#125;;</span><br><span class="line">$(<span class="string">'body'</span>).greeting();<span class="comment">// alert 'hi'</span></span><br></pre></td></tr></table></figure>
<p>jqueryæºç </p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">jQuery = <span class="function"><span class="keyword">function</span>(<span class="params"> selector, context </span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> jQuery.fn.init( selector, context, rootjQuery );</span><br><span class="line">&#125;,</span><br><span class="line">jQuery.fn = jQuery.prototype = &#123; <span class="comment">// fnå³å¯¹åº”prototype</span></span><br><span class="line">    <span class="keyword">constructor</span>: jQuery,</span><br><span class="line">    init: function( selector, context, rootjQuery ) &#123;</span><br><span class="line">        ...</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>jQuery.fn.init.prototype = jQuery.fn;<br>çœ‹åˆ°ä¸Šé¢è¿™æ®µæºç ï¼ŒåŸå› å°±å¾ˆæ˜æ˜¾äº†ï¼Œâ€jQuery.fn.init.prototype = jQuery.fnâ€è¿™å¥å¾ˆé‡è¦ï¼Œå®ƒå°†initçš„åŸå‹æŒ‡å‘jQueryçš„åŸå‹ï¼Œæ‰€ä»¥JQå¯¹è±¡æ‰å¯ä»¥è®¿é—®â€˜cssâ€™ã€â€™showâ€™ã€â€™hideâ€™è¿™äº›å†™åœ¨jQuery.fnä¸Šçš„æ–¹æ³•ã€‚å…¶å®æˆ‘ä»¬æ‰€è¯´çš„JQå¯¹è±¡æ ¹æœ¬å°±æ˜¯initå‡½æ•°çš„å®ä¾‹å¯¹è±¡ï¼Œè€Œinitåˆ™æ˜¯jQueryåŸå‹ä¸Šçš„ä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒæœ¬èº«æ˜¯æ²¡æœ‰ä»€ä¹ˆæ–¹æ³•çš„ï¼Œå…¨é ä»jQueryåŸå‹ä¸Šæ‹¿ã€‚</p>
<p>ä¸ºä½•è¦ä»initè¿™ç»•è¿™ä¹ˆä¸€å¤§åœˆæ¥è®¿é—®jQueryçš„åŸå‹ï¼Œè€Œä¸æ˜¯ç›´æ¥è¿”å›ä¸€ä¸ªjQueryå®ä¾‹ç›´æ¥é€šè¿‡è¿™ä¸ªå®ä¾‹æ¥è®¿é—®è‡ªèº«åŸå‹ï¼Ÿæ¯”å¦‚è¯´ä»£ç å¯ä»¥å†™æˆè¿™æ ·ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">jQuery = <span class="function"><span class="keyword">function</span>(<span class="params"> selector, context </span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> jQuery();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é—®é¢˜å¾ˆæ˜æ˜¾ï¼Œæ­»åœ¨å¾ªç¯é‡Œã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">jQuery = <span class="function"><span class="keyword">function</span>(<span class="params"> selector, context </span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> jQuery.fn.init();<span class="comment">// ä¸åŒç‚¹åœ¨äºå»æ‰äº†newå…³é”®å­—</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åšç‚¹åŠ¨ä½œæ¥è¯æ˜åŠ ä¸Šnewæ˜¯æœ‰ç”¨çš„</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">jQuery = <span class="function"><span class="keyword">function</span>(<span class="params"> selector, context </span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> jQuery.fn.init();</span><br><span class="line">&#125;,</span><br><span class="line">jQuery.fn = jQuery.prototype = &#123;</span><br><span class="line">    init: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.name=<span class="string">'sheila'</span>;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">    &#125;,</span><br><span class="line">    anotherName:<span class="string">'sunwukong'</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> jq=jQuery();</span><br><span class="line"><span class="built_in">console</span>.log(jq.anotherName);<span class="comment">// "sunwukong"</span></span><br><span class="line"><span class="built_in">console</span>.log(jq.name);<span class="comment">// "sheila"</span></span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢è¿™æ®µä»£ç æ˜¯ä¸ºäº†è¯´æ˜thisçš„ä½œç”¨åŸŸé—®é¢˜ï¼Œå…¶ä¸ä»…èƒ½è®¿é—®initå‡½æ•°å†…éƒ¨ï¼Œè¿˜èƒ½å‘ä¸Šä¸€å±‚åˆ°fnå¯¹è±¡ï¼Œä½œç”¨åŸŸä¸ç‹¬ç«‹.å¦‚æœæ˜¯</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">return</span> <span class="keyword">new</span> jQuery.fn.init();</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(jq.anotherName);<span class="comment">// undefined</span></span><br><span class="line"><span class="built_in">console</span>.log(jq.name);<span class="comment">//  "sheila"</span></span><br></pre></td></tr></table></figure>
<p>åŠ ä¸åŠ newè¿˜ç‰µæ¶‰åˆ°ä¸€ä¸ªæ›´é‡è¦çš„é—®é¢˜ï¼šè¿”å›çš„å¯¹è±¡ç©¶ç«Ÿæ˜¯è°ã€‚</p>
<p>ä¸åŠ newçš„æƒ…å†µä¸‹ï¼Œâ€™jQuery.fn.init()â€™ç›¸å½“äºè°ƒç”¨æ–¹æ³•ï¼ŒthisæŒ‡å‘çš„ä»¥åŠæœ€åè¿”å›çš„éƒ½æ˜¯åŒä¸€ä¸ªjQuery.fnå¯¹è±¡ï¼Œ$(â€˜bodyâ€™)å’Œ$(â€˜pâ€™)å°±æ²¡æœ‰åŒºåˆ†äº†ã€‚</p>
<p>æ˜¾ç„¶ï¼Œè¿™æ˜¯ä¸åˆç†çš„ã€‚è€ŒåŠ äº†newï¼Œå°±æ˜¯æ¯æ¬¡ç”¨æ„é€ å‡½æ•°å®ä¾‹åŒ–äº†ä¸€ä¸ªæ–°å¯¹è±¡ï¼Œå½¼æ­¤éƒ½æ˜¯ä¸åŒçš„</p>
]]></content>
      <categories>
        <category>å¼€å‘æ‚è®°</category>
      </categories>
      <tags>
        <tag>jquery</tag>
      </tags>
  </entry>
  <entry>
    <title>this.props.history.push()æŠ¥é”™è§£å†³</title>
    <url>/2019/04/05/this-props-history-push%E6%96%B9%E6%B3%95%E6%8A%A5%E9%94%99%E8%A7%A3%E5%86%B3/</url>
    <content><![CDATA[<p>åœ¨ä½¿ç”¨ React çš„è·¯ç”±è·³è½¬æ—¶ï¼Œå‡ºç°äº†è¿™ä¸ªé”™è¯¯â€cannot read property â€˜pushâ€™ of undefinedâ€ï¼Œæ‰¾æ¥æ‰¾å»ï¼Œå‘ç°æ˜¯å­ç»„ä»¶è¿™æ ·è°ƒç”¨æ—¶æ‰ä¼šæŠ¥é”™,å®ƒä¸æ˜¯è·¯ç”±ç»„ä»¶ã€‚ä»¥ä¸‹æ˜¯è§£å†³æ–¹æ¡ˆï¼š</p>
<a id="more"></a>

<p>åœ¨æˆ‘çš„æ¯ä¸ªé¡µé¢ä¸­ï¼ŒHeader ç»„ä»¶éƒ½ä¼šå¼•å…¥ï¼Œä½¿å…¶æˆä¸ºå­ç»„ä»¶</p>
<h3 id="é€šè¿‡çˆ¶ç»„ä»¶ä¼ å€¼ç»™å­ç»„ä»¶"><a href="#é€šè¿‡çˆ¶ç»„ä»¶ä¼ å€¼ç»™å­ç»„ä»¶" class="headerlink" title="é€šè¿‡çˆ¶ç»„ä»¶ä¼ å€¼ç»™å­ç»„ä»¶"></a>é€šè¿‡çˆ¶ç»„ä»¶ä¼ å€¼ç»™å­ç»„ä»¶</h3><p>åœ¨çˆ¶ç»„ä»¶ä¸­ï¼Œä¼ é€’ä¸€ä¸ª history ç»™å­ç»„ä»¶</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;Header history=&#123;<span class="keyword">this</span>.props.history&#125; /&gt;</span><br></pre></td></tr></table></figure>

<p>å­ç»„ä»¶æ–¹æ³•è¿˜æ˜¯ä¸€æ ·å†™</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">this</span>.props.history.push(<span class="string">'/login'</span>)</span><br></pre></td></tr></table></figure>

<p>ä½†å¦‚æœ Header ç»„ä»¶è¢«åµŒå¥—å°è£…æ›´æ·±çš„è¯æ˜¯ä¸è¡Œçš„ï¼Œè¿™æ—¶åªèƒ½é€‰æ‹©ç¬¬äºŒç§æ–¹æ³•ã€‚</p>
<h3 id="ä½¿ç”¨-withRouter"><a href="#ä½¿ç”¨-withRouter" class="headerlink" title="ä½¿ç”¨ withRouter"></a>ä½¿ç”¨ withRouter</h3><blockquote>
<p>é»˜è®¤æƒ…å†µä¸‹å¿…é¡»ç»è¿‡è·¯ç”±åŒ¹é…æ¸²æŸ“çš„ç»„ä»¶æ‰å­˜åœ¨ this.props,æ‰æ‹¥æœ‰è·¯ç”±å‚æ•°ï¼Œæ‰§è¡Œ this.props.history.push(â€˜/loginâ€™)è·³è½¬åˆ°å¯¹åº”è·¯ç”±çš„é¡µé¢ï¼Œç„¶è€Œä¸æ˜¯æ‰€æœ‰ç»„ä»¶éƒ½ç›´æ¥ä¸è·¯ç”±ç›¸è¿ï¼ˆé€šè¿‡è·¯ç”±è·³è½¬åˆ°æ­¤ç»„ä»¶ï¼‰çš„ï¼Œå½“è¿™äº›ç»„ä»¶éœ€è¦è·¯ç”±å‚æ•°æ—¶ï¼Œä½¿ç”¨ withRouter å°±å¯ä»¥ç»™æ­¤ç»„ä»¶ä¼ å…¥è·¯ç”±å‚æ•°ï¼Œå°† react-router çš„ historyã€locationã€match ä¸‰ä¸ªå¯¹è±¡ä¼ å…¥ props å¯¹è±¡ä¸Šï¼Œæ­¤æ—¶å°±å¯ä»¥ä½¿ç”¨ this.propsã€‚</p>
</blockquote>
<p>å¯è§å½“ä¸€ä¸ªéè·¯ç”±ç»„ä»¶ä¹Ÿæƒ³è®¿é—®åˆ°å½“å‰è·¯ç”±çš„ match,location,history å¯¹è±¡ï¼Œé‚£ä¹ˆ withRouter å°†æ˜¯ä¸€ä¸ªéå¸¸å¥½çš„é€‰æ‹©ï¼Œå¯ä»¥ç†è§£ä¸ºå°†ä¸€ä¸ªç»„ä»¶åŒ…è£¹æˆè·¯ç”±ç»„ä»¶ã€‚</p>
<p>ç”¨æ³•ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; withRouter &#125; <span class="keyword">from</span> <span class="string">'react-router-dom'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> withRouter(Header) <span class="comment">// exportæ—¶è¦ä½¿ç”¨withRouter</span></span><br></pre></td></tr></table></figure>

<p>åœ¨ Header ç»„ä»¶å¼•å…¥å¹¶ä½¿ç”¨ï¼Œå°±å¯ä»¥ä½¿ç”¨ this.props.history.push æ–¹æ³•è¿›è¡Œæ­£å¸¸è·³è½¬äº†~~</p>
]]></content>
      <categories>
        <category>Reactç¬”è®°</category>
      </categories>
      <tags>
        <tag>React</tag>
      </tags>
  </entry>
  <entry>
    <title>MongoDBæ€§èƒ½ä¹‹é€æ¡æ’å…¥ä¸æ‰¹é‡æ’å…¥</title>
    <url>/2018/05/12/MongoDB%E6%80%A7%E8%83%BD%E4%B9%8B%E9%80%90%E6%9D%A1%E6%8F%92%E5%85%A5%E4%B8%8E%E6%89%B9%E9%87%8F%E6%8F%92%E5%85%A5/</url>
    <content><![CDATA[<p>åœ¨ mongoDB ä¸­ï¼Œå½“æˆ‘ä»¬è¦æ’å…¥å¾ˆå¤šæ•°æ®æ—¶ï¼Œå¯ä»¥é€‰æ‹©ç”¨å¾ªç¯ä¾æ¬¡é€æ¡æ’å…¥ï¼Œæˆ–è€…å¯ä»¥å…ˆæŠŠæ‰€æœ‰æ•°æ®è£…åœ¨ä¸€ä¸ªæ•°ç»„å†æ•´ä¸ªæ•°ç»„æ’å…¥é›†åˆï¼Œä½†æ˜¯ï¼Œæœ€å¥½ä½¿ç”¨ç¬¬äºŒç§æ–¹å¼â€¦</p>
<a id="more"></a>

<p>å¦‚ä¸‹ä»£ç æ‰€ç¤ºï¼ˆå·²æ–°å»ºæ•°æ®åº“ log å’Œé›†åˆ testï¼‰ï¼Œåœ¨ js å†™å…¥å¦‚ä¸‹ä»£ç </p>
<h2 id="é€æ¡æ’å…¥"><a href="#é€æ¡æ’å…¥" class="headerlink" title="é€æ¡æ’å…¥"></a>é€æ¡æ’å…¥</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> startTime = <span class="keyword">new</span> <span class="built_in">Date</span>().getTime() <span class="comment">//è·å¾—å¼€å§‹æ—¶é—´</span></span><br><span class="line"><span class="keyword">var</span> db = connect(<span class="string">'log'</span>)</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">1000</span>; i++) &#123;</span><br><span class="line">  db.test.insert(&#123; <span class="attr">num</span>: <span class="number">1</span> &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> runTime = <span class="keyword">new</span> <span class="built_in">Date</span>().getTime() - startTime <span class="comment">//è·å¾—è¿è¡Œæ—¶é—´</span></span><br><span class="line">print(<span class="string">'runTime is '</span> + runTime + <span class="string">'ms'</span>) <span class="comment">//runTime is 745ms</span></span><br></pre></td></tr></table></figure>

<h2 id="æ‰¹é‡æ’å…¥"><a href="#æ‰¹é‡æ’å…¥" class="headerlink" title="æ‰¹é‡æ’å…¥"></a>æ‰¹é‡æ’å…¥</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> startTime = <span class="keyword">new</span> <span class="built_in">Date</span>().getTime() <span class="comment">//è·å¾—å¼€å§‹æ—¶é—´</span></span><br><span class="line"><span class="keyword">var</span> db = connect(<span class="string">'log'</span>)</span><br><span class="line"><span class="keyword">var</span> tempArr = []</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">1000</span>; i++) &#123;</span><br><span class="line">  tempArr.push(&#123; <span class="attr">num</span>: <span class="number">1</span> &#125;)</span><br><span class="line">&#125;</span><br><span class="line">db.test.insert(tempArr)</span><br><span class="line"><span class="keyword">var</span> runTime = <span class="keyword">new</span> <span class="built_in">Date</span>().getTime() - startTime</span><br><span class="line">print(<span class="string">'runTime is '</span> + runTime + <span class="string">'ms'</span>) <span class="comment">// runTime is 48ms</span></span><br></pre></td></tr></table></figure>

<p>ç”±è¿è¡Œæ—¶é—´æ¥çœ‹ï¼Œæ‰¹é‡æ’å…¥æ¯”é€æ¡æ’å…¥æ‰€ç”¨çš„æ—¶é—´å°‘äº†å¾ˆå¤šï¼Œåœ¨å°å‹é¡¹ç›®ä¸­å¯èƒ½æ„Ÿå—ä¸åˆ°çš„å·®è·ï¼Œåœ¨å¤§é¡¹ç›®å°±æ˜¯æ€§èƒ½çš„é—®é¢˜äº†ï¼Œæ•…åº”ä½¿ç”¨ç¬¬äºŒç§æ–¹å¼æ¥æ‰¹é‡æ’å…¥æ•°æ®ã€‚</p>
]]></content>
      <categories>
        <category>MongoDB</category>
      </categories>
      <tags>
        <tag>MongoDB</tag>
      </tags>
  </entry>
</search>
