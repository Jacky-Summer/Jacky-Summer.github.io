<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon_32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon_16.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/pace-js@1.0.2/themes/blue/pace-theme-center-atom.css">
  <script src="//cdn.jsdelivr.net/npm/pace-js@1/pace.min.js"></script>

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"yoursite.com","root":"/","scheme":"Gemini","version":"7.7.2","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true,"b2t":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="æœ€è¿‘åœ¨å­¦ä¹  Gatsbyï¼Œå®ƒä¸»è¦æœ‰ SEO å¥½ï¼Œè€Œä¸”é¦–é¡µæ¸²æŸ“å¿«ç­‰ä¼˜ç‚¹ï¼Œåœ¨å›½å¤–å¾ˆæµè¡Œçš„ä¸€ä¸ªæ¡†æ¶ï¼Œè¿™ç¯‡é•¿æ–‡å¸¦ä½ å…¥ä¸ªé—¨ã€‚Gatsby æ˜¯ä¸€ä¸ªé™æ€ç«™ç‚¹ç”Ÿæˆå™¨ï¼ŒGatsby ä¸»è¦çš„åº”ç”¨çš„æŠ€æœ¯æ˜¯ React å’Œ GraphQLâ€¦">
<meta property="og:type" content="article">
<meta property="og:title" content="æ‰‹æŠŠæ‰‹å¸¦ä½ å…¥é—¨Gatsby">
<meta property="og:url" content="http://yoursite.com/2020/07/12/%E6%89%8B%E6%8A%8A%E6%89%8B%E5%B8%A6%E4%BD%A0%E5%85%A5%E9%97%A8Gatsby/index.html">
<meta property="og:site_name" content="Jacky">
<meta property="og:description" content="æœ€è¿‘åœ¨å­¦ä¹  Gatsbyï¼Œå®ƒä¸»è¦æœ‰ SEO å¥½ï¼Œè€Œä¸”é¦–é¡µæ¸²æŸ“å¿«ç­‰ä¼˜ç‚¹ï¼Œåœ¨å›½å¤–å¾ˆæµè¡Œçš„ä¸€ä¸ªæ¡†æ¶ï¼Œè¿™ç¯‡é•¿æ–‡å¸¦ä½ å…¥ä¸ªé—¨ã€‚Gatsby æ˜¯ä¸€ä¸ªé™æ€ç«™ç‚¹ç”Ÿæˆå™¨ï¼ŒGatsby ä¸»è¦çš„åº”ç”¨çš„æŠ€æœ¯æ˜¯ React å’Œ GraphQLâ€¦">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://user-gold-cdn.xitu.io/2020/6/21/172d4b8f913506df?w=1922&h=538&f=png&s=78717">
<meta property="og:image" content="https://user-gold-cdn.xitu.io/2020/6/21/172d52ba499ad501?w=1223&h=404&f=png&s=37041">
<meta property="og:image" content="https://user-gold-cdn.xitu.io/2020/6/21/172d5e52ae8fcd52?w=334&h=102&f=png&s=3896">
<meta property="og:image" content="https://user-gold-cdn.xitu.io/2020/6/21/172d61d3f95cadf0?w=718&h=174&f=png&s=5935">
<meta property="og:image" content="https://user-gold-cdn.xitu.io/2020/6/21/172d61cc37846a59?w=514&h=68&f=png&s=6441">
<meta property="og:image" content="https://user-gold-cdn.xitu.io/2020/6/21/172d63bec7bccdeb?w=576&h=188&f=png&s=10256">
<meta property="og:image" content="https://user-gold-cdn.xitu.io/2020/6/21/172d660d32ae1825?w=1442&h=642&f=png&s=61514">
<meta property="og:image" content="https://user-gold-cdn.xitu.io/2020/6/21/172d6d9b2afff80c?w=705&h=203&f=png&s=8464">
<meta property="og:image" content="https://user-gold-cdn.xitu.io/2020/6/21/172d74ca7b60229d?w=1542&h=928&f=png&s=113095">
<meta property="og:image" content="https://user-gold-cdn.xitu.io/2020/6/21/172d7761605cba2b?w=205&h=243&f=png&s=7538">
<meta property="og:image" content="https://user-gold-cdn.xitu.io/2020/6/21/172d7823d4e7db7f?w=1703&h=499&f=png&s=61510">
<meta property="og:image" content="https://user-gold-cdn.xitu.io/2020/6/21/172d78dc41c94349?w=599&h=687&f=png&s=41548">
<meta property="og:image" content="https://user-gold-cdn.xitu.io/2020/6/23/172e1b12d01e3ba3?w=722&h=601&f=png&s=36586">
<meta property="og:image" content="https://user-gold-cdn.xitu.io/2020/6/23/172e1ce4c0a61cae?w=1097&h=448&f=png&s=28484">
<meta property="og:image" content="https://user-gold-cdn.xitu.io/2020/6/24/172e3bb13a244d4c?w=1230&h=548&f=png&s=51476">
<meta property="og:image" content="https://user-gold-cdn.xitu.io/2020/6/24/172e3c8f759609dd?w=757&h=255&f=png&s=18207">
<meta property="og:image" content="https://user-gold-cdn.xitu.io/2020/6/24/172e3ce7be50852c?w=722&h=596&f=png&s=36793">
<meta property="article:published_time" content="2020-07-12T03:52:17.000Z">
<meta property="article:modified_time" content="2020-08-22T05:03:45.934Z">
<meta property="article:author" content="Jacky Lin">
<meta property="article:tag" content="React">
<meta property="article:tag" content="Gatsby">
<meta property="article:tag" content="GraphQL">
<meta property="article:tag" content="SSR">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://user-gold-cdn.xitu.io/2020/6/21/172d4b8f913506df?w=1922&h=538&f=png&s=78717">

<link rel="canonical" href="http://yoursite.com/2020/07/12/%E6%89%8B%E6%8A%8A%E6%89%8B%E5%B8%A6%E4%BD%A0%E5%85%A5%E9%97%A8Gatsby/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true
  };
</script>

  <title>æ‰‹æŠŠæ‰‹å¸¦ä½ å…¥é—¨Gatsby | Jacky</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ ">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Jacky</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>é¦–é¡µ</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>å½’æ¡£</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>æ ‡ç­¾</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>åˆ†ç±»</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>æœç´¢
        </a>
      </li>
  </ul>

</nav>
  <div class="site-search">
    <div class="search-pop-overlay">
  <div class="popup search-popup">
      <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocorrect="off" autocapitalize="off"
           placeholder="æœç´¢..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

  </div>
</div>

  </div>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block " lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/07/12/%E6%89%8B%E6%8A%8A%E6%89%8B%E5%B8%A6%E4%BD%A0%E5%85%A5%E9%97%A8Gatsby/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Jacky Lin">
      <meta itemprop="description" content="ä¸å¿˜åˆå¿ƒï¼Œæ–¹å¾—å§‹ç»ˆ">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jacky">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          æ‰‹æŠŠæ‰‹å¸¦ä½ å…¥é—¨Gatsby
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2020-07-12 11:52:17" itemprop="dateCreated datePublished" datetime="2020-07-12T11:52:17+08:00">2020-07-12</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Gatsby/" itemprop="url" rel="index"><span itemprop="name">Gatsby</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
              <span>16k</span>
            </span>
            <span class="post-meta-item" title="é˜…è¯»æ—¶é•¿">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
              <span>15 åˆ†é’Ÿ</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>æœ€è¿‘åœ¨å­¦ä¹  Gatsbyï¼Œå®ƒä¸»è¦æœ‰ SEO å¥½ï¼Œè€Œä¸”é¦–é¡µæ¸²æŸ“å¿«ç­‰ä¼˜ç‚¹ï¼Œåœ¨å›½å¤–å¾ˆæµè¡Œçš„ä¸€ä¸ªæ¡†æ¶ï¼Œè¿™ç¯‡é•¿æ–‡å¸¦ä½ å…¥ä¸ªé—¨ã€‚Gatsby æ˜¯ä¸€ä¸ªé™æ€ç«™ç‚¹ç”Ÿæˆå™¨ï¼ŒGatsby ä¸»è¦çš„åº”ç”¨çš„æŠ€æœ¯æ˜¯ React å’Œ GraphQLâ€¦</p>
<a id="more"></a>

<h2 id="Gatsby-ä»‹ç»"><a href="#Gatsby-ä»‹ç»" class="headerlink" title="Gatsby ä»‹ç»"></a>Gatsby ä»‹ç»</h2><h3 id="ä»€ä¹ˆæ˜¯-Gatsby"><a href="#ä»€ä¹ˆæ˜¯-Gatsby" class="headerlink" title="ä»€ä¹ˆæ˜¯ Gatsby"></a>ä»€ä¹ˆæ˜¯ Gatsby</h3><p>Gatsby æ˜¯ä¸€ä¸ªåŸºäº React ï¼Œç”¨äºæ­å»ºé™æ€ç«™ç‚¹çš„å¼€æºæ¡†æ¶ï¼Œç”¨äºå¸®åŠ©å¼€å‘è€…æ„å»ºè¿è¡Œé€Ÿåº¦æå¿«çš„ç½‘ç«™ã€‚å¯ä»¥è¯´å®ƒæ˜¯ä¸€ä¸ªé™æ€ç«™ç‚¹ç”Ÿæˆå™¨ï¼ŒGatsby ä¸»è¦çš„åº”ç”¨çš„æŠ€æœ¯æ˜¯ React å’Œ GraphQLã€‚</p>
<p>å®˜ç½‘ï¼š<a href="https://www.gatsbyjs.org/" target="_blank" rel="noopener">https://www.gatsbyjs.org/</a></p>
<h3 id="ä¸ºä»€ä¹ˆé€‰-Gatsby"><a href="#ä¸ºä»€ä¹ˆé€‰-Gatsby" class="headerlink" title="ä¸ºä»€ä¹ˆé€‰ Gatsby"></a>ä¸ºä»€ä¹ˆé€‰ Gatsby</h3><p>Gatsby èƒ½å¿«é€Ÿä½¿ç”¨ React ç”Ÿæ€ç³»ç»Ÿæ¥ç”Ÿæˆé™æ€ç½‘ç«™ï¼Œå®ƒå…·å¤‡æ›´é«˜çš„æ€§èƒ½ï¼Œè€Œä¸” Gatsby çš„ç”Ÿæ€ä¹Ÿå¾ˆå¼ºå¤§ã€‚</p>
<p>å½“ä½ æƒ³è‡ªå·±åŠ¨æ‰‹æ­å»ºä¸ªäººåšå®¢æ—¶ï¼Œè€ƒè™‘çš„æ˜¯ SEO è¦å¥½ï¼Œè€Œä¸”ä½ ä¸ç”¨ç†ä¼šæ•°æ®åº“å’ŒæœåŠ¡å™¨ç­‰å¤æ‚çš„éƒ¨ç½²è®¾ç½®ï¼ŒGatsby æ„å»ºçš„ç½‘ç«™ä¸ºé™æ€ç«™ç‚¹ï¼Œä½ å¯ä»¥å¾ˆè½»æ¾çš„å°†ç½‘ç«™éƒ¨ç½²åœ¨å¾ˆå¤šæœåŠ¡ä¸Šã€‚Gatsby ä¸éœ€è¦ç­‰å¾…è¯·æ±‚æ—¶ç”Ÿæˆé¡µé¢ï¼Œè€Œæ˜¯é¢„å…ˆç”Ÿæˆé¡µé¢ï¼Œå› æ­¤ç½‘ç«™çš„é€Ÿåº¦ä¼šå¾ˆå¿«ã€‚</p>
<p>Gatsby ä¸­è¿ç”¨äº† React, react-router, Webpack ä»¥åŠ GraphQL ç­‰æ–°æŠ€æœ¯ï¼Œä¹Ÿè·Ÿéšäº†æŠ€æœ¯æ½®æµã€‚</p>
<h2 id="GraphQL-ä»‹ç»"><a href="#GraphQL-ä»‹ç»" class="headerlink" title="GraphQL ä»‹ç»"></a>GraphQL ä»‹ç»</h2><p>ä¸Šé¢æˆ‘ä»¬è¯´åˆ°äº† GraphQLï¼Œæ²¡äº†è§£çš„åŒå­¦å¯èƒ½ä¸å¤ªæ¸…æ¥šã€‚</p>
<blockquote>
<p>GraphQL æ˜¯ä¸€ç§ç”¨äº API çš„æŸ¥è¯¢è¯­è¨€ï¼Œæ˜¯ Restful API çš„æ›¿ä»£å“ã€‚</p>
</blockquote>
<p>è‡³äºæ›¿ä»£ Restful API ä¸€è¯´ï¼Œä¸ªäººè§‰å¾—ç°åœ¨ Restful API å æ®ç»å¯¹çš„ä¸»å¯¼åœ°ä½ï¼Œå½“å‰è¿˜æ˜¯å¾ˆéš¾è¢«æ’¼åŠ¨çš„ã€‚å› ä¸ºç›®å‰æ¥çœ‹ï¼ŒGraphQL ä¹Ÿæœ‰å®ƒçš„ç¼ºç‚¹ã€‚</p>
<p>çœ‹åˆ°è¿™é‡Œæ²¡å­¦è¿‡ GraphQL ä¹Ÿä¸ç”¨æ€•ï¼Œå› ä¸ºç”¨åˆ°çš„ä¸å¤šè€Œä¸” Gatsby å†…ç½®ä¸€ä¸ªç•Œé¢æ–¹ä¾¿æˆ‘ä»¬æ“ä½œã€‚GraphQL ç›®å‰å›½å¤–æ¯”è¾ƒç«ï¼Œå®ƒä½œä¸ºä¸€é—¨æ–°æŠ€æœ¯ï¼Œå³ä½¿ä¸æ·±å…¥æˆ‘ä»¬ä¹Ÿå¯ä»¥äº†è§£ä¸€ä¸‹ã€‚</p>
<p>è¿™é‡Œæˆ‘ä»¬å½“ç„¶è¦å¹æ§å®ƒçš„ä¼˜ç‚¹ï¼Œä¸Šé¢çš„å®šä¹‰ä½ å¯èƒ½ä¼šç–‘æƒ‘ï¼ŒAPI ä¸å°±æ˜¯åç«¯å†™å¥½çš„æ¥å£å—ï¼Œæ€ä¹ˆè¿˜èƒ½æŸ¥è¯¢ï¼Ÿ</p>
<p>GraphQL æˆ‘ä»¬æŠŠè¿™ä¸ªå•è¯æ‹†å¼€çš„è¯æ˜¯ï¼š Graph(å›¾å½¢æˆ–å›¾è¡¨) + QLï¼ˆQuery Languageï¼‰ï¼Œå®ƒæ˜¯ä¸€ç§å›¾å½¢åŒ–çš„æŸ¥è¯¢è¯­è¨€ï¼Œæè¿°å®¢æˆ·ç«¯å¦‚ä½•åƒæœåŠ¡ç«¯è¯·æ±‚æ•°æ®çš„è¯­æ³•è§„èŒƒã€‚å¬èµ·æ¥æ¨¡æ¨¡ç³Šç³Šï¼Œé‚£å®ƒç›¸å¯¹ Restful API åˆè§£å†³äº†ä»€ä¹ˆç—›ç‚¹å‘¢ï¼Ÿ</p>
<ol>
<li>è¯·æ±‚ä½ æ‰€è¦çš„æ•°æ®ä¸å¤šä¸å°‘</li>
</ol>
<p>ç›¸ä¿¡å¤šæ•°äººè‚¯å®šé‡åˆ°è¿‡çš„åœºæ™¯ï¼Œæ¯”å¦‚é¡¹ç›®ç®¡ç†ç³»ç»Ÿï¼Œè¿›å…¥æŸé¡µé¢å±•ç¤ºä¸€ä¸ªåˆ—è¡¨ï¼Œåˆ—è¡¨ä¸Šåªéœ€å±•ç¤ºæ ‡é¢˜ï¼Œä½†ä½ è¯·æ±‚è¿”å›çš„æ•°æ®å´å¤šäº†å…¶ä»–ä¿¡æ¯ï¼Œæ¯”å¦‚åˆ›å»ºè€…ã€åˆ›å»ºæ—¶é—´ç­‰ã€‚è¿™äº›ä¿¡æ¯åœ¨è¿™é‡Œæ˜¯å¤šä½™çš„ï¼Œä½†å®ƒå¯èƒ½æœ‰å®ƒè‡ªå·±å­˜åœ¨çš„ç†ç”±ï¼Œæˆ–è®¸æ˜¯å…¶ä»–åœºæ™¯éœ€è¦è¿”å›è¿™äº›ä¿¡æ¯ï¼Œå› æ­¤è¯¥æ¥å£å°±ç›´æ¥åŒ…å«äº†æ‰€æœ‰æ•°æ®ã€‚</p>
<p>è¿™ä¸€ç‚¹ï¼ŒGraphQL èƒ½å‡†ç¡®è·å–ä½ æƒ³è¦çš„æ•°æ®ï¼Œä¸å¤šä¸å°‘ï¼Œæƒ³è¦è¿”å›æŒ‡å®šçš„ä»€ä¹ˆæ•°æ®ï¼Œå°±è¿”å›ä»€ä¹ˆæ•°æ®ã€‚æ•°æ®ç”±åº”ç”¨æ¥æ§åˆ¶ï¼Œè€Œä¸æ˜¯æœåŠ¡å™¨ã€‚</p>
<ol start="2">
<li>è·å–å¤šä¸ªèµ„æºåªéœ€è¦ä¸€ä¸ªè¯·æ±‚</li>
</ol>
<p>GraphQL æŸ¥è¯¢ä¸ä»…èƒ½å¤Ÿè·å¾—èµ„æºçš„å±æ€§ï¼Œè¿˜èƒ½æ²¿ç€èµ„æºé—´å¼•ç”¨è¿›ä¸€æ­¥æŸ¥è¯¢ã€‚å…¸å‹çš„ REST API è¯·æ±‚å¤šä¸ªèµ„æºæ—¶å¾—è½½å…¥å¤šä¸ª URLï¼Œè€Œ GraphQL å¯ä»¥é€šè¿‡ä¸€æ¬¡è¯·æ±‚å°±è·å–ä½ åº”ç”¨æ‰€éœ€çš„æ‰€æœ‰æ•°æ®ã€‚è¿™æ ·ä¸€æ¥ï¼Œå³ä½¿æ˜¯æ¯”è¾ƒæ…¢çš„ç§»åŠ¨ç½‘ç»œè¿æ¥ä¸‹ï¼Œä½¿ç”¨ GraphQL çš„åº”ç”¨ä¹Ÿèƒ½è¡¨ç°å¾—è¶³å¤Ÿè¿…é€Ÿã€‚</p>
<ol start="3">
<li>æè¿°æ‰€æœ‰çš„å¯èƒ½ç±»å‹ç³»ç»Ÿ</li>
</ol>
<p>GraphQL API åŸºäºç±»å‹å’Œå­—æ®µçš„æ–¹å¼è¿›è¡Œç»„ç»‡ï¼Œè€Œéå…¥å£ç«¯ç‚¹ã€‚ä½ å¯ä»¥é€šè¿‡ä¸€ä¸ªå•ä¸€å…¥å£ç«¯ç‚¹å¾—åˆ°ä½ æ‰€æœ‰çš„æ•°æ®èƒ½åŠ›ã€‚GraphQL ä½¿ç”¨ç±»å‹æ¥ä¿è¯åº”ç”¨åªè¯·æ±‚å¯èƒ½çš„æ•°æ®ï¼Œè¿˜æä¾›äº†æ¸…æ™°çš„è¾…åŠ©æ€§é”™è¯¯ä¿¡æ¯ã€‚åº”ç”¨å¯ä»¥ä½¿ç”¨ç±»å‹ï¼Œè€Œé¿å…ç¼–å†™æ‰‹åŠ¨è§£æä»£ç ã€‚</p>
<p>Gatsby ä½¿ç”¨äº† GraphQLï¼Œä½œä¸ºåœ¨æœ¬åœ°ç®¡ç†èµ„æºçš„ä¸€ç§æ–¹å¼ã€‚</p>
<h2 id="æ­å»ºé¡¹ç›®"><a href="#æ­å»ºé¡¹ç›®" class="headerlink" title="æ­å»ºé¡¹ç›®"></a>æ­å»ºé¡¹ç›®</h2><h3 id="å¼€å§‹"><a href="#å¼€å§‹" class="headerlink" title="å¼€å§‹"></a>å¼€å§‹</h3><ul>
<li>å®‰è£… Gatsby è„šæ‰‹æ¶</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g gatsby-cli</span><br></pre></td></tr></table></figure>

<ul>
<li>æ–°å»ºé¡¹ç›®</li>
</ul>
<blockquote>
<p>gatsby new [projectName][starter]ï¼šæ ¹æ® starter åˆ›å»ºä¸€ä¸ªæ–°é¡¹ç›®</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gatsby new gatsby-blog-demo https:&#x2F;&#x2F;github.com&#x2F;gatsbyjs&#x2F;gatsby-starter-hello-world</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬è¿™é‡Œä½¿ç”¨å®˜æ–¹æœ€ç®€å•ç‰ˆæœ¬çš„ hello-world æ¨¡æ¿è¿›è¡Œå¼€å‘ï¼Œå¦‚æœä½ ç›´æ¥ä½¿ç”¨</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gatsby new gatsby-blog-demo</span><br></pre></td></tr></table></figure>

<p>é»˜è®¤ä¼šä½¿ç”¨ <a href="https://github.com/gatsbyjs/gatsby-starter-default" target="_blank" rel="noopener">gatsby-starter-default</a> æ¥æ–°å»ºé¡¹ç›®</p>
<ul>
<li>è¿è¡Œé¡¹ç›®</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd gatsby-blog-demo</span><br><span class="line">gatsby develop</span><br></pre></td></tr></table></figure>

<p>æ‰“å¼€ <code>localhost:8000</code>ï¼Œå°±å¯ä»¥çœ‹åˆ°è¾“å‡ºäº†ä¸€å¥<code>Hello world!</code></p>
<h3 id="å¸¸ç”¨å‘½ä»¤"><a href="#å¸¸ç”¨å‘½ä»¤" class="headerlink" title="å¸¸ç”¨å‘½ä»¤"></a>å¸¸ç”¨å‘½ä»¤</h3><p>è¿™é‡Œä»‹ç» Gatsby çš„å‡ ä¸ªå¸¸ç”¨å‘½ä»¤ï¼š</p>
<ul>
<li>gastby developï¼šå¼€å¯çƒ­åŠ è½½å¼€å‘ç¯å¢ƒ</li>
<li>gastby buildï¼šæ‰“åŒ…åˆ° public ä¸‹ï¼Œæ„å»ºç”Ÿäº§ç¯å¢ƒç”¨çš„ä¼˜åŒ–è¿‡çš„é™æ€ç½‘ç«™æ‰€éœ€çš„ä¸€åˆ‡é™æ€èµ„æºã€é™æ€é¡µé¢ä¸ js ä»£ç </li>
<li>gatsby serveï¼šåœ¨æ‰“åŒ…ä¹‹åï¼Œå¯åŠ¨ä¸€ä¸ªæœ¬åœ°çš„æœåŠ¡ï¼Œä¾›ä½ æµ‹è¯•åˆšæ‰â€gatsby buildâ€ç”Ÿæˆçš„é™æ€ç½‘é¡µ</li>
</ul>
<h3 id="GraphiQL"><a href="#GraphiQL" class="headerlink" title="GraphiQL"></a>GraphiQL</h3><p>æ‰“å¼€<code>http://localhost:8000/__graphql</code>ï¼Œå°±ä¼šçœ‹åˆ° GraphQL çš„è°ƒè¯•ç•Œé¢ï¼Œè¿™é‡Œå¯ä»¥æŸ¥çœ‹æ‰€æœ‰çš„æ•°æ®ã€ä»¥åŠè°ƒè¯• query è¯­å¥æ˜¯å¦è¿”å›ç›¸åº”çš„æ•°æ®ã€‚å¯ä»¥ç›´æ¥åœ¨å·¦ä¾§ç‚¹å‡»é€‰ä¸­ï¼Œå°±å¯ä»¥è‡ªåŠ¨ç”Ÿæˆ query è¯­å¥ã€‚</p>
<p><img src="https://user-gold-cdn.xitu.io/2020/6/21/172d4b8f913506df?w=1922&h=538&f=png&s=78717" alt=""></p>
<h3 id="å¯èƒ½å‡ºç°çš„è­¦å‘Š"><a href="#å¯èƒ½å‡ºç°çš„è­¦å‘Š" class="headerlink" title="å¯èƒ½å‡ºç°çš„è­¦å‘Š"></a>å¯èƒ½å‡ºç°çš„è­¦å‘Š</h3><p>å¦‚æœè¿è¡Œåä½ çš„æ§åˆ¶å°å‡ºç°ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">React-Hot-Loader: react-ğŸ”¥-dom patch is not detected. React 16.6+ features may not work.</span><br></pre></td></tr></table></figure>

<p>å¯ä»¥è¿™æ ·è§£å†³:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install @hot-loader&#x2F;react-dom</span><br></pre></td></tr></table></figure>

<p>åœ¨æ ¹ç›®å½•ä¸‹æ–°å»º<code>gatsby-node.js</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">exports.onCreateWebpackConfig &#x3D; (&#123; getConfig, stage &#125;) &#x3D;&gt; &#123;</span><br><span class="line">  const config &#x3D; getConfig()</span><br><span class="line">  if (stage.startsWith(&#39;develop&#39;) &amp;&amp; config.resolve) &#123;</span><br><span class="line">    config.resolve.alias &#x3D; &#123;</span><br><span class="line">      ...config.resolve.alias,</span><br><span class="line">      &#39;react-dom&#39;: &#39;@hot-loader&#x2F;react-dom&#39;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å†é‡æ–°å¯åŠ¨é¡¹ç›®ï¼Œå°±å¯ä»¥æ¶ˆé™¤è¿™ä¸ªè­¦å‘Š</p>
<h3 id="é¡¹ç›®ç»“æ„"><a href="#é¡¹ç›®ç»“æ„" class="headerlink" title="é¡¹ç›®ç»“æ„"></a>é¡¹ç›®ç»“æ„</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">â”œâ”€â”€ .cache</span><br><span class="line">â”œâ”€â”€ public</span><br><span class="line">â”œâ”€â”€ src</span><br><span class="line">|  â””â”€â”€ pages            &#x2F;&#x2F; è¯¥æ–‡ä»¶å¤¹ä¸‹çš„æ–‡ä»¶ä¼šè¢«æ˜ å°„ä¸ºè·¯ç”±</span><br><span class="line">|     â””â”€â”€ index.js</span><br><span class="line">â”œâ”€â”€ static              &#x2F;&#x2F; é™æ€èµ„æº</span><br><span class="line">â”œâ”€â”€ .prettierignore</span><br><span class="line">â”œâ”€â”€ .prettierrc</span><br><span class="line">â”œâ”€â”€ gatsby-config.js    &#x2F;&#x2F; åŸºæœ¬é…ç½®æ–‡ä»¶</span><br><span class="line">â”œâ”€â”€ LICENSE</span><br><span class="line">â”œâ”€â”€ package.json</span><br><span class="line">â”œâ”€â”€ README.md</span><br><span class="line">â””â”€â”€ yarn.lock</span><br></pre></td></tr></table></figure>

<h2 id="Gatsby-é…ç½®æ–‡ä»¶"><a href="#Gatsby-é…ç½®æ–‡ä»¶" class="headerlink" title="Gatsby é…ç½®æ–‡ä»¶"></a>Gatsby é…ç½®æ–‡ä»¶</h2><p>è¿™é‡Œæœ€åˆå§‹çš„æ¨¡æ¿åªæœ‰ä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œä¸€èˆ¬é¡¹ç›®ä¸­éƒ½ä¼šæœ‰ 4 ä¸ªé…ç½®æ–‡ä»¶</p>
<h3 id="gatsby-config-js"><a href="#gatsby-config-js" class="headerlink" title="gatsby-config.js"></a>gatsby-config.js</h3><p>åŸºæœ¬é…ç½®æ–‡ä»¶ã€‚æ•´ä¸ª Gatsby ç«™ç‚¹çš„é…ç½®æ–‡ä»¶ã€‚å¯ä»¥åœ¨é‡Œé¢é…ç½®ç½‘ç«™çš„ç›¸å…³åŸºæœ¬ä¿¡æ¯ã€‚</p>
<h3 id="gatsby-node-js"><a href="#gatsby-node-js" class="headerlink" title="gatsby-node.js"></a>gatsby-node.js</h3><p>node ç›¸å…³é…ç½®æ–‡ä»¶ã€‚è¿™ä¸ªæ–‡ä»¶åªä¼šåœ¨ build æœŸé—´è¿è¡Œä¸€æ¬¡ï¼Œæ¯”å¦‚åŠ¨æ€åˆ›å»ºä¸€äº›é¡µé¢ã€‚</p>
<h3 id="gatsby-browser-js"><a href="#gatsby-browser-js" class="headerlink" title="gatsby-browser.js"></a>gatsby-browser.js</h3><p>å®¢æˆ·ç«¯ç›¸å…³é…ç½®ã€‚ä¸€äº›æµè§ˆå™¨ç›¸å…³çš„ API é€šè¿‡åœ¨è¿™ä¸ªæ–‡ä»¶é‡Œå»å®ç°ï¼Œæ¯”å¦‚ä¸€äº›ç›‘å¬è·¯ç”±å˜åŒ–ï¼Œæ³¨å†Œ serviceWorker ç­‰ç­‰ã€‚</p>
<h3 id="gatsby-ssr-js"><a href="#gatsby-ssr-js" class="headerlink" title="gatsby-ssr.js"></a>gatsby-ssr.js</h3><p>æœåŠ¡ç«¯æ¸²æŸ“ç›¸å…³é…ç½®æ–‡ä»¶ã€‚ä½¿ç”¨ Gatsby çš„æœåŠ¡ç«¯æ¸²æŸ“ API è‡ªå®šä¹‰å½±å“æœåŠ¡ç«¯æ¸²æŸ“çš„é»˜è®¤è®¾ç½®ã€‚</p>
<h2 id="åˆ›å»ºé¡µé¢"><a href="#åˆ›å»ºé¡µé¢" class="headerlink" title="åˆ›å»ºé¡µé¢"></a>åˆ›å»ºé¡µé¢</h2><h3 id="è·¯ç”±é¡µ"><a href="#è·¯ç”±é¡µ" class="headerlink" title="è·¯ç”±é¡µ"></a>è·¯ç”±é¡µ</h3><p>æˆ‘ä»¬åœ¨ <code>pages</code>ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªæ–‡ä»¶<code>about.js</code>ï¼Œåˆ™å¯¹åº”çš„è·¯ç”±è·¯å¾„ä¸º<code>/about</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> About = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>about me<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> About</span><br></pre></td></tr></table></figure>

<p>æ‰“å¼€<code>http://localhost:8000/about</code>ï¼Œæ˜¾ç¤ºçš„æ˜¯æˆ‘ä»¬åˆšåˆšåˆ›å»ºçš„é¡µé¢</p>
<h3 id="404-é¡µé¢"><a href="#404-é¡µé¢" class="headerlink" title="404 é¡µé¢"></a>404 é¡µé¢</h3><p><code>pages</code>ç›®å½•ä¸‹çš„æ–‡ä»¶åå³æ˜¯è·¯ç”±è·¯å¾„ï¼Œä½†æœ‰ä¸€ä¸ªæ¯”è¾ƒç‰¹æ®Šï¼Œå½“åŒ¹é…ä¸åˆ°è·¯å¾„æ—¶ï¼ŒGatsby ä¼šè·³è½¬åˆ° 404 é¡µé¢ï¼Œå¦‚æœæˆ‘ä»¬åœ¨ pages ä¸‹åˆ›å»ºæ–‡ä»¶å<code>404.js</code>ï¼Œä¼šä½¿ç”¨æˆ‘ä»¬è‡ªå®šä¹‰çš„ 404 é¡µé¢ã€‚å½“å‰æˆ‘ä»¬éšä¾¿è¾“å…¥ä¸€ä¸ªä¸å­˜åœ¨çš„é¡µé¢è·¯å¾„ï¼š<code>http://localhost:8000/test</code>ï¼Œé¡µé¢å°±ä¼šæŠ¥é”™ã€‚</p>
<p>æˆ‘ä»¬æ–°å»ºä¸€ä¸ªæ–‡ä»¶ 404.js</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> About = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>404 é¡µé¢ä¸å­˜åœ¨<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> About</span><br></pre></td></tr></table></figure>

<p>å†éšä¾¿è¾“å…¥ä¸€ä¸ªè·¯å¾„ï¼Œæ˜¾ç¤ºå‡ºè¯¥é¡µé¢ï¼š<br><img src="https://user-gold-cdn.xitu.io/2020/6/21/172d52ba499ad501?w=1223&h=404&f=png&s=37041" alt=""></p>
<p>Gatsby ä¼šç¡®ä¿å°† 404 é¡µé¢æ„å»ºä¸º 404.htmlï¼Œé»˜è®¤æƒ…å†µä¸‹ä¼šä¸ºæˆ‘ä»¬åˆ›å»ºæ­¤é¡µé¢ï¼Œåœ¨è¯¥é¡µé¢ä¹Ÿåˆ—å‡ºäº†ç½‘ç«™ä¸Šçš„æ‰€æœ‰é¡µé¢è·¯ç”±é“¾æ¥,æˆ‘ä»¬å¯ä»¥é€šè¿‡å•å‡»<code>Preview custom 404 page</code>çœ‹æˆ‘ä»¬åˆšæ‰åˆ›å»ºçš„ 404 é¡µé¢ã€‚</p>
<p>é‚£æˆ‘ä»¬æƒ³ç›´æ¥è·³è½¬åˆ°æˆ‘ä»¬è‡ªå®šä¹‰çš„ 404 é¡µé¢å•Šï¼Œè¿˜è¦æˆ‘ä»¬ç‚¹å‡»æ‰è·³è½¬ã€‚åŸå› æ˜¯å¤„äºå¼€å‘ç¯å¢ƒï¼Œå³å½“ä½¿ç”¨ <code>gatsby develop</code>æ—¶ï¼ŒGatsby ä½¿ç”¨é»˜è®¤çš„ 404 é¡µé¢è¦†ç›–æˆ‘ä»¬è‡ªå®šä¹‰çš„ 404 é¡µé¢ï¼Œä½†å®é™…ä¸Šæ˜¯å·²ç»ç”Ÿæ•ˆäº†ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥æ‰“åŒ…ï¼Œå¯åŠ¨ä¸€ä¸ªæœ¬åœ°çš„æœåŠ¡ï¼Œæ¨¡æ‹Ÿå¤„äºçº¿ä¸Šç¯å¢ƒæ¥çœ‹ï¼Œè¿™ä¸ªæ—¶å€™æ‰æ˜¯ç›´æ¥æ˜¾ç¤ºæˆ‘ä»¬è‡ªå®šä¹‰çš„ 404 é¡µé¢ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">gatsby build</span><br><span class="line">gatsby serve</span><br></pre></td></tr></table></figure>

<p>ç„¶åæ‰“å¼€<code>http://localhost:9000/test</code>ï¼ˆä»»æ„è·¯å¾„ï¼‰ï¼Œå°±èƒ½è·³è½¬åˆ°æˆ‘ä»¬è‡ªå®šä¹‰çš„ 404 é¡µé¢äº†</p>
<p><img src="https://user-gold-cdn.xitu.io/2020/6/21/172d5e52ae8fcd52?w=334&h=102&f=png&s=3896" alt=""></p>
<h3 id="åˆ›å»ºå¸ƒå±€ç»„ä»¶"><a href="#åˆ›å»ºå¸ƒå±€ç»„ä»¶" class="headerlink" title="åˆ›å»ºå¸ƒå±€ç»„ä»¶"></a>åˆ›å»ºå¸ƒå±€ç»„ä»¶</h3><ol>
<li><p>åˆ›å»ºä¸€ä¸ªæ–°ç›®å½• <code>src/components</code>ã€‚</p>
</li>
<li><p>åœ¨ä¸Šé¢çš„ç›®å½•ä¸­åˆ›å»ºä¸€ä¸ªå¸ƒå±€ç»„ä»¶æ–‡ä»¶ src/components/layout.jsï¼š</p>
</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> (&#123; children &#125;) =&gt; (</span><br><span class="line">  &lt;div style=&#123;&#123; <span class="attr">margin</span>: <span class="string">`3rem auto`</span>, <span class="attr">maxWidth</span>: <span class="number">650</span>, <span class="attr">padding</span>: <span class="string">`0 1rem`</span> &#125;&#125;&gt;&#123;children&#125;&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">)</span></span><br></pre></td></tr></table></figure>

<ol start="3">
<li>åœ¨<code>src/pages/index.js</code>ä¸­ï¼ŒåŠ å…¥ Layout ç»„ä»¶ï¼Œ</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> Layout <span class="keyword">from</span> <span class="string">'../components/layout'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">Home</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">Layout</span>&gt;</span>Hello world!<span class="tag">&lt;/<span class="name">Layout</span>&gt;</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™æ ·å°±è®©æ•´ä½“é¡µé¢å±…ä¸­äº†ï¼Œè¿™é‡Œéƒ½æ˜¯ React çš„åŸºæœ¬æ“ä½œ</p>
<h2 id="è®¾ç½®-CSS-æ ·å¼"><a href="#è®¾ç½®-CSS-æ ·å¼" class="headerlink" title="è®¾ç½® CSS æ ·å¼"></a>è®¾ç½® CSS æ ·å¼</h2><p>Gatsby ä¸­æ ·å¼å¯ä»¥ä½¿ç”¨å¤šç§å½¢å¼ï¼Œæ™®é€šçš„ <code>import &#39;./xxx.css</code>æˆ‘ä»¬å°±ä¸è¯´äº†ã€‚</p>
<h3 id="ä½¿ç”¨å…¨å±€æ ·å¼"><a href="#ä½¿ç”¨å…¨å±€æ ·å¼" class="headerlink" title="ä½¿ç”¨å…¨å±€æ ·å¼"></a>ä½¿ç”¨å…¨å±€æ ·å¼</h3><p>æˆ‘ä»¬å‘ç½‘ç«™æ·»åŠ å…¨å±€æ ·å¼çš„æœ€ç›´æ¥çš„æ–¹æ³•ä¹‹ä¸€å°±æ˜¯ä½¿ç”¨å…¨å±€ .css æ ·å¼è¡¨ã€‚</p>
<p>åœ¨ src ç›®å½•ä¸‹æ–°å»ºæ–‡ä»¶å¤¹<code>styles</code>ï¼Œæ·»åŠ ä¸€ä¸ª global.css æ–‡ä»¶</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">html &#123;</span><br><span class="line">  background-color: #f5f5f5;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>åœ¨ç›®å½•ä¸‹åˆ›å»º gatsby-browser.js ä¸­ï¼Œå°†æ ·å¼æ–‡ä»¶å¯¼å…¥</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import &quot;.&#x2F;src&#x2F;styles&#x2F;global.css&quot;</span><br></pre></td></tr></table></figure>

<p>é‡å¯æœ¬åœ°æœåŠ¡ï¼Œå°±å‘ç°é¡µé¢èƒŒæ™¯å˜ä¸ºæµ…ç°è‰²äº†ã€‚</p>
<h3 id="ä½¿ç”¨-CSS-Module-ä¸ºç»„ä»¶è®¾ç½®æ ·å¼"><a href="#ä½¿ç”¨-CSS-Module-ä¸ºç»„ä»¶è®¾ç½®æ ·å¼" class="headerlink" title="ä½¿ç”¨ CSS Module ä¸ºç»„ä»¶è®¾ç½®æ ·å¼"></a>ä½¿ç”¨ CSS Module ä¸ºç»„ä»¶è®¾ç½®æ ·å¼</h3><p>CSS Module å¯ä»¥å‡å°‘å…¨å±€æ±¡æŸ“ã€é˜²æ­¢å‘½åå†²çªå’Œæ ·å¼çš„è¦†ç›–ã€‚</p>
<blockquote>
<p>CSS Module å®ç°åŸç†æ˜¯ï¼šå°†æ‰€æœ‰æ¨¡å—åŒ–çš„ç±»åï¼Œä¿®æ”¹ä¸ºæˆå”¯ä¸€çš„åç§°ï¼Œå³æ·»åŠ ä¸€äº›ä¸é‡å¤çš„å‰ç¼€æˆ–åç¼€ã€‚è¿™æ ·ä½¿å¾—é¡¹ç›®ä¸­ï¼Œä¸åŒäººå‘˜ç¼–å†™çš„æ ·å¼ä¸ä¼šå‡ºç°è¦†ç›–å’Œå†²çªã€‚</p>
</blockquote>
<ol>
<li>åˆ›å»º CSS æ–‡ä»¶ <code>src/styles/index.module.css</code></li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">.title &#123;</span><br><span class="line">  color: red;</span><br><span class="line">&#125;</span><br><span class="line">.text &#123;</span><br><span class="line">  color: blue;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç”¨æ³•å¦‚ä¸‹ï¼š<code>src/pages/index.js</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">import React from &quot;react&quot;</span><br><span class="line">import Layout from &quot;..&#x2F;components&#x2F;layout&quot;</span><br><span class="line">import styles from &quot;..&#x2F;styles&#x2F;index.module.css&quot;</span><br><span class="line"></span><br><span class="line">export default function Home() &#123;</span><br><span class="line">  console.log(styles)</span><br><span class="line">  return (</span><br><span class="line">    &lt;Layout&gt;</span><br><span class="line">      &lt;h1 className&#x3D;&#123;styles.title&#125;&gt;Hello World&lt;&#x2F;h1&gt;</span><br><span class="line">      &lt;div className&#x3D;&#123;styles.text&#125;&gt;Test&lt;&#x2F;div&gt;</span><br><span class="line">    &lt;&#x2F;Layout&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœï¼š</p>
<p><img src="https://user-gold-cdn.xitu.io/2020/6/21/172d61d3f95cadf0?w=718&h=174&f=png&s=5935" alt=""></p>
<p>è¾“å‡º <code>styles</code>,å¯ä»¥çœ‹åˆ°è¢«å¯¼å…¥å¤„ç†çš„ç»“æœ:</p>
<p><img src="https://user-gold-cdn.xitu.io/2020/6/21/172d61cc37846a59?w=514&h=68&f=png&s=6441" alt=""><br>å¦‚æœå°†å…¶ä¸ CSS æ–‡ä»¶è¿›è¡Œæ¯”è¾ƒï¼Œä½ ä¼šå‘ç°æ¯ä¸ªæ ¼å¼ç°åœ¨éƒ½æ˜¯å¯¼å…¥å¯¹è±¡ä¸­æŒ‡å‘é•¿å­—ç¬¦ä¸²çš„é”®ï¼ˆkeyï¼‰ï¼Œä¾‹å¦‚ <code>title</code> æŒ‡å‘ <code>index-module--title--1i-Wh</code>ã€‚ è¿™äº›æ ·å¼åç§°æ˜¯ CSS æ¨¡å—ç”Ÿæˆçš„ã€‚ ä¿è¯å®ƒä»¬åœ¨ä½ çš„ç½‘ç«™ä¸Šæ˜¯å”¯ä¸€çš„ã€‚ è€Œä¸”ç”±äºå¿…é¡»å¯¼å…¥å®ƒä»¬æ‰èƒ½ä½¿ç”¨è¿™äº›ç±»ï¼Œæ‰€ä»¥å¯¹äºåœ¨ä»»ä½•åœ°æ–¹ä½¿ç”¨è¿™äº› CSS æ ·å¼éƒ½æ²¡é—®é¢˜ã€‚</p>
<h3 id="å…¶ä»–å¤„ç†-CSS-çš„æ–¹å¼"><a href="#å…¶ä»–å¤„ç†-CSS-çš„æ–¹å¼" class="headerlink" title="å…¶ä»–å¤„ç† CSS çš„æ–¹å¼"></a>å…¶ä»–å¤„ç† CSS çš„æ–¹å¼</h3><p>ä½¿ç”¨ css æ ·å¼å°±ç‚¹åˆ°ä¸ºæ­¢äº†ï¼Œå…¶ä»–çš„æ¯”å¦‚ Sass ç­‰ï¼›è¿˜æœ‰ CSS in JS çš„æ–¹å¼ï¼Œæ¯”å¦‚ Emotion, Styled Componentã€‚å¯ä»¥å»å®˜ç½‘æŸ¥çœ‹ç›¸åº”æ”¯æŒçš„ Gatsby æ’ä»¶ï¼Œå°±å¯ä»¥ä½¿ç”¨äº†ã€‚</p>
<h2 id="è·å–-Gatsby-ä¸­çš„æ•°æ®"><a href="#è·å–-Gatsby-ä¸­çš„æ•°æ®" class="headerlink" title="è·å– Gatsby ä¸­çš„æ•°æ®"></a>è·å– Gatsby ä¸­çš„æ•°æ®</h2><p>å»ºç«‹ç½‘ç«™æ—¶ï¼Œæ‚¨å¯èƒ½éœ€è¦é‡ç”¨ä¸€äº›å¸¸ç”¨çš„æ•°æ®â€”â€”æ¯”å¦‚å…¬ç”¨çš„ç½‘ç«™æ ‡é¢˜ã€ä½œè€…ä¿¡æ¯ç­‰ï¼Œæˆ‘ä»¬ä¸å¯èƒ½åœ¨æ¯ä¸ªé¡µé¢éƒ½åŠ ï¼Œæ‰€ä»¥æˆ‘ä»¬æŠŠæ ‡é¢˜å­˜å‚¨åœ¨ä¸€ä¸ªä½ç½®ï¼Œç„¶åä»å…¶ä»–æ–‡ä»¶å¼•ç”¨è¯¥ä½ç½®å°±è¡Œäº†ï¼Œæ›´æ”¹çš„æ—¶å€™ä¹Ÿåªèƒ½æ›´æ”¹è¿™ä¸€å¤„åœ°æ–¹ã€‚</p>
<p>è¿™äº›å¸¸ç”¨æ•°æ®çš„å­˜æ”¾ä½ç½®å°±æ˜¯ <code>gatsby-config.js</code> æ–‡ä»¶ä¸­çš„ <code>siteMetadata</code> å¯¹è±¡ã€‚æ‰“å¼€è¿™ä¸ªæ–‡ä»¶ï¼Œå†™å…¥ä»£ç ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">module.exports &#x3D; &#123;</span><br><span class="line">  &#x2F;* Your site config here *&#x2F;</span><br><span class="line">  siteMetadata: &#123;</span><br><span class="line">    title: &#96;Title from siteMetadata&#96;,</span><br><span class="line">    author: &#39;jacky&#39;</span><br><span class="line">  &#125;,</span><br><span class="line">  plugins: [],</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é‡å¯æœåŠ¡</p>
<h3 id="ä½¿ç”¨é¡µé¢æŸ¥è¯¢"><a href="#ä½¿ç”¨é¡µé¢æŸ¥è¯¢" class="headerlink" title="ä½¿ç”¨é¡µé¢æŸ¥è¯¢"></a>ä½¿ç”¨é¡µé¢æŸ¥è¯¢</h3><p>ç¼–è¾‘ <code>src/pages/about.js</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> &#123; graphql &#125; <span class="keyword">from</span> <span class="string">'gatsby'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// GraphQL è·å–çš„æ•°æ®ï¼Œä¼šå½“åšå‚æ•°ä¼ é€’åˆ°é¡µé¢ç»„ä»¶ä¸­</span></span><br><span class="line"><span class="comment">// æ•°æ®çš„å½¢å¼æ˜¯ &#123; errors, data &#125;ï¼Œæ²¡æœ‰é”™è¯¯åˆ™ä¸ä¼šæœ‰ errors</span></span><br><span class="line"><span class="keyword">const</span> About = <span class="function">(<span class="params">&#123; data &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(data.site.siteMetadata.title)</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;h1&gt;Title: &#123;data.site.siteMetadata.title&#125;&lt;<span class="regexp">/h1&gt;</span></span><br><span class="line"><span class="regexp">      &lt;p&gt;author: &#123;data.site.siteMetadata.author&#125;&lt;/</span>p&gt;</span><br><span class="line">      &lt;div&gt;about me&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>div&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> About</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> query = graphql<span class="string">`</span></span><br><span class="line"><span class="string">  query &#123;</span></span><br><span class="line"><span class="string">    site &#123;</span></span><br><span class="line"><span class="string">      siteMetadata &#123;</span></span><br><span class="line"><span class="string">        title</span></span><br><span class="line"><span class="string">        author</span></span><br><span class="line"><span class="string">      &#125;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">`</span></span><br></pre></td></tr></table></figure>

<p>ç„¶åå°±æ‹‰å‡ºæ•°æ®äº†</p>
<p><img src="https://user-gold-cdn.xitu.io/2020/6/21/172d63bec7bccdeb?w=576&h=188&f=png&s=10256" alt=""></p>
<p>å…¶ä¸­ï¼ŒGraphQL æŸ¥è¯¢è¯­å¥æ˜¯ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  site &#123;</span><br><span class="line">    siteMetadata &#123;</span><br><span class="line">      title,</span><br><span class="line">      author</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä½ å¯èƒ½ä¼šæ‡µé€¼ï¼Œ site æ˜¯å“ªé‡Œæ¥çš„ï¼Œè¿™æ•°æ®æ ¼å¼æ€ä¹ˆæ˜¯è¿™æ ·ï¼Œè¿™å°±æ˜¯ GraphQL æŸ¥è¯¢è¯­å¥äº†ï¼Œæˆ‘ä»¬å¯ä»¥æ‰“å¼€ Gatsby å†…ç½®çš„ GraphQL è°ƒè¯•ç•Œé¢ <code>http://localhost:8000/__graphql</code>ã€‚</p>
<p>è¿™é‡Œçš„<code>site</code>å³ä¸ºæˆ‘ä»¬<code>gatsby-config.js</code>å†™çš„ç«™ç‚¹é…ç½®ã€‚</p>
<p>ä¾æ¬¡ç‚¹å‡»å·¦è¾¹çš„<code>site</code>ã€<code>siteMetadata</code>ï¼Œç„¶åæœ‰æˆ‘ä»¬åˆšæ‰å†™çš„<code>title</code>,<code>author</code>å­—æ®µ ä¾›æˆ‘ä»¬é€‰æ‹©ï¼Œåœ¨ç‚¹å‡»çš„åŒæ—¶ï¼Œä¸­é—´çš„æ¡†ä¼šç”ŸæˆæŸ¥è¯¢è¯­å¥ï¼Œæœ€åç‚¹å‡»è¿è¡ŒæŒ‰é’®ï¼Œä¼šè¾“å‡ºæŸ¥è¯¢ç»“æœã€‚</p>
<p><img src="https://user-gold-cdn.xitu.io/2020/6/21/172d660d32ae1825?w=1442&h=642&f=png&s=61514" alt=""></p>
<p>å½“ä½ åé¢éœ€è¦è·å–æ›´å¤šå¤æ‚åµŒå¥—æ•°æ®çš„æ—¶å€™ï¼Œå¯ä»¥ç›´æ¥åœ¨è¿™ä¸ªç•Œé¢æ‰¾å’Œç‚¹å‡»ï¼Œè‡ªåŠ¨ç”ŸæˆæŸ¥è¯¢è¯­å¥å°±è¡Œäº†ã€‚</p>
<p>ç”±æˆ‘ä»¬è‡ªå·±å†™çš„æŸ¥è¯¢è¯­å¥ä¹ŸçŸ¥é“ï¼Œä¸Šé¢æˆ‘ä»¬ä»‹ç» GraphQL çš„æ—¶å€™è¯´çš„ä¸€ä¸ªç‰¹ç‚¹ï¼Œè·å–æ•°æ®ä¸å¤šä¸å°‘ï¼Œå³æˆ‘ä»¬å¯ä»¥é€‰æ‹©æƒ³è¦çš„æ•°æ®ï¼Œæ¯”å¦‚æˆ‘å°±æƒ³è·å–æ ‡é¢˜ä¸æƒ³è·å–ä½œè€…</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">export const query &#x3D; graphql&#96;</span><br><span class="line">  query &#123;</span><br><span class="line">    site &#123;</span><br><span class="line">      siteMetadata &#123;</span><br><span class="line">        title</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#96;</span><br></pre></td></tr></table></figure>

<h3 id="ä½¿ç”¨éé¡µé¢ç»„ä»¶æŸ¥è¯¢ï¼ˆé™æ€æŸ¥è¯¢ï¼‰"><a href="#ä½¿ç”¨éé¡µé¢ç»„ä»¶æŸ¥è¯¢ï¼ˆé™æ€æŸ¥è¯¢ï¼‰" class="headerlink" title="ä½¿ç”¨éé¡µé¢ç»„ä»¶æŸ¥è¯¢ï¼ˆé™æ€æŸ¥è¯¢ï¼‰"></a>ä½¿ç”¨éé¡µé¢ç»„ä»¶æŸ¥è¯¢ï¼ˆé™æ€æŸ¥è¯¢ï¼‰</h3><p>è¿™é‡Œæ³¨æ„ï¼Œæˆ‘ä»¬éœ€è¦åŒºåˆ†ä¸¤ç§æ–¹å¼çš„æŸ¥è¯¢ï¼Œä¸Šé¢çš„ä¾‹å­çš„æŸ¥è¯¢æ–¹å¼ï¼Œåªé€‚ç”¨äºé¡µé¢æŸ¥è¯¢ï¼Œå³æ˜¯åœ¨<code>src/pages</code>ä¸‹çš„è·¯ç”±ç•Œé¢ï¼Œå¦‚æœåœ¨éé¡µé¢ç»„ä»¶ä¸‹è¿›è¡Œ GraphQL æŸ¥è¯¢ï¼Œåˆ™ä¸èƒ½ç”¨ä¸Šé¢çš„æ–¹å¼ï¼Œåº”è¯¥ä½¿ç”¨ <code>StaticQuery</code> ç»„ä»¶æˆ–è€… <code>useStaticQuery hook</code>ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; é¡µé¢æŸ¥è¯¢</span><br><span class="line">export const query &#x3D; graphql&#96;</span><br><span class="line">    query&#123; ... &#125;</span><br><span class="line">&#96;</span><br></pre></td></tr></table></figure>

<p>æ¯”å¦‚æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªç»„ä»¶<code>src/components/header.js</code></p>
<ul>
<li>StaticQuery</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> &#123; graphql, StaticQuery &#125; <span class="keyword">from</span> <span class="string">'gatsby'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> Header = <span class="function"><span class="params">()</span> =&gt;</span> (</span><br><span class="line">  &lt;StaticQuery</span><br><span class="line">    query=&#123;graphql<span class="string">`</span></span><br><span class="line"><span class="string">      query &#123;</span></span><br><span class="line"><span class="string">        site &#123;</span></span><br><span class="line"><span class="string">          siteMetadata &#123;</span></span><br><span class="line"><span class="string">            author</span></span><br><span class="line"><span class="string">          &#125;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">      &#125;</span></span><br><span class="line"><span class="string">    `</span>&#125;</span><br><span class="line">    render=&#123;data =&gt; &#123;</span><br><span class="line">      <span class="keyword">const</span> &#123;</span><br><span class="line">        site: &#123; siteMetadata &#125;,</span><br><span class="line">      &#125; = data</span><br><span class="line">      <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>è¿™æ˜¯Headerç»„ä»¶ï¼Œä½œè€…æ˜¯ï¼š&#123;siteMetadata.author&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    &#125;&#125;</span><br><span class="line">  /&gt;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> Header</span><br></pre></td></tr></table></figure>

<p>æˆ–è€…ä½¿ç”¨ useStaticQuery æ–¹å¼</p>
<ul>
<li>useStaticQuery</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">import React from &quot;react&quot;</span><br><span class="line">import &#123; useStaticQuery, graphql &#125; from &quot;gatsby&quot;</span><br><span class="line"></span><br><span class="line">const Header &#x3D; () &#x3D;&gt; &#123;</span><br><span class="line">  const data &#x3D; useStaticQuery(</span><br><span class="line">    graphql&#96;</span><br><span class="line">      query &#123;</span><br><span class="line">        site &#123;</span><br><span class="line">          siteMetadata &#123;</span><br><span class="line">            author</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#96;</span><br><span class="line">  )</span><br><span class="line">  return &lt;div&gt;è¿™æ˜¯Headerç»„ä»¶ï¼Œä½œè€…æ˜¯ï¼š&#123;data.site.siteMetadata.author&#125;&lt;&#x2F;div&gt;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default Header</span><br></pre></td></tr></table></figure>

<p>ç„¶ååœ¨<code>src/pages/index.js</code>ä¸­å¼•å…¥ Header ç»„ä»¶</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> Layout <span class="keyword">from</span> <span class="string">'../components/layout'</span></span><br><span class="line"><span class="keyword">import</span> Header <span class="keyword">from</span> <span class="string">'../components/header'</span></span><br><span class="line"><span class="keyword">import</span> styles <span class="keyword">from</span> <span class="string">'../styles/index.module.css'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">Home</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;Layout&gt;</span><br><span class="line">      &lt;Header /&gt;</span><br><span class="line">      &lt;h1 className=&#123;styles.title&#125;&gt;Hello World&lt;<span class="regexp">/h1&gt;</span></span><br><span class="line"><span class="regexp">      &lt;div className=&#123;styles.text&#125;&gt;Test&lt;/</span>div&gt;</span><br><span class="line">    &lt;<span class="regexp">/Layout&gt;</span></span><br><span class="line"><span class="regexp">  )</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p>
<p><img src="https://user-gold-cdn.xitu.io/2020/6/21/172d6d9b2afff80c?w=705&h=203&f=png&s=8464" alt=""></p>
<h2 id="æ’ä»¶"><a href="#æ’ä»¶" class="headerlink" title="æ’ä»¶"></a>æ’ä»¶</h2><h3 id="gatsby-source-filesystem"><a href="#gatsby-source-filesystem" class="headerlink" title="gatsby-source-filesystem"></a>gatsby-source-filesystem</h3><p>è¿™ä¸ªæ˜¯ Gatsby çš„æ•°æ®æºæ’ä»¶ï¼Œå³é€šè¿‡è¯¥æ’ä»¶å°†å„æ–¹é¢çš„æ•°æ®è½¬æ¢ä¸ºæœ¬åœ°èƒ½å¤Ÿé€šè¿‡ GraphQL æå–çš„å†…å®¹ï¼Œç”¨äºè®¾ç½®é¡¹ç›®çš„æ–‡ä»¶ç³»ç»Ÿã€‚</p>
<ul>
<li>å®‰è£…æ’ä»¶</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save gatsby-source-filesystem</span><br></pre></td></tr></table></figure>

<ul>
<li>åœ¨ gatsby-config.js æ–‡ä»¶é…ç½®</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  siteMetadata: &#123;</span><br><span class="line">    title: <span class="string">`Title from siteMetadata`</span>,</span><br><span class="line">    author: <span class="string">'jacky'</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  plugins: [</span><br><span class="line">    &#123;</span><br><span class="line">      resolve: <span class="string">`gatsby-source-filesystem`</span>,</span><br><span class="line">      options: &#123;</span><br><span class="line">        name: <span class="string">`src`</span>, <span class="comment">// åç§°ï¼Œå¯ä»¥ç”¨æ¥è¿‡æ»¤</span></span><br><span class="line">        path: <span class="string">`<span class="subst">$&#123;__dirname&#125;</span>/src/`</span>, <span class="comment">// æ–‡ä»¶è·¯å¾„</span></span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  ],</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é‡å¯æœåŠ¡</p>
<p>æ‰“å¼€<code>http://localhost:8000/__graphql</code>ï¼Œå…³æ³¨<code>allFile</code>å’Œ<code>file</code>ä¸¤ä¸ªå¯é€‰é¡¹ã€‚</p>
<p>æˆ‘ä»¬ç‚¹å‡» <code>allFile</code>è¿™ä¸ªå¯é€‰é¡¹ï¼Œä¾æ¬¡é€‰æ‹©å¦‚ä¸‹å›¾</p>
<p><img src="https://user-gold-cdn.xitu.io/2020/6/21/172d74ca7b60229d?w=1542&h=928&f=png&s=113095" alt=""></p>
<p>è¿™é‡Œæˆ‘ä»¬è¦çŸ¥é“ï¼Œæˆ‘ä»¬è¦æŸ¥è¯¢çš„æ•°æ®åŸºæœ¬åœ¨<code>edges.node</code>ä¸‹ï¼ŒèŠ‚ç‚¹ <code>node</code>æ˜¯å›¾ï¼ˆgraphï¼‰ä¸­ä¸€ä¸ªå¯¹è±¡çš„ç‰¹æ®Šç§°å‘¼ï¼Œæ¯ä¸ª File èŠ‚ç‚¹éƒ½åŒ…å«äº†ä½ è¦æŸ¥è¯¢çš„å­—æ®µã€‚</p>
<p>æˆ‘ä»¬é€‰æ‹©çš„<code>id</code>,<code>relativePath</code>,<code>name</code>å­—æ®µéƒ½å¯¹åº”æˆ‘ä»¬ <code>src</code>ç›®å½•ä¸‹åˆ›å»ºçš„æ–‡ä»¶, è¿˜æœ‰å¾ˆå¤šå…¶ä»–å­—æ®µå¯é€‰æ‹©ï¼Œç”±æ­¤å¯çŸ¥æˆ‘ä»¬åˆ›å»ºçš„ 7 ä¸ªæ–‡ä»¶çš„å„ç§ä¿¡æ¯ã€‚</p>
<p>æ—¢ç„¶è¿™é‡Œèƒ½æŸ¥è¯¢å‡ºæ¥ï¼Œè¯´æ˜æˆ‘ä»¬ç»„ä»¶é‡Œé¢ä¹Ÿèƒ½æŸ¥å‡ºæ¥ç„¶åä½¿ç”¨æ•°æ®ï¼Œæ¯”å¦‚ä½ å¯ä»¥ä»ç»„ä»¶ä¸­æŸ¥è¯¢å‡ºæ¥åšä¸ªæ–‡ä»¶åˆ—è¡¨ã€‚</p>
<p>è¿™ä¸ªç›¸æ¯”ä¼ ç»Ÿçš„ React é¡¹ç›®å°±æŒºå‰å®³äº†ï¼Œä¸ç”¨åšä»€ä¹ˆå¤æ‚çš„å·¥ä½œï¼Œå°±èƒ½è½»æ¾æ‹¿ä¸‹è¿™äº›æ•°æ®ã€‚Gatsby æ¯”è¾ƒå¼ºå¤§çš„å°±æ˜¯å®ƒçš„ç”Ÿæ€äº†ï¼Œå¾ˆå¤šæ’ä»¶éƒ½é…å¥½äº†ï¼Œæ›´å¤šæ’ä»¶å¯ä»¥çœ‹å®˜ç½‘çš„æ’ä»¶åº“ä»‹ç»ï¼š<a href="https://www.gatsbyjs.org/plugins/" target="_blank" rel="noopener">https://www.gatsbyjs.org/plugins/</a></p>
<h3 id="gatsby-transformer-remark"><a href="#gatsby-transformer-remark" class="headerlink" title="gatsby-transformer-remark"></a>gatsby-transformer-remark</h3><p>è¿™ä¸ªæ˜¯æ•°æ®è½¬æ¢æ’ä»¶ï¼Œæˆ‘ä»¬ç”¨ Gatsby åšä¸ªäººåšå®¢çš„è¯ï¼Œå®ƒå¯å¿…ä¸å¯å°‘ã€‚ç°åœ¨æˆ‘ä»¬ç¨‹åºå‘˜å†™åšå®¢åŸºæœ¬æ˜¯ç”¨ markdown è¯­æ³•äº†ï¼Œåšä¸€ä¸ªåšå®¢çš„è¯ï¼Œä¸å¯ç¼ºå°‘çš„å°±æ˜¯å¯¹ markdown è¯­æ³•çš„è§£æã€‚</p>
<ul>
<li>å®‰è£…æ’ä»¶</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save gatsby-transformer-remark</span><br></pre></td></tr></table></figure>

<ul>
<li>åœ¨ gatsby-config.js æ–‡ä»¶é…ç½®</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="comment">/* Your site config here */</span></span><br><span class="line">  siteMetadata: &#123;</span><br><span class="line">    title: <span class="string">`Title from siteMetadata`</span>,</span><br><span class="line">    author: <span class="string">'jacky'</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  plugins: [</span><br><span class="line">    &#123;</span><br><span class="line">      resolve: <span class="string">`gatsby-source-filesystem`</span>,</span><br><span class="line">      options: &#123;</span><br><span class="line">        name: <span class="string">`src`</span>, <span class="comment">// åç§°ï¼Œå¯ä»¥ç”¨æ¥è¿‡æ»¤</span></span><br><span class="line">        path: <span class="string">`<span class="subst">$&#123;__dirname&#125;</span>/src/`</span>, <span class="comment">// æ–‡ä»¶è·¯å¾„</span></span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">`gatsby-transformer-remark`</span>,</span><br><span class="line">  ],</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é‡å¯æœåŠ¡</p>
<p>è¿™ä¸ªæ’ä»¶æ·»åŠ äº† allMarkdownRemark å’Œ markdownRemark ä¸¤ä¸ªæ•°æ®å­—æ®µ</p>
<p><img src="https://user-gold-cdn.xitu.io/2020/6/21/172d7761605cba2b?w=205&h=243&f=png&s=7538" alt=""></p>
<ul>
<li>æ–°å»º md æ–‡ä»¶</li>
</ul>
<p>åœ¨<code>src</code>ä¸‹åˆ›å»º<code>_posts</code>ç›®å½•ï¼Œæ·»åŠ ä¸€ä¸ª<code>first-blog.md</code>æ–‡ä»¶</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: &quot;æˆ‘çš„ç¬¬ä¸€ç¯‡åšå®¢&quot;</span><br><span class="line">date: &quot;2020-06-21&quot;</span><br><span class="line">tags: &quot;React&quot;</span><br><span class="line">categories: &quot;Reactç³»åˆ—&quot;</span><br><span class="line">---</span><br><span class="line"></span><br><span class="line">## è¿™æ˜¯ç¬¬ä¸€ç¯‡åšå®¢çš„æ ‡é¢˜</span><br><span class="line"></span><br><span class="line">first blog çš„å†…å®¹ 1</span><br></pre></td></tr></table></figure>

<p>å¦‚æœåšå®¢ä¸æ˜¯è‡ªå·±æ­å»ºçš„ï¼Œè€Œæ˜¯ç›´æ¥ä¸ŠæŸå¹³å°å†™çš„è¯ï¼Œå¯¹ä¸Šé¢è¿™æ®µè¯­æ³•å°±å¯èƒ½ä¸å¤ªäº†è§£ï¼Œåœ¨ md æ–‡ä»¶å¼€å¤´çš„ <code>---</code> åŒ…è£¹çš„æ˜¯ frontmatterï¼ˆå‰è¨€ï¼‰ï¼Œç„¶ååœ¨é‡Œé¢å¯ä»¥æ·»åŠ æ–‡ç« çš„å„ç§å…³é”®è¯ä¿¡æ¯ã€‚</p>
<p>ç„¶åæˆ‘ä»¬å°±å¯ä»¥åœ¨<code>http://localhost:8000/__graphql</code>æŸ¥è¯¢åˆ°æˆ‘ä»¬å†™çš„ md æ–‡ä»¶çš„è¯¦æƒ…ä¿¡æ¯äº†</p>
<p><img src="https://user-gold-cdn.xitu.io/2020/6/21/172d7823d4e7db7f?w=1703&h=499&f=png&s=61510" alt=""></p>
<p>æˆ‘ä»¬ç¨å¾®å†æ”¹åŠ¨ï¼Œåˆ›å»ºå¤šä¸¤ä¸ª md æ–‡ä»¶</p>
<p><code>second-blog.md</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: &quot;æˆ‘çš„ç¬¬äºŒç¯‡åšå®¢&quot;</span><br><span class="line">date: &quot;2020-06-22&quot;</span><br><span class="line">tags: &quot;Vue&quot;</span><br><span class="line">categories: &quot;Vueç³»åˆ—&quot;</span><br><span class="line">---</span><br><span class="line"></span><br><span class="line">## è¿™æ˜¯ç¬¬äºŒç¯‡åšå®¢çš„æ ‡é¢˜</span><br><span class="line"></span><br><span class="line">second blog çš„å†…å®¹ 2</span><br></pre></td></tr></table></figure>

<p><code>third-blog.md</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: &quot;æˆ‘çš„ç¬¬ä¸‰ç¯‡åšå®¢&quot;</span><br><span class="line">date: &quot;2020-06-23&quot;</span><br><span class="line">tags: &quot;React&quot;</span><br><span class="line">categories: &quot;Reactç³»åˆ—&quot;</span><br><span class="line">---</span><br><span class="line"></span><br><span class="line">## è¿™æ˜¯ç¬¬ä¸‰ç¯‡åšå®¢çš„æ ‡é¢˜</span><br><span class="line"></span><br><span class="line">third blog çš„å†…å®¹ 3</span><br></pre></td></tr></table></figure>

<p>å†æ¬¡æŸ¥è¯¢æ•°æ®ï¼ŒæŠŠæˆ‘ä»¬åˆšåˆšæ·»åŠ çš„æ–‡ç« æ•°æ®éƒ½æ‹¿ä¸‹æ¥äº†</p>
<p><img src="https://user-gold-cdn.xitu.io/2020/6/21/172d78dc41c94349?w=599&h=687&f=png&s=41548" alt=""></p>
<p>æ—¢ç„¶ GraphQL èƒ½æ‹¿åˆ°æ•°æ®ï¼Œè¯´æ˜æˆ‘ä»¬ä¹Ÿèƒ½æŠŠå®ƒæ”¾åˆ°é¡µé¢å±•ç¤ºå‡ºæ¥ã€‚</p>
<p>æ–°å»ºæ–‡ä»¶<code>src/pages/blog.js</code>,æˆ‘ä»¬åšä¸€ä¸ªåšå®¢ç›®å½•æ±‡æ€»ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> Layout <span class="keyword">from</span> <span class="string">'../components/layout'</span></span><br><span class="line"><span class="keyword">import</span> &#123; graphql &#125; <span class="keyword">from</span> <span class="string">'gatsby'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> Blog = <span class="function">(<span class="params">&#123; data &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;Layout&gt;</span><br><span class="line">      &lt;h1&gt;åšå®¢ç›®å½•&lt;<span class="regexp">/h1&gt;</span></span><br><span class="line"><span class="regexp">      &lt;div&gt;</span></span><br><span class="line"><span class="regexp">        &#123;data.allMarkdownRemark.edges.map((&#123; node &#125;) =&gt; &#123;</span></span><br><span class="line"><span class="regexp">          return (</span></span><br><span class="line"><span class="regexp">            &lt;div</span></span><br><span class="line"><span class="regexp">              key=&#123;node.id&#125;</span></span><br><span class="line"><span class="regexp">              style=&#123;&#123;</span></span><br><span class="line"><span class="regexp">                border: '1px solid #000',</span></span><br><span class="line"><span class="regexp">                margin: '10px',</span></span><br><span class="line"><span class="regexp">                padding: '10px',</span></span><br><span class="line"><span class="regexp">              &#125;&#125;</span></span><br><span class="line"><span class="regexp">            &gt;</span></span><br><span class="line"><span class="regexp">              &lt;h2&gt;&#123;node.frontmatter.title&#125;&lt;/</span>h2&gt;</span><br><span class="line">              &lt;div&gt;åˆ†ç±»&#123;node.frontmatter.categories&#125;&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">              &lt;div&gt;æ ‡ç­¾ï¼š&#123;node.frontmatter.tags&#125;&lt;/</span>div&gt;</span><br><span class="line">              &lt;div&gt;å‘å¸ƒæ—¶é—´ï¼š&#123;node.frontmatter.date&#125;&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">            &lt;/</span>div&gt;</span><br><span class="line">          )</span><br><span class="line">        &#125;)&#125;</span><br><span class="line">      &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>Layout&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> Blog</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> query = graphql<span class="string">`</span></span><br><span class="line"><span class="string">  query &#123;</span></span><br><span class="line"><span class="string">    allMarkdownRemark &#123;</span></span><br><span class="line"><span class="string">      edges &#123;</span></span><br><span class="line"><span class="string">        node &#123;</span></span><br><span class="line"><span class="string">          id</span></span><br><span class="line"><span class="string">          frontmatter &#123;</span></span><br><span class="line"><span class="string">            tags</span></span><br><span class="line"><span class="string">            title</span></span><br><span class="line"><span class="string">            date</span></span><br><span class="line"><span class="string">            categories</span></span><br><span class="line"><span class="string">          &#125;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">      &#125;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">`</span></span><br></pre></td></tr></table></figure>

<p>æ‰“å¼€<code>http://localhost:8000/blog</code>ï¼Œåšå®¢ç›®å½•å°±å±•ç¤ºå‡ºæ¥äº†ï¼š</p>
<p><img src="https://user-gold-cdn.xitu.io/2020/6/23/172e1b12d01e3ba3?w=722&h=601&f=png&s=36586" alt=""></p>
<p>ä½†æœ‰ä¸ªé—®é¢˜ï¼Œæ¯ç¯‡åšå®¢çš„ä¿¡æ¯ç¡®å®èƒ½æ‹¿å‡ºæ¥ï¼Œä½†æ˜¯æˆ‘ä»¬è¦é“¾æ¥å•Šï¼Œå³æ˜¯ç‚¹å‡»åšå®¢æ ‡é¢˜ï¼Œè¿›å…¥åšå®¢è¯¦æƒ…é¡µé¢ï¼Œå³æ˜¯æ–‡ç« è·¯å¾„ï¼Œæ‰€ä»¥æ¥ä¸‹æ¥æˆ‘ä»¬å°†åˆ›å»ºé¡µé¢ã€‚</p>
<h2 id="åˆ©ç”¨æ•°æ®åˆ›å»ºé¡µé¢"><a href="#åˆ©ç”¨æ•°æ®åˆ›å»ºé¡µé¢" class="headerlink" title="åˆ©ç”¨æ•°æ®åˆ›å»ºé¡µé¢"></a>åˆ©ç”¨æ•°æ®åˆ›å»ºé¡µé¢</h2><h3 id="gatsby-node-js-1"><a href="#gatsby-node-js-1" class="headerlink" title="gatsby-node.js"></a>gatsby-node.js</h3><p>è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±è¦å»ºç«‹<code>gatsby-node.js</code>æ–‡ä»¶äº†ï¼Œè¿™ä¸ªé…ç½®æ–‡ä»¶é‡Œé¢çš„ä»£ç æ˜¯ node å±‚ç›¸å…³çš„ã€‚</p>
<p>å‰é¢æˆ‘ä»¬è¯´è¿‡ <code>src/pages</code>ç›®å½•ä¸‹çš„æ–‡ä»¶ä¼šå…¨éƒ¨æ¸²æŸ“æˆè·¯ç”±ï¼Œä½†å¦‚æœæˆ‘ä»¬åšå®¢æ–‡ç« ä¸€ç¯‡ç¯‡çš„è¯¦æƒ…é¡µè¦æˆ‘ä»¬è‡ªå·±åˆ›å»ºä¸€ä¸ª js æ–‡ä»¶ï¼Œè¿™è‚¯å®šä¸åˆç†äº†ã€‚</p>
<p>æˆ‘ä»¬ä¼šç”¨åˆ°ä¸¤ä¸ª APIï¼š</p>
<h4 id="onCreateNode"><a href="#onCreateNode" class="headerlink" title="onCreateNode"></a>onCreateNode</h4><p>æ¯å½“åˆ›å»ºæ–°èŠ‚ç‚¹ï¼ˆæˆ–æ›´æ–°ï¼‰æ—¶ï¼ŒGatsby éƒ½ä¼šè°ƒç”¨ onCreateNode å‡½æ•°ã€‚</p>
<p>å‘<code>gatsby-node.js</code>å†™å…¥ä»£ç ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">exports.onCreateNode = <span class="function">(<span class="params">&#123; node &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(node.internal.type)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é‡å¯æœåŠ¡ï¼ŒæŸ¥çœ‹ç»ˆç«¯ï¼Œä½ ä¼šå‘ç°æ‰“å°å‡ºå¾ˆå¤šåˆ›å»ºçš„èŠ‚ç‚¹ï¼š<code>SitePage</code>, <code>SitePlugin</code>, <code>Site</code>, <code>SiteBuildMetadata</code>, <code>Directory</code>, <code>File</code>, <code>MarkdownRemark</code>,æˆ‘ä»¬å…³æ³¨çš„åªæœ‰<code>MarkdownRemark</code>ï¼Œäºæ˜¯ä¿®æ”¹å‡½æ•°ä½¿å…¶ä»…ä»…è®°å½• MarkdownRemark èŠ‚ç‚¹ï¼›æˆ‘ä»¬ä½¿ç”¨æ¯ä¸€ä¸ª md æ–‡ä»¶çš„åç§°æ¥ä½œä¸ºè·¯å¾„ï¼Œå¦‚è¦è·å–æ–‡ä»¶åç§°ï¼Œä½ éœ€è¦éå†ä¸€éå®ƒçš„çˆ¶èŠ‚ç‚¹ <code>File</code>ï¼Œ<code>File</code>èŠ‚ç‚¹åŒ…å«äº†æˆ‘ä»¬éœ€è¦çš„æ–‡ä»¶æ•°æ®ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">exports.onCreateNode = <span class="function">(<span class="params">&#123; node, getNode &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (node.internal.type === <span class="string">`MarkdownRemark`</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> fileNode = getNode(node.parent)</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`\n`</span>, fileNode.relativePath)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é‡å¯æœåŠ¡ï¼ŒæŸ¥çœ‹ç»ˆç«¯ï¼Œæ‰“å°å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">_posts&#x2F;first-blog.md</span><br><span class="line"></span><br><span class="line">_posts&#x2F;second-blog.md</span><br><span class="line"></span><br><span class="line">_posts&#x2F;third-blog.md</span><br></pre></td></tr></table></figure>

<p>ç›¸å¯¹è·¯å¾„å‡ºæ¥ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬è¦åˆ›å»ºè·¯å¾„ï¼Œå¯ä»¥ä½¿ç”¨<code>gatsby-source-filesystem</code>æ’ä»¶å¸¦çš„åˆ›å»ºè·¯å¾„çš„å‡½æ•°</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; createFilePath &#125; = <span class="built_in">require</span>(<span class="string">`gatsby-source-filesystem`</span>)</span><br><span class="line"></span><br><span class="line">exports.onCreateNode = <span class="function">(<span class="params">&#123; node, getNode &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (node.internal.type === <span class="string">`MarkdownRemark`</span>) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(createFilePath(&#123; node, getNode, <span class="attr">basePath</span>: <span class="string">`pages`</span> &#125;))</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é‡å¯æœåŠ¡ï¼Œæ‰“å°ç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;_posts&#x2F;first-blog&#x2F;</span><br><span class="line">&#x2F;_posts&#x2F;second-blog&#x2F;</span><br><span class="line">&#x2F;_posts&#x2F;third-blog&#x2F;</span><br></pre></td></tr></table></figure>

<p>æ¥ä¸‹æ¥ï¼Œå‘ API ä¼ é€’ä¸€ä¸ªå‡½æ•°<code>createNodeField</code>ï¼Œè¯¥å‡½æ•°å…è®¸æˆ‘ä»¬åœ¨å…¶ä»–æ’ä»¶åˆ›å»ºçš„èŠ‚ç‚¹é‡Œåˆ›å»ºå…¶ä»–å­—æ®µã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">exports.onCreateNode = <span class="function">(<span class="params">&#123; node, getNode, actions &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; createNodeField &#125; = actions</span><br><span class="line">  <span class="keyword">if</span> (node.internal.type === <span class="string">`MarkdownRemark`</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> slug = createFilePath(&#123; node, getNode, <span class="attr">basePath</span>: <span class="string">`pages`</span> &#125;)</span><br><span class="line">    createNodeField(&#123;</span><br><span class="line">      node,</span><br><span class="line">      name: <span class="string">`slug`</span>,</span><br><span class="line">      value: slug, <span class="comment">// é€šå¸¸ç”¨ slug ä¸€è¯ä»£è¡¨è·¯å¾„</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é‡å¯æœåŠ¡ï¼Œæ‰“å¼€<code>http://localhost:8000/__graphql</code>ï¼Œå°±èƒ½æŸ¥è¯¢åˆ°è·¯å¾„äº†</p>
<p><img src="https://user-gold-cdn.xitu.io/2020/6/23/172e1ce4c0a61cae?w=1097&h=448&f=png&s=28484" alt=""></p>
<h4 id="createPages"><a href="#createPages" class="headerlink" title="createPages"></a>createPages</h4><p>createPages è¿™ä¸ª API ç”¨äºæ·»åŠ é¡µé¢ã€‚åœ¨åˆ›å»ºé¡µé¢ä¹‹å‰ï¼Œé¦–å…ˆè¦æœ‰é¡µé¢æ¨¡æ¿ï¼Œè¿™æ ·åˆ›å»ºé¡µé¢å°±èƒ½æŒ‡å®šæ‰€ä½¿ç”¨çš„æ¨¡æ¿äº†ã€‚</p>
<p>æ–°å»ºæ–‡ä»¶<code>src/templates/blog-post.js</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> Layout <span class="keyword">from</span> <span class="string">'../components/layout'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> () =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;Layout&gt;</span><br><span class="line">      &lt;div&gt;Hello blog post&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>Layout&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç„¶åæ›´æ”¹ <code>gatsby-node.js</code>çš„<code>createPages</code>å‡½æ•°ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">`path`</span>)</span><br><span class="line"></span><br><span class="line">exports.createPages = <span class="keyword">async</span> (&#123; graphql, actions &#125;) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> result = <span class="keyword">await</span> graphql(<span class="string">`</span></span><br><span class="line"><span class="string">    query &#123;</span></span><br><span class="line"><span class="string">      allMarkdownRemark &#123;</span></span><br><span class="line"><span class="string">        edges &#123;</span></span><br><span class="line"><span class="string">          node &#123;</span></span><br><span class="line"><span class="string">            fields &#123;</span></span><br><span class="line"><span class="string">              slug</span></span><br><span class="line"><span class="string">            &#125;</span></span><br><span class="line"><span class="string">          &#125;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">      &#125;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">  `</span>)</span><br><span class="line">  result.data.allMarkdownRemark.edges.forEach(<span class="function">(<span class="params">&#123; node &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">    createPage(&#123;</span><br><span class="line">      path: node.fields.slug,</span><br><span class="line">      component: path.resolve(<span class="string">`./src/templates/blog-post.js`</span>),</span><br><span class="line">      context: &#123;</span><br><span class="line">        slug: node.fields.slug,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é‡å¯æœåŠ¡ï¼Œéšä¾¿è¾“å…¥ä¸€ä¸ªè·¯å¾„ï¼Œè·³è½¬åˆ°é»˜è®¤çš„ 404 é¡µé¢ï¼Œå°±ä¼šçœ‹åˆ°è‡ªåŠ¨ç”Ÿæˆä¸‰ç¯‡åšå®¢çš„è·¯å¾„äº†ï¼Œç‚¹å‡»ä»»ä¸€ç¯‡ï¼Œè·³è½¬çš„æ˜¯æˆ‘ä»¬åˆšåˆ›å»ºçš„ <code>blog-post.js</code>ç»„ä»¶ã€‚</p>
<p><img src="https://user-gold-cdn.xitu.io/2020/6/24/172e3bb13a244d4c?w=1230&h=548&f=png&s=51476" alt=""></p>
<p>æˆ‘ä»¬è¦çš„æ˜¯æ˜¾ç¤ºåšå®¢å†…å®¹ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å¯¹æ¨¡æ¿æ–‡ä»¶å†è¿›è¡Œæ”¹é€ ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> &#123; graphql &#125; <span class="keyword">from</span> <span class="string">'gatsby'</span></span><br><span class="line"><span class="keyword">import</span> Layout <span class="keyword">from</span> <span class="string">'../components/layout'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> (&#123; data &#125;) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> post = data.markdownRemark</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;Layout&gt;</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;h1&gt;&#123;post.frontmatter.title&#125;&lt;<span class="regexp">/h1&gt;</span></span><br><span class="line"><span class="regexp">        &lt;div dangerouslySetInnerHTML=&#123;&#123; __html: post.html &#125;&#125; /</span>&gt;</span><br><span class="line">      &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>Layout&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> query = graphql<span class="string">`</span></span><br><span class="line"><span class="string">  query($slug: String!) &#123;</span></span><br><span class="line"><span class="string">    markdownRemark(fields: &#123; slug: &#123; eq: $slug &#125; &#125;) &#123;</span></span><br><span class="line"><span class="string">      html</span></span><br><span class="line"><span class="string">      frontmatter &#123;</span></span><br><span class="line"><span class="string">        title</span></span><br><span class="line"><span class="string">      &#125;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">`</span></span><br></pre></td></tr></table></figure>

<p>ä¸Šé¢æ˜¯åŠ¨æ€å˜é‡æŸ¥è¯¢çš„å†™æ³•ï¼ŒGraphQL çš„è¯­æ³•ï¼Œå¯ä»¥çœ‹çœ‹ (<a href="https://graphql.org/learn/queries/#variables" target="_blank" rel="noopener">https://graphql.org/learn/queries/#variables</a>)</p>
<p>å®Œæˆä¹‹åï¼Œæ¯”å¦‚æˆ‘ç‚¹å‡»ç¬¬äºŒç¯‡åšå®¢ï¼Œå°±å¯ä»¥æ­£ç¡®è¿›å…¥é¡µé¢å¹¶æ˜¾ç¤ºå†…å®¹äº†</p>
<p><img src="https://user-gold-cdn.xitu.io/2020/6/24/172e3c8f759609dd?w=757&h=255&f=png&s=18207" alt=""></p>
<p>ä¸ºäº†æ›´å®Œå–„ï¼Œæˆ‘ä»¬ç»™ blog ç›®å½•é¡µé¢æ·»åŠ å¯è·³è½¬çš„é“¾æ¥ï¼ŒåŠ å…¥ <code>slug</code>æŸ¥è¯¢å­—æ®µ, å¢åŠ  <code>Link</code>è·³è½¬ï¼Œè¿™ä¸ªç”¨æ³•ä¸ React è·¯ç”±çš„ <code>Link</code>å·®ä¸å¤šä¸€è‡´ï¼Œæ¶‰åŠä¸æ·±çš„æƒ…å†µä¸‹æš‚ä¸”å½“æˆç›¸åŒç”¨æ³•ã€‚</p>
<p><code>src/pages/blog.js</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> Layout <span class="keyword">from</span> <span class="string">'../components/layout'</span></span><br><span class="line"><span class="keyword">import</span> &#123; graphql, Link &#125; <span class="keyword">from</span> <span class="string">'gatsby'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> Blog = <span class="function">(<span class="params">&#123; data &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;Layout&gt;</span><br><span class="line">      &lt;h1&gt;åšå®¢ç›®å½•&lt;<span class="regexp">/h1&gt;</span></span><br><span class="line"><span class="regexp">      &lt;div&gt;</span></span><br><span class="line"><span class="regexp">        &#123;data.allMarkdownRemark.edges.map((&#123; node &#125;) =&gt; &#123;</span></span><br><span class="line"><span class="regexp">          return (</span></span><br><span class="line"><span class="regexp">            &lt;Link to=&#123;node.fields.slug&#125; key=&#123;node.id&#125;&gt;</span></span><br><span class="line"><span class="regexp">              &lt;div</span></span><br><span class="line"><span class="regexp">                style=&#123;&#123;</span></span><br><span class="line"><span class="regexp">                  border: '1px solid #000',</span></span><br><span class="line"><span class="regexp">                  margin: '10px',</span></span><br><span class="line"><span class="regexp">                  padding: '10px',</span></span><br><span class="line"><span class="regexp">                &#125;&#125;</span></span><br><span class="line"><span class="regexp">              &gt;</span></span><br><span class="line"><span class="regexp">                &lt;h2&gt;&#123;node.frontmatter.title&#125;&lt;/</span>h2&gt;</span><br><span class="line">                &lt;div&gt;åˆ†ç±»&#123;node.frontmatter.categories&#125;&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">                &lt;div&gt;æ ‡ç­¾ï¼š&#123;node.frontmatter.tags&#125;&lt;/</span>div&gt;</span><br><span class="line">                &lt;div&gt;å‘å¸ƒæ—¶é—´ï¼š&#123;node.frontmatter.date&#125;&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">              &lt;/</span>div&gt;</span><br><span class="line">            &lt;<span class="regexp">/Link&gt;</span></span><br><span class="line"><span class="regexp">          )</span></span><br><span class="line"><span class="regexp">        &#125;)&#125;</span></span><br><span class="line"><span class="regexp">      &lt;/</span>div&gt;</span><br><span class="line">    &lt;<span class="regexp">/Layout&gt;</span></span><br><span class="line"><span class="regexp">  )</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">export default Blog</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">export const query = graphql`</span></span><br><span class="line"><span class="regexp">  query &#123;</span></span><br><span class="line"><span class="regexp">    allMarkdownRemark &#123;</span></span><br><span class="line"><span class="regexp">      edges &#123;</span></span><br><span class="line"><span class="regexp">        node &#123;</span></span><br><span class="line"><span class="regexp">          id</span></span><br><span class="line"><span class="regexp">          frontmatter &#123;</span></span><br><span class="line"><span class="regexp">            tags</span></span><br><span class="line"><span class="regexp">            title</span></span><br><span class="line"><span class="regexp">            date</span></span><br><span class="line"><span class="regexp">            categories</span></span><br><span class="line"><span class="regexp">          &#125;</span></span><br><span class="line"><span class="regexp">          fields &#123;</span></span><br><span class="line"><span class="regexp">            slug</span></span><br><span class="line"><span class="regexp">          &#125;</span></span><br><span class="line"><span class="regexp">        &#125;</span></span><br><span class="line"><span class="regexp">      &#125;</span></span><br><span class="line"><span class="regexp">    &#125;</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">`</span></span><br></pre></td></tr></table></figure>

<p><img src="https://user-gold-cdn.xitu.io/2020/6/24/172e3ce7be50852c?w=722&h=596&f=png&s=36793" alt=""></p>
<p>ç°åœ¨ç‚¹å‡»åšå®¢ï¼Œå°±èƒ½è·³è½¬åˆ°å¯¹åº”é¡µé¢äº†ï¼Œè™½ç„¶æ²¡åšæ ·å¼é¡µé¢æ¯”è¾ƒä¸‘ï¼Œä½†åªè¦åœ¨<code>src/_posts</code>ç›®å½•æ–°å»º md æ–‡ä»¶ï¼Œç„¶åè¿™é‡Œå°±èƒ½è·Ÿç€è‡ªåŠ¨åˆ·æ–°ï¼Œç®—æ˜¯ä¸€ä¸ªè¶…ç®€æ˜“çš„åšå®¢äº†ã€‚</p>
<h2 id="æ‰“åŒ…ä¸Šçº¿"><a href="#æ‰“åŒ…ä¸Šçº¿" class="headerlink" title="æ‰“åŒ…ä¸Šçº¿"></a>æ‰“åŒ…ä¸Šçº¿</h2><p>åœæ­¢å¼€å‘æœåŠ¡ï¼Œæ„å»ºç”Ÿäº§ç‰ˆæœ¬ï¼ŒæŠŠé™æ€æ–‡ä»¶è¾“å‡ºåˆ° public ç›®å½•ä¸­</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gatsby build</span><br></pre></td></tr></table></figure>

<p>åœ¨æœ¬åœ°æŸ¥çœ‹ç”Ÿäº§ç¯å¢ƒç‰ˆæœ¬ï¼Œè¿è¡Œï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gatsby serve</span><br></pre></td></tr></table></figure>

<p>æ¥ä¸‹æ¥ï¼Œå°±å¯ä»¥åœ¨<code>localhost:9000</code>è®¿é—®æˆ‘ä»¬åˆšæ‰åšçš„ç½‘ç«™äº†</p>
<p>æœ¬é¡¹ç›®çš„ <a href="https://github.com/Jacky-Summer/gatsby-blog-demo" target="_blank" rel="noopener">github åœ°å€</a></p>
<p>è‡³æ­¤ï¼Œæˆ‘ä»¬æ•™ç¨‹å°±ä»‹ç»åˆ°è¿™é‡Œäº†ã€‚</p>
<br>

<ul>
<li>psï¼š <a href="https://github.com/Jacky-Summer/personal-blog" target="_blank" rel="noopener">ä¸ªäººæŠ€æœ¯åšæ–‡ Github ä»“åº“</a>ï¼Œè§‰å¾—ä¸é”™çš„è¯æ¬¢è¿ starï¼Œç»™æˆ‘ä¸€ç‚¹é¼“åŠ±ç»§ç»­å†™ä½œå§~</li>
</ul>

    </div>

    
    
    
     
      <div>
        <div>
    
        <div style="text-align:center;color: #ccc;font-size:24px;">-------------æœ¬æ–‡ç»“æŸ<i class="fa fa-paw"></i>æ„Ÿè°¢æ‚¨çš„é˜…è¯»-------------</div>
    
</div>
      </div>
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/React/" rel="tag"><i class="fa fa-tag"></i> React</a>
              <a href="/tags/Gatsby/" rel="tag"><i class="fa fa-tag"></i> Gatsby</a>
              <a href="/tags/GraphQL/" rel="tag"><i class="fa fa-tag"></i> GraphQL</a>
              <a href="/tags/SSR/" rel="tag"><i class="fa fa-tag"></i> SSR</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2020/07/05/%E5%AE%8C%E5%85%A8%E6%90%9E%E6%87%82-BFC/" rel="prev" title="å®Œå…¨ææ‡‚ BFC">
      <i class="fa fa-chevron-left"></i> å®Œå…¨ææ‡‚ BFC
    </a></div>
      <div class="post-nav-item">
    <a href="/2020/07/26/%E5%B0%81%E8%A3%85-axios-%E6%8B%A6%E6%88%AA%E5%99%A8%E5%AE%9E%E7%8E%B0%E7%94%A8%E6%88%B7%E6%97%A0%E6%84%9F%E5%88%B7%E6%96%B0-access-token/" rel="next" title="å°è£… axios æ‹¦æˆªå™¨å®ç°ç”¨æˆ·æ— æ„Ÿåˆ·æ–° access_token">
      å°è£… axios æ‹¦æˆªå™¨å®ç°ç”¨æˆ·æ— æ„Ÿåˆ·æ–° access_token <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  

  </div>


          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Gatsby-ä»‹ç»"><span class="nav-number">1.</span> <span class="nav-text">Gatsby ä»‹ç»</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#ä»€ä¹ˆæ˜¯-Gatsby"><span class="nav-number">1.1.</span> <span class="nav-text">ä»€ä¹ˆæ˜¯ Gatsby</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ä¸ºä»€ä¹ˆé€‰-Gatsby"><span class="nav-number">1.2.</span> <span class="nav-text">ä¸ºä»€ä¹ˆé€‰ Gatsby</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#GraphQL-ä»‹ç»"><span class="nav-number">2.</span> <span class="nav-text">GraphQL ä»‹ç»</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#æ­å»ºé¡¹ç›®"><span class="nav-number">3.</span> <span class="nav-text">æ­å»ºé¡¹ç›®</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#å¼€å§‹"><span class="nav-number">3.1.</span> <span class="nav-text">å¼€å§‹</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#å¸¸ç”¨å‘½ä»¤"><span class="nav-number">3.2.</span> <span class="nav-text">å¸¸ç”¨å‘½ä»¤</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#GraphiQL"><span class="nav-number">3.3.</span> <span class="nav-text">GraphiQL</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#å¯èƒ½å‡ºç°çš„è­¦å‘Š"><span class="nav-number">3.4.</span> <span class="nav-text">å¯èƒ½å‡ºç°çš„è­¦å‘Š</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#é¡¹ç›®ç»“æ„"><span class="nav-number">3.5.</span> <span class="nav-text">é¡¹ç›®ç»“æ„</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Gatsby-é…ç½®æ–‡ä»¶"><span class="nav-number">4.</span> <span class="nav-text">Gatsby é…ç½®æ–‡ä»¶</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#gatsby-config-js"><span class="nav-number">4.1.</span> <span class="nav-text">gatsby-config.js</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#gatsby-node-js"><span class="nav-number">4.2.</span> <span class="nav-text">gatsby-node.js</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#gatsby-browser-js"><span class="nav-number">4.3.</span> <span class="nav-text">gatsby-browser.js</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#gatsby-ssr-js"><span class="nav-number">4.4.</span> <span class="nav-text">gatsby-ssr.js</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#åˆ›å»ºé¡µé¢"><span class="nav-number">5.</span> <span class="nav-text">åˆ›å»ºé¡µé¢</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#è·¯ç”±é¡µ"><span class="nav-number">5.1.</span> <span class="nav-text">è·¯ç”±é¡µ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#404-é¡µé¢"><span class="nav-number">5.2.</span> <span class="nav-text">404 é¡µé¢</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#åˆ›å»ºå¸ƒå±€ç»„ä»¶"><span class="nav-number">5.3.</span> <span class="nav-text">åˆ›å»ºå¸ƒå±€ç»„ä»¶</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#è®¾ç½®-CSS-æ ·å¼"><span class="nav-number">6.</span> <span class="nav-text">è®¾ç½® CSS æ ·å¼</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#ä½¿ç”¨å…¨å±€æ ·å¼"><span class="nav-number">6.1.</span> <span class="nav-text">ä½¿ç”¨å…¨å±€æ ·å¼</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ä½¿ç”¨-CSS-Module-ä¸ºç»„ä»¶è®¾ç½®æ ·å¼"><span class="nav-number">6.2.</span> <span class="nav-text">ä½¿ç”¨ CSS Module ä¸ºç»„ä»¶è®¾ç½®æ ·å¼</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#å…¶ä»–å¤„ç†-CSS-çš„æ–¹å¼"><span class="nav-number">6.3.</span> <span class="nav-text">å…¶ä»–å¤„ç† CSS çš„æ–¹å¼</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#è·å–-Gatsby-ä¸­çš„æ•°æ®"><span class="nav-number">7.</span> <span class="nav-text">è·å– Gatsby ä¸­çš„æ•°æ®</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#ä½¿ç”¨é¡µé¢æŸ¥è¯¢"><span class="nav-number">7.1.</span> <span class="nav-text">ä½¿ç”¨é¡µé¢æŸ¥è¯¢</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ä½¿ç”¨éé¡µé¢ç»„ä»¶æŸ¥è¯¢ï¼ˆé™æ€æŸ¥è¯¢ï¼‰"><span class="nav-number">7.2.</span> <span class="nav-text">ä½¿ç”¨éé¡µé¢ç»„ä»¶æŸ¥è¯¢ï¼ˆé™æ€æŸ¥è¯¢ï¼‰</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#æ’ä»¶"><span class="nav-number">8.</span> <span class="nav-text">æ’ä»¶</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#gatsby-source-filesystem"><span class="nav-number">8.1.</span> <span class="nav-text">gatsby-source-filesystem</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#gatsby-transformer-remark"><span class="nav-number">8.2.</span> <span class="nav-text">gatsby-transformer-remark</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#åˆ©ç”¨æ•°æ®åˆ›å»ºé¡µé¢"><span class="nav-number">9.</span> <span class="nav-text">åˆ©ç”¨æ•°æ®åˆ›å»ºé¡µé¢</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#gatsby-node-js-1"><span class="nav-number">9.1.</span> <span class="nav-text">gatsby-node.js</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#onCreateNode"><span class="nav-number">9.1.1.</span> <span class="nav-text">onCreateNode</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#createPages"><span class="nav-number">9.1.2.</span> <span class="nav-text">createPages</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#æ‰“åŒ…ä¸Šçº¿"><span class="nav-number">10.</span> <span class="nav-text">æ‰“åŒ…ä¸Šçº¿</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Jacky Lin"
      src="/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">Jacky Lin</p>
  <div class="site-description" itemprop="description">ä¸å¿˜åˆå¿ƒï¼Œæ–¹å¾—å§‹ç»ˆ</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">47</span>
          <span class="site-state-item-name">æ—¥å¿—</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">10</span>
        <span class="site-state-item-name">åˆ†ç±»</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">21</span>
        <span class="site-state-item-name">æ ‡ç­¾</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/Jacky-Summer" title="GitHub â†’ https:&#x2F;&#x2F;github.com&#x2F;Jacky-Summer" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://juejin.im/user/5d77c17bf265da03c61e7c24" title="æ˜é‡‘ â†’ https:&#x2F;&#x2F;juejin.im&#x2F;user&#x2F;5d77c17bf265da03c61e7c24" rel="noopener" target="_blank"><i class="fa fa-fw fa-drupal"></i>æ˜é‡‘</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Jacky Lin</span>
</div>
<!--
  <div class="powered-by">ç”± <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> å¼ºåŠ›é©±åŠ¨ v4.2.0
  </div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">ä¸»é¢˜ â€“ <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> v7.7.2
  </div>
-->
<div class="theme-info">
  <div class="powered-by"></div>
  <span class="post-count">åšå®¢å…¨ç«™å…±79.4kå­—</span>
</div>

        








      </div>
    </footer>
  </div>

  
  
  <script color='0,0,255' opacity='0.5' zIndex='-1' count='99' src="/lib/canvas-nest/canvas-nest.min.js"></script>
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

  <!-- é¡µé¢ç‚¹å‡»å°çº¢å¿ƒ -->
  
      <script type="text/javascript" src="/js/clicklove.js"></script>

</body>
</html>
